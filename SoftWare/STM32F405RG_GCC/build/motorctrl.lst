ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"motorctrl.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.mc_param_init,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	mc_param_init:
  26              	.LFB246:
  27              		.file 1 "../BLDCMotor/motorctrl.c"
   1:../BLDCMotor/motorctrl.c **** #include "./motorctrl.h"
   2:../BLDCMotor/motorctrl.c **** #include "debuglog.h"
   3:../BLDCMotor/motorctrl.c **** #include "motorctrl_common.h"
   4:../BLDCMotor/motorctrl.c **** #include "motor_protocol.h"
   5:../BLDCMotor/motorctrl.c **** #include "board.h"
   6:../BLDCMotor/motorctrl.c **** #include "string.h"
   7:../BLDCMotor/motorctrl.c **** 
   8:../BLDCMotor/motorctrl.c **** 
   9:../BLDCMotor/motorctrl.c **** enum{
  10:../BLDCMotor/motorctrl.c ****     MOTOR_INIT,
  11:../BLDCMotor/motorctrl.c ****     MOTOR_START, 
  12:../BLDCMotor/motorctrl.c ****     MOTOR_RUNING,
  13:../BLDCMotor/motorctrl.c ****     MOTOR_STOP,
  14:../BLDCMotor/motorctrl.c **** };
  15:../BLDCMotor/motorctrl.c **** 
  16:../BLDCMotor/motorctrl.c **** 
  17:../BLDCMotor/motorctrl.c **** static dq_t _currmentloop(abc_t i_abc,float ele_theta);
  18:../BLDCMotor/motorctrl.c **** static short _get_angleoffset(void);
  19:../BLDCMotor/motorctrl.c **** static void motor_enable(void);
  20:../BLDCMotor/motorctrl.c **** static void motor_disable(void);
  21:../BLDCMotor/motorctrl.c **** static void motor_set_pwm(duty_t temp);
  22:../BLDCMotor/motorctrl.c **** static void mc_param_init(void);
  23:../BLDCMotor/motorctrl.c **** static void mc_param_deinit(void);
  24:../BLDCMotor/motorctrl.c **** 
  25:../BLDCMotor/motorctrl.c **** alpbet_t _limit_voltagecircle(alpbet_t raw_uab);
  26:../BLDCMotor/motorctrl.c **** static float motor_speedcale(float cur_theta);
  27:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real);
  28:../BLDCMotor/motorctrl.c **** static void trigger_software_reset(void);
  29:../BLDCMotor/motorctrl.c **** 
  30:../BLDCMotor/motorctrl.c **** 
  31:../BLDCMotor/motorctrl.c **** static volatile float sg_MecThetaOffset = 0.0f;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 2


  32:../BLDCMotor/motorctrl.c **** extern const float current_meas_period;
  33:../BLDCMotor/motorctrl.c **** 
  34:../BLDCMotor/motorctrl.c **** mt_param_t mt_param = {0};
  35:../BLDCMotor/motorctrl.c **** motordebug_t motordebug = {0};
  36:../BLDCMotor/motorctrl.c **** 
  37:../BLDCMotor/motorctrl.c **** void motortctrl_process(void)
  38:../BLDCMotor/motorctrl.c **** {
  39:../BLDCMotor/motorctrl.c ****     static uint16_t _state = MOTOR_INIT;
  40:../BLDCMotor/motorctrl.c ****     char rec_buf[64];
  41:../BLDCMotor/motorctrl.c ****     char cnt = 0;
  42:../BLDCMotor/motorctrl.c **** 
  43:../BLDCMotor/motorctrl.c ****     motorprotocol_process();
  44:../BLDCMotor/motorctrl.c ****     switch (_state)
  45:../BLDCMotor/motorctrl.c ****     {
  46:../BLDCMotor/motorctrl.c ****     case MOTOR_INIT:
  47:../BLDCMotor/motorctrl.c ****         // if (motordebug.cur_cmd != "motor start")//sg_commandmap[CMD_SET_START].cmd)
  48:../BLDCMotor/motorctrl.c ****         if(strcmp(motordebug.cur_cmd,(sg_commandmap[CMD_SET_START].cmd)))
  49:../BLDCMotor/motorctrl.c ****         {
  50:../BLDCMotor/motorctrl.c ****             break;
  51:../BLDCMotor/motorctrl.c ****         }
  52:../BLDCMotor/motorctrl.c ****         _state = MOTOR_START;
  53:../BLDCMotor/motorctrl.c ****     case MOTOR_START:
  54:../BLDCMotor/motorctrl.c ****         mc_param_init();
  55:../BLDCMotor/motorctrl.c ****         motor_enable();
  56:../BLDCMotor/motorctrl.c ****         _state = MOTOR_RUNING;
  57:../BLDCMotor/motorctrl.c ****         // motorprotocol_tramit(g_respondmap[RES_RUNING].respond,g_respondmap[RES_RUNING].respond_l
  58:../BLDCMotor/motorctrl.c ****         motorprotocol_tramit(sg_commandmap[CMD_SET_START].res_cmd,strlen(sg_commandmap[CMD_SET_STAR
  59:../BLDCMotor/motorctrl.c ****         break;
  60:../BLDCMotor/motorctrl.c **** 
  61:../BLDCMotor/motorctrl.c ****     case MOTOR_RUNING:
  62:../BLDCMotor/motorctrl.c ****         // if (motordebug.cur_cmd == "motor stop")
  63:../BLDCMotor/motorctrl.c ****         if(strcmp(motordebug.cur_cmd,(sg_commandmap[CMD_SET_START].cmd)))
  64:../BLDCMotor/motorctrl.c ****         {
  65:../BLDCMotor/motorctrl.c ****             // motorprotocol_tramit(g_respondmap[RES_STOP].respond,g_respondmap[RES_STOP].respond_l
  66:../BLDCMotor/motorctrl.c ****             motorprotocol_tramit(sg_commandmap[CMD_SET_STOP].res_cmd,strlen(sg_commandmap[CMD_SET_S
  67:../BLDCMotor/motorctrl.c ****             _state = MOTOR_STOP;
  68:../BLDCMotor/motorctrl.c ****         }
  69:../BLDCMotor/motorctrl.c ****         break;
  70:../BLDCMotor/motorctrl.c **** 
  71:../BLDCMotor/motorctrl.c ****     case MOTOR_STOP:
  72:../BLDCMotor/motorctrl.c ****         trigger_software_reset();
  73:../BLDCMotor/motorctrl.c ****         motor_disable();
  74:../BLDCMotor/motorctrl.c ****         mc_param_deinit();
  75:../BLDCMotor/motorctrl.c ****         _state = MOTOR_INIT;
  76:../BLDCMotor/motorctrl.c ****         break;
  77:../BLDCMotor/motorctrl.c ****     default:
  78:../BLDCMotor/motorctrl.c ****         break;
  79:../BLDCMotor/motorctrl.c ****     }
  80:../BLDCMotor/motorctrl.c **** }
  81:../BLDCMotor/motorctrl.c **** 
  82:../BLDCMotor/motorctrl.c **** 
  83:../BLDCMotor/motorctrl.c **** 
  84:../BLDCMotor/motorctrl.c **** 
  85:../BLDCMotor/motorctrl.c **** 
  86:../BLDCMotor/motorctrl.c **** /*------------Âë®ÊúüÊÄßË¢´Ë∞ÉÁî®----------------*/
  87:../BLDCMotor/motorctrl.c **** float speed_real;
  88:../BLDCMotor/motorctrl.c **** int32_t a1,b1,c1;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 3


  89:../BLDCMotor/motorctrl.c **** 
  90:../BLDCMotor/motorctrl.c **** void _50uscycle_process(unsigned int *abc_vale,float _elec_theta)
  91:../BLDCMotor/motorctrl.c **** {
  92:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
  93:../BLDCMotor/motorctrl.c ****     int32_t mec_theta;
  94:../BLDCMotor/motorctrl.c ****     duty_t dut01;
  95:../BLDCMotor/motorctrl.c ****     abc_t i_abc;
  96:../BLDCMotor/motorctrl.c ****     dq_t udq;
  97:../BLDCMotor/motorctrl.c **** 
  98:../BLDCMotor/motorctrl.c **** /*----------------‰∏âÁõ∏ÁîµÊµÅÂ§ÑÁêÜ------------------------------*/    
  99:../BLDCMotor/motorctrl.c **** #if 1
 100:../BLDCMotor/motorctrl.c ****     float Ia,Ib,Ic;
 101:../BLDCMotor/motorctrl.c ****     a1 = abc_vale[0] - A_ADCCHANNL_OFFSET;
 102:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 103:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 104:../BLDCMotor/motorctrl.c ****     // Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 105:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 106:../BLDCMotor/motorctrl.c ****     Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 107:../BLDCMotor/motorctrl.c ****     Ia = -Ic - Ib;
 108:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&(mt_param.elefitler[0]),Ia);
 109:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&(mt_param.elefitler[1]),Ib);
 110:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&(mt_param.elefitler[2]),Ic);
 111:../BLDCMotor/motorctrl.c ****     motordebug.ia = i_abc.a;
 112:../BLDCMotor/motorctrl.c ****     motordebug.ib = i_abc.b;
 113:../BLDCMotor/motorctrl.c **** #endif
 114:../BLDCMotor/motorctrl.c **** 
 115:../BLDCMotor/motorctrl.c ****     enum{
 116:../BLDCMotor/motorctrl.c ****         OFFSET=0,
 117:../BLDCMotor/motorctrl.c ****         OPENLOOP,
 118:../BLDCMotor/motorctrl.c ****         CLOSELOOP,
 119:../BLDCMotor/motorctrl.c ****         SPEEDLOOP,
 120:../BLDCMotor/motorctrl.c ****         IDLE,
 121:../BLDCMotor/motorctrl.c ****     };
 122:../BLDCMotor/motorctrl.c ****     static short state0_ = OFFSET;
 123:../BLDCMotor/motorctrl.c ****     switch (state0_)
 124:../BLDCMotor/motorctrl.c ****     {
 125:../BLDCMotor/motorctrl.c ****         case OFFSET:
 126:../BLDCMotor/motorctrl.c ****             if (_get_angleoffset() != 0)
 127:../BLDCMotor/motorctrl.c ****             {
 128:../BLDCMotor/motorctrl.c ****                 break;
 129:../BLDCMotor/motorctrl.c ****             }
 130:../BLDCMotor/motorctrl.c ****             USER_DEBUG_NORMAL("enter IDLE\r\n");
 131:../BLDCMotor/motorctrl.c ****             state0_ = CLOSELOOP;
 132:../BLDCMotor/motorctrl.c ****             break;
 133:../BLDCMotor/motorctrl.c ****         case IDLE:
 134:../BLDCMotor/motorctrl.c ****             if (motordebug.id_targe != 0.0f || motordebug.iq_targe != 0.0f)
 135:../BLDCMotor/motorctrl.c ****             {
 136:../BLDCMotor/motorctrl.c ****                 motordebug.ele_angle = 0.0f;
 137:../BLDCMotor/motorctrl.c ****                 state0_ = SPEEDLOOP;
 138:../BLDCMotor/motorctrl.c ****             }
 139:../BLDCMotor/motorctrl.c ****             break;
 140:../BLDCMotor/motorctrl.c ****         case SPEEDLOOP:
 141:../BLDCMotor/motorctrl.c ****             mec_theta = ((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_COV))[0];
 142:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(mec_theta);
 143:../BLDCMotor/motorctrl.c ****             motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 144:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 145:../BLDCMotor/motorctrl.c ****             elec_theta -= 0.56f;//sg_MecThetaOffset;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 4


 146:../BLDCMotor/motorctrl.c **** 
 147:../BLDCMotor/motorctrl.c ****             elec_theta = _normalize_angle(elec_theta);
 148:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 149:../BLDCMotor/motorctrl.c **** 
 150:../BLDCMotor/motorctrl.c ****             motordebug.ele_angle = elec_theta;    
 151:../BLDCMotor/motorctrl.c ****             static unsigned short cnt = 0;
 152:../BLDCMotor/motorctrl.c ****             if (cnt++ < 200)
 153:../BLDCMotor/motorctrl.c ****             {
 154:../BLDCMotor/motorctrl.c ****                 // break;
 155:../BLDCMotor/motorctrl.c ****             }
 156:../BLDCMotor/motorctrl.c ****             cnt = 0;
 157:../BLDCMotor/motorctrl.c ****             udq.q = 0.3f;
 158:../BLDCMotor/motorctrl.c ****             udq.d = 0;
 159:../BLDCMotor/motorctrl.c ****             alpbet_t uab;
 160:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, elec_theta - PI_2);  
 161:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 162:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 163:../BLDCMotor/motorctrl.c ****             break;
 164:../BLDCMotor/motorctrl.c ****         case CLOSELOOP:
 165:../BLDCMotor/motorctrl.c ****         {
 166:../BLDCMotor/motorctrl.c ****             //Ëé∑ÂèñÁîµËßíÂ∫¶
 167:../BLDCMotor/motorctrl.c ****             mec_theta = ((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_COV))[0];
 168:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(mec_theta);
 169:../BLDCMotor/motorctrl.c ****             motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 170:../BLDCMotor/motorctrl.c **** 
 171:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 172:../BLDCMotor/motorctrl.c ****             elec_theta -= sg_MecThetaOffset;
 173:../BLDCMotor/motorctrl.c **** 
 174:../BLDCMotor/motorctrl.c ****             elec_theta = _normalize_angle(elec_theta);
 175:../BLDCMotor/motorctrl.c ****             speed_real = _IQ15toF(((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_FILTER))[0]);
 176:../BLDCMotor/motorctrl.c ****             motordebug.ele_angle = elec_theta;
 177:../BLDCMotor/motorctrl.c **** 
 178:../BLDCMotor/motorctrl.c **** #if 0//ÂºÄÁéØ
 179:../BLDCMotor/motorctrl.c ****             // _currmentloop(i_abc,elec_theta);
 180:../BLDCMotor/motorctrl.c ****             dq_t udq = {0.0f,0.4f,_IQ15(0.0f),_IQ15(0.0f)};
 181:../BLDCMotor/motorctrl.c ****             alpbet_t uab,uab_q15;
 182:../BLDCMotor/motorctrl.c ****             if(motordebug.self_ele_theta>_2PI)
 183:../BLDCMotor/motorctrl.c ****             {
 184:../BLDCMotor/motorctrl.c ****                 motordebug.self_ele_theta = 0.0f;
 185:../BLDCMotor/motorctrl.c ****             }
 186:../BLDCMotor/motorctrl.c ****             motordebug.self_ele_theta += 0.001f;
 187:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, motordebug.self_ele_theta); 
 188:../BLDCMotor/motorctrl.c ****             dut01 = _svpwm(uab.alpha,uab.beta);
 189:../BLDCMotor/motorctrl.c ****             motor_set_pwm(dut01);
 190:../BLDCMotor/motorctrl.c **** #else
 191:../BLDCMotor/motorctrl.c ****             dq_t udq = {0.0f,0.0f,_IQ15(0.0f),_IQ15(0.8f)};
 192:../BLDCMotor/motorctrl.c ****             #if 0/*Èó≠ÁéØÊéßÂà∂*/
 193:../BLDCMotor/motorctrl.c ****                 udq = _currmentloop(i_abc,elec_theta - PI_2);
 194:../BLDCMotor/motorctrl.c ****                 // udq.d = 0.0f;
 195:../BLDCMotor/motorctrl.c ****                 // udq.q = 0.6f;
 196:../BLDCMotor/motorctrl.c ****                 // udq.d = motordebug.id_targe;
 197:../BLDCMotor/motorctrl.c ****                 udq.q = motordebug.iq_targe;
 198:../BLDCMotor/motorctrl.c ****             #else
 199:../BLDCMotor/motorctrl.c ****                 if (motordebug.iq_targe < 0.0f)
 200:../BLDCMotor/motorctrl.c ****                 {
 201:../BLDCMotor/motorctrl.c ****                 _currmentloop(i_abc,elec_theta + PI_2);
 202:../BLDCMotor/motorctrl.c ****                 }else{
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 5


 203:../BLDCMotor/motorctrl.c ****                     i_abc.a = -i_abc.a;
 204:../BLDCMotor/motorctrl.c ****                     i_abc.b = -i_abc.b;
 205:../BLDCMotor/motorctrl.c ****                     i_abc.c = -i_abc.c;
 206:../BLDCMotor/motorctrl.c ****                     _currmentloop(i_abc,elec_theta);
 207:../BLDCMotor/motorctrl.c ****                 }
 208:../BLDCMotor/motorctrl.c ****                 // udq.d = motordebug.id_targe;
 209:../BLDCMotor/motorctrl.c ****                 udq.q = 0.4f;
 210:../BLDCMotor/motorctrl.c ****                 udq.d = 0.0f;
 211:../BLDCMotor/motorctrl.c ****                 // udq.q = _speedloop(300.0f,motordebug.real_speed);
 212:../BLDCMotor/motorctrl.c ****             #endif
 213:../BLDCMotor/motorctrl.c ****             alpbet_t uab;
 214:../BLDCMotor/motorctrl.c ****             float pwm_phase = elec_theta + 1.5f * current_meas_period * speed_real*7.0;
 215:../BLDCMotor/motorctrl.c ****             motordebug.self_ele_theta = pwm_phase;
 216:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, pwm_phase);  
 217:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 218:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 219:../BLDCMotor/motorctrl.c **** #endif
 220:../BLDCMotor/motorctrl.c ****         }
 221:../BLDCMotor/motorctrl.c ****             break;
 222:../BLDCMotor/motorctrl.c ****         default:
 223:../BLDCMotor/motorctrl.c ****             break;
 224:../BLDCMotor/motorctrl.c ****     }
 225:../BLDCMotor/motorctrl.c **** }
 226:../BLDCMotor/motorctrl.c **** 
 227:../BLDCMotor/motorctrl.c **** 
 228:../BLDCMotor/motorctrl.c **** 
 229:../BLDCMotor/motorctrl.c **** alpbet_t _limit_voltagecircle(alpbet_t raw_uab) {  
 230:../BLDCMotor/motorctrl.c ****     float max_voltage = D_MAX_VAL;// ËøôÈáåÂ∫îËØ•ÊòØ‰Ω†ÁöÑÊúÄÂ§ßÂÖÅËÆ∏ÁîµÂéãÂÄºÔºå‰æãÂ¶ÇÂØπ‰∫é‰∏âÁõ
 231:../BLDCMotor/motorctrl.c ****     float voltage_magnitude = sqrt(raw_uab.alpha * raw_uab.alpha + raw_uab.beta * raw_uab.beta); //
 232:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 233:../BLDCMotor/motorctrl.c ****     if (voltage_magnitude > max_voltage) {  
 234:../BLDCMotor/motorctrl.c ****         // Â¶ÇÊûúÁü¢ÈáèÈïøÂ∫¶Ë∂ÖËøáÊúÄÂ§ßÁîµÂéãÔºåÂàôÊåâÊØî‰æãÁº©ÊîæÁü¢Èáè‰ª•‰ΩøÂÖ∂ËêΩÂú®ÁîµÂéãÁü¢È
 235:../BLDCMotor/motorctrl.c ****         float scale_factor = max_voltage / voltage_magnitude;  
 236:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha * scale_factor;  
 237:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 238:../BLDCMotor/motorctrl.c ****     } else {  
 239:../BLDCMotor/motorctrl.c ****         // Â¶ÇÊûúÁü¢ÈáèÈïøÂ∫¶Âú®ÂÖÅËÆ∏ËåÉÂõ¥ÂÜÖÔºåÂàô‰∏çËøõË°å‰ªª‰ΩïÊîπÂèò  
 240:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha;  
 241:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta;  
 242:../BLDCMotor/motorctrl.c ****     }
 243:../BLDCMotor/motorctrl.c ****     return uab;
 244:../BLDCMotor/motorctrl.c **** }
 245:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 246:../BLDCMotor/motorctrl.c **** {
 247:../BLDCMotor/motorctrl.c **** #if 1
 248:../BLDCMotor/motorctrl.c ****     alpbet_t i_alphbeta;
 249:../BLDCMotor/motorctrl.c ****     float _tempa,_tempb,_tempc;
 250:../BLDCMotor/motorctrl.c ****     dq_t i_dq;
 251:../BLDCMotor/motorctrl.c ****     _tempa = i_abc.a;
 252:../BLDCMotor/motorctrl.c ****     _tempb = i_abc.b;
 253:../BLDCMotor/motorctrl.c ****     _tempc = i_abc.c;
 254:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
 255:../BLDCMotor/motorctrl.c ****     i_abc.a = -_tempa;
 256:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempc;
 257:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempb;
 258:../BLDCMotor/motorctrl.c ****     motordebug.ia = i_abc.a;
 259:../BLDCMotor/motorctrl.c ****     motordebug.ib = i_abc.b;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 6


 260:../BLDCMotor/motorctrl.c ****     motordebug.ic = i_abc.c;
 261:../BLDCMotor/motorctrl.c **** #endif
 262:../BLDCMotor/motorctrl.c ****     _3s_2s(i_abc,&i_alphbeta);   
 263:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 264:../BLDCMotor/motorctrl.c ****     motordebug.id = (i_dq.d);
 265:../BLDCMotor/motorctrl.c ****     motordebug.iq = (i_dq.q);
 266:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 267:../BLDCMotor/motorctrl.c **** #if 1
 268:../BLDCMotor/motorctrl.c ****     float tar_id = 0.0f,tar_iq = 0.0f;
 269:../BLDCMotor/motorctrl.c ****     tar_id = motordebug.id_targe;
 270:../BLDCMotor/motorctrl.c ****     tar_iq = motordebug.iq_targe;
 271:../BLDCMotor/motorctrl.c ****     udq.d = pid_contrl(&(mt_param.daxis_pi),tar_id,i_dq.d);
 272:../BLDCMotor/motorctrl.c ****     motordebug.id_real = i_dq.d;
 273:../BLDCMotor/motorctrl.c ****     motordebug.pid_D_out = udq.d;
 274:../BLDCMotor/motorctrl.c ****     udq.q =pid_contrl(&(mt_param.qaxis_pi),tar_iq,i_dq.q);
 275:../BLDCMotor/motorctrl.c ****     motordebug.iq_real = i_dq.q;
 276:../BLDCMotor/motorctrl.c ****     motordebug.pid_Q_out = udq.q;
 277:../BLDCMotor/motorctrl.c **** #endif
 278:../BLDCMotor/motorctrl.c ****     return udq;
 279:../BLDCMotor/motorctrl.c **** #endif
 280:../BLDCMotor/motorctrl.c **** }
 281:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real)
 282:../BLDCMotor/motorctrl.c **** {
 283:../BLDCMotor/motorctrl.c ****    return pid_contrl(&(mt_param.speedloop_pi),tar,real);
 284:../BLDCMotor/motorctrl.c **** }
 285:../BLDCMotor/motorctrl.c **** static void motor_enable(void)
 286:../BLDCMotor/motorctrl.c **** {
 287:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 288:../BLDCMotor/motorctrl.c ****     gpio_setmotor_power();
 289:../BLDCMotor/motorctrl.c **** #endif
 290:../BLDCMotor/motorctrl.c ****     /*pwm ‰ΩøËÉΩ*/
 291:../BLDCMotor/motorctrl.c ****     tim_pwm_enable();
 292:../BLDCMotor/motorctrl.c ****     tim_tigger_adc();
 293:../BLDCMotor/motorctrl.c ****     adc_start();
 294:../BLDCMotor/motorctrl.c **** }
 295:../BLDCMotor/motorctrl.c **** static void motor_enable_noirq(void)
 296:../BLDCMotor/motorctrl.c **** {
 297:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 298:../BLDCMotor/motorctrl.c ****     gpio_setmotor_power();
 299:../BLDCMotor/motorctrl.c **** #endif
 300:../BLDCMotor/motorctrl.c ****     /*pwm ‰ΩøËÉΩ*/
 301:../BLDCMotor/motorctrl.c ****     tim_pwm_enable();
 302:../BLDCMotor/motorctrl.c **** }
 303:../BLDCMotor/motorctrl.c **** static void motor_disable(void)
 304:../BLDCMotor/motorctrl.c **** {
 305:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 306:../BLDCMotor/motorctrl.c ****     gpio_setmotor_powerdown();
 307:../BLDCMotor/motorctrl.c **** #endif    
 308:../BLDCMotor/motorctrl.c ****     tim_pwm_disable();
 309:../BLDCMotor/motorctrl.c ****     adc_stop();
 310:../BLDCMotor/motorctrl.c **** }
 311:../BLDCMotor/motorctrl.c **** float test_a,test_b,test_c;
 312:../BLDCMotor/motorctrl.c **** static void motor_set_pwm(duty_t temp)
 313:../BLDCMotor/motorctrl.c **** {
 314:../BLDCMotor/motorctrl.c ****     test_a = temp._a;test_b = temp._b;test_c = temp._c;
 315:../BLDCMotor/motorctrl.c ****     tim_set_pwm(test_a ,test_b,test_c);
 316:../BLDCMotor/motorctrl.c **** }
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 7


 317:../BLDCMotor/motorctrl.c **** 
 318:../BLDCMotor/motorctrl.c **** static float motor_speedcale(float cur_theta)
 319:../BLDCMotor/motorctrl.c **** {
 320:../BLDCMotor/motorctrl.c ****     float delta_theta = 0.0f;
 321:../BLDCMotor/motorctrl.c ****     static unsigned short cnt = 0;
 322:../BLDCMotor/motorctrl.c ****     if (cnt++ > 20)
 323:../BLDCMotor/motorctrl.c ****     {
 324:../BLDCMotor/motorctrl.c ****         return;
 325:../BLDCMotor/motorctrl.c ****     }
 326:../BLDCMotor/motorctrl.c ****     cnt = 0;
 327:../BLDCMotor/motorctrl.c ****     static float pre_theta = 0.0f;
 328:../BLDCMotor/motorctrl.c ****     delta_theta = (cur_theta -pre_theta)*100.0f;
 329:../BLDCMotor/motorctrl.c **** 
 330:../BLDCMotor/motorctrl.c ****     // Â§ÑÁêÜËßíÂ∫¶Ë∑®Ë∂ä2œÄËæπÁïåÁöÑÊÉÖÂÜµ  
 331:../BLDCMotor/motorctrl.c ****     if (delta_theta > _2PI) {  
 332:../BLDCMotor/motorctrl.c ****         delta_theta -= (int)(delta_theta / _2PI +1) * _2PI;  
 333:../BLDCMotor/motorctrl.c ****     } else if (delta_theta < -_2PI) {  
 334:../BLDCMotor/motorctrl.c ****         delta_theta += (int)(-delta_theta / _2PI + 1) * _2PI;  
 335:../BLDCMotor/motorctrl.c ****     }  
 336:../BLDCMotor/motorctrl.c **** 
 337:../BLDCMotor/motorctrl.c ****     delta_theta = lowfilter_cale(&(mt_param.speedfilter),delta_theta);
 338:../BLDCMotor/motorctrl.c ****     float omeg_c = (delta_theta)/0.002f/100.0f;
 339:../BLDCMotor/motorctrl.c ****     float N_rpm = omeg_c * 9.5492965855f;//60.0f/_2PI
 340:../BLDCMotor/motorctrl.c ****     pre_theta = cur_theta;
 341:../BLDCMotor/motorctrl.c ****     // N_rpm = lowfilter_cale(&sg_speedfilter,N_rpm);
 342:../BLDCMotor/motorctrl.c ****     return N_rpm;
 343:../BLDCMotor/motorctrl.c **** }
 344:../BLDCMotor/motorctrl.c **** 
 345:../BLDCMotor/motorctrl.c **** 
 346:../BLDCMotor/motorctrl.c **** 
 347:../BLDCMotor/motorctrl.c **** 
 348:../BLDCMotor/motorctrl.c **** 
 349:../BLDCMotor/motorctrl.c **** static short _get_angleoffset(void)
 350:../BLDCMotor/motorctrl.c **** {
 351:../BLDCMotor/motorctrl.c ****     static short state_ = 1;
 352:../BLDCMotor/motorctrl.c **** 
 353:../BLDCMotor/motorctrl.c ****     /*-----------ËÆæÁΩÆalpha/betaÂùêÊ†áÁ≥ª------------------*/
 354:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 355:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.4f,0.0f};
 356:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 357:../BLDCMotor/motorctrl.c ****     float theta;
 358:../BLDCMotor/motorctrl.c ****     static short cnt_ = 0;
 359:../BLDCMotor/motorctrl.c ****     int32_t Q15_theta = 0;
 360:../BLDCMotor/motorctrl.c ****     int32_t Q_thetaSum = 0;
 361:../BLDCMotor/motorctrl.c ****     switch (state_)
 362:../BLDCMotor/motorctrl.c ****     {
 363:../BLDCMotor/motorctrl.c ****     case 1://ËØªÂèñÂÅèÁßªÂÄº
 364:../BLDCMotor/motorctrl.c ****         uab = _2r_2s(udq,0.0f);
 365:../BLDCMotor/motorctrl.c ****         dut01 = _svpwm(uab.alpha,uab.beta);
 366:../BLDCMotor/motorctrl.c ****         motor_set_pwm(dut01);
 367:../BLDCMotor/motorctrl.c ****         state_ = 2;
 368:../BLDCMotor/motorctrl.c ****         break;
 369:../BLDCMotor/motorctrl.c **** 
 370:../BLDCMotor/motorctrl.c ****     case 2:
 371:../BLDCMotor/motorctrl.c ****         if (cnt_++ > 15000)
 372:../BLDCMotor/motorctrl.c ****         {
 373:../BLDCMotor/motorctrl.c ****             cnt_ = 0;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 8


 374:../BLDCMotor/motorctrl.c ****             state_ = 3;
 375:../BLDCMotor/motorctrl.c ****             // dut01 = _svpwm(0.0f,00.0f);
 376:../BLDCMotor/motorctrl.c ****             // motor_set_pwm(dut01);             
 377:../BLDCMotor/motorctrl.c ****         }
 378:../BLDCMotor/motorctrl.c ****         break;
 379:../BLDCMotor/motorctrl.c **** 
 380:../BLDCMotor/motorctrl.c ****     case 3:
 381:../BLDCMotor/motorctrl.c ****    
 382:../BLDCMotor/motorctrl.c ****         // for (uint8_t i = 0; i < 10; i++)
 383:../BLDCMotor/motorctrl.c ****         // {
 384:../BLDCMotor/motorctrl.c ****         //     Q_thetaSum += ((int32_t*)(sensor_user_read(SENSOR_01,EN_SENSORDATA_COV)))[0];
 385:../BLDCMotor/motorctrl.c ****         // }
 386:../BLDCMotor/motorctrl.c ****         // Q15_theta = Q_thetaSum/10;
 387:../BLDCMotor/motorctrl.c ****         Q15_theta = ((int32_t*)(sensor_user_read(SENSOR_01,EN_SENSORDATA_COV)))[0];
 388:../BLDCMotor/motorctrl.c ****         theta = _IQ20toF(Q15_theta);
 389:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = theta;
 390:../BLDCMotor/motorctrl.c ****         state_ = 4;
 391:../BLDCMotor/motorctrl.c ****         break;
 392:../BLDCMotor/motorctrl.c **** 
 393:../BLDCMotor/motorctrl.c ****     case 4:
 394:../BLDCMotor/motorctrl.c **** 
 395:../BLDCMotor/motorctrl.c ****         break;             
 396:../BLDCMotor/motorctrl.c ****     default:
 397:../BLDCMotor/motorctrl.c ****         break;
 398:../BLDCMotor/motorctrl.c ****     }
 399:../BLDCMotor/motorctrl.c ****     if (state_ == 4)
 400:../BLDCMotor/motorctrl.c ****     {
 401:../BLDCMotor/motorctrl.c ****         return 0;
 402:../BLDCMotor/motorctrl.c ****     }
 403:../BLDCMotor/motorctrl.c ****     return 1;
 404:../BLDCMotor/motorctrl.c **** }
 405:../BLDCMotor/motorctrl.c **** 
 406:../BLDCMotor/motorctrl.c **** static void mc_param_init(void)
 407:../BLDCMotor/motorctrl.c **** {
  28              		.loc 1 407 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32 0000 10B5     		push	{r4, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 4, -8
  36              		.cfi_offset 14, -4
  37 0002 2DED028B 		vpush.64	{d8}
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 16
  40              		.cfi_offset 80, -16
  41              		.cfi_offset 81, -12
 408:../BLDCMotor/motorctrl.c ****     // sgp_curloop_d_pid = &sg_curloop_param.d_pid;
 409:../BLDCMotor/motorctrl.c ****     // sgp_curloop_q_pid = &sg_curloop_param.q_pid;
 410:../BLDCMotor/motorctrl.c ****     // sgp_speed_pid = &sg_speed_pid;
 411:../BLDCMotor/motorctrl.c ****     // pid_init(sgp_curloop_d_pid,motordebug.pid_d_kp,motordebug.pid_d_ki,1.0f,D_MAX_VAL,D_MIN_VAL)
 412:../BLDCMotor/motorctrl.c ****     // pid_init(sgp_curloop_q_pid,motordebug.pid_d_kp,motordebug.pid_d_ki,1.0f,D_MAX_VAL,D_MIN_VAL)
 413:../BLDCMotor/motorctrl.c ****     // pid_init(sgp_speed_pid,motordebug.pid_d_kp,motordebug.pid_d_ki,1.0f,3.0,-3.0);
 414:../BLDCMotor/motorctrl.c **** 
 415:../BLDCMotor/motorctrl.c ****     // lowfilter_init(&sg_elefilter[0],80);
 416:../BLDCMotor/motorctrl.c ****     // lowfilter_init(&sg_elefilter[1],80);
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 9


 417:../BLDCMotor/motorctrl.c ****     // lowfilter_init(&sg_elefilter[2],80);
 418:../BLDCMotor/motorctrl.c **** 
 419:../BLDCMotor/motorctrl.c **** 
 420:../BLDCMotor/motorctrl.c ****     pid_init(&(mt_param.daxis_pi),1.0f,0.0f,1.0f,D_MAX_VAL,D_MIN_VAL);
  42              		.loc 1 420 5 view .LVU1
  43 0006 9FED218A 		vldr.32	s16, .L3
  44 000a 214C     		ldr	r4, .L3+4
  45 000c B9EE002A 		vmov.f32	s4, #-4.0e+0
  46 0010 F1EE001A 		vmov.f32	s3, #4.0e+0
  47 0014 B7EE001A 		vmov.f32	s2, #1.0e+0
  48 0018 F0EE480A 		vmov.f32	s1, s16
  49 001c B0EE410A 		vmov.f32	s0, s2
  50 0020 2046     		mov	r0, r4
  51 0022 FFF7FEFF 		bl	pid_init
  52              	.LVL0:
 421:../BLDCMotor/motorctrl.c ****     pid_init(&(mt_param.qaxis_pi),1.0f,0.0f,1.0f,D_MAX_VAL,D_MIN_VAL);
  53              		.loc 1 421 5 view .LVU2
  54 0026 B9EE002A 		vmov.f32	s4, #-4.0e+0
  55 002a F1EE001A 		vmov.f32	s3, #4.0e+0
  56 002e B7EE001A 		vmov.f32	s2, #1.0e+0
  57 0032 F0EE480A 		vmov.f32	s1, s16
  58 0036 B0EE410A 		vmov.f32	s0, s2
  59 003a 04F11C00 		add	r0, r4, #28
  60 003e FFF7FEFF 		bl	pid_init
  61              	.LVL1:
 422:../BLDCMotor/motorctrl.c ****     pid_init(&(mt_param.speedloop_pi),1.0f,0.0f,1.0f,D_MAX_VAL,D_MIN_VAL);
  62              		.loc 1 422 5 view .LVU3
  63 0042 B9EE002A 		vmov.f32	s4, #-4.0e+0
  64 0046 F1EE001A 		vmov.f32	s3, #4.0e+0
  65 004a B7EE001A 		vmov.f32	s2, #1.0e+0
  66 004e F0EE480A 		vmov.f32	s1, s16
  67 0052 B0EE410A 		vmov.f32	s0, s2
  68 0056 04F13800 		add	r0, r4, #56
  69 005a FFF7FEFF 		bl	pid_init
  70              	.LVL2:
 423:../BLDCMotor/motorctrl.c **** 
 424:../BLDCMotor/motorctrl.c ****     lowfilter_init(&(mt_param.elefitler[0]),80);
  71              		.loc 1 424 5 view .LVU4
  72 005e 9FED0D8A 		vldr.32	s16, .L3+8
  73 0062 B0EE480A 		vmov.f32	s0, s16
  74 0066 04F15400 		add	r0, r4, #84
  75 006a FFF7FEFF 		bl	lowfilter_init
  76              	.LVL3:
 425:../BLDCMotor/motorctrl.c ****     lowfilter_init(&(mt_param.elefitler[1]),80);
  77              		.loc 1 425 5 view .LVU5
  78 006e B0EE480A 		vmov.f32	s0, s16
  79 0072 04F15C00 		add	r0, r4, #92
  80 0076 FFF7FEFF 		bl	lowfilter_init
  81              	.LVL4:
 426:../BLDCMotor/motorctrl.c ****     lowfilter_init(&(mt_param.elefitler[2]),80);
  82              		.loc 1 426 5 view .LVU6
  83 007a B0EE480A 		vmov.f32	s0, s16
  84 007e 04F16400 		add	r0, r4, #100
  85 0082 FFF7FEFF 		bl	lowfilter_init
  86              	.LVL5:
 427:../BLDCMotor/motorctrl.c **** }
  87              		.loc 1 427 1 is_stmt 0 view .LVU7
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 10


  88 0086 BDEC028B 		vldm	sp!, {d8}
  89              	.LCFI2:
  90              		.cfi_restore 80
  91              		.cfi_restore 81
  92              		.cfi_def_cfa_offset 8
  93 008a 10BD     		pop	{r4, pc}
  94              	.L4:
  95              		.align	2
  96              	.L3:
  97 008c 00000000 		.word	0
  98 0090 00000000 		.word	.LANCHOR0
  99 0094 0000A042 		.word	1117782016
 100              		.cfi_endproc
 101              	.LFE246:
 103              		.section	.text.motor_enable,"ax",%progbits
 104              		.align	1
 105              		.syntax unified
 106              		.thumb
 107              		.thumb_func
 109              	motor_enable:
 110              	.LFB240:
 286:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 111              		.loc 1 286 1 is_stmt 1 view -0
 112              		.cfi_startproc
 113              		@ args = 0, pretend = 0, frame = 0
 114              		@ frame_needed = 0, uses_anonymous_args = 0
 115 0000 08B5     		push	{r3, lr}
 116              	.LCFI3:
 117              		.cfi_def_cfa_offset 8
 118              		.cfi_offset 3, -8
 119              		.cfi_offset 14, -4
 291:../BLDCMotor/motorctrl.c ****     tim_tigger_adc();
 120              		.loc 1 291 5 view .LVU9
 121 0002 FFF7FEFF 		bl	tim_pwm_enable
 122              	.LVL6:
 292:../BLDCMotor/motorctrl.c ****     adc_start();
 123              		.loc 1 292 5 view .LVU10
 124 0006 FFF7FEFF 		bl	tim_tigger_adc
 125              	.LVL7:
 293:../BLDCMotor/motorctrl.c **** }
 126              		.loc 1 293 5 view .LVU11
 127 000a FFF7FEFF 		bl	adc_start
 128              	.LVL8:
 294:../BLDCMotor/motorctrl.c **** static void motor_enable_noirq(void)
 129              		.loc 1 294 1 is_stmt 0 view .LVU12
 130 000e 08BD     		pop	{r3, pc}
 131              		.cfi_endproc
 132              	.LFE240:
 134              		.section	.text.trigger_software_reset,"ax",%progbits
 135              		.align	1
 136              		.syntax unified
 137              		.thumb
 138              		.thumb_func
 140              	trigger_software_reset:
 141              	.LFB248:
 428:../BLDCMotor/motorctrl.c **** 
 429:../BLDCMotor/motorctrl.c **** static void mc_param_deinit(void)
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 11


 430:../BLDCMotor/motorctrl.c **** {
 431:../BLDCMotor/motorctrl.c ****     memset(&mt_param,0,sizeof(mt_param));
 432:../BLDCMotor/motorctrl.c ****     memset(&motordebug,0,sizeof(motordebug));
 433:../BLDCMotor/motorctrl.c **** }
 434:../BLDCMotor/motorctrl.c **** 
 435:../BLDCMotor/motorctrl.c **** 
 436:../BLDCMotor/motorctrl.c **** static void trigger_software_reset(void)
 437:../BLDCMotor/motorctrl.c **** {
 142              		.loc 1 437 1 is_stmt 1 view -0
 143              		.cfi_startproc
 144              		@ args = 0, pretend = 0, frame = 0
 145              		@ frame_needed = 0, uses_anonymous_args = 0
 146 0000 08B5     		push	{r3, lr}
 147              	.LCFI4:
 148              		.cfi_def_cfa_offset 8
 149              		.cfi_offset 3, -8
 150              		.cfi_offset 14, -4
 438:../BLDCMotor/motorctrl.c ****     HAL_NVIC_SystemReset();
 151              		.loc 1 438 5 view .LVU14
 152 0002 FFF7FEFF 		bl	HAL_NVIC_SystemReset
 153              	.LVL9:
 439:../BLDCMotor/motorctrl.c **** }
 154              		.loc 1 439 1 is_stmt 0 view .LVU15
 155 0006 08BD     		pop	{r3, pc}
 156              		.cfi_endproc
 157              	.LFE248:
 159              		.section	.text.motor_disable,"ax",%progbits
 160              		.align	1
 161              		.syntax unified
 162              		.thumb
 163              		.thumb_func
 165              	motor_disable:
 166              	.LFB242:
 304:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 167              		.loc 1 304 1 is_stmt 1 view -0
 168              		.cfi_startproc
 169              		@ args = 0, pretend = 0, frame = 0
 170              		@ frame_needed = 0, uses_anonymous_args = 0
 171 0000 08B5     		push	{r3, lr}
 172              	.LCFI5:
 173              		.cfi_def_cfa_offset 8
 174              		.cfi_offset 3, -8
 175              		.cfi_offset 14, -4
 308:../BLDCMotor/motorctrl.c ****     adc_stop();
 176              		.loc 1 308 5 view .LVU17
 177 0002 FFF7FEFF 		bl	tim_pwm_disable
 178              	.LVL10:
 309:../BLDCMotor/motorctrl.c **** }
 179              		.loc 1 309 5 view .LVU18
 180 0006 FFF7FEFF 		bl	adc_stop
 181              	.LVL11:
 310:../BLDCMotor/motorctrl.c **** float test_a,test_b,test_c;
 182              		.loc 1 310 1 is_stmt 0 view .LVU19
 183 000a 08BD     		pop	{r3, pc}
 184              		.cfi_endproc
 185              	.LFE242:
 187              		.section	.text.mc_param_deinit,"ax",%progbits
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 12


 188              		.align	1
 189              		.syntax unified
 190              		.thumb
 191              		.thumb_func
 193              	mc_param_deinit:
 194              	.LFB247:
 430:../BLDCMotor/motorctrl.c ****     memset(&mt_param,0,sizeof(mt_param));
 195              		.loc 1 430 1 is_stmt 1 view -0
 196              		.cfi_startproc
 197              		@ args = 0, pretend = 0, frame = 0
 198              		@ frame_needed = 0, uses_anonymous_args = 0
 199 0000 08B5     		push	{r3, lr}
 200              	.LCFI6:
 201              		.cfi_def_cfa_offset 8
 202              		.cfi_offset 3, -8
 203              		.cfi_offset 14, -4
 431:../BLDCMotor/motorctrl.c ****     memset(&motordebug,0,sizeof(motordebug));
 204              		.loc 1 431 5 view .LVU21
 205 0002 7422     		movs	r2, #116
 206 0004 0021     		movs	r1, #0
 207 0006 0448     		ldr	r0, .L13
 208 0008 FFF7FEFF 		bl	memset
 209              	.LVL12:
 432:../BLDCMotor/motorctrl.c **** }
 210              		.loc 1 432 5 view .LVU22
 211 000c 8822     		movs	r2, #136
 212 000e 0021     		movs	r1, #0
 213 0010 0248     		ldr	r0, .L13+4
 214 0012 FFF7FEFF 		bl	memset
 215              	.LVL13:
 433:../BLDCMotor/motorctrl.c **** 
 216              		.loc 1 433 1 is_stmt 0 view .LVU23
 217 0016 08BD     		pop	{r3, pc}
 218              	.L14:
 219              		.align	2
 220              	.L13:
 221 0018 00000000 		.word	.LANCHOR0
 222 001c 00000000 		.word	.LANCHOR1
 223              		.cfi_endproc
 224              	.LFE247:
 226              		.section	.text.motor_speedcale,"ax",%progbits
 227              		.align	1
 228              		.syntax unified
 229              		.thumb
 230              		.thumb_func
 232              	motor_speedcale:
 233              	.LVL14:
 234              	.LFB244:
 319:../BLDCMotor/motorctrl.c ****     float delta_theta = 0.0f;
 235              		.loc 1 319 1 is_stmt 1 view -0
 236              		.cfi_startproc
 237              		@ args = 0, pretend = 0, frame = 0
 238              		@ frame_needed = 0, uses_anonymous_args = 0
 319:../BLDCMotor/motorctrl.c ****     float delta_theta = 0.0f;
 239              		.loc 1 319 1 is_stmt 0 view .LVU25
 240 0000 08B5     		push	{r3, lr}
 241              	.LCFI7:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 13


 242              		.cfi_def_cfa_offset 8
 243              		.cfi_offset 3, -8
 244              		.cfi_offset 14, -4
 245 0002 2DED028B 		vpush.64	{d8}
 246              	.LCFI8:
 247              		.cfi_def_cfa_offset 16
 248              		.cfi_offset 80, -16
 249              		.cfi_offset 81, -12
 320:../BLDCMotor/motorctrl.c ****     static unsigned short cnt = 0;
 250              		.loc 1 320 5 is_stmt 1 view .LVU26
 251              	.LVL15:
 321:../BLDCMotor/motorctrl.c ****     if (cnt++ > 20)
 252              		.loc 1 321 5 view .LVU27
 322:../BLDCMotor/motorctrl.c ****     {
 253              		.loc 1 322 5 view .LVU28
 322:../BLDCMotor/motorctrl.c ****     {
 254              		.loc 1 322 12 is_stmt 0 view .LVU29
 255 0006 2D4A     		ldr	r2, .L25
 256 0008 1388     		ldrh	r3, [r2]
 257 000a 591C     		adds	r1, r3, #1
 258 000c 1180     		strh	r1, [r2]	@ movhi
 322:../BLDCMotor/motorctrl.c ****     {
 259              		.loc 1 322 8 view .LVU30
 260 000e 142B     		cmp	r3, #20
 261 0010 36D8     		bhi	.L15
 262 0012 B0EE408A 		vmov.f32	s16, s0
 326:../BLDCMotor/motorctrl.c ****     static float pre_theta = 0.0f;
 263              		.loc 1 326 5 is_stmt 1 view .LVU31
 326:../BLDCMotor/motorctrl.c ****     static float pre_theta = 0.0f;
 264              		.loc 1 326 9 is_stmt 0 view .LVU32
 265 0016 294B     		ldr	r3, .L25
 266 0018 0022     		movs	r2, #0
 267 001a 1A80     		strh	r2, [r3]	@ movhi
 327:../BLDCMotor/motorctrl.c ****     delta_theta = (cur_theta -pre_theta)*100.0f;
 268              		.loc 1 327 5 is_stmt 1 view .LVU33
 328:../BLDCMotor/motorctrl.c **** 
 269              		.loc 1 328 5 view .LVU34
 328:../BLDCMotor/motorctrl.c **** 
 270              		.loc 1 328 30 is_stmt 0 view .LVU35
 271 001c 284B     		ldr	r3, .L25+4
 272 001e D3ED007A 		vldr.32	s15, [r3]
 273 0022 70EE677A 		vsub.f32	s15, s0, s15
 328:../BLDCMotor/motorctrl.c **** 
 274              		.loc 1 328 17 view .LVU36
 275 0026 9FED270A 		vldr.32	s0, .L25+8
 276              	.LVL16:
 328:../BLDCMotor/motorctrl.c **** 
 277              		.loc 1 328 17 view .LVU37
 278 002a 27EE800A 		vmul.f32	s0, s15, s0
 279              	.LVL17:
 331:../BLDCMotor/motorctrl.c ****         delta_theta -= (int)(delta_theta / _2PI +1) * _2PI;  
 280              		.loc 1 331 5 is_stmt 1 view .LVU38
 331:../BLDCMotor/motorctrl.c ****         delta_theta -= (int)(delta_theta / _2PI +1) * _2PI;  
 281              		.loc 1 331 8 is_stmt 0 view .LVU39
 282 002e DFED267A 		vldr.32	s15, .L25+12
 283 0032 B4EEE70A 		vcmpe.f32	s0, s15
 284 0036 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 14


 285 003a 24DD     		ble	.L23
 332:../BLDCMotor/motorctrl.c ****     } else if (delta_theta < -_2PI) {  
 286              		.loc 1 332 9 is_stmt 1 view .LVU40
 332:../BLDCMotor/motorctrl.c ****     } else if (delta_theta < -_2PI) {  
 287              		.loc 1 332 42 is_stmt 0 view .LVU41
 288 003c B0EE677A 		vmov.f32	s14, s15
 289 0040 C0EE077A 		vdiv.f32	s15, s0, s14
 332:../BLDCMotor/motorctrl.c ****     } else if (delta_theta < -_2PI) {  
 290              		.loc 1 332 49 view .LVU42
 291 0044 F7EE006A 		vmov.f32	s13, #1.0e+0
 292 0048 77EEA67A 		vadd.f32	s15, s15, s13
 332:../BLDCMotor/motorctrl.c ****     } else if (delta_theta < -_2PI) {  
 293              		.loc 1 332 24 view .LVU43
 294 004c FDEEE77A 		vcvt.s32.f32	s15, s15
 332:../BLDCMotor/motorctrl.c ****     } else if (delta_theta < -_2PI) {  
 295              		.loc 1 332 53 view .LVU44
 296 0050 F8EEE77A 		vcvt.f32.s32	s15, s15
 297 0054 67EE877A 		vmul.f32	s15, s15, s14
 332:../BLDCMotor/motorctrl.c ****     } else if (delta_theta < -_2PI) {  
 298              		.loc 1 332 21 view .LVU45
 299 0058 30EE670A 		vsub.f32	s0, s0, s15
 300              	.LVL18:
 301              	.L19:
 337:../BLDCMotor/motorctrl.c ****     float omeg_c = (delta_theta)/0.002f/100.0f;
 302              		.loc 1 337 5 is_stmt 1 view .LVU46
 337:../BLDCMotor/motorctrl.c ****     float omeg_c = (delta_theta)/0.002f/100.0f;
 303              		.loc 1 337 19 is_stmt 0 view .LVU47
 304 005c 1B48     		ldr	r0, .L25+16
 305 005e FFF7FEFF 		bl	lowfilter_cale
 306              	.LVL19:
 338:../BLDCMotor/motorctrl.c ****     float N_rpm = omeg_c * 9.5492965855f;//60.0f/_2PI
 307              		.loc 1 338 5 is_stmt 1 view .LVU48
 338:../BLDCMotor/motorctrl.c ****     float N_rpm = omeg_c * 9.5492965855f;//60.0f/_2PI
 308              		.loc 1 338 33 is_stmt 0 view .LVU49
 309 0062 DFED1B7A 		vldr.32	s15, .L25+20
 310 0066 80EE277A 		vdiv.f32	s14, s0, s15
 338:../BLDCMotor/motorctrl.c ****     float N_rpm = omeg_c * 9.5492965855f;//60.0f/_2PI
 311              		.loc 1 338 11 view .LVU50
 312 006a DFED167A 		vldr.32	s15, .L25+8
 313 006e 87EE270A 		vdiv.f32	s0, s14, s15
 314              	.LVL20:
 339:../BLDCMotor/motorctrl.c ****     pre_theta = cur_theta;
 315              		.loc 1 339 5 is_stmt 1 view .LVU51
 339:../BLDCMotor/motorctrl.c ****     pre_theta = cur_theta;
 316              		.loc 1 339 11 is_stmt 0 view .LVU52
 317 0072 DFED187A 		vldr.32	s15, .L25+24
 318 0076 20EE270A 		vmul.f32	s0, s0, s15
 319              	.LVL21:
 340:../BLDCMotor/motorctrl.c ****     // N_rpm = lowfilter_cale(&sg_speedfilter,N_rpm);
 320              		.loc 1 340 5 is_stmt 1 view .LVU53
 340:../BLDCMotor/motorctrl.c ****     // N_rpm = lowfilter_cale(&sg_speedfilter,N_rpm);
 321              		.loc 1 340 15 is_stmt 0 view .LVU54
 322 007a 114B     		ldr	r3, .L25+4
 323 007c 83ED008A 		vstr.32	s16, [r3]
 342:../BLDCMotor/motorctrl.c **** }
 324              		.loc 1 342 5 is_stmt 1 view .LVU55
 325              	.LVL22:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 15


 326              	.L15:
 343:../BLDCMotor/motorctrl.c **** 
 327              		.loc 1 343 1 is_stmt 0 view .LVU56
 328 0080 BDEC028B 		vldm	sp!, {d8}
 329              	.LCFI9:
 330              		.cfi_remember_state
 331              		.cfi_restore 80
 332              		.cfi_restore 81
 333              		.cfi_def_cfa_offset 8
 334 0084 08BD     		pop	{r3, pc}
 335              	.LVL23:
 336              	.L23:
 337              	.LCFI10:
 338              		.cfi_restore_state
 333:../BLDCMotor/motorctrl.c ****         delta_theta += (int)(-delta_theta / _2PI + 1) * _2PI;  
 339              		.loc 1 333 12 is_stmt 1 view .LVU57
 333:../BLDCMotor/motorctrl.c ****         delta_theta += (int)(-delta_theta / _2PI + 1) * _2PI;  
 340              		.loc 1 333 15 is_stmt 0 view .LVU58
 341 0086 DFED147A 		vldr.32	s15, .L25+28
 342 008a B4EEE70A 		vcmpe.f32	s0, s15
 343 008e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 344 0092 E3D5     		bpl	.L19
 334:../BLDCMotor/motorctrl.c ****     }  
 345              		.loc 1 334 9 is_stmt 1 view .LVU59
 334:../BLDCMotor/motorctrl.c ****     }  
 346              		.loc 1 334 30 is_stmt 0 view .LVU60
 347 0094 F1EE406A 		vneg.f32	s13, s0
 334:../BLDCMotor/motorctrl.c ****     }  
 348              		.loc 1 334 43 view .LVU61
 349 0098 9FED0B7A 		vldr.32	s14, .L25+12
 350 009c C6EE877A 		vdiv.f32	s15, s13, s14
 334:../BLDCMotor/motorctrl.c ****     }  
 351              		.loc 1 334 50 view .LVU62
 352 00a0 F7EE006A 		vmov.f32	s13, #1.0e+0
 353 00a4 77EEA67A 		vadd.f32	s15, s15, s13
 334:../BLDCMotor/motorctrl.c ****     }  
 354              		.loc 1 334 24 view .LVU63
 355 00a8 FDEEE77A 		vcvt.s32.f32	s15, s15
 334:../BLDCMotor/motorctrl.c ****     }  
 356              		.loc 1 334 55 view .LVU64
 357 00ac F8EEE77A 		vcvt.f32.s32	s15, s15
 358 00b0 67EE877A 		vmul.f32	s15, s15, s14
 334:../BLDCMotor/motorctrl.c ****     }  
 359              		.loc 1 334 21 view .LVU65
 360 00b4 30EE270A 		vadd.f32	s0, s0, s15
 361              	.LVL24:
 334:../BLDCMotor/motorctrl.c ****     }  
 362              		.loc 1 334 21 view .LVU66
 363 00b8 D0E7     		b	.L19
 364              	.L26:
 365 00ba 00BF     		.align	2
 366              	.L25:
 367 00bc 00000000 		.word	.LANCHOR2
 368 00c0 00000000 		.word	.LANCHOR3
 369 00c4 0000C842 		.word	1120403456
 370 00c8 DA0FC940 		.word	1086918618
 371 00cc 6C000000 		.word	.LANCHOR0+108
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 16


 372 00d0 6F12033B 		.word	990057071
 373 00d4 EBC91841 		.word	1092143595
 374 00d8 DA0FC9C0 		.word	-1060565030
 375              		.cfi_endproc
 376              	.LFE244:
 378              		.section	.text._currmentloop,"ax",%progbits
 379              		.align	1
 380              		.syntax unified
 381              		.thumb
 382              		.thumb_func
 384              	_currmentloop:
 385              	.LVL25:
 386              	.LFB238:
 246:../BLDCMotor/motorctrl.c **** #if 1
 387              		.loc 1 246 1 is_stmt 1 view -0
 388              		.cfi_startproc
 389              		@ args = 28, pretend = 16, frame = 32
 390              		@ frame_needed = 0, uses_anonymous_args = 0
 246:../BLDCMotor/motorctrl.c **** #if 1
 391              		.loc 1 246 1 is_stmt 0 view .LVU68
 392 0000 84B0     		sub	sp, sp, #16
 393              	.LCFI11:
 394              		.cfi_def_cfa_offset 16
 395 0002 70B5     		push	{r4, r5, r6, lr}
 396              	.LCFI12:
 397              		.cfi_def_cfa_offset 32
 398              		.cfi_offset 4, -32
 399              		.cfi_offset 5, -28
 400              		.cfi_offset 6, -24
 401              		.cfi_offset 14, -20
 402 0004 2DED028B 		vpush.64	{d8}
 403              	.LCFI13:
 404              		.cfi_def_cfa_offset 40
 405              		.cfi_offset 80, -40
 406              		.cfi_offset 81, -36
 407 0008 8CB0     		sub	sp, sp, #48
 408              	.LCFI14:
 409              		.cfi_def_cfa_offset 88
 410 000a 0546     		mov	r5, r0
 411 000c 0DF14C0C 		add	ip, sp, #76
 412 0010 8CE80E00 		stm	ip, {r1, r2, r3}
 413 0014 B0EE408A 		vmov.f32	s16, s0
 248:../BLDCMotor/motorctrl.c ****     float _tempa,_tempb,_tempc;
 414              		.loc 1 248 5 is_stmt 1 view .LVU69
 249:../BLDCMotor/motorctrl.c ****     dq_t i_dq;
 415              		.loc 1 249 5 view .LVU70
 250:../BLDCMotor/motorctrl.c ****     _tempa = i_abc.a;
 416              		.loc 1 250 5 view .LVU71
 251:../BLDCMotor/motorctrl.c ****     _tempb = i_abc.b;
 417              		.loc 1 251 5 view .LVU72
 418              	.LVL26:
 252:../BLDCMotor/motorctrl.c ****     _tempc = i_abc.c;
 419              		.loc 1 252 5 view .LVU73
 252:../BLDCMotor/motorctrl.c ****     _tempc = i_abc.c;
 420              		.loc 1 252 12 is_stmt 0 view .LVU74
 421 0018 DDED147A 		vldr.32	s15, [sp, #80]
 422              	.LVL27:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 17


 253:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
 423              		.loc 1 253 5 is_stmt 1 view .LVU75
 255:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempc;
 424              		.loc 1 255 5 view .LVU76
 255:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempc;
 425              		.loc 1 255 15 is_stmt 0 view .LVU77
 426 001c DDED136A 		vldr.32	s13, [sp, #76]
 427 0020 F1EE666A 		vneg.f32	s13, s13
 255:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempc;
 428              		.loc 1 255 13 view .LVU78
 429 0024 CDED136A 		vstr.32	s13, [sp, #76]
 430              	.LVL28:
 256:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempb;
 431              		.loc 1 256 5 is_stmt 1 view .LVU79
 256:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempb;
 432              		.loc 1 256 15 is_stmt 0 view .LVU80
 433 0028 9DED157A 		vldr.32	s14, [sp, #84]
 434 002c B1EE477A 		vneg.f32	s14, s14
 256:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempb;
 435              		.loc 1 256 13 view .LVU81
 436 0030 8DED147A 		vstr.32	s14, [sp, #80]
 257:../BLDCMotor/motorctrl.c ****     motordebug.ia = i_abc.a;
 437              		.loc 1 257 5 is_stmt 1 view .LVU82
 257:../BLDCMotor/motorctrl.c ****     motordebug.ia = i_abc.a;
 438              		.loc 1 257 15 is_stmt 0 view .LVU83
 439 0034 F1EE677A 		vneg.f32	s15, s15
 440              	.LVL29:
 257:../BLDCMotor/motorctrl.c ****     motordebug.ia = i_abc.a;
 441              		.loc 1 257 13 view .LVU84
 442 0038 CDED157A 		vstr.32	s15, [sp, #84]
 443              	.LVL30:
 258:../BLDCMotor/motorctrl.c ****     motordebug.ib = i_abc.b;
 444              		.loc 1 258 5 is_stmt 1 view .LVU85
 258:../BLDCMotor/motorctrl.c ****     motordebug.ib = i_abc.b;
 445              		.loc 1 258 19 is_stmt 0 view .LVU86
 446 003c 244C     		ldr	r4, .L29
 447 003e C4ED006A 		vstr.32	s13, [r4]
 259:../BLDCMotor/motorctrl.c ****     motordebug.ic = i_abc.c;
 448              		.loc 1 259 5 is_stmt 1 view .LVU87
 259:../BLDCMotor/motorctrl.c ****     motordebug.ic = i_abc.c;
 449              		.loc 1 259 19 is_stmt 0 view .LVU88
 450 0042 84ED017A 		vstr.32	s14, [r4, #4]
 260:../BLDCMotor/motorctrl.c **** #endif
 451              		.loc 1 260 5 is_stmt 1 view .LVU89
 260:../BLDCMotor/motorctrl.c **** #endif
 452              		.loc 1 260 19 is_stmt 0 view .LVU90
 453 0046 C4ED027A 		vstr.32	s15, [r4, #8]
 262:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 454              		.loc 1 262 5 is_stmt 1 view .LVU91
 455 004a 08AE     		add	r6, sp, #32
 456 004c 0296     		str	r6, [sp, #8]
 457 004e 17AB     		add	r3, sp, #92
 458 0050 93E80300 		ldm	r3, {r0, r1}
 459              	.LVL31:
 262:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 460              		.loc 1 262 5 is_stmt 0 view .LVU92
 461 0054 8DE80300 		stm	sp, {r0, r1}
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 18


 462 0058 9CE80F00 		ldm	ip, {r0, r1, r2, r3}
 463 005c FFF7FEFF 		bl	_3s_2s
 464              	.LVL32:
 263:../BLDCMotor/motorctrl.c ****     motordebug.id = (i_dq.d);
 465              		.loc 1 263 5 is_stmt 1 view .LVU93
 466 0060 04AB     		add	r3, sp, #16
 467 0062 0093     		str	r3, [sp]
 468 0064 B0EE480A 		vmov.f32	s0, s16
 469 0068 96E80F00 		ldm	r6, {r0, r1, r2, r3}
 470 006c FFF7FEFF 		bl	_2s_2r
 471              	.LVL33:
 264:../BLDCMotor/motorctrl.c ****     motordebug.iq = (i_dq.q);
 472              		.loc 1 264 5 view .LVU94
 264:../BLDCMotor/motorctrl.c ****     motordebug.iq = (i_dq.q);
 473              		.loc 1 264 26 is_stmt 0 view .LVU95
 474 0070 DDED040A 		vldr.32	s1, [sp, #16]
 264:../BLDCMotor/motorctrl.c ****     motordebug.iq = (i_dq.q);
 475              		.loc 1 264 19 view .LVU96
 476 0074 C4ED050A 		vstr.32	s1, [r4, #20]
 265:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 477              		.loc 1 265 5 is_stmt 1 view .LVU97
 265:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 478              		.loc 1 265 26 is_stmt 0 view .LVU98
 479 0078 059B     		ldr	r3, [sp, #20]	@ float
 265:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 480              		.loc 1 265 19 view .LVU99
 481 007a A361     		str	r3, [r4, #24]	@ float
 266:../BLDCMotor/motorctrl.c **** #if 1
 482              		.loc 1 266 5 is_stmt 1 view .LVU100
 266:../BLDCMotor/motorctrl.c **** #if 1
 483              		.loc 1 266 10 is_stmt 0 view .LVU101
 484 007c 0023     		movs	r3, #0
 485 007e 2B60     		str	r3, [r5]
 486 0080 6B60     		str	r3, [r5, #4]
 487 0082 AB60     		str	r3, [r5, #8]
 488 0084 EB60     		str	r3, [r5, #12]
 268:../BLDCMotor/motorctrl.c ****     tar_id = motordebug.id_targe;
 489              		.loc 1 268 5 is_stmt 1 view .LVU102
 490              	.LVL34:
 269:../BLDCMotor/motorctrl.c ****     tar_iq = motordebug.iq_targe;
 491              		.loc 1 269 5 view .LVU103
 270:../BLDCMotor/motorctrl.c ****     udq.d = pid_contrl(&(mt_param.daxis_pi),tar_id,i_dq.d);
 492              		.loc 1 270 5 view .LVU104
 270:../BLDCMotor/motorctrl.c ****     udq.d = pid_contrl(&(mt_param.daxis_pi),tar_id,i_dq.d);
 493              		.loc 1 270 12 is_stmt 0 view .LVU105
 494 0086 94ED128A 		vldr.32	s16, [r4, #72]
 495              	.LVL35:
 271:../BLDCMotor/motorctrl.c ****     motordebug.id_real = i_dq.d;
 496              		.loc 1 271 5 is_stmt 1 view .LVU106
 271:../BLDCMotor/motorctrl.c ****     motordebug.id_real = i_dq.d;
 497              		.loc 1 271 13 is_stmt 0 view .LVU107
 498 008a 124E     		ldr	r6, .L29+4
 499 008c 94ED100A 		vldr.32	s0, [r4, #64]
 500 0090 3046     		mov	r0, r6
 501 0092 FFF7FEFF 		bl	pid_contrl
 502              	.LVL36:
 271:../BLDCMotor/motorctrl.c ****     motordebug.id_real = i_dq.d;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 19


 503              		.loc 1 271 11 view .LVU108
 504 0096 85ED000A 		vstr.32	s0, [r5]
 272:../BLDCMotor/motorctrl.c ****     motordebug.pid_D_out = udq.d;
 505              		.loc 1 272 5 is_stmt 1 view .LVU109
 272:../BLDCMotor/motorctrl.c ****     motordebug.pid_D_out = udq.d;
 506              		.loc 1 272 30 is_stmt 0 view .LVU110
 507 009a 049B     		ldr	r3, [sp, #16]	@ float
 272:../BLDCMotor/motorctrl.c ****     motordebug.pid_D_out = udq.d;
 508              		.loc 1 272 24 view .LVU111
 509 009c A363     		str	r3, [r4, #56]	@ float
 273:../BLDCMotor/motorctrl.c ****     udq.q =pid_contrl(&(mt_param.qaxis_pi),tar_iq,i_dq.q);
 510              		.loc 1 273 5 is_stmt 1 view .LVU112
 273:../BLDCMotor/motorctrl.c ****     udq.q =pid_contrl(&(mt_param.qaxis_pi),tar_iq,i_dq.q);
 511              		.loc 1 273 26 is_stmt 0 view .LVU113
 512 009e 84ED190A 		vstr.32	s0, [r4, #100]
 274:../BLDCMotor/motorctrl.c ****     motordebug.iq_real = i_dq.q;
 513              		.loc 1 274 5 is_stmt 1 view .LVU114
 274:../BLDCMotor/motorctrl.c ****     motordebug.iq_real = i_dq.q;
 514              		.loc 1 274 12 is_stmt 0 view .LVU115
 515 00a2 DDED050A 		vldr.32	s1, [sp, #20]
 516 00a6 B0EE480A 		vmov.f32	s0, s16
 517 00aa 06F11C00 		add	r0, r6, #28
 518 00ae FFF7FEFF 		bl	pid_contrl
 519              	.LVL37:
 274:../BLDCMotor/motorctrl.c ****     motordebug.iq_real = i_dq.q;
 520              		.loc 1 274 11 view .LVU116
 521 00b2 85ED010A 		vstr.32	s0, [r5, #4]
 275:../BLDCMotor/motorctrl.c ****     motordebug.pid_Q_out = udq.q;
 522              		.loc 1 275 5 is_stmt 1 view .LVU117
 275:../BLDCMotor/motorctrl.c ****     motordebug.pid_Q_out = udq.q;
 523              		.loc 1 275 30 is_stmt 0 view .LVU118
 524 00b6 059B     		ldr	r3, [sp, #20]	@ float
 275:../BLDCMotor/motorctrl.c ****     motordebug.pid_Q_out = udq.q;
 525              		.loc 1 275 24 view .LVU119
 526 00b8 2365     		str	r3, [r4, #80]	@ float
 276:../BLDCMotor/motorctrl.c **** #endif
 527              		.loc 1 276 5 is_stmt 1 view .LVU120
 276:../BLDCMotor/motorctrl.c **** #endif
 528              		.loc 1 276 26 is_stmt 0 view .LVU121
 529 00ba 84ED160A 		vstr.32	s0, [r4, #88]
 278:../BLDCMotor/motorctrl.c **** #endif
 530              		.loc 1 278 5 is_stmt 1 view .LVU122
 280:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real)
 531              		.loc 1 280 1 is_stmt 0 view .LVU123
 532 00be 2846     		mov	r0, r5
 533 00c0 0CB0     		add	sp, sp, #48
 534              	.LCFI15:
 535              		.cfi_def_cfa_offset 40
 536              		@ sp needed
 537 00c2 BDEC028B 		vldm	sp!, {d8}
 538              	.LCFI16:
 539              		.cfi_restore 80
 540              		.cfi_restore 81
 541              		.cfi_def_cfa_offset 32
 542              	.LVL38:
 280:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real)
 543              		.loc 1 280 1 view .LVU124
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 20


 544 00c6 BDE87040 		pop	{r4, r5, r6, lr}
 545              	.LCFI17:
 546              		.cfi_restore 14
 547              		.cfi_restore 6
 548              		.cfi_restore 5
 549              		.cfi_restore 4
 550              		.cfi_def_cfa_offset 16
 551              	.LVL39:
 280:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real)
 552              		.loc 1 280 1 view .LVU125
 553 00ca 04B0     		add	sp, sp, #16
 554              	.LCFI18:
 555              		.cfi_def_cfa_offset 0
 556 00cc 7047     		bx	lr
 557              	.L30:
 558 00ce 00BF     		.align	2
 559              	.L29:
 560 00d0 00000000 		.word	.LANCHOR1
 561 00d4 00000000 		.word	.LANCHOR0
 562              		.cfi_endproc
 563              	.LFE238:
 565              		.section	.text.motor_set_pwm,"ax",%progbits
 566              		.align	1
 567              		.syntax unified
 568              		.thumb
 569              		.thumb_func
 571              	motor_set_pwm:
 572              	.LFB243:
 313:../BLDCMotor/motorctrl.c ****     test_a = temp._a;test_b = temp._b;test_c = temp._c;
 573              		.loc 1 313 1 is_stmt 1 view -0
 574              		.cfi_startproc
 575              		@ args = 0, pretend = 0, frame = 16
 576              		@ frame_needed = 0, uses_anonymous_args = 0
 577 0000 00B5     		push	{lr}
 578              	.LCFI19:
 579              		.cfi_def_cfa_offset 4
 580              		.cfi_offset 14, -4
 581 0002 85B0     		sub	sp, sp, #20
 582              	.LCFI20:
 583              		.cfi_def_cfa_offset 24
 584 0004 8DED010A 		vstr.32	s0, [sp, #4]
 585 0008 CDED020A 		vstr.32	s1, [sp, #8]
 586 000c 8DED031A 		vstr.32	s2, [sp, #12]
 314:../BLDCMotor/motorctrl.c ****     tim_set_pwm(test_a ,test_b,test_c);
 587              		.loc 1 314 5 view .LVU127
 314:../BLDCMotor/motorctrl.c ****     tim_set_pwm(test_a ,test_b,test_c);
 588              		.loc 1 314 12 is_stmt 0 view .LVU128
 589 0010 0648     		ldr	r0, .L33
 590 0012 80ED000A 		vstr.32	s0, [r0]
 314:../BLDCMotor/motorctrl.c ****     tim_set_pwm(test_a ,test_b,test_c);
 591              		.loc 1 314 22 is_stmt 1 view .LVU129
 314:../BLDCMotor/motorctrl.c ****     tim_set_pwm(test_a ,test_b,test_c);
 592              		.loc 1 314 29 is_stmt 0 view .LVU130
 593 0016 0649     		ldr	r1, .L33+4
 594 0018 C1ED000A 		vstr.32	s1, [r1]
 314:../BLDCMotor/motorctrl.c ****     tim_set_pwm(test_a ,test_b,test_c);
 595              		.loc 1 314 39 is_stmt 1 view .LVU131
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 21


 314:../BLDCMotor/motorctrl.c ****     tim_set_pwm(test_a ,test_b,test_c);
 596              		.loc 1 314 46 is_stmt 0 view .LVU132
 597 001c 054A     		ldr	r2, .L33+8
 598 001e 82ED001A 		vstr.32	s2, [r2]
 315:../BLDCMotor/motorctrl.c **** }
 599              		.loc 1 315 5 is_stmt 1 view .LVU133
 600 0022 FFF7FEFF 		bl	tim_set_pwm
 601              	.LVL40:
 316:../BLDCMotor/motorctrl.c **** 
 602              		.loc 1 316 1 is_stmt 0 view .LVU134
 603 0026 05B0     		add	sp, sp, #20
 604              	.LCFI21:
 605              		.cfi_def_cfa_offset 4
 606              		@ sp needed
 607 0028 5DF804FB 		ldr	pc, [sp], #4
 608              	.L34:
 609              		.align	2
 610              	.L33:
 611 002c 00000000 		.word	.LANCHOR4
 612 0030 00000000 		.word	.LANCHOR5
 613 0034 00000000 		.word	.LANCHOR6
 614              		.cfi_endproc
 615              	.LFE243:
 617              		.section	.text._get_angleoffset,"ax",%progbits
 618              		.align	1
 619              		.syntax unified
 620              		.thumb
 621              		.thumb_func
 623              	_get_angleoffset:
 624              	.LFB245:
 350:../BLDCMotor/motorctrl.c ****     static short state_ = 1;
 625              		.loc 1 350 1 is_stmt 1 view -0
 626              		.cfi_startproc
 627              		@ args = 0, pretend = 0, frame = 48
 628              		@ frame_needed = 0, uses_anonymous_args = 0
 629 0000 00B5     		push	{lr}
 630              	.LCFI22:
 631              		.cfi_def_cfa_offset 4
 632              		.cfi_offset 14, -4
 633 0002 8FB0     		sub	sp, sp, #60
 634              	.LCFI23:
 635              		.cfi_def_cfa_offset 64
 351:../BLDCMotor/motorctrl.c **** 
 636              		.loc 1 351 5 view .LVU136
 354:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.4f,0.0f};
 637              		.loc 1 354 5 view .LVU137
 355:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 638              		.loc 1 355 5 view .LVU138
 355:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 639              		.loc 1 355 10 is_stmt 0 view .LVU139
 640 0004 0023     		movs	r3, #0
 641 0006 0693     		str	r3, [sp, #24]
 642 0008 0793     		str	r3, [sp, #28]
 643 000a 0893     		str	r3, [sp, #32]
 644 000c 0993     		str	r3, [sp, #36]
 645 000e 274B     		ldr	r3, .L43
 646 0010 0693     		str	r3, [sp, #24]	@ float
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 22


 356:../BLDCMotor/motorctrl.c ****     float theta;
 647              		.loc 1 356 5 is_stmt 1 view .LVU140
 357:../BLDCMotor/motorctrl.c ****     static short cnt_ = 0;
 648              		.loc 1 357 5 view .LVU141
 358:../BLDCMotor/motorctrl.c ****     int32_t Q15_theta = 0;
 649              		.loc 1 358 5 view .LVU142
 359:../BLDCMotor/motorctrl.c ****     int32_t Q_thetaSum = 0;
 650              		.loc 1 359 5 view .LVU143
 651              	.LVL41:
 360:../BLDCMotor/motorctrl.c ****     switch (state_)
 652              		.loc 1 360 5 view .LVU144
 361:../BLDCMotor/motorctrl.c ****     {
 653              		.loc 1 361 5 view .LVU145
 654 0012 274B     		ldr	r3, .L43+4
 655 0014 B3F90030 		ldrsh	r3, [r3]
 656 0018 022B     		cmp	r3, #2
 657 001a 27D0     		beq	.L36
 658 001c 032B     		cmp	r3, #3
 659 001e 35D0     		beq	.L37
 660 0020 012B     		cmp	r3, #1
 661 0022 08D0     		beq	.L42
 662              	.LVL42:
 663              	.L38:
 399:../BLDCMotor/motorctrl.c ****     {
 664              		.loc 1 399 5 view .LVU146
 399:../BLDCMotor/motorctrl.c ****     {
 665              		.loc 1 399 16 is_stmt 0 view .LVU147
 666 0024 224B     		ldr	r3, .L43+4
 667 0026 B3F90030 		ldrsh	r3, [r3]
 399:../BLDCMotor/motorctrl.c ****     {
 668              		.loc 1 399 8 view .LVU148
 669 002a 042B     		cmp	r3, #4
 670 002c 3CD0     		beq	.L40
 403:../BLDCMotor/motorctrl.c **** }
 671              		.loc 1 403 12 view .LVU149
 672 002e 0120     		movs	r0, #1
 673              	.L39:
 404:../BLDCMotor/motorctrl.c **** 
 674              		.loc 1 404 1 view .LVU150
 675 0030 0FB0     		add	sp, sp, #60
 676              	.LCFI24:
 677              		.cfi_remember_state
 678              		.cfi_def_cfa_offset 4
 679              		@ sp needed
 680 0032 5DF804FB 		ldr	pc, [sp], #4
 681              	.LVL43:
 682              	.L42:
 683              	.LCFI25:
 684              		.cfi_restore_state
 364:../BLDCMotor/motorctrl.c ****         dut01 = _svpwm(uab.alpha,uab.beta);
 685              		.loc 1 364 9 is_stmt 1 view .LVU151
 364:../BLDCMotor/motorctrl.c ****         dut01 = _svpwm(uab.alpha,uab.beta);
 686              		.loc 1 364 15 is_stmt 0 view .LVU152
 687 0036 0023     		movs	r3, #0
 688 0038 0093     		str	r3, [sp]
 689 003a 06AB     		add	r3, sp, #24
 690 003c 0ECB     		ldm	r3, {r1, r2, r3}
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 23


 691 003e 9FED1D0A 		vldr.32	s0, .L43+8
 692 0042 0AA8     		add	r0, sp, #40
 693 0044 FFF7FEFF 		bl	_2r_2s
 694              	.LVL44:
 365:../BLDCMotor/motorctrl.c ****         motor_set_pwm(dut01);
 695              		.loc 1 365 9 is_stmt 1 view .LVU153
 365:../BLDCMotor/motorctrl.c ****         motor_set_pwm(dut01);
 696              		.loc 1 365 17 is_stmt 0 view .LVU154
 697 0048 DDED0B0A 		vldr.32	s1, [sp, #44]
 698 004c 9DED0A0A 		vldr.32	s0, [sp, #40]
 699 0050 FFF7FEFF 		bl	_svpwm
 700              	.LVL45:
 701 0054 8DED030A 		vstr.32	s0, [sp, #12]
 702 0058 CDED040A 		vstr.32	s1, [sp, #16]
 703 005c 8DED051A 		vstr.32	s2, [sp, #20]
 366:../BLDCMotor/motorctrl.c ****         state_ = 2;
 704              		.loc 1 366 9 is_stmt 1 view .LVU155
 705 0060 FFF7FEFF 		bl	motor_set_pwm
 706              	.LVL46:
 367:../BLDCMotor/motorctrl.c ****         break;
 707              		.loc 1 367 9 view .LVU156
 367:../BLDCMotor/motorctrl.c ****         break;
 708              		.loc 1 367 16 is_stmt 0 view .LVU157
 709 0064 124B     		ldr	r3, .L43+4
 710 0066 0222     		movs	r2, #2
 711 0068 1A80     		strh	r2, [r3]	@ movhi
 368:../BLDCMotor/motorctrl.c **** 
 712              		.loc 1 368 9 is_stmt 1 view .LVU158
 713 006a DBE7     		b	.L38
 714              	.L36:
 371:../BLDCMotor/motorctrl.c ****         {
 715              		.loc 1 371 9 view .LVU159
 371:../BLDCMotor/motorctrl.c ****         {
 716              		.loc 1 371 17 is_stmt 0 view .LVU160
 717 006c 124A     		ldr	r2, .L43+12
 718 006e B2F90030 		ldrsh	r3, [r2]
 719 0072 591C     		adds	r1, r3, #1
 720 0074 1180     		strh	r1, [r2]	@ movhi
 371:../BLDCMotor/motorctrl.c ****         {
 721              		.loc 1 371 12 view .LVU161
 722 0076 43F69822 		movw	r2, #15000
 723 007a 9342     		cmp	r3, r2
 724 007c D2DD     		ble	.L38
 373:../BLDCMotor/motorctrl.c ****             state_ = 3;
 725              		.loc 1 373 13 is_stmt 1 view .LVU162
 373:../BLDCMotor/motorctrl.c ****             state_ = 3;
 726              		.loc 1 373 18 is_stmt 0 view .LVU163
 727 007e 0E4B     		ldr	r3, .L43+12
 728 0080 0022     		movs	r2, #0
 729 0082 1A80     		strh	r2, [r3]	@ movhi
 374:../BLDCMotor/motorctrl.c ****             // dut01 = _svpwm(0.0f,00.0f);
 730              		.loc 1 374 13 is_stmt 1 view .LVU164
 374:../BLDCMotor/motorctrl.c ****             // dut01 = _svpwm(0.0f,00.0f);
 731              		.loc 1 374 20 is_stmt 0 view .LVU165
 732 0084 0A4B     		ldr	r3, .L43+4
 733 0086 0322     		movs	r2, #3
 734 0088 1A80     		strh	r2, [r3]	@ movhi
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 24


 735 008a CBE7     		b	.L38
 736              	.L37:
 387:../BLDCMotor/motorctrl.c ****         theta = _IQ20toF(Q15_theta);
 737              		.loc 1 387 9 is_stmt 1 view .LVU166
 387:../BLDCMotor/motorctrl.c ****         theta = _IQ20toF(Q15_theta);
 738              		.loc 1 387 33 is_stmt 0 view .LVU167
 739 008c 0121     		movs	r1, #1
 740 008e 0020     		movs	r0, #0
 741 0090 FFF7FEFF 		bl	sensor_user_read
 742              	.LVL47:
 388:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = theta;
 743              		.loc 1 388 9 is_stmt 1 view .LVU168
 388:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = theta;
 744              		.loc 1 388 17 is_stmt 0 view .LVU169
 745 0094 0068     		ldr	r0, [r0]
 746              	.LVL48:
 388:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = theta;
 747              		.loc 1 388 17 view .LVU170
 748 0096 FFF7FEFF 		bl	_IQ20toF
 749              	.LVL49:
 389:../BLDCMotor/motorctrl.c ****         state_ = 4;
 750              		.loc 1 389 9 is_stmt 1 view .LVU171
 389:../BLDCMotor/motorctrl.c ****         state_ = 4;
 751              		.loc 1 389 27 is_stmt 0 view .LVU172
 752 009a 084B     		ldr	r3, .L43+16
 753 009c 83ED000A 		vstr.32	s0, [r3]
 390:../BLDCMotor/motorctrl.c ****         break;
 754              		.loc 1 390 9 is_stmt 1 view .LVU173
 390:../BLDCMotor/motorctrl.c ****         break;
 755              		.loc 1 390 16 is_stmt 0 view .LVU174
 756 00a0 034B     		ldr	r3, .L43+4
 757 00a2 0422     		movs	r2, #4
 758 00a4 1A80     		strh	r2, [r3]	@ movhi
 391:../BLDCMotor/motorctrl.c **** 
 759              		.loc 1 391 9 is_stmt 1 view .LVU175
 760 00a6 BDE7     		b	.L38
 761              	.LVL50:
 762              	.L40:
 401:../BLDCMotor/motorctrl.c ****     }
 763              		.loc 1 401 16 is_stmt 0 view .LVU176
 764 00a8 0020     		movs	r0, #0
 765 00aa C1E7     		b	.L39
 766              	.L44:
 767              		.align	2
 768              	.L43:
 769 00ac CDCCCC3E 		.word	1053609165
 770 00b0 00000000 		.word	.LANCHOR7
 771 00b4 00000000 		.word	0
 772 00b8 00000000 		.word	.LANCHOR8
 773 00bc 00000000 		.word	.LANCHOR9
 774              		.cfi_endproc
 775              	.LFE245:
 777              		.section	.text.motortctrl_process,"ax",%progbits
 778              		.align	1
 779              		.global	motortctrl_process
 780              		.syntax unified
 781              		.thumb
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 25


 782              		.thumb_func
 784              	motortctrl_process:
 785              	.LFB235:
  38:../BLDCMotor/motorctrl.c ****     static uint16_t _state = MOTOR_INIT;
 786              		.loc 1 38 1 is_stmt 1 view -0
 787              		.cfi_startproc
 788              		@ args = 0, pretend = 0, frame = 0
 789              		@ frame_needed = 0, uses_anonymous_args = 0
 790 0000 10B5     		push	{r4, lr}
 791              	.LCFI26:
 792              		.cfi_def_cfa_offset 8
 793              		.cfi_offset 4, -8
 794              		.cfi_offset 14, -4
  39:../BLDCMotor/motorctrl.c ****     char rec_buf[64];
 795              		.loc 1 39 5 view .LVU178
  40:../BLDCMotor/motorctrl.c ****     char cnt = 0;
 796              		.loc 1 40 5 view .LVU179
  41:../BLDCMotor/motorctrl.c **** 
 797              		.loc 1 41 5 view .LVU180
 798              	.LVL51:
  43:../BLDCMotor/motorctrl.c ****     switch (_state)
 799              		.loc 1 43 5 view .LVU181
 800 0002 FFF7FEFF 		bl	motorprotocol_process
 801              	.LVL52:
  44:../BLDCMotor/motorctrl.c ****     {
 802              		.loc 1 44 5 view .LVU182
 803 0006 224B     		ldr	r3, .L53
 804 0008 1B88     		ldrh	r3, [r3]
 805 000a 032B     		cmp	r3, #3
 806 000c 1ED8     		bhi	.L45
 807 000e DFE803F0 		tbb	[pc, r3]
 808              	.L48:
 809 0012 02       		.byte	(.L51-.L48)/2
 810 0013 0D       		.byte	(.L50-.L48)/2
 811 0014 1E       		.byte	(.L49-.L48)/2
 812 0015 34       		.byte	(.L47-.L48)/2
 813              		.p2align 1
 814              	.L51:
  48:../BLDCMotor/motorctrl.c ****         {
 815              		.loc 1 48 9 view .LVU183
  48:../BLDCMotor/motorctrl.c ****         {
 816              		.loc 1 48 12 is_stmt 0 view .LVU184
 817 0016 1F4B     		ldr	r3, .L53+4
 818 0018 196C     		ldr	r1, [r3, #64]
 819 001a 1F4B     		ldr	r3, .L53+8
 820 001c D3F88400 		ldr	r0, [r3, #132]
 821 0020 FFF7FEFF 		bl	strcmp
 822              	.LVL53:
  48:../BLDCMotor/motorctrl.c ****         {
 823              		.loc 1 48 11 view .LVU185
 824 0024 90B9     		cbnz	r0, .L45
  52:../BLDCMotor/motorctrl.c ****     case MOTOR_START:
 825              		.loc 1 52 9 is_stmt 1 view .LVU186
  52:../BLDCMotor/motorctrl.c ****     case MOTOR_START:
 826              		.loc 1 52 16 is_stmt 0 view .LVU187
 827 0026 1A4B     		ldr	r3, .L53
 828 0028 0122     		movs	r2, #1
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 26


 829 002a 1A80     		strh	r2, [r3]	@ movhi
 830              	.L50:
  54:../BLDCMotor/motorctrl.c ****         motor_enable();
 831              		.loc 1 54 9 is_stmt 1 view .LVU188
 832 002c FFF7FEFF 		bl	mc_param_init
 833              	.LVL54:
  55:../BLDCMotor/motorctrl.c ****         _state = MOTOR_RUNING;
 834              		.loc 1 55 9 view .LVU189
 835 0030 FFF7FEFF 		bl	motor_enable
 836              	.LVL55:
  56:../BLDCMotor/motorctrl.c ****         // motorprotocol_tramit(g_respondmap[RES_RUNING].respond,g_respondmap[RES_RUNING].respond_l
 837              		.loc 1 56 9 view .LVU190
  56:../BLDCMotor/motorctrl.c ****         // motorprotocol_tramit(g_respondmap[RES_RUNING].respond,g_respondmap[RES_RUNING].respond_l
 838              		.loc 1 56 16 is_stmt 0 view .LVU191
 839 0034 164B     		ldr	r3, .L53
 840 0036 0222     		movs	r2, #2
 841 0038 1A80     		strh	r2, [r3]	@ movhi
  58:../BLDCMotor/motorctrl.c ****         break;
 842              		.loc 1 58 9 is_stmt 1 view .LVU192
  58:../BLDCMotor/motorctrl.c ****         break;
 843              		.loc 1 58 58 is_stmt 0 view .LVU193
 844 003a 164B     		ldr	r3, .L53+4
 845 003c DC6C     		ldr	r4, [r3, #76]
  58:../BLDCMotor/motorctrl.c ****         break;
 846              		.loc 1 58 67 view .LVU194
 847 003e 2046     		mov	r0, r4
 848 0040 FFF7FEFF 		bl	strlen
 849              	.LVL56:
  58:../BLDCMotor/motorctrl.c ****         break;
 850              		.loc 1 58 9 view .LVU195
 851 0044 81B2     		uxth	r1, r0
 852 0046 2046     		mov	r0, r4
 853 0048 FFF7FEFF 		bl	motorprotocol_tramit
 854              	.LVL57:
  59:../BLDCMotor/motorctrl.c **** 
 855              		.loc 1 59 9 is_stmt 1 view .LVU196
 856              	.L45:
  80:../BLDCMotor/motorctrl.c **** 
 857              		.loc 1 80 1 is_stmt 0 view .LVU197
 858 004c 10BD     		pop	{r4, pc}
 859              	.L49:
  63:../BLDCMotor/motorctrl.c ****         {
 860              		.loc 1 63 9 is_stmt 1 view .LVU198
  63:../BLDCMotor/motorctrl.c ****         {
 861              		.loc 1 63 12 is_stmt 0 view .LVU199
 862 004e 114B     		ldr	r3, .L53+4
 863 0050 196C     		ldr	r1, [r3, #64]
 864 0052 114B     		ldr	r3, .L53+8
 865 0054 D3F88400 		ldr	r0, [r3, #132]
 866 0058 FFF7FEFF 		bl	strcmp
 867              	.LVL58:
  63:../BLDCMotor/motorctrl.c ****         {
 868              		.loc 1 63 11 view .LVU200
 869 005c 0028     		cmp	r0, #0
 870 005e F5D0     		beq	.L45
  66:../BLDCMotor/motorctrl.c ****             _state = MOTOR_STOP;
 871              		.loc 1 66 13 is_stmt 1 view .LVU201
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 27


  66:../BLDCMotor/motorctrl.c ****             _state = MOTOR_STOP;
 872              		.loc 1 66 61 is_stmt 0 view .LVU202
 873 0060 0C4B     		ldr	r3, .L53+4
 874 0062 DC6B     		ldr	r4, [r3, #60]
  66:../BLDCMotor/motorctrl.c ****             _state = MOTOR_STOP;
 875              		.loc 1 66 70 view .LVU203
 876 0064 2046     		mov	r0, r4
 877 0066 FFF7FEFF 		bl	strlen
 878              	.LVL59:
  66:../BLDCMotor/motorctrl.c ****             _state = MOTOR_STOP;
 879              		.loc 1 66 13 view .LVU204
 880 006a 81B2     		uxth	r1, r0
 881 006c 2046     		mov	r0, r4
 882 006e FFF7FEFF 		bl	motorprotocol_tramit
 883              	.LVL60:
  67:../BLDCMotor/motorctrl.c ****         }
 884              		.loc 1 67 13 is_stmt 1 view .LVU205
  67:../BLDCMotor/motorctrl.c ****         }
 885              		.loc 1 67 20 is_stmt 0 view .LVU206
 886 0072 074B     		ldr	r3, .L53
 887 0074 0322     		movs	r2, #3
 888 0076 1A80     		strh	r2, [r3]	@ movhi
 889 0078 E8E7     		b	.L45
 890              	.L47:
  72:../BLDCMotor/motorctrl.c ****         motor_disable();
 891              		.loc 1 72 9 is_stmt 1 view .LVU207
 892 007a FFF7FEFF 		bl	trigger_software_reset
 893              	.LVL61:
  73:../BLDCMotor/motorctrl.c ****         mc_param_deinit();
 894              		.loc 1 73 9 view .LVU208
 895 007e FFF7FEFF 		bl	motor_disable
 896              	.LVL62:
  74:../BLDCMotor/motorctrl.c ****         _state = MOTOR_INIT;
 897              		.loc 1 74 9 view .LVU209
 898 0082 FFF7FEFF 		bl	mc_param_deinit
 899              	.LVL63:
  75:../BLDCMotor/motorctrl.c ****         break;
 900              		.loc 1 75 9 view .LVU210
  75:../BLDCMotor/motorctrl.c ****         break;
 901              		.loc 1 75 16 is_stmt 0 view .LVU211
 902 0086 024B     		ldr	r3, .L53
 903 0088 0022     		movs	r2, #0
 904 008a 1A80     		strh	r2, [r3]	@ movhi
  76:../BLDCMotor/motorctrl.c ****     default:
 905              		.loc 1 76 9 is_stmt 1 view .LVU212
  80:../BLDCMotor/motorctrl.c **** 
 906              		.loc 1 80 1 is_stmt 0 view .LVU213
 907 008c DEE7     		b	.L45
 908              	.L54:
 909 008e 00BF     		.align	2
 910              	.L53:
 911 0090 00000000 		.word	.LANCHOR10
 912 0094 00000000 		.word	sg_commandmap
 913 0098 00000000 		.word	.LANCHOR1
 914              		.cfi_endproc
 915              	.LFE235:
 917              		.global	__aeabi_f2d
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 28


 918              		.global	__aeabi_d2f
 919              		.section	.text._limit_voltagecircle,"ax",%progbits
 920              		.align	1
 921              		.global	_limit_voltagecircle
 922              		.syntax unified
 923              		.thumb
 924              		.thumb_func
 926              	_limit_voltagecircle:
 927              	.LVL64:
 928              	.LFB237:
 229:../BLDCMotor/motorctrl.c ****     float max_voltage = D_MAX_VAL;// ËøôÈáåÂ∫îËØ•ÊòØ‰Ω†ÁöÑÊúÄÂ§ßÂÖÅËÆ∏ÁîµÂéãÂÄºÔºå‰æãÂ¶ÇÂØπ‰∫é‰∏âÁõ
 929              		.loc 1 229 49 is_stmt 1 view -0
 930              		.cfi_startproc
 931              		@ args = 20, pretend = 16, frame = 0
 932              		@ frame_needed = 0, uses_anonymous_args = 0
 229:../BLDCMotor/motorctrl.c ****     float max_voltage = D_MAX_VAL;// ËøôÈáåÂ∫îËØ•ÊòØ‰Ω†ÁöÑÊúÄÂ§ßÂÖÅËÆ∏ÁîµÂéãÂÄºÔºå‰æãÂ¶ÇÂØπ‰∫é‰∏âÁõ
 933              		.loc 1 229 49 is_stmt 0 view .LVU215
 934 0000 84B0     		sub	sp, sp, #16
 935              	.LCFI27:
 936              		.cfi_def_cfa_offset 16
 937 0002 10B5     		push	{r4, lr}
 938              	.LCFI28:
 939              		.cfi_def_cfa_offset 24
 940              		.cfi_offset 4, -24
 941              		.cfi_offset 14, -20
 942 0004 2DED028B 		vpush.64	{d8}
 943              	.LCFI29:
 944              		.cfi_def_cfa_offset 32
 945              		.cfi_offset 80, -32
 946              		.cfi_offset 81, -28
 947 0008 0446     		mov	r4, r0
 948 000a 05A8     		add	r0, sp, #20
 949 000c 80E80E00 		stm	r0, {r1, r2, r3}
 230:../BLDCMotor/motorctrl.c ****     float voltage_magnitude = sqrt(raw_uab.alpha * raw_uab.alpha + raw_uab.beta * raw_uab.beta); //
 950              		.loc 1 230 5 is_stmt 1 view .LVU216
 951              	.LVL65:
 231:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 952              		.loc 1 231 5 view .LVU217
 231:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 953              		.loc 1 231 43 is_stmt 0 view .LVU218
 954 0010 DDED058A 		vldr.32	s17, [sp, #20]
 231:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 955              		.loc 1 231 50 view .LVU219
 956 0014 28EEA87A 		vmul.f32	s14, s17, s17
 231:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 957              		.loc 1 231 75 view .LVU220
 958 0018 9DED068A 		vldr.32	s16, [sp, #24]
 231:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 959              		.loc 1 231 81 view .LVU221
 960 001c 68EE087A 		vmul.f32	s15, s16, s16
 231:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 961              		.loc 1 231 31 view .LVU222
 962 0020 77EE277A 		vadd.f32	s15, s14, s15
 963 0024 17EE900A 		vmov	r0, s15
 964              	.LVL66:
 231:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 965              		.loc 1 231 31 view .LVU223
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 29


 966 0028 FFF7FEFF 		bl	__aeabi_f2d
 967              	.LVL67:
 968 002c 41EC100B 		vmov	d0, r0, r1
 969 0030 FFF7FEFF 		bl	sqrt
 970              	.LVL68:
 971 0034 51EC100B 		vmov	r0, r1, d0
 231:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 972              		.loc 1 231 11 view .LVU224
 973 0038 FFF7FEFF 		bl	__aeabi_d2f
 974              	.LVL69:
 975 003c 07EE900A 		vmov	s15, r0
 976              	.LVL70:
 232:../BLDCMotor/motorctrl.c ****     if (voltage_magnitude > max_voltage) {  
 977              		.loc 1 232 5 is_stmt 1 view .LVU225
 233:../BLDCMotor/motorctrl.c ****         // Â¶ÇÊûúÁü¢ÈáèÈïøÂ∫¶Ë∂ÖËøáÊúÄÂ§ßÁîµÂéãÔºåÂàôÊåâÊØî‰æãÁº©ÊîæÁü¢Èáè‰ª•‰ΩøÂÖ∂ËêΩÂú®ÁîµÂéãÁü¢È
 978              		.loc 1 233 5 view .LVU226
 233:../BLDCMotor/motorctrl.c ****         // Â¶ÇÊûúÁü¢ÈáèÈïøÂ∫¶Ë∂ÖËøáÊúÄÂ§ßÁîµÂéãÔºåÂàôÊåâÊØî‰æãÁº©ÊîæÁü¢Èáè‰ª•‰ΩøÂÖ∂ËêΩÂú®ÁîµÂéãÁü¢È
 979              		.loc 1 233 8 is_stmt 0 view .LVU227
 980 0040 B1EE007A 		vmov.f32	s14, #4.0e+0
 981 0044 F4EEC77A 		vcmpe.f32	s15, s14
 982 0048 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 983 004c 12DD     		ble	.L60
 984              	.LBB2:
 235:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha * scale_factor;  
 985              		.loc 1 235 9 is_stmt 1 view .LVU228
 235:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha * scale_factor;  
 986              		.loc 1 235 15 is_stmt 0 view .LVU229
 987 004e F0EE476A 		vmov.f32	s13, s14
 988 0052 86EEA77A 		vdiv.f32	s14, s13, s15
 989              	.LVL71:
 236:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 990              		.loc 1 236 9 is_stmt 1 view .LVU230
 236:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 991              		.loc 1 236 35 is_stmt 0 view .LVU231
 992 0056 68EE878A 		vmul.f32	s17, s17, s14
 236:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 993              		.loc 1 236 19 view .LVU232
 994 005a C4ED008A 		vstr.32	s17, [r4]
 237:../BLDCMotor/motorctrl.c ****     } else {  
 995              		.loc 1 237 9 is_stmt 1 view .LVU233
 237:../BLDCMotor/motorctrl.c ****     } else {  
 996              		.loc 1 237 33 is_stmt 0 view .LVU234
 997 005e 28EE078A 		vmul.f32	s16, s16, s14
 237:../BLDCMotor/motorctrl.c ****     } else {  
 998              		.loc 1 237 18 view .LVU235
 999 0062 84ED018A 		vstr.32	s16, [r4, #4]
 1000              	.LVL72:
 1001              	.L55:
 237:../BLDCMotor/motorctrl.c ****     } else {  
 1002              		.loc 1 237 18 view .LVU236
 1003              	.LBE2:
 244:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 1004              		.loc 1 244 1 view .LVU237
 1005 0066 2046     		mov	r0, r4
 1006              	.LVL73:
 244:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 1007              		.loc 1 244 1 view .LVU238
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 30


 1008 0068 BDEC028B 		vldm	sp!, {d8}
 1009              	.LCFI30:
 1010              		.cfi_remember_state
 1011              		.cfi_restore 80
 1012              		.cfi_restore 81
 1013              		.cfi_def_cfa_offset 24
 1014 006c BDE81040 		pop	{r4, lr}
 1015              	.LCFI31:
 1016              		.cfi_restore 14
 1017              		.cfi_restore 4
 1018              		.cfi_def_cfa_offset 16
 1019              	.LVL74:
 244:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 1020              		.loc 1 244 1 view .LVU239
 1021 0070 04B0     		add	sp, sp, #16
 1022              	.LCFI32:
 1023              		.cfi_def_cfa_offset 0
 1024 0072 7047     		bx	lr
 1025              	.LVL75:
 1026              	.L60:
 1027              	.LCFI33:
 1028              		.cfi_restore_state
 240:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta;  
 1029              		.loc 1 240 9 is_stmt 1 view .LVU240
 240:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta;  
 1030              		.loc 1 240 19 is_stmt 0 view .LVU241
 1031 0074 C4ED008A 		vstr.32	s17, [r4]
 241:../BLDCMotor/motorctrl.c ****     }
 1032              		.loc 1 241 9 is_stmt 1 view .LVU242
 241:../BLDCMotor/motorctrl.c ****     }
 1033              		.loc 1 241 18 is_stmt 0 view .LVU243
 1034 0078 84ED018A 		vstr.32	s16, [r4, #4]
 243:../BLDCMotor/motorctrl.c **** }
 1035              		.loc 1 243 5 is_stmt 1 view .LVU244
 243:../BLDCMotor/motorctrl.c **** }
 1036              		.loc 1 243 12 is_stmt 0 view .LVU245
 1037 007c F3E7     		b	.L55
 1038              		.cfi_endproc
 1039              	.LFE237:
 1041              		.section	.rodata._50uscycle_process.str1.4,"aMS",%progbits,1
 1042              		.align	2
 1043              	.LC0:
 1044 0000 656E7465 		.ascii	"enter IDLE\015\012\000"
 1044      72204944 
 1044      4C450D0A 
 1044      00
 1045              		.global	__aeabi_dmul
 1046              		.global	__aeabi_dadd
 1047              		.section	.text._50uscycle_process,"ax",%progbits
 1048              		.align	1
 1049              		.global	_50uscycle_process
 1050              		.syntax unified
 1051              		.thumb
 1052              		.thumb_func
 1054              	_50uscycle_process:
 1055              	.LVL76:
 1056              	.LFB236:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 31


  91:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 1057              		.loc 1 91 1 is_stmt 1 view -0
 1058              		.cfi_startproc
 1059              		@ args = 0, pretend = 0, frame = 112
 1060              		@ frame_needed = 0, uses_anonymous_args = 0
  91:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 1061              		.loc 1 91 1 is_stmt 0 view .LVU247
 1062 0000 30B5     		push	{r4, r5, lr}
 1063              	.LCFI34:
 1064              		.cfi_def_cfa_offset 12
 1065              		.cfi_offset 4, -12
 1066              		.cfi_offset 5, -8
 1067              		.cfi_offset 14, -4
 1068 0002 2DED048B 		vpush.64	{d8, d9}
 1069              	.LCFI35:
 1070              		.cfi_def_cfa_offset 28
 1071              		.cfi_offset 80, -28
 1072              		.cfi_offset 81, -24
 1073              		.cfi_offset 82, -20
 1074              		.cfi_offset 83, -16
 1075 0006 A1B0     		sub	sp, sp, #132
 1076              	.LCFI36:
 1077              		.cfi_def_cfa_offset 160
  92:../BLDCMotor/motorctrl.c ****     int32_t mec_theta;
 1078              		.loc 1 92 5 is_stmt 1 view .LVU248
  93:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 1079              		.loc 1 93 5 view .LVU249
  94:../BLDCMotor/motorctrl.c ****     abc_t i_abc;
 1080              		.loc 1 94 5 view .LVU250
  95:../BLDCMotor/motorctrl.c ****     dq_t udq;
 1081              		.loc 1 95 5 view .LVU251
  96:../BLDCMotor/motorctrl.c **** 
 1082              		.loc 1 96 5 view .LVU252
 100:../BLDCMotor/motorctrl.c ****     a1 = abc_vale[0] - A_ADCCHANNL_OFFSET;
 1083              		.loc 1 100 5 view .LVU253
 101:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 1084              		.loc 1 101 5 view .LVU254
 101:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 1085              		.loc 1 101 18 is_stmt 0 view .LVU255
 1086 0008 0368     		ldr	r3, [r0]
 101:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 1087              		.loc 1 101 22 view .LVU256
 1088 000a A3F6D503 		subw	r3, r3, #2261
 101:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 1089              		.loc 1 101 8 view .LVU257
 1090 000e B64A     		ldr	r2, .L77
 1091 0010 1360     		str	r3, [r2]
 102:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 1092              		.loc 1 102 5 is_stmt 1 view .LVU258
 102:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 1093              		.loc 1 102 18 is_stmt 0 view .LVU259
 1094 0012 4268     		ldr	r2, [r0, #4]
 102:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 1095              		.loc 1 102 22 view .LVU260
 1096 0014 A2F6E602 		subw	r2, r2, #2278
 102:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 1097              		.loc 1 102 8 view .LVU261
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 32


 1098 0018 B44B     		ldr	r3, .L77+4
 1099 001a 1A60     		str	r2, [r3]
 103:../BLDCMotor/motorctrl.c ****     // Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 1100              		.loc 1 103 5 is_stmt 1 view .LVU262
 103:../BLDCMotor/motorctrl.c ****     // Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 1101              		.loc 1 103 18 is_stmt 0 view .LVU263
 1102 001c 8368     		ldr	r3, [r0, #8]
 103:../BLDCMotor/motorctrl.c ****     // Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 1103              		.loc 1 103 22 view .LVU264
 1104 001e A3F50F63 		sub	r3, r3, #2288
 103:../BLDCMotor/motorctrl.c ****     // Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 1105              		.loc 1 103 8 view .LVU265
 1106 0022 B349     		ldr	r1, .L77+8
 1107 0024 0B60     		str	r3, [r1]
 105:../BLDCMotor/motorctrl.c ****     Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 1108              		.loc 1 105 5 is_stmt 1 view .LVU266
 105:../BLDCMotor/motorctrl.c ****     Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 1109              		.loc 1 105 10 is_stmt 0 view .LVU267
 1110 0026 07EE902A 		vmov	s15, r2	@ int
 1111 002a F8EEE78A 		vcvt.f32.s32	s17, s15
 105:../BLDCMotor/motorctrl.c ****     Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 1112              		.loc 1 105 8 view .LVU268
 1113 002e DFEDB17A 		vldr.32	s15, .L77+12
 1114 0032 68EEA78A 		vmul.f32	s17, s17, s15
 1115              	.LVL77:
 106:../BLDCMotor/motorctrl.c ****     Ia = -Ic - Ib;
 1116              		.loc 1 106 5 is_stmt 1 view .LVU269
 106:../BLDCMotor/motorctrl.c ****     Ia = -Ic - Ib;
 1117              		.loc 1 106 10 is_stmt 0 view .LVU270
 1118 0036 07EE903A 		vmov	s15, r3	@ int
 1119 003a B8EEE78A 		vcvt.f32.s32	s16, s15
 106:../BLDCMotor/motorctrl.c ****     Ia = -Ic - Ib;
 1120              		.loc 1 106 8 view .LVU271
 1121 003e DFEDAE7A 		vldr.32	s15, .L77+16
 1122 0042 28EE278A 		vmul.f32	s16, s16, s15
 1123              	.LVL78:
 107:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&(mt_param.elefitler[0]),Ia);
 1124              		.loc 1 107 5 is_stmt 1 view .LVU272
 107:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&(mt_param.elefitler[0]),Ia);
 1125              		.loc 1 107 10 is_stmt 0 view .LVU273
 1126 0046 B1EE480A 		vneg.f32	s0, s16
 1127              	.LVL79:
 108:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&(mt_param.elefitler[1]),Ib);
 1128              		.loc 1 108 5 is_stmt 1 view .LVU274
 108:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&(mt_param.elefitler[1]),Ib);
 1129              		.loc 1 108 15 is_stmt 0 view .LVU275
 1130 004a AC4C     		ldr	r4, .L77+20
 1131 004c 30EE680A 		vsub.f32	s0, s0, s17
 1132              	.LVL80:
 108:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&(mt_param.elefitler[1]),Ib);
 1133              		.loc 1 108 15 view .LVU276
 1134 0050 04F15400 		add	r0, r4, #84
 1135              	.LVL81:
 108:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&(mt_param.elefitler[1]),Ib);
 1136              		.loc 1 108 15 view .LVU277
 1137 0054 FFF7FEFF 		bl	lowfilter_cale
 1138              	.LVL82:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 33


 108:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&(mt_param.elefitler[1]),Ib);
 1139              		.loc 1 108 15 view .LVU278
 1140 0058 B0EE409A 		vmov.f32	s18, s0
 108:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&(mt_param.elefitler[1]),Ib);
 1141              		.loc 1 108 13 view .LVU279
 1142 005c 8DED140A 		vstr.32	s0, [sp, #80]
 109:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&(mt_param.elefitler[2]),Ic);
 1143              		.loc 1 109 5 is_stmt 1 view .LVU280
 109:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&(mt_param.elefitler[2]),Ic);
 1144              		.loc 1 109 15 is_stmt 0 view .LVU281
 1145 0060 B0EE680A 		vmov.f32	s0, s17
 1146 0064 04F15C00 		add	r0, r4, #92
 1147 0068 FFF7FEFF 		bl	lowfilter_cale
 1148              	.LVL83:
 1149 006c F0EE408A 		vmov.f32	s17, s0
 1150              	.LVL84:
 109:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&(mt_param.elefitler[2]),Ic);
 1151              		.loc 1 109 13 view .LVU282
 1152 0070 8DED150A 		vstr.32	s0, [sp, #84]
 110:../BLDCMotor/motorctrl.c ****     motordebug.ia = i_abc.a;
 1153              		.loc 1 110 5 is_stmt 1 view .LVU283
 110:../BLDCMotor/motorctrl.c ****     motordebug.ia = i_abc.a;
 1154              		.loc 1 110 15 is_stmt 0 view .LVU284
 1155 0074 B0EE480A 		vmov.f32	s0, s16
 1156 0078 04F16400 		add	r0, r4, #100
 1157 007c FFF7FEFF 		bl	lowfilter_cale
 1158              	.LVL85:
 110:../BLDCMotor/motorctrl.c ****     motordebug.ia = i_abc.a;
 1159              		.loc 1 110 13 view .LVU285
 1160 0080 8DED160A 		vstr.32	s0, [sp, #88]
 111:../BLDCMotor/motorctrl.c ****     motordebug.ib = i_abc.b;
 1161              		.loc 1 111 5 is_stmt 1 view .LVU286
 111:../BLDCMotor/motorctrl.c ****     motordebug.ib = i_abc.b;
 1162              		.loc 1 111 19 is_stmt 0 view .LVU287
 1163 0084 9E4B     		ldr	r3, .L77+24
 1164 0086 83ED009A 		vstr.32	s18, [r3]
 112:../BLDCMotor/motorctrl.c **** #endif
 1165              		.loc 1 112 5 is_stmt 1 view .LVU288
 112:../BLDCMotor/motorctrl.c **** #endif
 1166              		.loc 1 112 19 is_stmt 0 view .LVU289
 1167 008a C3ED018A 		vstr.32	s17, [r3, #4]
 115:../BLDCMotor/motorctrl.c ****         OFFSET=0,
 1168              		.loc 1 115 5 is_stmt 1 view .LVU290
 122:../BLDCMotor/motorctrl.c ****     switch (state0_)
 1169              		.loc 1 122 5 view .LVU291
 123:../BLDCMotor/motorctrl.c ****     {
 1170              		.loc 1 123 5 view .LVU292
 1171 008e 9D4B     		ldr	r3, .L77+28
 1172 0090 B3F90030 		ldrsh	r3, [r3]
 1173 0094 042B     		cmp	r3, #4
 1174 0096 7BD8     		bhi	.L62
 1175 0098 DFE803F0 		tbb	[pc, r3]
 1176              	.L65:
 1177 009c 03       		.byte	(.L68-.L65)/2
 1178 009d 7A       		.byte	(.L62-.L65)/2
 1179 009e 7E       		.byte	(.L67-.L65)/2
 1180 009f 24       		.byte	(.L66-.L65)/2
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 34


 1181 00a0 0E       		.byte	(.L64-.L65)/2
 1182 00a1 00       		.p2align 1
 1183              	.L68:
 1184              	.LBB3:
 126:../BLDCMotor/motorctrl.c ****             {
 1185              		.loc 1 126 13 view .LVU293
 126:../BLDCMotor/motorctrl.c ****             {
 1186              		.loc 1 126 17 is_stmt 0 view .LVU294
 1187 00a2 FFF7FEFF 		bl	_get_angleoffset
 1188              	.LVL86:
 126:../BLDCMotor/motorctrl.c ****             {
 1189              		.loc 1 126 16 view .LVU295
 1190 00a6 0028     		cmp	r0, #0
 1191 00a8 72D1     		bne	.L62
 130:../BLDCMotor/motorctrl.c ****             state0_ = CLOSELOOP;
 1192              		.loc 1 130 13 is_stmt 1 view .LVU296
 1193 00aa 9749     		ldr	r1, .L77+32
 1194 00ac FFF7FEFF 		bl	SEGGER_RTT_printf
 1195              	.LVL87:
 131:../BLDCMotor/motorctrl.c ****             break;
 1196              		.loc 1 131 13 view .LVU297
 131:../BLDCMotor/motorctrl.c ****             break;
 1197              		.loc 1 131 21 is_stmt 0 view .LVU298
 1198 00b0 944B     		ldr	r3, .L77+28
 1199 00b2 0222     		movs	r2, #2
 1200 00b4 1A80     		strh	r2, [r3]	@ movhi
 132:../BLDCMotor/motorctrl.c ****         case IDLE:
 1201              		.loc 1 132 13 is_stmt 1 view .LVU299
 1202 00b6 6BE0     		b	.L62
 1203              	.L64:
 134:../BLDCMotor/motorctrl.c ****             {
 1204              		.loc 1 134 13 view .LVU300
 134:../BLDCMotor/motorctrl.c ****             {
 1205              		.loc 1 134 27 is_stmt 0 view .LVU301
 1206 00b8 914B     		ldr	r3, .L77+24
 1207 00ba D3ED107A 		vldr.32	s15, [r3, #64]
 134:../BLDCMotor/motorctrl.c ****             {
 1208              		.loc 1 134 16 view .LVU302
 1209 00be F5EE407A 		vcmp.f32	s15, #0
 1210 00c2 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1211 00c6 06D1     		bne	.L69
 134:../BLDCMotor/motorctrl.c ****             {
 1212              		.loc 1 134 58 discriminator 1 view .LVU303
 1213 00c8 D3ED127A 		vldr.32	s15, [r3, #72]
 134:../BLDCMotor/motorctrl.c ****             {
 1214              		.loc 1 134 45 discriminator 1 view .LVU304
 1215 00cc F5EE407A 		vcmp.f32	s15, #0
 1216 00d0 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1217 00d4 5CD0     		beq	.L62
 1218              	.L69:
 136:../BLDCMotor/motorctrl.c ****                 state0_ = SPEEDLOOP;
 1219              		.loc 1 136 17 is_stmt 1 view .LVU305
 136:../BLDCMotor/motorctrl.c ****                 state0_ = SPEEDLOOP;
 1220              		.loc 1 136 38 is_stmt 0 view .LVU306
 1221 00d6 8A4B     		ldr	r3, .L77+24
 1222 00d8 0022     		movs	r2, #0
 1223 00da 1A67     		str	r2, [r3, #112]	@ float
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 35


 137:../BLDCMotor/motorctrl.c ****             }
 1224              		.loc 1 137 17 is_stmt 1 view .LVU307
 137:../BLDCMotor/motorctrl.c ****             }
 1225              		.loc 1 137 25 is_stmt 0 view .LVU308
 1226 00dc 894B     		ldr	r3, .L77+28
 1227 00de 0322     		movs	r2, #3
 1228 00e0 1A80     		strh	r2, [r3]	@ movhi
 1229 00e2 55E0     		b	.L62
 1230              	.L66:
 141:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(mec_theta);
 1231              		.loc 1 141 13 is_stmt 1 view .LVU309
 141:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(mec_theta);
 1232              		.loc 1 141 36 is_stmt 0 view .LVU310
 1233 00e4 0121     		movs	r1, #1
 1234 00e6 0020     		movs	r0, #0
 1235 00e8 FFF7FEFF 		bl	sensor_user_read
 1236              	.LVL88:
 142:../BLDCMotor/motorctrl.c ****             motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 1237              		.loc 1 142 13 is_stmt 1 view .LVU311
 142:../BLDCMotor/motorctrl.c ****             motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 1238              		.loc 1 142 26 is_stmt 0 view .LVU312
 1239 00ec 0068     		ldr	r0, [r0]
 1240              	.LVL89:
 142:../BLDCMotor/motorctrl.c ****             motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 1241              		.loc 1 142 26 view .LVU313
 1242 00ee FFF7FEFF 		bl	_IQ20toF
 1243              	.LVL90:
 142:../BLDCMotor/motorctrl.c ****             motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 1244              		.loc 1 142 26 view .LVU314
 1245 00f2 B0EE408A 		vmov.f32	s16, s0
 1246              	.LVL91:
 143:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 1247              		.loc 1 143 13 is_stmt 1 view .LVU315
 143:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 1248              		.loc 1 143 37 is_stmt 0 view .LVU316
 1249 00f6 FFF7FEFF 		bl	motor_speedcale
 1250              	.LVL92:
 143:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 1251              		.loc 1 143 35 view .LVU317
 1252 00fa 814C     		ldr	r4, .L77+24
 1253 00fc 84ED110A 		vstr.32	s0, [r4, #68]
 144:../BLDCMotor/motorctrl.c ****             elec_theta -= 0.56f;//sg_MecThetaOffset;
 1254              		.loc 1 144 13 is_stmt 1 view .LVU318
 144:../BLDCMotor/motorctrl.c ****             elec_theta -= 0.56f;//sg_MecThetaOffset;
 1255              		.loc 1 144 24 is_stmt 0 view .LVU319
 1256 0100 B1EE0C0A 		vmov.f32	s0, #7.0e+0
 1257 0104 28EE008A 		vmul.f32	s16, s16, s0
 1258              	.LVL93:
 145:../BLDCMotor/motorctrl.c **** 
 1259              		.loc 1 145 13 is_stmt 1 view .LVU320
 147:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 1260              		.loc 1 147 13 view .LVU321
 147:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 1261              		.loc 1 147 26 is_stmt 0 view .LVU322
 1262 0108 9FED800A 		vldr.32	s0, .L77+36
 1263 010c 38EE400A 		vsub.f32	s0, s16, s0
 1264              	.LVL94:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 36


 147:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 1265              		.loc 1 147 26 view .LVU323
 1266 0110 FFF7FEFF 		bl	_normalize_angle
 1267              	.LVL95:
 147:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 1268              		.loc 1 147 26 view .LVU324
 1269 0114 B0EE408A 		vmov.f32	s16, s0
 1270              	.LVL96:
 148:../BLDCMotor/motorctrl.c **** 
 1271              		.loc 1 148 13 is_stmt 1 view .LVU325
 1272 0118 04AD     		add	r5, sp, #16
 1273 011a 17AB     		add	r3, sp, #92
 1274 011c 93E80700 		ldm	r3, {r0, r1, r2}
 1275 0120 8DE80700 		stm	sp, {r0, r1, r2}
 1276 0124 14AB     		add	r3, sp, #80
 1277 0126 0ECB     		ldm	r3, {r1, r2, r3}
 1278 0128 2846     		mov	r0, r5
 1279 012a FFF7FEFF 		bl	_currmentloop
 1280              	.LVL97:
 150:../BLDCMotor/motorctrl.c ****             static unsigned short cnt = 0;
 1281              		.loc 1 150 13 view .LVU326
 150:../BLDCMotor/motorctrl.c ****             static unsigned short cnt = 0;
 1282              		.loc 1 150 34 is_stmt 0 view .LVU327
 1283 012e 84ED1C8A 		vstr.32	s16, [r4, #112]
 151:../BLDCMotor/motorctrl.c ****             if (cnt++ < 200)
 1284              		.loc 1 151 13 is_stmt 1 view .LVU328
 152:../BLDCMotor/motorctrl.c ****             {
 1285              		.loc 1 152 13 view .LVU329
 152:../BLDCMotor/motorctrl.c ****             {
 1286              		.loc 1 152 20 is_stmt 0 view .LVU330
 1287 0132 774B     		ldr	r3, .L77+40
 1288 0134 1A88     		ldrh	r2, [r3]
 1289 0136 0132     		adds	r2, r2, #1
 1290 0138 1A80     		strh	r2, [r3]	@ movhi
 155:../BLDCMotor/motorctrl.c ****             cnt = 0;
 1291              		.loc 1 155 13 is_stmt 1 view .LVU331
 156:../BLDCMotor/motorctrl.c ****             udq.q = 0.3f;
 1292              		.loc 1 156 13 view .LVU332
 156:../BLDCMotor/motorctrl.c ****             udq.q = 0.3f;
 1293              		.loc 1 156 17 is_stmt 0 view .LVU333
 1294 013a 0022     		movs	r2, #0
 1295 013c 1A80     		strh	r2, [r3]	@ movhi
 157:../BLDCMotor/motorctrl.c ****             udq.d = 0;
 1296              		.loc 1 157 13 is_stmt 1 view .LVU334
 157:../BLDCMotor/motorctrl.c ****             udq.d = 0;
 1297              		.loc 1 157 19 is_stmt 0 view .LVU335
 1298 013e 754B     		ldr	r3, .L77+44
 1299 0140 1193     		str	r3, [sp, #68]	@ float
 158:../BLDCMotor/motorctrl.c ****             alpbet_t uab;
 1300              		.loc 1 158 13 is_stmt 1 view .LVU336
 158:../BLDCMotor/motorctrl.c ****             alpbet_t uab;
 1301              		.loc 1 158 19 is_stmt 0 view .LVU337
 1302 0142 0023     		movs	r3, #0
 1303 0144 1093     		str	r3, [sp, #64]	@ float
 159:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, elec_theta - PI_2);  
 1304              		.loc 1 159 13 is_stmt 1 view .LVU338
 160:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 37


 1305              		.loc 1 160 13 view .LVU339
 160:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 1306              		.loc 1 160 19 is_stmt 0 view .LVU340
 1307 0146 0CAC     		add	r4, sp, #48
 1308 0148 139B     		ldr	r3, [sp, #76]
 1309 014a 0093     		str	r3, [sp]
 1310 014c 10AB     		add	r3, sp, #64
 1311 014e 0ECB     		ldm	r3, {r1, r2, r3}
 1312 0150 9FED710A 		vldr.32	s0, .L77+48
 1313 0154 38EE400A 		vsub.f32	s0, s16, s0
 1314 0158 2046     		mov	r0, r4
 1315 015a FFF7FEFF 		bl	_2r_2s
 1316              	.LVL98:
 161:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 1317              		.loc 1 161 13 is_stmt 1 view .LVU341
 161:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 1318              		.loc 1 161 19 is_stmt 0 view .LVU342
 1319 015e 0F9B     		ldr	r3, [sp, #60]
 1320 0160 0093     		str	r3, [sp]
 1321 0162 94E80E00 		ldm	r4, {r1, r2, r3}
 1322 0166 2846     		mov	r0, r5
 1323 0168 FFF7FEFF 		bl	_limit_voltagecircle
 1324              	.LVL99:
 1325 016c 95E80F00 		ldm	r5, {r0, r1, r2, r3}
 1326 0170 84E80F00 		stm	r4, {r0, r1, r2, r3}
 162:../BLDCMotor/motorctrl.c ****             break;
 1327              		.loc 1 162 13 is_stmt 1 view .LVU343
 1328 0174 DDED0D0A 		vldr.32	s1, [sp, #52]
 1329 0178 9DED0C0A 		vldr.32	s0, [sp, #48]
 1330 017c FFF7FEFF 		bl	_svpwm
 1331              	.LVL100:
 1332 0180 8DED1A0A 		vstr.32	s0, [sp, #104]
 1333 0184 CDED1B0A 		vstr.32	s1, [sp, #108]
 1334 0188 8DED1C1A 		vstr.32	s2, [sp, #112]
 1335 018c FFF7FEFF 		bl	motor_set_pwm
 1336              	.LVL101:
 163:../BLDCMotor/motorctrl.c ****         case CLOSELOOP:
 1337              		.loc 1 163 13 view .LVU344
 1338              	.L62:
 163:../BLDCMotor/motorctrl.c ****         case CLOSELOOP:
 1339              		.loc 1 163 13 is_stmt 0 view .LVU345
 1340              	.LBE3:
 225:../BLDCMotor/motorctrl.c **** 
 1341              		.loc 1 225 1 view .LVU346
 1342 0190 21B0     		add	sp, sp, #132
 1343              	.LCFI37:
 1344              		.cfi_remember_state
 1345              		.cfi_def_cfa_offset 28
 1346              		@ sp needed
 1347 0192 BDEC048B 		vldm	sp!, {d8-d9}
 1348              	.LCFI38:
 1349              		.cfi_restore 82
 1350              		.cfi_restore 83
 1351              		.cfi_restore 80
 1352              		.cfi_restore 81
 1353              		.cfi_def_cfa_offset 12
 1354 0196 30BD     		pop	{r4, r5, pc}
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 38


 1355              	.LVL102:
 1356              	.L67:
 1357              	.LCFI39:
 1358              		.cfi_restore_state
 225:../BLDCMotor/motorctrl.c **** 
 1359              		.loc 1 225 1 view .LVU347
 1360 0198 B0EE408A 		vmov.f32	s16, s0
 1361              	.LVL103:
 1362              	.LBB6:
 1363              	.LBB4:
 167:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(mec_theta);
 1364              		.loc 1 167 13 is_stmt 1 view .LVU348
 167:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(mec_theta);
 1365              		.loc 1 167 36 is_stmt 0 view .LVU349
 1366 019c 0121     		movs	r1, #1
 1367 019e 0020     		movs	r0, #0
 1368 01a0 FFF7FEFF 		bl	sensor_user_read
 1369              	.LVL104:
 168:../BLDCMotor/motorctrl.c ****             motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 1370              		.loc 1 168 13 is_stmt 1 view .LVU350
 168:../BLDCMotor/motorctrl.c ****             motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 1371              		.loc 1 168 26 is_stmt 0 view .LVU351
 1372 01a4 0068     		ldr	r0, [r0]
 1373              	.LVL105:
 168:../BLDCMotor/motorctrl.c ****             motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 1374              		.loc 1 168 26 view .LVU352
 1375 01a6 FFF7FEFF 		bl	_IQ20toF
 1376              	.LVL106:
 168:../BLDCMotor/motorctrl.c ****             motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 1377              		.loc 1 168 26 view .LVU353
 1378 01aa F0EE409A 		vmov.f32	s19, s0
 1379              	.LVL107:
 169:../BLDCMotor/motorctrl.c **** 
 1380              		.loc 1 169 13 is_stmt 1 view .LVU354
 169:../BLDCMotor/motorctrl.c **** 
 1381              		.loc 1 169 37 is_stmt 0 view .LVU355
 1382 01ae FFF7FEFF 		bl	motor_speedcale
 1383              	.LVL108:
 169:../BLDCMotor/motorctrl.c **** 
 1384              		.loc 1 169 35 view .LVU356
 1385 01b2 534C     		ldr	r4, .L77+24
 1386 01b4 84ED110A 		vstr.32	s0, [r4, #68]
 171:../BLDCMotor/motorctrl.c ****             elec_theta -= sg_MecThetaOffset;
 1387              		.loc 1 171 13 is_stmt 1 view .LVU357
 171:../BLDCMotor/motorctrl.c ****             elec_theta -= sg_MecThetaOffset;
 1388              		.loc 1 171 24 is_stmt 0 view .LVU358
 1389 01b8 B1EE0C0A 		vmov.f32	s0, #7.0e+0
 1390 01bc 69EE809A 		vmul.f32	s19, s19, s0
 1391              	.LVL109:
 172:../BLDCMotor/motorctrl.c **** 
 1392              		.loc 1 172 13 is_stmt 1 view .LVU359
 1393 01c0 564B     		ldr	r3, .L77+52
 1394 01c2 93ED000A 		vldr.32	s0, [r3]
 1395              	.LVL110:
 174:../BLDCMotor/motorctrl.c ****             speed_real = _IQ15toF(((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_FILTER))[0]);
 1396              		.loc 1 174 13 view .LVU360
 174:../BLDCMotor/motorctrl.c ****             speed_real = _IQ15toF(((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_FILTER))[0]);
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 39


 1397              		.loc 1 174 26 is_stmt 0 view .LVU361
 1398 01c6 39EEC00A 		vsub.f32	s0, s19, s0
 1399              	.LVL111:
 174:../BLDCMotor/motorctrl.c ****             speed_real = _IQ15toF(((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_FILTER))[0]);
 1400              		.loc 1 174 26 view .LVU362
 1401 01ca FFF7FEFF 		bl	_normalize_angle
 1402              	.LVL112:
 174:../BLDCMotor/motorctrl.c ****             speed_real = _IQ15toF(((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_FILTER))[0]);
 1403              		.loc 1 174 26 view .LVU363
 1404 01ce F0EE409A 		vmov.f32	s19, s0
 1405              	.LVL113:
 175:../BLDCMotor/motorctrl.c ****             motordebug.ele_angle = elec_theta;
 1406              		.loc 1 175 13 is_stmt 1 view .LVU364
 175:../BLDCMotor/motorctrl.c ****             motordebug.ele_angle = elec_theta;
 1407              		.loc 1 175 46 is_stmt 0 view .LVU365
 1408 01d2 0221     		movs	r1, #2
 1409 01d4 0020     		movs	r0, #0
 1410 01d6 FFF7FEFF 		bl	sensor_user_read
 1411              	.LVL114:
 175:../BLDCMotor/motorctrl.c ****             motordebug.ele_angle = elec_theta;
 1412              		.loc 1 175 26 view .LVU366
 1413 01da 0068     		ldr	r0, [r0]
 1414 01dc FFF7FEFF 		bl	_IQ15toF
 1415              	.LVL115:
 175:../BLDCMotor/motorctrl.c ****             motordebug.ele_angle = elec_theta;
 1416              		.loc 1 175 24 view .LVU367
 1417 01e0 4F4B     		ldr	r3, .L77+56
 1418 01e2 83ED000A 		vstr.32	s0, [r3]
 176:../BLDCMotor/motorctrl.c **** 
 1419              		.loc 1 176 13 is_stmt 1 view .LVU368
 176:../BLDCMotor/motorctrl.c **** 
 1420              		.loc 1 176 34 is_stmt 0 view .LVU369
 1421 01e6 C4ED1C9A 		vstr.32	s19, [r4, #112]
 191:../BLDCMotor/motorctrl.c ****             #if 0/*Èó≠ÁéØÊéßÂà∂*/
 1422              		.loc 1 191 13 is_stmt 1 view .LVU370
 191:../BLDCMotor/motorctrl.c ****             #if 0/*Èó≠ÁéØÊéßÂà∂*/
 1423              		.loc 1 191 18 is_stmt 0 view .LVU371
 1424 01ea 0023     		movs	r3, #0
 1425 01ec 0893     		str	r3, [sp, #32]	@ float
 1426 01ee 0993     		str	r3, [sp, #36]	@ float
 1427 01f0 0023     		movs	r3, #0
 1428 01f2 0A93     		str	r3, [sp, #40]
 1429 01f4 46F26663 		movw	r3, #26214
 1430 01f8 0B93     		str	r3, [sp, #44]
 199:../BLDCMotor/motorctrl.c ****                 {
 1431              		.loc 1 199 17 is_stmt 1 view .LVU372
 199:../BLDCMotor/motorctrl.c ****                 {
 1432              		.loc 1 199 31 is_stmt 0 view .LVU373
 1433 01fa D4ED127A 		vldr.32	s15, [r4, #72]
 199:../BLDCMotor/motorctrl.c ****                 {
 1434              		.loc 1 199 20 view .LVU374
 1435 01fe F5EEC07A 		vcmpe.f32	s15, #0
 1436 0202 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1437 0206 60D4     		bmi	.L76
 203:../BLDCMotor/motorctrl.c ****                     i_abc.b = -i_abc.b;
 1438              		.loc 1 203 21 is_stmt 1 view .LVU375
 203:../BLDCMotor/motorctrl.c ****                     i_abc.b = -i_abc.b;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 40


 1439              		.loc 1 203 31 is_stmt 0 view .LVU376
 1440 0208 F1EE497A 		vneg.f32	s15, s18
 203:../BLDCMotor/motorctrl.c ****                     i_abc.b = -i_abc.b;
 1441              		.loc 1 203 29 view .LVU377
 1442 020c CDED147A 		vstr.32	s15, [sp, #80]
 204:../BLDCMotor/motorctrl.c ****                     i_abc.c = -i_abc.c;
 1443              		.loc 1 204 21 is_stmt 1 view .LVU378
 204:../BLDCMotor/motorctrl.c ****                     i_abc.c = -i_abc.c;
 1444              		.loc 1 204 31 is_stmt 0 view .LVU379
 1445 0210 F1EE688A 		vneg.f32	s17, s17
 204:../BLDCMotor/motorctrl.c ****                     i_abc.c = -i_abc.c;
 1446              		.loc 1 204 29 view .LVU380
 1447 0214 CDED158A 		vstr.32	s17, [sp, #84]
 205:../BLDCMotor/motorctrl.c ****                     _currmentloop(i_abc,elec_theta);
 1448              		.loc 1 205 21 is_stmt 1 view .LVU381
 205:../BLDCMotor/motorctrl.c ****                     _currmentloop(i_abc,elec_theta);
 1449              		.loc 1 205 31 is_stmt 0 view .LVU382
 1450 0218 B1EE488A 		vneg.f32	s16, s16
 205:../BLDCMotor/motorctrl.c ****                     _currmentloop(i_abc,elec_theta);
 1451              		.loc 1 205 29 view .LVU383
 1452 021c 8DED168A 		vstr.32	s16, [sp, #88]
 206:../BLDCMotor/motorctrl.c ****                 }
 1453              		.loc 1 206 21 is_stmt 1 view .LVU384
 1454 0220 17AB     		add	r3, sp, #92
 1455 0222 93E80700 		ldm	r3, {r0, r1, r2}
 1456 0226 8DE80700 		stm	sp, {r0, r1, r2}
 1457 022a 14AB     		add	r3, sp, #80
 1458 022c 0ECB     		ldm	r3, {r1, r2, r3}
 1459 022e B0EE690A 		vmov.f32	s0, s19
 1460 0232 04A8     		add	r0, sp, #16
 1461 0234 FFF7FEFF 		bl	_currmentloop
 1462              	.LVL116:
 1463              	.L72:
 209:../BLDCMotor/motorctrl.c ****                 udq.d = 0.0f;
 1464              		.loc 1 209 17 discriminator 2 view .LVU385
 209:../BLDCMotor/motorctrl.c ****                 udq.d = 0.0f;
 1465              		.loc 1 209 23 is_stmt 0 discriminator 2 view .LVU386
 1466 0238 3A4B     		ldr	r3, .L77+60
 1467 023a 0993     		str	r3, [sp, #36]	@ float
 210:../BLDCMotor/motorctrl.c ****                 // udq.q = _speedloop(300.0f,motordebug.real_speed);
 1468              		.loc 1 210 17 is_stmt 1 discriminator 2 view .LVU387
 213:../BLDCMotor/motorctrl.c ****             float pwm_phase = elec_theta + 1.5f * current_meas_period * speed_real*7.0;
 1469              		.loc 1 213 13 discriminator 2 view .LVU388
 214:../BLDCMotor/motorctrl.c ****             motordebug.self_ele_theta = pwm_phase;
 1470              		.loc 1 214 13 discriminator 2 view .LVU389
 214:../BLDCMotor/motorctrl.c ****             motordebug.self_ele_theta = pwm_phase;
 1471              		.loc 1 214 49 is_stmt 0 discriminator 2 view .LVU390
 1472 023c 3A4B     		ldr	r3, .L77+64
 1473 023e D3ED007A 		vldr.32	s15, [r3]
 1474 0242 B7EE087A 		vmov.f32	s14, #1.5e+0
 1475 0246 67EE877A 		vmul.f32	s15, s15, s14
 214:../BLDCMotor/motorctrl.c ****             motordebug.self_ele_theta = pwm_phase;
 1476              		.loc 1 214 71 discriminator 2 view .LVU391
 1477 024a 354B     		ldr	r3, .L77+56
 1478 024c 93ED007A 		vldr.32	s14, [r3]
 1479 0250 67EE877A 		vmul.f32	s15, s15, s14
 1480 0254 17EE900A 		vmov	r0, s15
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 41


 1481 0258 FFF7FEFF 		bl	__aeabi_f2d
 1482              	.LVL117:
 214:../BLDCMotor/motorctrl.c ****             motordebug.self_ele_theta = pwm_phase;
 1483              		.loc 1 214 83 discriminator 2 view .LVU392
 1484 025c 0022     		movs	r2, #0
 1485 025e 334B     		ldr	r3, .L77+68
 1486 0260 FFF7FEFF 		bl	__aeabi_dmul
 1487              	.LVL118:
 1488 0264 0446     		mov	r4, r0
 1489 0266 0D46     		mov	r5, r1
 214:../BLDCMotor/motorctrl.c ****             motordebug.self_ele_theta = pwm_phase;
 1490              		.loc 1 214 42 discriminator 2 view .LVU393
 1491 0268 19EE900A 		vmov	r0, s19
 1492 026c FFF7FEFF 		bl	__aeabi_f2d
 1493              	.LVL119:
 1494 0270 2246     		mov	r2, r4
 1495 0272 2B46     		mov	r3, r5
 1496 0274 FFF7FEFF 		bl	__aeabi_dadd
 1497              	.LVL120:
 214:../BLDCMotor/motorctrl.c ****             motordebug.self_ele_theta = pwm_phase;
 1498              		.loc 1 214 19 discriminator 2 view .LVU394
 1499 0278 FFF7FEFF 		bl	__aeabi_d2f
 1500              	.LVL121:
 1501 027c 00EE100A 		vmov	s0, r0
 1502              	.LVL122:
 215:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, pwm_phase);  
 1503              		.loc 1 215 13 is_stmt 1 discriminator 2 view .LVU395
 215:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, pwm_phase);  
 1504              		.loc 1 215 39 is_stmt 0 discriminator 2 view .LVU396
 1505 0280 1F4B     		ldr	r3, .L77+24
 1506 0282 5867     		str	r0, [r3, #116]	@ float
 216:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 1507              		.loc 1 216 13 is_stmt 1 discriminator 2 view .LVU397
 216:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 1508              		.loc 1 216 19 is_stmt 0 discriminator 2 view .LVU398
 1509 0284 0CAC     		add	r4, sp, #48
 1510 0286 0B9B     		ldr	r3, [sp, #44]
 1511 0288 0093     		str	r3, [sp]
 1512 028a 08AB     		add	r3, sp, #32
 1513 028c 0ECB     		ldm	r3, {r1, r2, r3}
 1514 028e 2046     		mov	r0, r4
 1515              	.LVL123:
 216:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 1516              		.loc 1 216 19 discriminator 2 view .LVU399
 1517 0290 FFF7FEFF 		bl	_2r_2s
 1518              	.LVL124:
 217:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 1519              		.loc 1 217 13 is_stmt 1 discriminator 2 view .LVU400
 217:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 1520              		.loc 1 217 19 is_stmt 0 discriminator 2 view .LVU401
 1521 0294 04AD     		add	r5, sp, #16
 1522 0296 0F9B     		ldr	r3, [sp, #60]
 1523 0298 0093     		str	r3, [sp]
 1524 029a 94E80E00 		ldm	r4, {r1, r2, r3}
 1525 029e 2846     		mov	r0, r5
 1526 02a0 FFF7FEFF 		bl	_limit_voltagecircle
 1527              	.LVL125:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 42


 1528 02a4 95E80F00 		ldm	r5, {r0, r1, r2, r3}
 1529 02a8 84E80F00 		stm	r4, {r0, r1, r2, r3}
 218:../BLDCMotor/motorctrl.c **** #endif
 1530              		.loc 1 218 13 is_stmt 1 discriminator 2 view .LVU402
 1531 02ac DDED0D0A 		vldr.32	s1, [sp, #52]
 1532 02b0 9DED0C0A 		vldr.32	s0, [sp, #48]
 1533 02b4 FFF7FEFF 		bl	_svpwm
 1534              	.LVL126:
 1535 02b8 8DED1D0A 		vstr.32	s0, [sp, #116]
 1536 02bc CDED1E0A 		vstr.32	s1, [sp, #120]
 1537 02c0 8DED1F1A 		vstr.32	s2, [sp, #124]
 1538 02c4 FFF7FEFF 		bl	motor_set_pwm
 1539              	.LVL127:
 1540              	.LBE4:
 221:../BLDCMotor/motorctrl.c ****         default:
 1541              		.loc 1 221 13 discriminator 2 view .LVU403
 1542              	.LBE6:
 225:../BLDCMotor/motorctrl.c **** 
 1543              		.loc 1 225 1 is_stmt 0 discriminator 2 view .LVU404
 1544 02c8 62E7     		b	.L62
 1545              	.L76:
 1546              	.LBB7:
 1547              	.LBB5:
 201:../BLDCMotor/motorctrl.c ****                 }else{
 1548              		.loc 1 201 17 is_stmt 1 view .LVU405
 1549 02ca 17AB     		add	r3, sp, #92
 1550 02cc 93E80700 		ldm	r3, {r0, r1, r2}
 1551 02d0 8DE80700 		stm	sp, {r0, r1, r2}
 1552 02d4 14AB     		add	r3, sp, #80
 1553 02d6 0ECB     		ldm	r3, {r1, r2, r3}
 1554 02d8 9FED0F0A 		vldr.32	s0, .L77+48
 1555 02dc 39EE800A 		vadd.f32	s0, s19, s0
 1556 02e0 04A8     		add	r0, sp, #16
 1557 02e2 FFF7FEFF 		bl	_currmentloop
 1558              	.LVL128:
 1559 02e6 A7E7     		b	.L72
 1560              	.L78:
 1561              		.align	2
 1562              	.L77:
 1563 02e8 00000000 		.word	.LANCHOR11
 1564 02ec 00000000 		.word	.LANCHOR12
 1565 02f0 00000000 		.word	.LANCHOR13
 1566 02f4 3333B33E 		.word	1051931443
 1567 02f8 FFAFB23E 		.word	1051897855
 1568 02fc 00000000 		.word	.LANCHOR0
 1569 0300 00000000 		.word	.LANCHOR1
 1570 0304 00000000 		.word	.LANCHOR14
 1571 0308 00000000 		.word	.LC0
 1572 030c 295C0F3F 		.word	1057971241
 1573 0310 00000000 		.word	.LANCHOR15
 1574 0314 9A99993E 		.word	1050253722
 1575 0318 D80FC93F 		.word	1070141400
 1576 031c 00000000 		.word	.LANCHOR9
 1577 0320 00000000 		.word	.LANCHOR16
 1578 0324 CDCCCC3E 		.word	1053609165
 1579 0328 00000000 		.word	current_meas_period
 1580 032c 00001C40 		.word	1075576832
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 43


 1581              	.LBE5:
 1582              	.LBE7:
 1583              		.cfi_endproc
 1584              	.LFE236:
 1586              		.global	test_c
 1587              		.global	test_b
 1588              		.global	test_a
 1589              		.global	c1
 1590              		.global	b1
 1591              		.global	a1
 1592              		.global	speed_real
 1593              		.global	motordebug
 1594              		.global	mt_param
 1595              		.section	.bss._state.6,"aw",%nobits
 1596              		.align	1
 1597              		.set	.LANCHOR10,. + 0
 1600              	_state.6:
 1601 0000 0000     		.space	2
 1602              		.section	.bss.a1,"aw",%nobits
 1603              		.align	2
 1604              		.set	.LANCHOR11,. + 0
 1607              	a1:
 1608 0000 00000000 		.space	4
 1609              		.section	.bss.b1,"aw",%nobits
 1610              		.align	2
 1611              		.set	.LANCHOR12,. + 0
 1614              	b1:
 1615 0000 00000000 		.space	4
 1616              		.section	.bss.c1,"aw",%nobits
 1617              		.align	2
 1618              		.set	.LANCHOR13,. + 0
 1621              	c1:
 1622 0000 00000000 		.space	4
 1623              		.section	.bss.cnt.1,"aw",%nobits
 1624              		.align	1
 1625              		.set	.LANCHOR2,. + 0
 1628              	cnt.1:
 1629 0000 0000     		.space	2
 1630              		.section	.bss.cnt.4,"aw",%nobits
 1631              		.align	1
 1632              		.set	.LANCHOR15,. + 0
 1635              	cnt.4:
 1636 0000 0000     		.space	2
 1637              		.section	.bss.cnt_.2,"aw",%nobits
 1638              		.align	1
 1639              		.set	.LANCHOR8,. + 0
 1642              	cnt_.2:
 1643 0000 0000     		.space	2
 1644              		.section	.bss.motordebug,"aw",%nobits
 1645              		.align	2
 1646              		.set	.LANCHOR1,. + 0
 1649              	motordebug:
 1650 0000 00000000 		.space	136
 1650      00000000 
 1650      00000000 
 1650      00000000 
 1650      00000000 
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 44


 1651              		.section	.bss.mt_param,"aw",%nobits
 1652              		.align	2
 1653              		.set	.LANCHOR0,. + 0
 1656              	mt_param:
 1657 0000 00000000 		.space	116
 1657      00000000 
 1657      00000000 
 1657      00000000 
 1657      00000000 
 1658              		.section	.bss.pre_theta.0,"aw",%nobits
 1659              		.align	2
 1660              		.set	.LANCHOR3,. + 0
 1663              	pre_theta.0:
 1664 0000 00000000 		.space	4
 1665              		.section	.bss.sg_MecThetaOffset,"aw",%nobits
 1666              		.align	2
 1667              		.set	.LANCHOR9,. + 0
 1670              	sg_MecThetaOffset:
 1671 0000 00000000 		.space	4
 1672              		.section	.bss.speed_real,"aw",%nobits
 1673              		.align	2
 1674              		.set	.LANCHOR16,. + 0
 1677              	speed_real:
 1678 0000 00000000 		.space	4
 1679              		.section	.bss.state0_.5,"aw",%nobits
 1680              		.align	1
 1681              		.set	.LANCHOR14,. + 0
 1684              	state0_.5:
 1685 0000 0000     		.space	2
 1686              		.section	.bss.test_a,"aw",%nobits
 1687              		.align	2
 1688              		.set	.LANCHOR4,. + 0
 1691              	test_a:
 1692 0000 00000000 		.space	4
 1693              		.section	.bss.test_b,"aw",%nobits
 1694              		.align	2
 1695              		.set	.LANCHOR5,. + 0
 1698              	test_b:
 1699 0000 00000000 		.space	4
 1700              		.section	.bss.test_c,"aw",%nobits
 1701              		.align	2
 1702              		.set	.LANCHOR6,. + 0
 1705              	test_c:
 1706 0000 00000000 		.space	4
 1707              		.section	.data.state_.3,"aw"
 1708              		.align	1
 1709              		.set	.LANCHOR7,. + 0
 1712              	state_.3:
 1713 0000 0100     		.short	1
 1714              		.text
 1715              	.Letext0:
 1716              		.file 2 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\machine\\_defa
 1717              		.file 3 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\sys\\_stdint.h
 1718              		.file 4 "../Common/method/pid.h"
 1719              		.file 5 "../Common/method/filter.h"
 1720              		.file 6 "../Common/IQMath/ti/IQmathLib.h"
 1721              		.file 7 "../BLDCMotor/motorctrl_common.h"
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 45


 1722              		.file 8 "./Board/board.h"
 1723              		.file 9 "../BLDCMotor/motor_protocol.h"
 1724              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_cortex.h"
 1725              		.file 11 "../Sensor/sensor.h"
 1726              		.file 12 "Inc/tim.h"
 1727              		.file 13 "Inc/adc.h"
 1728              		.file 14 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\math.h"
 1729              		.file 15 "../Common/debuglog/SEGGER_RTT_V792h/RTT/SEGGER_RTT.h"
 1730              		.file 16 "../BLDCMotor/./motorctrl.h"
 1731              		.file 17 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\string.h"
 1732              		.file 18 "<built-in>"
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 46


DEFINED SYMBOLS
                            *ABS*:00000000 motorctrl.c
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:20     .text.mc_param_init:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:25     .text.mc_param_init:00000000 mc_param_init
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:97     .text.mc_param_init:0000008c $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:104    .text.motor_enable:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:109    .text.motor_enable:00000000 motor_enable
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:135    .text.trigger_software_reset:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:140    .text.trigger_software_reset:00000000 trigger_software_reset
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:160    .text.motor_disable:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:165    .text.motor_disable:00000000 motor_disable
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:188    .text.mc_param_deinit:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:193    .text.mc_param_deinit:00000000 mc_param_deinit
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:221    .text.mc_param_deinit:00000018 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:227    .text.motor_speedcale:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:232    .text.motor_speedcale:00000000 motor_speedcale
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:367    .text.motor_speedcale:000000bc $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:379    .text._currmentloop:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:384    .text._currmentloop:00000000 _currmentloop
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:560    .text._currmentloop:000000d0 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:566    .text.motor_set_pwm:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:571    .text.motor_set_pwm:00000000 motor_set_pwm
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:611    .text.motor_set_pwm:0000002c $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:618    .text._get_angleoffset:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:623    .text._get_angleoffset:00000000 _get_angleoffset
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:769    .text._get_angleoffset:000000ac $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:778    .text.motortctrl_process:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:784    .text.motortctrl_process:00000000 motortctrl_process
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:809    .text.motortctrl_process:00000012 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:813    .text.motortctrl_process:00000016 $t
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:911    .text.motortctrl_process:00000090 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:920    .text._limit_voltagecircle:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:926    .text._limit_voltagecircle:00000000 _limit_voltagecircle
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1042   .rodata._50uscycle_process.str1.4:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1048   .text._50uscycle_process:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1054   .text._50uscycle_process:00000000 _50uscycle_process
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1177   .text._50uscycle_process:0000009c $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1563   .text._50uscycle_process:000002e8 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1705   .bss.test_c:00000000 test_c
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1698   .bss.test_b:00000000 test_b
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1691   .bss.test_a:00000000 test_a
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1621   .bss.c1:00000000 c1
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1614   .bss.b1:00000000 b1
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1607   .bss.a1:00000000 a1
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1677   .bss.speed_real:00000000 speed_real
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1649   .bss.motordebug:00000000 motordebug
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1656   .bss.mt_param:00000000 mt_param
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1596   .bss._state.6:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1600   .bss._state.6:00000000 _state.6
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1603   .bss.a1:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1610   .bss.b1:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1617   .bss.c1:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1624   .bss.cnt.1:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1628   .bss.cnt.1:00000000 cnt.1
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1631   .bss.cnt.4:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1635   .bss.cnt.4:00000000 cnt.4
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1638   .bss.cnt_.2:00000000 $d
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s 			page 47


C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1642   .bss.cnt_.2:00000000 cnt_.2
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1645   .bss.motordebug:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1652   .bss.mt_param:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1659   .bss.pre_theta.0:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1663   .bss.pre_theta.0:00000000 pre_theta.0
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1666   .bss.sg_MecThetaOffset:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1670   .bss.sg_MecThetaOffset:00000000 sg_MecThetaOffset
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1673   .bss.speed_real:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1680   .bss.state0_.5:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1684   .bss.state0_.5:00000000 state0_.5
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1687   .bss.test_a:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1694   .bss.test_b:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1701   .bss.test_c:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1708   .data.state_.3:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1712   .data.state_.3:00000000 state_.3
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1182   .text._50uscycle_process:000000a1 $d
C:\Users\57308\AppData\Local\Temp\ccRwHSsa.s:1182   .text._50uscycle_process:000000a2 $t

UNDEFINED SYMBOLS
pid_init
lowfilter_init
tim_pwm_enable
tim_tigger_adc
adc_start
HAL_NVIC_SystemReset
tim_pwm_disable
adc_stop
memset
lowfilter_cale
_3s_2s
_2s_2r
pid_contrl
tim_set_pwm
_2r_2s
_svpwm
sensor_user_read
_IQ20toF
motorprotocol_process
strcmp
strlen
motorprotocol_tramit
sg_commandmap
__aeabi_f2d
__aeabi_d2f
sqrt
__aeabi_dmul
__aeabi_dadd
SEGGER_RTT_printf
_normalize_angle
_IQ15toF
current_meas_period
