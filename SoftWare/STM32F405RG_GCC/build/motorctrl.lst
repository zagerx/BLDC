ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"motorctrl.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.motor_enable,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	motor_enable:
  26              	.LFB241:
  27              		.file 1 "../BLDCMotor/motorctrl.c"
   1:../BLDCMotor/motorctrl.c **** #include "./motorctrl.h"
   2:../BLDCMotor/motorctrl.c **** #include "debuglog.h"
   3:../BLDCMotor/motorctrl.c **** #include "motorctrl_common.h"
   4:../BLDCMotor/motorctrl.c **** 
   5:../BLDCMotor/motorctrl.c **** #include "board.h"
   6:../BLDCMotor/motorctrl.c **** #include "string.h"
   7:../BLDCMotor/motorctrl.c **** 
   8:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
   9:../BLDCMotor/motorctrl.c **** #endif
  10:../BLDCMotor/motorctrl.c **** #define Q15_PI_2                   (51471)
  11:../BLDCMotor/motorctrl.c **** #define Q15_2PI                    (205884)
  12:../BLDCMotor/motorctrl.c **** #define PI_2                       (1.570796f)
  13:../BLDCMotor/motorctrl.c **** #define MOTORCTRL_PERCI            (1)
  14:../BLDCMotor/motorctrl.c **** 
  15:../BLDCMotor/motorctrl.c **** enum{
  16:../BLDCMotor/motorctrl.c ****     MOTOR_ZERO,
  17:../BLDCMotor/motorctrl.c ****     MOTOR_INIT,
  18:../BLDCMotor/motorctrl.c ****     MOTOR_IDLE,
  19:../BLDCMotor/motorctrl.c ****     MOTOR_START, 
  20:../BLDCMotor/motorctrl.c ****     MOTOR_RUNING,
  21:../BLDCMotor/motorctrl.c ****     MOTOR_STOP,
  22:../BLDCMotor/motorctrl.c **** };
  23:../BLDCMotor/motorctrl.c **** 
  24:../BLDCMotor/motorctrl.c **** motordebug_t sg_motordebug = {0};
  25:../BLDCMotor/motorctrl.c **** typedef struct
  26:../BLDCMotor/motorctrl.c **** {
  27:../BLDCMotor/motorctrl.c ****     unsigned char state;
  28:../BLDCMotor/motorctrl.c ****     unsigned short cnt;
  29:../BLDCMotor/motorctrl.c **** }motorctrl_t;
  30:../BLDCMotor/motorctrl.c **** 
  31:../BLDCMotor/motorctrl.c **** static dq_t _currmentloop(abc_t i_abc,float ele_theta);
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 2


  32:../BLDCMotor/motorctrl.c **** static short _get_angleoffset(void);
  33:../BLDCMotor/motorctrl.c **** static void motor_enable(void);
  34:../BLDCMotor/motorctrl.c **** static void motor_disable(void);
  35:../BLDCMotor/motorctrl.c **** static void motor_set_pwm(duty_t temp);
  36:../BLDCMotor/motorctrl.c **** static void sg_debug_clear(void)
  37:../BLDCMotor/motorctrl.c **** {
  38:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_targe =0.0f;
  39:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_targe =0.0f;
  40:../BLDCMotor/motorctrl.c ****     sg_motordebug.ele_angle = 0.0f;
  41:../BLDCMotor/motorctrl.c ****     memset(&sg_motordebug,0,sizeof(sg_motordebug)-4);
  42:../BLDCMotor/motorctrl.c **** }
  43:../BLDCMotor/motorctrl.c **** alpbet_t _limit_voltagecircle(alpbet_t raw_uab);
  44:../BLDCMotor/motorctrl.c **** static float motor_speedcale(float cur_theta);
  45:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real);
  46:../BLDCMotor/motorctrl.c **** 
  47:../BLDCMotor/motorctrl.c **** motorctrl_t g_Motor1 = {
  48:../BLDCMotor/motorctrl.c ****     .state = MOTOR_INIT,
  49:../BLDCMotor/motorctrl.c ****     .cnt = 0,
  50:../BLDCMotor/motorctrl.c **** };
  51:../BLDCMotor/motorctrl.c **** static volatile float sg_MecThetaOffset = 0.0f;
  52:../BLDCMotor/motorctrl.c **** static lowfilter_t sg_elefilter[3];
  53:../BLDCMotor/motorctrl.c **** lowfilter_t sg_speedfilter = {0.0f};
  54:../BLDCMotor/motorctrl.c **** pid_cb_t test_d_pid = {0};
  55:../BLDCMotor/motorctrl.c **** static pid_cb_t *sgp_curloop_d_pid;
  56:../BLDCMotor/motorctrl.c **** static pid_cb_t *sgp_curloop_q_pid;
  57:../BLDCMotor/motorctrl.c **** static pid_cb_t *sgp_speed_pid;
  58:../BLDCMotor/motorctrl.c **** static pid_cb_t sg_speed_pid;
  59:../BLDCMotor/motorctrl.c **** static curloop_t sg_curloop_param;
  60:../BLDCMotor/motorctrl.c **** 
  61:../BLDCMotor/motorctrl.c **** 
  62:../BLDCMotor/motorctrl.c **** void motortctrl_process(void)
  63:../BLDCMotor/motorctrl.c **** {
  64:../BLDCMotor/motorctrl.c ****     char rec_buf[64];
  65:../BLDCMotor/motorctrl.c ****     char cnt = 0;
  66:../BLDCMotor/motorctrl.c ****     // if (readline_fromPC(rec_buf,sizeof(rec_buf)))
  67:../BLDCMotor/motorctrl.c ****     // {
  68:../BLDCMotor/motorctrl.c ****     //     motorprotocol_pause(rec_buf);
  69:../BLDCMotor/motorctrl.c ****     // }
  70:../BLDCMotor/motorctrl.c ****     motorprotocol_process();
  71:../BLDCMotor/motorctrl.c ****     switch (g_Motor1.state)
  72:../BLDCMotor/motorctrl.c ****     {
  73:../BLDCMotor/motorctrl.c ****     case MOTOR_INIT:
  74:../BLDCMotor/motorctrl.c ****         // if (sg_motordebug.motor_stat != 4)
  75:../BLDCMotor/motorctrl.c ****         // {
  76:../BLDCMotor/motorctrl.c ****         //     break;
  77:../BLDCMotor/motorctrl.c ****         // }
  78:../BLDCMotor/motorctrl.c ****         foc_paraminit();
  79:../BLDCMotor/motorctrl.c ****         lowfilter_init(&sg_speedfilter,80);
  80:../BLDCMotor/motorctrl.c ****         motor_enable();
  81:../BLDCMotor/motorctrl.c ****         g_Motor1.state = MOTOR_RUNING;
  82:../BLDCMotor/motorctrl.c ****         break;
  83:../BLDCMotor/motorctrl.c **** 
  84:../BLDCMotor/motorctrl.c ****     case MOTOR_RUNING:
  85:../BLDCMotor/motorctrl.c ****         {
  86:../BLDCMotor/motorctrl.c ****             if (sg_motordebug.motor_statue_To == "motor stop")
  87:../BLDCMotor/motorctrl.c ****             {
  88:../BLDCMotor/motorctrl.c ****                 g_Motor1.state = MOTOR_STOP;
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 3


  89:../BLDCMotor/motorctrl.c ****             }
  90:../BLDCMotor/motorctrl.c ****         }
  91:../BLDCMotor/motorctrl.c ****         break;
  92:../BLDCMotor/motorctrl.c **** 
  93:../BLDCMotor/motorctrl.c ****     case MOTOR_STOP:
  94:../BLDCMotor/motorctrl.c ****         motor_disable();
  95:../BLDCMotor/motorctrl.c ****         break;
  96:../BLDCMotor/motorctrl.c ****     default:
  97:../BLDCMotor/motorctrl.c ****         break;
  98:../BLDCMotor/motorctrl.c ****     }
  99:../BLDCMotor/motorctrl.c **** }
 100:../BLDCMotor/motorctrl.c **** /*------------Âë®ÊúüÊÄßË¢´Ë∞ÉÁî®----------------*/
 101:../BLDCMotor/motorctrl.c **** extern  duty_t sg_duty;
 102:../BLDCMotor/motorctrl.c **** 
 103:../BLDCMotor/motorctrl.c **** void _50uscycle_process(unsigned int *abc_vale,float _elec_theta)
 104:../BLDCMotor/motorctrl.c **** {
 105:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 106:../BLDCMotor/motorctrl.c ****     int32_t Q15_Mechtheta;    
 107:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 108:../BLDCMotor/motorctrl.c ****     abc_t i_abc;
 109:../BLDCMotor/motorctrl.c ****     dq_t udq;
 110:../BLDCMotor/motorctrl.c **** 
 111:../BLDCMotor/motorctrl.c **** /*----------------‰∏âÁõ∏ÁîµÊµÅÂ§ÑÁêÜ------------------------------*/    
 112:../BLDCMotor/motorctrl.c **** #if 1
 113:../BLDCMotor/motorctrl.c ****     float Ia,Ib,Ic;
 114:../BLDCMotor/motorctrl.c ****     int32_t a1,b1,c1;
 115:../BLDCMotor/motorctrl.c ****     a1 = abc_vale[0] - A_ADCCHANNL_OFFSET;
 116:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 117:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 118:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ia = a1;
 119:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 120:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 121:../BLDCMotor/motorctrl.c ****     // Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 122:../BLDCMotor/motorctrl.c ****     Ic = -Ia - Ib;
 123:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 124:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 125:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 126:../BLDCMotor/motorctrl.c **** 
 127:../BLDCMotor/motorctrl.c **** #endif
 128:../BLDCMotor/motorctrl.c **** 
 129:../BLDCMotor/motorctrl.c ****     enum{
 130:../BLDCMotor/motorctrl.c ****         OFFSET=0,
 131:../BLDCMotor/motorctrl.c ****         OPENLOOP,
 132:../BLDCMotor/motorctrl.c ****         CLOSELOOP,
 133:../BLDCMotor/motorctrl.c ****         SPEEDLOOP,
 134:../BLDCMotor/motorctrl.c ****         IDLE,
 135:../BLDCMotor/motorctrl.c ****     };
 136:../BLDCMotor/motorctrl.c ****     static short state0_ = OFFSET;
 137:../BLDCMotor/motorctrl.c ****     switch (state0_)
 138:../BLDCMotor/motorctrl.c ****     {
 139:../BLDCMotor/motorctrl.c ****         case OFFSET:
 140:../BLDCMotor/motorctrl.c ****             if (_get_angleoffset() != 0)
 141:../BLDCMotor/motorctrl.c ****             {
 142:../BLDCMotor/motorctrl.c ****                 break;
 143:../BLDCMotor/motorctrl.c ****             }
 144:../BLDCMotor/motorctrl.c ****             USER_DEBUG_NORMAL("enter IDLE\r\n");
 145:../BLDCMotor/motorctrl.c ****             state0_ = CLOSELOOP;
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 4


 146:../BLDCMotor/motorctrl.c ****             break;
 147:../BLDCMotor/motorctrl.c ****         case IDLE:
 148:../BLDCMotor/motorctrl.c ****             if (sg_motordebug.id_targe != 0.0f || sg_motordebug.iq_targe != 0.0f)
 149:../BLDCMotor/motorctrl.c ****             {
 150:../BLDCMotor/motorctrl.c ****                 sg_motordebug.ele_angle = 0.0f;
 151:../BLDCMotor/motorctrl.c ****                 state0_ = SPEEDLOOP;
 152:../BLDCMotor/motorctrl.c ****             }
 153:../BLDCMotor/motorctrl.c ****             break;
 154:../BLDCMotor/motorctrl.c ****         case SPEEDLOOP:
 155:../BLDCMotor/motorctrl.c ****             Q15_Mechtheta = ((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_COV))[0];
 156:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(Q15_Mechtheta);
 157:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 158:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 159:../BLDCMotor/motorctrl.c ****             elec_theta -= sg_MecThetaOffset;
 160:../BLDCMotor/motorctrl.c **** 
 161:../BLDCMotor/motorctrl.c ****             elec_theta = _normalize_angle(elec_theta);
 162:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 163:../BLDCMotor/motorctrl.c **** 
 164:../BLDCMotor/motorctrl.c ****             sg_motordebug.ele_angle = elec_theta;    
 165:../BLDCMotor/motorctrl.c ****             static unsigned short cnt = 0;
 166:../BLDCMotor/motorctrl.c ****             if (cnt++ < 200)
 167:../BLDCMotor/motorctrl.c ****             {
 168:../BLDCMotor/motorctrl.c ****                 // break;
 169:../BLDCMotor/motorctrl.c ****             }
 170:../BLDCMotor/motorctrl.c ****             cnt = 0;
 171:../BLDCMotor/motorctrl.c ****             udq.q = 0.3f;
 172:../BLDCMotor/motorctrl.c ****             udq.d = 0;
 173:../BLDCMotor/motorctrl.c ****             alpbet_t uab;
 174:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, elec_theta - PI_2);  
 175:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 176:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 177:../BLDCMotor/motorctrl.c ****             break;
 178:../BLDCMotor/motorctrl.c ****         case CLOSELOOP:
 179:../BLDCMotor/motorctrl.c ****         {
 180:../BLDCMotor/motorctrl.c ****             //Ëé∑ÂèñÁîµËßíÂ∫¶
 181:../BLDCMotor/motorctrl.c ****             Q15_Mechtheta = ((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_COV))[0];
 182:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(Q15_Mechtheta);
 183:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 184:../BLDCMotor/motorctrl.c **** 
 185:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 186:../BLDCMotor/motorctrl.c ****             elec_theta -= sg_MecThetaOffset;
 187:../BLDCMotor/motorctrl.c **** 
 188:../BLDCMotor/motorctrl.c ****             elec_theta = _normalize_angle(elec_theta);
 189:../BLDCMotor/motorctrl.c ****             sg_motordebug.ele_angle = elec_theta;
 190:../BLDCMotor/motorctrl.c **** 
 191:../BLDCMotor/motorctrl.c **** #if 0//ÂºÄÁéØ
 192:../BLDCMotor/motorctrl.c ****             // _currmentloop(i_abc,elec_theta);
 193:../BLDCMotor/motorctrl.c ****             dq_t udq = {0.0f,0.4f,_IQ15(0.0f),_IQ15(0.0f)};
 194:../BLDCMotor/motorctrl.c ****             alpbet_t uab,uab_q15;
 195:../BLDCMotor/motorctrl.c ****             if(sg_motordebug.self_ele_theta>_2PI)
 196:../BLDCMotor/motorctrl.c ****             {
 197:../BLDCMotor/motorctrl.c ****                 sg_motordebug.self_ele_theta = 0.0f;
 198:../BLDCMotor/motorctrl.c ****             }
 199:../BLDCMotor/motorctrl.c ****             sg_motordebug.self_ele_theta += 0.001f;
 200:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, sg_motordebug.self_ele_theta); 
 201:../BLDCMotor/motorctrl.c ****             dut01 = _svpwm(uab.alpha,uab.beta);
 202:../BLDCMotor/motorctrl.c ****             motor_set_pwm(dut01);
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 5


 203:../BLDCMotor/motorctrl.c **** #else
 204:../BLDCMotor/motorctrl.c ****             dq_t udq = {0.0f,0.0f,_IQ15(0.0f),_IQ15(0.8f)};
 205:../BLDCMotor/motorctrl.c ****             #if 0/*Èó≠ÁéØÊéßÂà∂*/
 206:../BLDCMotor/motorctrl.c ****                 udq = _currmentloop(i_abc,elec_theta - PI_2);
 207:../BLDCMotor/motorctrl.c ****                 // udq.d = 0.0f;
 208:../BLDCMotor/motorctrl.c ****                 // udq.q = 0.6f;
 209:../BLDCMotor/motorctrl.c ****                 // udq.d = sg_motordebug.id_targe;
 210:../BLDCMotor/motorctrl.c ****                 udq.q = sg_motordebug.iq_targe;
 211:../BLDCMotor/motorctrl.c ****             #else
 212:../BLDCMotor/motorctrl.c ****                 if (sg_motordebug.iq_targe < 0.0f)
 213:../BLDCMotor/motorctrl.c ****                 {
 214:../BLDCMotor/motorctrl.c ****                 _currmentloop(i_abc,elec_theta + PI_2);
 215:../BLDCMotor/motorctrl.c ****                 }else{
 216:../BLDCMotor/motorctrl.c ****                     i_abc.a = -i_abc.a;
 217:../BLDCMotor/motorctrl.c ****                     i_abc.b = -i_abc.b;
 218:../BLDCMotor/motorctrl.c ****                     i_abc.c = -i_abc.c;
 219:../BLDCMotor/motorctrl.c ****                     _currmentloop(i_abc,elec_theta);
 220:../BLDCMotor/motorctrl.c ****                 }
 221:../BLDCMotor/motorctrl.c ****                 // udq.d = sg_motordebug.id_targe;
 222:../BLDCMotor/motorctrl.c ****                 udq.q = 0.4f;
 223:../BLDCMotor/motorctrl.c ****                 udq.d = 0.0f;
 224:../BLDCMotor/motorctrl.c ****                 // udq.q = _speedloop(300.0f,sg_motordebug.real_speed);
 225:../BLDCMotor/motorctrl.c ****             #endif
 226:../BLDCMotor/motorctrl.c ****             alpbet_t uab;
 227:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, elec_theta);  
 228:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 229:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 230:../BLDCMotor/motorctrl.c **** #endif
 231:../BLDCMotor/motorctrl.c ****         }
 232:../BLDCMotor/motorctrl.c ****             break;
 233:../BLDCMotor/motorctrl.c ****         default:
 234:../BLDCMotor/motorctrl.c ****             break;
 235:../BLDCMotor/motorctrl.c ****     }
 236:../BLDCMotor/motorctrl.c **** }
 237:../BLDCMotor/motorctrl.c **** 
 238:../BLDCMotor/motorctrl.c **** 
 239:../BLDCMotor/motorctrl.c **** 
 240:../BLDCMotor/motorctrl.c **** alpbet_t _limit_voltagecircle(alpbet_t raw_uab) {  
 241:../BLDCMotor/motorctrl.c ****     float max_voltage = D_MAX_VAL;// ËøôÈáåÂ∫îËØ•ÊòØ‰Ω†ÁöÑÊúÄÂ§ßÂÖÅËÆ∏ÁîµÂéãÂÄºÔºå‰æãÂ¶ÇÂØπ‰∫é‰∏âÁõ
 242:../BLDCMotor/motorctrl.c ****     float voltage_magnitude = sqrt(raw_uab.alpha * raw_uab.alpha + raw_uab.beta * raw_uab.beta); //
 243:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 244:../BLDCMotor/motorctrl.c ****     if (voltage_magnitude > max_voltage) {  
 245:../BLDCMotor/motorctrl.c ****         // Â¶ÇÊûúÁü¢ÈáèÈïøÂ∫¶Ë∂ÖËøáÊúÄÂ§ßÁîµÂéãÔºåÂàôÊåâÊØî‰æãÁº©ÊîæÁü¢Èáè‰ª•‰ΩøÂÖ∂ËêΩÂú®ÁîµÂéãÁü¢È
 246:../BLDCMotor/motorctrl.c ****         float scale_factor = max_voltage / voltage_magnitude;  
 247:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha * scale_factor;  
 248:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 249:../BLDCMotor/motorctrl.c ****     } else {  
 250:../BLDCMotor/motorctrl.c ****         // Â¶ÇÊûúÁü¢ÈáèÈïøÂ∫¶Âú®ÂÖÅËÆ∏ËåÉÂõ¥ÂÜÖÔºåÂàô‰∏çËøõË°å‰ªª‰ΩïÊîπÂèò  
 251:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha;  
 252:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta;  
 253:../BLDCMotor/motorctrl.c ****     }
 254:../BLDCMotor/motorctrl.c ****     return uab;
 255:../BLDCMotor/motorctrl.c **** }
 256:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 257:../BLDCMotor/motorctrl.c **** {
 258:../BLDCMotor/motorctrl.c **** #if 1
 259:../BLDCMotor/motorctrl.c ****     alpbet_t i_alphbeta;
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 6


 260:../BLDCMotor/motorctrl.c ****     float _tempa,_tempb,_tempc;
 261:../BLDCMotor/motorctrl.c ****     dq_t i_dq;
 262:../BLDCMotor/motorctrl.c ****     _tempa = i_abc.a;
 263:../BLDCMotor/motorctrl.c ****     _tempb = i_abc.b;
 264:../BLDCMotor/motorctrl.c ****     _tempc = i_abc.c;
 265:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
 266:../BLDCMotor/motorctrl.c ****     /*bac  */
 267:../BLDCMotor/motorctrl.c ****     i_abc.a = -_tempa;
 268:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempc;
 269:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempb;
 270:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 271:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 272:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 273:../BLDCMotor/motorctrl.c **** #endif
 274:../BLDCMotor/motorctrl.c ****     _3s_2s(i_abc,&i_alphbeta);   
 275:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 276:../BLDCMotor/motorctrl.c ****     sg_motordebug.id = (i_dq.d);
 277:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 278:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 279:../BLDCMotor/motorctrl.c **** #if 1
 280:../BLDCMotor/motorctrl.c ****     float tar_id = 0.0f,tar_iq = 0.0f;
 281:../BLDCMotor/motorctrl.c ****     tar_id = sg_motordebug.id_targe;
 282:../BLDCMotor/motorctrl.c ****     tar_iq = sg_motordebug.iq_targe;
 283:../BLDCMotor/motorctrl.c ****     udq.d = pid_contrl(sgp_curloop_d_pid,tar_id,i_dq.d);
 284:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_real = i_dq.d;
 285:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_D_out = udq.d;
 286:../BLDCMotor/motorctrl.c ****     udq.q =pid_contrl(sgp_curloop_q_pid,tar_iq,i_dq.q);
 287:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_real = i_dq.q;
 288:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_Q_out = udq.q;
 289:../BLDCMotor/motorctrl.c **** #endif
 290:../BLDCMotor/motorctrl.c ****     return udq;
 291:../BLDCMotor/motorctrl.c **** #endif
 292:../BLDCMotor/motorctrl.c **** }
 293:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real)
 294:../BLDCMotor/motorctrl.c **** {
 295:../BLDCMotor/motorctrl.c ****    return pid_contrl(sgp_speed_pid,tar,real);
 296:../BLDCMotor/motorctrl.c **** }
 297:../BLDCMotor/motorctrl.c **** static void motor_enable(void)
 298:../BLDCMotor/motorctrl.c **** {
  28              		.loc 1 298 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32 0000 08B5     		push	{r3, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 3, -8
  36              		.cfi_offset 14, -4
 299:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 300:../BLDCMotor/motorctrl.c ****     gpio_setmotor_power();
 301:../BLDCMotor/motorctrl.c **** #endif
 302:../BLDCMotor/motorctrl.c ****     /*pwm ‰ΩøËÉΩ*/
 303:../BLDCMotor/motorctrl.c ****     tim_pwm_enable();
  37              		.loc 1 303 5 view .LVU1
  38 0002 FFF7FEFF 		bl	tim_pwm_enable
  39              	.LVL0:
 304:../BLDCMotor/motorctrl.c ****     tim_tigger_adc();
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 7


  40              		.loc 1 304 5 view .LVU2
  41 0006 FFF7FEFF 		bl	tim_tigger_adc
  42              	.LVL1:
 305:../BLDCMotor/motorctrl.c ****     adc_start();
  43              		.loc 1 305 5 view .LVU3
  44 000a FFF7FEFF 		bl	adc_start
  45              	.LVL2:
 306:../BLDCMotor/motorctrl.c **** }
  46              		.loc 1 306 1 is_stmt 0 view .LVU4
  47 000e 08BD     		pop	{r3, pc}
  48              		.cfi_endproc
  49              	.LFE241:
  51              		.section	.text.motor_disable,"ax",%progbits
  52              		.align	1
  53              		.syntax unified
  54              		.thumb
  55              		.thumb_func
  57              	motor_disable:
  58              	.LFB243:
 307:../BLDCMotor/motorctrl.c **** static void motor_enable_noirq(void)
 308:../BLDCMotor/motorctrl.c **** {
 309:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 310:../BLDCMotor/motorctrl.c ****     gpio_setmotor_power();
 311:../BLDCMotor/motorctrl.c **** #endif
 312:../BLDCMotor/motorctrl.c ****     /*pwm ‰ΩøËÉΩ*/
 313:../BLDCMotor/motorctrl.c ****     tim_pwm_enable();
 314:../BLDCMotor/motorctrl.c **** }
 315:../BLDCMotor/motorctrl.c **** static void motor_disable(void)
 316:../BLDCMotor/motorctrl.c **** {
  59              		.loc 1 316 1 is_stmt 1 view -0
  60              		.cfi_startproc
  61              		@ args = 0, pretend = 0, frame = 0
  62              		@ frame_needed = 0, uses_anonymous_args = 0
  63 0000 08B5     		push	{r3, lr}
  64              	.LCFI1:
  65              		.cfi_def_cfa_offset 8
  66              		.cfi_offset 3, -8
  67              		.cfi_offset 14, -4
 317:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 318:../BLDCMotor/motorctrl.c ****     gpio_setmotor_powerdown();
 319:../BLDCMotor/motorctrl.c **** #endif    
 320:../BLDCMotor/motorctrl.c ****     tim_pwm_disable();
  68              		.loc 1 320 5 view .LVU6
  69 0002 FFF7FEFF 		bl	tim_pwm_disable
  70              	.LVL3:
 321:../BLDCMotor/motorctrl.c ****     adc_stop();
  71              		.loc 1 321 5 view .LVU7
  72 0006 FFF7FEFF 		bl	adc_stop
  73              	.LVL4:
 322:../BLDCMotor/motorctrl.c **** }
  74              		.loc 1 322 1 is_stmt 0 view .LVU8
  75 000a 08BD     		pop	{r3, pc}
  76              		.cfi_endproc
  77              	.LFE243:
  79              		.section	.text.motor_speedcale,"ax",%progbits
  80              		.align	1
  81              		.syntax unified
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 8


  82              		.thumb
  83              		.thumb_func
  85              	motor_speedcale:
  86              	.LVL5:
  87              	.LFB245:
 323:../BLDCMotor/motorctrl.c **** float test_a,test_b,test_c;
 324:../BLDCMotor/motorctrl.c **** static void motor_set_pwm(duty_t temp)
 325:../BLDCMotor/motorctrl.c **** {
 326:../BLDCMotor/motorctrl.c ****     test_a = temp._a;test_b = temp._b;test_c = temp._c;
 327:../BLDCMotor/motorctrl.c ****     tim_set_pwm(test_a ,test_b,test_c);
 328:../BLDCMotor/motorctrl.c **** }
 329:../BLDCMotor/motorctrl.c **** 
 330:../BLDCMotor/motorctrl.c **** static float motor_speedcale(float cur_theta)
 331:../BLDCMotor/motorctrl.c **** {
  88              		.loc 1 331 1 is_stmt 1 view -0
  89              		.cfi_startproc
  90              		@ args = 0, pretend = 0, frame = 0
  91              		@ frame_needed = 0, uses_anonymous_args = 0
  92              		.loc 1 331 1 is_stmt 0 view .LVU10
  93 0000 08B5     		push	{r3, lr}
  94              	.LCFI2:
  95              		.cfi_def_cfa_offset 8
  96              		.cfi_offset 3, -8
  97              		.cfi_offset 14, -4
  98 0002 2DED028B 		vpush.64	{d8}
  99              	.LCFI3:
 100              		.cfi_def_cfa_offset 16
 101              		.cfi_offset 80, -16
 102              		.cfi_offset 81, -12
 332:../BLDCMotor/motorctrl.c ****     float delta_theta = 0.0f;
 103              		.loc 1 332 5 is_stmt 1 view .LVU11
 104              	.LVL6:
 333:../BLDCMotor/motorctrl.c ****     static unsigned short cnt = 0;
 105              		.loc 1 333 5 view .LVU12
 334:../BLDCMotor/motorctrl.c ****     if (cnt++ > 20)
 106              		.loc 1 334 5 view .LVU13
 107              		.loc 1 334 12 is_stmt 0 view .LVU14
 108 0006 2D4A     		ldr	r2, .L15
 109 0008 1388     		ldrh	r3, [r2]
 110 000a 591C     		adds	r1, r3, #1
 111 000c 1180     		strh	r1, [r2]	@ movhi
 112              		.loc 1 334 8 view .LVU15
 113 000e 142B     		cmp	r3, #20
 114 0010 36D8     		bhi	.L5
 115 0012 B0EE408A 		vmov.f32	s16, s0
 335:../BLDCMotor/motorctrl.c ****     {
 336:../BLDCMotor/motorctrl.c ****         return;
 337:../BLDCMotor/motorctrl.c ****     }
 338:../BLDCMotor/motorctrl.c ****     cnt = 0;
 116              		.loc 1 338 5 is_stmt 1 view .LVU16
 117              		.loc 1 338 9 is_stmt 0 view .LVU17
 118 0016 294B     		ldr	r3, .L15
 119 0018 0022     		movs	r2, #0
 120 001a 1A80     		strh	r2, [r3]	@ movhi
 339:../BLDCMotor/motorctrl.c ****     static float pre_theta = 0.0f;
 121              		.loc 1 339 5 is_stmt 1 view .LVU18
 340:../BLDCMotor/motorctrl.c ****     delta_theta = (cur_theta -pre_theta)*100.0f;
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 9


 122              		.loc 1 340 5 view .LVU19
 123              		.loc 1 340 30 is_stmt 0 view .LVU20
 124 001c 284B     		ldr	r3, .L15+4
 125 001e D3ED007A 		vldr.32	s15, [r3]
 126 0022 70EE677A 		vsub.f32	s15, s0, s15
 127              		.loc 1 340 17 view .LVU21
 128 0026 9FED270A 		vldr.32	s0, .L15+8
 129              	.LVL7:
 130              		.loc 1 340 17 view .LVU22
 131 002a 27EE800A 		vmul.f32	s0, s15, s0
 132              	.LVL8:
 341:../BLDCMotor/motorctrl.c **** 
 342:../BLDCMotor/motorctrl.c ****     // Â§ÑÁêÜËßíÂ∫¶Ë∑®Ë∂ä2œÄËæπÁïåÁöÑÊÉÖÂÜµ  
 343:../BLDCMotor/motorctrl.c ****     if (delta_theta > _2PI) {  
 133              		.loc 1 343 5 is_stmt 1 view .LVU23
 134              		.loc 1 343 8 is_stmt 0 view .LVU24
 135 002e DFED267A 		vldr.32	s15, .L15+12
 136 0032 B4EEE70A 		vcmpe.f32	s0, s15
 137 0036 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 138 003a 24DD     		ble	.L13
 344:../BLDCMotor/motorctrl.c ****         delta_theta -= (int)(delta_theta / _2PI +1) * _2PI;  
 139              		.loc 1 344 9 is_stmt 1 view .LVU25
 140              		.loc 1 344 42 is_stmt 0 view .LVU26
 141 003c B0EE677A 		vmov.f32	s14, s15
 142 0040 C0EE077A 		vdiv.f32	s15, s0, s14
 143              		.loc 1 344 49 view .LVU27
 144 0044 F7EE006A 		vmov.f32	s13, #1.0e+0
 145 0048 77EEA67A 		vadd.f32	s15, s15, s13
 146              		.loc 1 344 24 view .LVU28
 147 004c FDEEE77A 		vcvt.s32.f32	s15, s15
 148              		.loc 1 344 53 view .LVU29
 149 0050 F8EEE77A 		vcvt.f32.s32	s15, s15
 150 0054 67EE877A 		vmul.f32	s15, s15, s14
 151              		.loc 1 344 21 view .LVU30
 152 0058 30EE670A 		vsub.f32	s0, s0, s15
 153              	.LVL9:
 154              	.L9:
 345:../BLDCMotor/motorctrl.c ****     } else if (delta_theta < -_2PI) {  
 346:../BLDCMotor/motorctrl.c ****         delta_theta += (int)(-delta_theta / _2PI + 1) * _2PI;  
 347:../BLDCMotor/motorctrl.c ****     }  
 348:../BLDCMotor/motorctrl.c **** 
 349:../BLDCMotor/motorctrl.c ****     delta_theta = lowfilter_cale(&sg_speedfilter,delta_theta);
 155              		.loc 1 349 5 is_stmt 1 view .LVU31
 156              		.loc 1 349 19 is_stmt 0 view .LVU32
 157 005c 1B48     		ldr	r0, .L15+16
 158 005e FFF7FEFF 		bl	lowfilter_cale
 159              	.LVL10:
 350:../BLDCMotor/motorctrl.c ****     float omeg_c = (delta_theta)/0.002f/100.0f;
 160              		.loc 1 350 5 is_stmt 1 view .LVU33
 161              		.loc 1 350 33 is_stmt 0 view .LVU34
 162 0062 DFED1B7A 		vldr.32	s15, .L15+20
 163 0066 80EE277A 		vdiv.f32	s14, s0, s15
 164              		.loc 1 350 11 view .LVU35
 165 006a DFED167A 		vldr.32	s15, .L15+8
 166 006e 87EE270A 		vdiv.f32	s0, s14, s15
 167              	.LVL11:
 351:../BLDCMotor/motorctrl.c ****     float N_rpm = omeg_c * 9.5492965855f;//60.0f/_2PI
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 10


 168              		.loc 1 351 5 is_stmt 1 view .LVU36
 169              		.loc 1 351 11 is_stmt 0 view .LVU37
 170 0072 DFED187A 		vldr.32	s15, .L15+24
 171 0076 20EE270A 		vmul.f32	s0, s0, s15
 172              	.LVL12:
 352:../BLDCMotor/motorctrl.c ****     pre_theta = cur_theta;
 173              		.loc 1 352 5 is_stmt 1 view .LVU38
 174              		.loc 1 352 15 is_stmt 0 view .LVU39
 175 007a 114B     		ldr	r3, .L15+4
 176 007c 83ED008A 		vstr.32	s16, [r3]
 353:../BLDCMotor/motorctrl.c ****     // N_rpm = lowfilter_cale(&sg_speedfilter,N_rpm);
 354:../BLDCMotor/motorctrl.c ****     return N_rpm;
 177              		.loc 1 354 5 is_stmt 1 view .LVU40
 178              	.LVL13:
 179              	.L5:
 355:../BLDCMotor/motorctrl.c **** }
 180              		.loc 1 355 1 is_stmt 0 view .LVU41
 181 0080 BDEC028B 		vldm	sp!, {d8}
 182              	.LCFI4:
 183              		.cfi_remember_state
 184              		.cfi_restore 80
 185              		.cfi_restore 81
 186              		.cfi_def_cfa_offset 8
 187 0084 08BD     		pop	{r3, pc}
 188              	.LVL14:
 189              	.L13:
 190              	.LCFI5:
 191              		.cfi_restore_state
 345:../BLDCMotor/motorctrl.c ****         delta_theta += (int)(-delta_theta / _2PI + 1) * _2PI;  
 192              		.loc 1 345 12 is_stmt 1 view .LVU42
 345:../BLDCMotor/motorctrl.c ****         delta_theta += (int)(-delta_theta / _2PI + 1) * _2PI;  
 193              		.loc 1 345 15 is_stmt 0 view .LVU43
 194 0086 DFED147A 		vldr.32	s15, .L15+28
 195 008a B4EEE70A 		vcmpe.f32	s0, s15
 196 008e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 197 0092 E3D5     		bpl	.L9
 346:../BLDCMotor/motorctrl.c ****     }  
 198              		.loc 1 346 9 is_stmt 1 view .LVU44
 346:../BLDCMotor/motorctrl.c ****     }  
 199              		.loc 1 346 30 is_stmt 0 view .LVU45
 200 0094 F1EE406A 		vneg.f32	s13, s0
 346:../BLDCMotor/motorctrl.c ****     }  
 201              		.loc 1 346 43 view .LVU46
 202 0098 9FED0B7A 		vldr.32	s14, .L15+12
 203 009c C6EE877A 		vdiv.f32	s15, s13, s14
 346:../BLDCMotor/motorctrl.c ****     }  
 204              		.loc 1 346 50 view .LVU47
 205 00a0 F7EE006A 		vmov.f32	s13, #1.0e+0
 206 00a4 77EEA67A 		vadd.f32	s15, s15, s13
 346:../BLDCMotor/motorctrl.c ****     }  
 207              		.loc 1 346 24 view .LVU48
 208 00a8 FDEEE77A 		vcvt.s32.f32	s15, s15
 346:../BLDCMotor/motorctrl.c ****     }  
 209              		.loc 1 346 55 view .LVU49
 210 00ac F8EEE77A 		vcvt.f32.s32	s15, s15
 211 00b0 67EE877A 		vmul.f32	s15, s15, s14
 346:../BLDCMotor/motorctrl.c ****     }  
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 11


 212              		.loc 1 346 21 view .LVU50
 213 00b4 30EE270A 		vadd.f32	s0, s0, s15
 214              	.LVL15:
 346:../BLDCMotor/motorctrl.c ****     }  
 215              		.loc 1 346 21 view .LVU51
 216 00b8 D0E7     		b	.L9
 217              	.L16:
 218 00ba 00BF     		.align	2
 219              	.L15:
 220 00bc 00000000 		.word	.LANCHOR0
 221 00c0 00000000 		.word	.LANCHOR1
 222 00c4 0000C842 		.word	1120403456
 223 00c8 DA0FC940 		.word	1086918618
 224 00cc 00000000 		.word	.LANCHOR2
 225 00d0 6F12033B 		.word	990057071
 226 00d4 EBC91841 		.word	1092143595
 227 00d8 DA0FC9C0 		.word	-1060565030
 228              		.cfi_endproc
 229              	.LFE245:
 231              		.section	.text._currmentloop,"ax",%progbits
 232              		.align	1
 233              		.syntax unified
 234              		.thumb
 235              		.thumb_func
 237              	_currmentloop:
 238              	.LVL16:
 239              	.LFB239:
 257:../BLDCMotor/motorctrl.c **** #if 1
 240              		.loc 1 257 1 is_stmt 1 view -0
 241              		.cfi_startproc
 242              		@ args = 28, pretend = 16, frame = 32
 243              		@ frame_needed = 0, uses_anonymous_args = 0
 257:../BLDCMotor/motorctrl.c **** #if 1
 244              		.loc 1 257 1 is_stmt 0 view .LVU53
 245 0000 84B0     		sub	sp, sp, #16
 246              	.LCFI6:
 247              		.cfi_def_cfa_offset 16
 248 0002 70B5     		push	{r4, r5, r6, lr}
 249              	.LCFI7:
 250              		.cfi_def_cfa_offset 32
 251              		.cfi_offset 4, -32
 252              		.cfi_offset 5, -28
 253              		.cfi_offset 6, -24
 254              		.cfi_offset 14, -20
 255 0004 2DED028B 		vpush.64	{d8}
 256              	.LCFI8:
 257              		.cfi_def_cfa_offset 40
 258              		.cfi_offset 80, -40
 259              		.cfi_offset 81, -36
 260 0008 8CB0     		sub	sp, sp, #48
 261              	.LCFI9:
 262              		.cfi_def_cfa_offset 88
 263 000a 0546     		mov	r5, r0
 264 000c 0DF14C0C 		add	ip, sp, #76
 265 0010 8CE80E00 		stm	ip, {r1, r2, r3}
 266 0014 B0EE408A 		vmov.f32	s16, s0
 259:../BLDCMotor/motorctrl.c ****     float _tempa,_tempb,_tempc;
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 12


 267              		.loc 1 259 5 is_stmt 1 view .LVU54
 260:../BLDCMotor/motorctrl.c ****     dq_t i_dq;
 268              		.loc 1 260 5 view .LVU55
 261:../BLDCMotor/motorctrl.c ****     _tempa = i_abc.a;
 269              		.loc 1 261 5 view .LVU56
 262:../BLDCMotor/motorctrl.c ****     _tempb = i_abc.b;
 270              		.loc 1 262 5 view .LVU57
 271              	.LVL17:
 263:../BLDCMotor/motorctrl.c ****     _tempc = i_abc.c;
 272              		.loc 1 263 5 view .LVU58
 263:../BLDCMotor/motorctrl.c ****     _tempc = i_abc.c;
 273              		.loc 1 263 12 is_stmt 0 view .LVU59
 274 0018 DDED147A 		vldr.32	s15, [sp, #80]
 275              	.LVL18:
 264:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
 276              		.loc 1 264 5 is_stmt 1 view .LVU60
 267:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempc;
 277              		.loc 1 267 5 view .LVU61
 267:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempc;
 278              		.loc 1 267 15 is_stmt 0 view .LVU62
 279 001c DDED136A 		vldr.32	s13, [sp, #76]
 280 0020 F1EE666A 		vneg.f32	s13, s13
 267:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempc;
 281              		.loc 1 267 13 view .LVU63
 282 0024 CDED136A 		vstr.32	s13, [sp, #76]
 283              	.LVL19:
 268:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempb;
 284              		.loc 1 268 5 is_stmt 1 view .LVU64
 268:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempb;
 285              		.loc 1 268 15 is_stmt 0 view .LVU65
 286 0028 9DED157A 		vldr.32	s14, [sp, #84]
 287 002c B1EE477A 		vneg.f32	s14, s14
 268:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempb;
 288              		.loc 1 268 13 view .LVU66
 289 0030 8DED147A 		vstr.32	s14, [sp, #80]
 269:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 290              		.loc 1 269 5 is_stmt 1 view .LVU67
 269:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 291              		.loc 1 269 15 is_stmt 0 view .LVU68
 292 0034 F1EE677A 		vneg.f32	s15, s15
 293              	.LVL20:
 269:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 294              		.loc 1 269 13 view .LVU69
 295 0038 CDED157A 		vstr.32	s15, [sp, #84]
 296              	.LVL21:
 270:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 297              		.loc 1 270 5 is_stmt 1 view .LVU70
 270:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 298              		.loc 1 270 22 is_stmt 0 view .LVU71
 299 003c 244C     		ldr	r4, .L19
 300 003e C4ED006A 		vstr.32	s13, [r4]
 271:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 301              		.loc 1 271 5 is_stmt 1 view .LVU72
 271:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 302              		.loc 1 271 22 is_stmt 0 view .LVU73
 303 0042 84ED017A 		vstr.32	s14, [r4, #4]
 272:../BLDCMotor/motorctrl.c **** #endif
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 13


 304              		.loc 1 272 5 is_stmt 1 view .LVU74
 272:../BLDCMotor/motorctrl.c **** #endif
 305              		.loc 1 272 22 is_stmt 0 view .LVU75
 306 0046 C4ED027A 		vstr.32	s15, [r4, #8]
 274:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 307              		.loc 1 274 5 is_stmt 1 view .LVU76
 308 004a 08AE     		add	r6, sp, #32
 309 004c 0296     		str	r6, [sp, #8]
 310 004e 17AB     		add	r3, sp, #92
 311 0050 93E80300 		ldm	r3, {r0, r1}
 312              	.LVL22:
 274:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 313              		.loc 1 274 5 is_stmt 0 view .LVU77
 314 0054 8DE80300 		stm	sp, {r0, r1}
 315 0058 9CE80F00 		ldm	ip, {r0, r1, r2, r3}
 316 005c FFF7FEFF 		bl	_3s_2s
 317              	.LVL23:
 275:../BLDCMotor/motorctrl.c ****     sg_motordebug.id = (i_dq.d);
 318              		.loc 1 275 5 is_stmt 1 view .LVU78
 319 0060 04AB     		add	r3, sp, #16
 320 0062 0093     		str	r3, [sp]
 321 0064 B0EE480A 		vmov.f32	s0, s16
 322 0068 96E80F00 		ldm	r6, {r0, r1, r2, r3}
 323 006c FFF7FEFF 		bl	_2s_2r
 324              	.LVL24:
 276:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 325              		.loc 1 276 5 view .LVU79
 276:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 326              		.loc 1 276 29 is_stmt 0 view .LVU80
 327 0070 DDED040A 		vldr.32	s1, [sp, #16]
 276:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 328              		.loc 1 276 22 view .LVU81
 329 0074 C4ED050A 		vstr.32	s1, [r4, #20]
 277:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 330              		.loc 1 277 5 is_stmt 1 view .LVU82
 277:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 331              		.loc 1 277 29 is_stmt 0 view .LVU83
 332 0078 059B     		ldr	r3, [sp, #20]	@ float
 277:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 333              		.loc 1 277 22 view .LVU84
 334 007a A361     		str	r3, [r4, #24]	@ float
 278:../BLDCMotor/motorctrl.c **** #if 1
 335              		.loc 1 278 5 is_stmt 1 view .LVU85
 278:../BLDCMotor/motorctrl.c **** #if 1
 336              		.loc 1 278 10 is_stmt 0 view .LVU86
 337 007c 0023     		movs	r3, #0
 338 007e 2B60     		str	r3, [r5]
 339 0080 6B60     		str	r3, [r5, #4]
 340 0082 AB60     		str	r3, [r5, #8]
 341 0084 EB60     		str	r3, [r5, #12]
 280:../BLDCMotor/motorctrl.c ****     tar_id = sg_motordebug.id_targe;
 342              		.loc 1 280 5 is_stmt 1 view .LVU87
 343              	.LVL25:
 281:../BLDCMotor/motorctrl.c ****     tar_iq = sg_motordebug.iq_targe;
 344              		.loc 1 281 5 view .LVU88
 282:../BLDCMotor/motorctrl.c ****     udq.d = pid_contrl(sgp_curloop_d_pid,tar_id,i_dq.d);
 345              		.loc 1 282 5 view .LVU89
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 14


 282:../BLDCMotor/motorctrl.c ****     udq.d = pid_contrl(sgp_curloop_d_pid,tar_id,i_dq.d);
 346              		.loc 1 282 12 is_stmt 0 view .LVU90
 347 0086 94ED128A 		vldr.32	s16, [r4, #72]
 348              	.LVL26:
 283:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_real = i_dq.d;
 349              		.loc 1 283 5 is_stmt 1 view .LVU91
 283:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_real = i_dq.d;
 350              		.loc 1 283 13 is_stmt 0 view .LVU92
 351 008a 94ED100A 		vldr.32	s0, [r4, #64]
 352 008e 114B     		ldr	r3, .L19+4
 353 0090 1868     		ldr	r0, [r3]
 354 0092 FFF7FEFF 		bl	pid_contrl
 355              	.LVL27:
 283:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_real = i_dq.d;
 356              		.loc 1 283 11 view .LVU93
 357 0096 85ED000A 		vstr.32	s0, [r5]
 284:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_D_out = udq.d;
 358              		.loc 1 284 5 is_stmt 1 view .LVU94
 284:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_D_out = udq.d;
 359              		.loc 1 284 33 is_stmt 0 view .LVU95
 360 009a 049B     		ldr	r3, [sp, #16]	@ float
 284:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_D_out = udq.d;
 361              		.loc 1 284 27 view .LVU96
 362 009c A363     		str	r3, [r4, #56]	@ float
 285:../BLDCMotor/motorctrl.c ****     udq.q =pid_contrl(sgp_curloop_q_pid,tar_iq,i_dq.q);
 363              		.loc 1 285 5 is_stmt 1 view .LVU97
 285:../BLDCMotor/motorctrl.c ****     udq.q =pid_contrl(sgp_curloop_q_pid,tar_iq,i_dq.q);
 364              		.loc 1 285 29 is_stmt 0 view .LVU98
 365 009e 84ED190A 		vstr.32	s0, [r4, #100]
 286:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_real = i_dq.q;
 366              		.loc 1 286 5 is_stmt 1 view .LVU99
 286:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_real = i_dq.q;
 367              		.loc 1 286 12 is_stmt 0 view .LVU100
 368 00a2 DDED050A 		vldr.32	s1, [sp, #20]
 369 00a6 B0EE480A 		vmov.f32	s0, s16
 370 00aa 0B4B     		ldr	r3, .L19+8
 371 00ac 1868     		ldr	r0, [r3]
 372 00ae FFF7FEFF 		bl	pid_contrl
 373              	.LVL28:
 286:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_real = i_dq.q;
 374              		.loc 1 286 11 view .LVU101
 375 00b2 85ED010A 		vstr.32	s0, [r5, #4]
 287:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_Q_out = udq.q;
 376              		.loc 1 287 5 is_stmt 1 view .LVU102
 287:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_Q_out = udq.q;
 377              		.loc 1 287 33 is_stmt 0 view .LVU103
 378 00b6 059B     		ldr	r3, [sp, #20]	@ float
 287:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_Q_out = udq.q;
 379              		.loc 1 287 27 view .LVU104
 380 00b8 2365     		str	r3, [r4, #80]	@ float
 288:../BLDCMotor/motorctrl.c **** #endif
 381              		.loc 1 288 5 is_stmt 1 view .LVU105
 288:../BLDCMotor/motorctrl.c **** #endif
 382              		.loc 1 288 29 is_stmt 0 view .LVU106
 383 00ba 84ED160A 		vstr.32	s0, [r4, #88]
 290:../BLDCMotor/motorctrl.c **** #endif
 384              		.loc 1 290 5 is_stmt 1 view .LVU107
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 15


 292:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real)
 385              		.loc 1 292 1 is_stmt 0 view .LVU108
 386 00be 2846     		mov	r0, r5
 387 00c0 0CB0     		add	sp, sp, #48
 388              	.LCFI10:
 389              		.cfi_def_cfa_offset 40
 390              		@ sp needed
 391 00c2 BDEC028B 		vldm	sp!, {d8}
 392              	.LCFI11:
 393              		.cfi_restore 80
 394              		.cfi_restore 81
 395              		.cfi_def_cfa_offset 32
 396              	.LVL29:
 292:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real)
 397              		.loc 1 292 1 view .LVU109
 398 00c6 BDE87040 		pop	{r4, r5, r6, lr}
 399              	.LCFI12:
 400              		.cfi_restore 14
 401              		.cfi_restore 6
 402              		.cfi_restore 5
 403              		.cfi_restore 4
 404              		.cfi_def_cfa_offset 16
 405              	.LVL30:
 292:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real)
 406              		.loc 1 292 1 view .LVU110
 407 00ca 04B0     		add	sp, sp, #16
 408              	.LCFI13:
 409              		.cfi_def_cfa_offset 0
 410 00cc 7047     		bx	lr
 411              	.L20:
 412 00ce 00BF     		.align	2
 413              	.L19:
 414 00d0 00000000 		.word	.LANCHOR3
 415 00d4 00000000 		.word	.LANCHOR4
 416 00d8 00000000 		.word	.LANCHOR5
 417              		.cfi_endproc
 418              	.LFE239:
 420              		.section	.text.motor_set_pwm,"ax",%progbits
 421              		.align	1
 422              		.syntax unified
 423              		.thumb
 424              		.thumb_func
 426              	motor_set_pwm:
 427              	.LFB244:
 325:../BLDCMotor/motorctrl.c ****     test_a = temp._a;test_b = temp._b;test_c = temp._c;
 428              		.loc 1 325 1 is_stmt 1 view -0
 429              		.cfi_startproc
 430              		@ args = 0, pretend = 0, frame = 16
 431              		@ frame_needed = 0, uses_anonymous_args = 0
 432 0000 00B5     		push	{lr}
 433              	.LCFI14:
 434              		.cfi_def_cfa_offset 4
 435              		.cfi_offset 14, -4
 436 0002 85B0     		sub	sp, sp, #20
 437              	.LCFI15:
 438              		.cfi_def_cfa_offset 24
 439 0004 8DED010A 		vstr.32	s0, [sp, #4]
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 16


 440 0008 CDED020A 		vstr.32	s1, [sp, #8]
 441 000c 8DED031A 		vstr.32	s2, [sp, #12]
 326:../BLDCMotor/motorctrl.c ****     tim_set_pwm(test_a ,test_b,test_c);
 442              		.loc 1 326 5 view .LVU112
 326:../BLDCMotor/motorctrl.c ****     tim_set_pwm(test_a ,test_b,test_c);
 443              		.loc 1 326 12 is_stmt 0 view .LVU113
 444 0010 0648     		ldr	r0, .L23
 445 0012 80ED000A 		vstr.32	s0, [r0]
 326:../BLDCMotor/motorctrl.c ****     tim_set_pwm(test_a ,test_b,test_c);
 446              		.loc 1 326 22 is_stmt 1 view .LVU114
 326:../BLDCMotor/motorctrl.c ****     tim_set_pwm(test_a ,test_b,test_c);
 447              		.loc 1 326 29 is_stmt 0 view .LVU115
 448 0016 0649     		ldr	r1, .L23+4
 449 0018 C1ED000A 		vstr.32	s1, [r1]
 326:../BLDCMotor/motorctrl.c ****     tim_set_pwm(test_a ,test_b,test_c);
 450              		.loc 1 326 39 is_stmt 1 view .LVU116
 326:../BLDCMotor/motorctrl.c ****     tim_set_pwm(test_a ,test_b,test_c);
 451              		.loc 1 326 46 is_stmt 0 view .LVU117
 452 001c 054A     		ldr	r2, .L23+8
 453 001e 82ED001A 		vstr.32	s2, [r2]
 327:../BLDCMotor/motorctrl.c **** }
 454              		.loc 1 327 5 is_stmt 1 view .LVU118
 455 0022 FFF7FEFF 		bl	tim_set_pwm
 456              	.LVL31:
 328:../BLDCMotor/motorctrl.c **** 
 457              		.loc 1 328 1 is_stmt 0 view .LVU119
 458 0026 05B0     		add	sp, sp, #20
 459              	.LCFI16:
 460              		.cfi_def_cfa_offset 4
 461              		@ sp needed
 462 0028 5DF804FB 		ldr	pc, [sp], #4
 463              	.L24:
 464              		.align	2
 465              	.L23:
 466 002c 00000000 		.word	.LANCHOR6
 467 0030 00000000 		.word	.LANCHOR7
 468 0034 00000000 		.word	.LANCHOR8
 469              		.cfi_endproc
 470              	.LFE244:
 472              		.section	.text._get_angleoffset,"ax",%progbits
 473              		.align	1
 474              		.syntax unified
 475              		.thumb
 476              		.thumb_func
 478              	_get_angleoffset:
 479              	.LFB246:
 356:../BLDCMotor/motorctrl.c **** 
 357:../BLDCMotor/motorctrl.c **** 
 358:../BLDCMotor/motorctrl.c **** 
 359:../BLDCMotor/motorctrl.c **** 
 360:../BLDCMotor/motorctrl.c **** 
 361:../BLDCMotor/motorctrl.c **** static short _get_angleoffset(void)
 362:../BLDCMotor/motorctrl.c **** {
 480              		.loc 1 362 1 is_stmt 1 view -0
 481              		.cfi_startproc
 482              		@ args = 0, pretend = 0, frame = 48
 483              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 17


 484 0000 00B5     		push	{lr}
 485              	.LCFI17:
 486              		.cfi_def_cfa_offset 4
 487              		.cfi_offset 14, -4
 488 0002 8FB0     		sub	sp, sp, #60
 489              	.LCFI18:
 490              		.cfi_def_cfa_offset 64
 363:../BLDCMotor/motorctrl.c ****     static short state_ = 1;
 491              		.loc 1 363 5 view .LVU121
 364:../BLDCMotor/motorctrl.c **** 
 365:../BLDCMotor/motorctrl.c ****     /*-----------ËÆæÁΩÆalpha/betaÂùêÊ†áÁ≥ª------------------*/
 366:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 492              		.loc 1 366 5 view .LVU122
 367:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.4f,0.0f};
 493              		.loc 1 367 5 view .LVU123
 494              		.loc 1 367 10 is_stmt 0 view .LVU124
 495 0004 0023     		movs	r3, #0
 496 0006 0693     		str	r3, [sp, #24]
 497 0008 0793     		str	r3, [sp, #28]
 498 000a 0893     		str	r3, [sp, #32]
 499 000c 0993     		str	r3, [sp, #36]
 500 000e 274B     		ldr	r3, .L33
 501 0010 0693     		str	r3, [sp, #24]	@ float
 368:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 502              		.loc 1 368 5 is_stmt 1 view .LVU125
 369:../BLDCMotor/motorctrl.c ****     float theta;
 503              		.loc 1 369 5 view .LVU126
 370:../BLDCMotor/motorctrl.c ****     static short cnt_ = 0;
 504              		.loc 1 370 5 view .LVU127
 371:../BLDCMotor/motorctrl.c ****     int32_t Q15_theta = 0;
 505              		.loc 1 371 5 view .LVU128
 506              	.LVL32:
 372:../BLDCMotor/motorctrl.c ****     int32_t Q_thetaSum = 0;
 507              		.loc 1 372 5 view .LVU129
 373:../BLDCMotor/motorctrl.c ****     switch (state_)
 508              		.loc 1 373 5 view .LVU130
 509 0012 274B     		ldr	r3, .L33+4
 510 0014 B3F90030 		ldrsh	r3, [r3]
 511 0018 022B     		cmp	r3, #2
 512 001a 27D0     		beq	.L26
 513 001c 032B     		cmp	r3, #3
 514 001e 35D0     		beq	.L27
 515 0020 012B     		cmp	r3, #1
 516 0022 08D0     		beq	.L32
 517              	.LVL33:
 518              	.L28:
 374:../BLDCMotor/motorctrl.c ****     {
 375:../BLDCMotor/motorctrl.c ****     case 1://ËØªÂèñÂÅèÁßªÂÄº
 376:../BLDCMotor/motorctrl.c ****         uab = _2r_2s(udq,0.0f);
 377:../BLDCMotor/motorctrl.c ****         dut01 = _svpwm(uab.alpha,uab.beta);
 378:../BLDCMotor/motorctrl.c ****         motor_set_pwm(dut01);
 379:../BLDCMotor/motorctrl.c ****         state_ = 2;
 380:../BLDCMotor/motorctrl.c ****         break;
 381:../BLDCMotor/motorctrl.c **** 
 382:../BLDCMotor/motorctrl.c ****     case 2:
 383:../BLDCMotor/motorctrl.c ****         if (cnt_++ > 15000)
 384:../BLDCMotor/motorctrl.c ****         {
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 18


 385:../BLDCMotor/motorctrl.c ****             cnt_ = 0;
 386:../BLDCMotor/motorctrl.c ****             state_ = 3;
 387:../BLDCMotor/motorctrl.c ****             // dut01 = _svpwm(0.0f,00.0f);
 388:../BLDCMotor/motorctrl.c ****             // motor_set_pwm(dut01);             
 389:../BLDCMotor/motorctrl.c ****         }
 390:../BLDCMotor/motorctrl.c ****         break;
 391:../BLDCMotor/motorctrl.c **** 
 392:../BLDCMotor/motorctrl.c ****     case 3:
 393:../BLDCMotor/motorctrl.c ****    
 394:../BLDCMotor/motorctrl.c ****         // for (uint8_t i = 0; i < 10; i++)
 395:../BLDCMotor/motorctrl.c ****         // {
 396:../BLDCMotor/motorctrl.c ****         //     Q_thetaSum += ((int32_t*)(sensor_user_read(SENSOR_01,EN_SENSORDATA_COV)))[0];
 397:../BLDCMotor/motorctrl.c ****         // }
 398:../BLDCMotor/motorctrl.c ****         // Q15_theta = Q_thetaSum/10;
 399:../BLDCMotor/motorctrl.c ****         Q15_theta = ((int32_t*)(sensor_user_read(SENSOR_01,EN_SENSORDATA_COV)))[0];
 400:../BLDCMotor/motorctrl.c ****         theta = _IQ20toF(Q15_theta);
 401:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = theta;
 402:../BLDCMotor/motorctrl.c ****         state_ = 4;
 403:../BLDCMotor/motorctrl.c ****         break;
 404:../BLDCMotor/motorctrl.c **** 
 405:../BLDCMotor/motorctrl.c ****     case 4:
 406:../BLDCMotor/motorctrl.c **** 
 407:../BLDCMotor/motorctrl.c ****         break;             
 408:../BLDCMotor/motorctrl.c ****     default:
 409:../BLDCMotor/motorctrl.c ****         break;
 410:../BLDCMotor/motorctrl.c ****     }
 411:../BLDCMotor/motorctrl.c ****     if (state_ == 4)
 519              		.loc 1 411 5 view .LVU131
 520              		.loc 1 411 16 is_stmt 0 view .LVU132
 521 0024 224B     		ldr	r3, .L33+4
 522 0026 B3F90030 		ldrsh	r3, [r3]
 523              		.loc 1 411 8 view .LVU133
 524 002a 042B     		cmp	r3, #4
 525 002c 3CD0     		beq	.L30
 412:../BLDCMotor/motorctrl.c ****     {
 413:../BLDCMotor/motorctrl.c ****         return 0;
 414:../BLDCMotor/motorctrl.c ****     }
 415:../BLDCMotor/motorctrl.c ****     return 1;
 526              		.loc 1 415 12 view .LVU134
 527 002e 0120     		movs	r0, #1
 528              	.L29:
 416:../BLDCMotor/motorctrl.c **** }
 529              		.loc 1 416 1 view .LVU135
 530 0030 0FB0     		add	sp, sp, #60
 531              	.LCFI19:
 532              		.cfi_remember_state
 533              		.cfi_def_cfa_offset 4
 534              		@ sp needed
 535 0032 5DF804FB 		ldr	pc, [sp], #4
 536              	.LVL34:
 537              	.L32:
 538              	.LCFI20:
 539              		.cfi_restore_state
 376:../BLDCMotor/motorctrl.c ****         dut01 = _svpwm(uab.alpha,uab.beta);
 540              		.loc 1 376 9 is_stmt 1 view .LVU136
 376:../BLDCMotor/motorctrl.c ****         dut01 = _svpwm(uab.alpha,uab.beta);
 541              		.loc 1 376 15 is_stmt 0 view .LVU137
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 19


 542 0036 0023     		movs	r3, #0
 543 0038 0093     		str	r3, [sp]
 544 003a 06AB     		add	r3, sp, #24
 545 003c 0ECB     		ldm	r3, {r1, r2, r3}
 546 003e 9FED1D0A 		vldr.32	s0, .L33+8
 547 0042 0AA8     		add	r0, sp, #40
 548 0044 FFF7FEFF 		bl	_2r_2s
 549              	.LVL35:
 377:../BLDCMotor/motorctrl.c ****         motor_set_pwm(dut01);
 550              		.loc 1 377 9 is_stmt 1 view .LVU138
 377:../BLDCMotor/motorctrl.c ****         motor_set_pwm(dut01);
 551              		.loc 1 377 17 is_stmt 0 view .LVU139
 552 0048 DDED0B0A 		vldr.32	s1, [sp, #44]
 553 004c 9DED0A0A 		vldr.32	s0, [sp, #40]
 554 0050 FFF7FEFF 		bl	_svpwm
 555              	.LVL36:
 556 0054 8DED030A 		vstr.32	s0, [sp, #12]
 557 0058 CDED040A 		vstr.32	s1, [sp, #16]
 558 005c 8DED051A 		vstr.32	s2, [sp, #20]
 378:../BLDCMotor/motorctrl.c ****         state_ = 2;
 559              		.loc 1 378 9 is_stmt 1 view .LVU140
 560 0060 FFF7FEFF 		bl	motor_set_pwm
 561              	.LVL37:
 379:../BLDCMotor/motorctrl.c ****         break;
 562              		.loc 1 379 9 view .LVU141
 379:../BLDCMotor/motorctrl.c ****         break;
 563              		.loc 1 379 16 is_stmt 0 view .LVU142
 564 0064 124B     		ldr	r3, .L33+4
 565 0066 0222     		movs	r2, #2
 566 0068 1A80     		strh	r2, [r3]	@ movhi
 380:../BLDCMotor/motorctrl.c **** 
 567              		.loc 1 380 9 is_stmt 1 view .LVU143
 568 006a DBE7     		b	.L28
 569              	.L26:
 383:../BLDCMotor/motorctrl.c ****         {
 570              		.loc 1 383 9 view .LVU144
 383:../BLDCMotor/motorctrl.c ****         {
 571              		.loc 1 383 17 is_stmt 0 view .LVU145
 572 006c 124A     		ldr	r2, .L33+12
 573 006e B2F90030 		ldrsh	r3, [r2]
 574 0072 591C     		adds	r1, r3, #1
 575 0074 1180     		strh	r1, [r2]	@ movhi
 383:../BLDCMotor/motorctrl.c ****         {
 576              		.loc 1 383 12 view .LVU146
 577 0076 43F69822 		movw	r2, #15000
 578 007a 9342     		cmp	r3, r2
 579 007c D2DD     		ble	.L28
 385:../BLDCMotor/motorctrl.c ****             state_ = 3;
 580              		.loc 1 385 13 is_stmt 1 view .LVU147
 385:../BLDCMotor/motorctrl.c ****             state_ = 3;
 581              		.loc 1 385 18 is_stmt 0 view .LVU148
 582 007e 0E4B     		ldr	r3, .L33+12
 583 0080 0022     		movs	r2, #0
 584 0082 1A80     		strh	r2, [r3]	@ movhi
 386:../BLDCMotor/motorctrl.c ****             // dut01 = _svpwm(0.0f,00.0f);
 585              		.loc 1 386 13 is_stmt 1 view .LVU149
 386:../BLDCMotor/motorctrl.c ****             // dut01 = _svpwm(0.0f,00.0f);
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 20


 586              		.loc 1 386 20 is_stmt 0 view .LVU150
 587 0084 0A4B     		ldr	r3, .L33+4
 588 0086 0322     		movs	r2, #3
 589 0088 1A80     		strh	r2, [r3]	@ movhi
 590 008a CBE7     		b	.L28
 591              	.L27:
 399:../BLDCMotor/motorctrl.c ****         theta = _IQ20toF(Q15_theta);
 592              		.loc 1 399 9 is_stmt 1 view .LVU151
 399:../BLDCMotor/motorctrl.c ****         theta = _IQ20toF(Q15_theta);
 593              		.loc 1 399 33 is_stmt 0 view .LVU152
 594 008c 0121     		movs	r1, #1
 595 008e 0020     		movs	r0, #0
 596 0090 FFF7FEFF 		bl	sensor_user_read
 597              	.LVL38:
 400:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = theta;
 598              		.loc 1 400 9 is_stmt 1 view .LVU153
 400:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = theta;
 599              		.loc 1 400 17 is_stmt 0 view .LVU154
 600 0094 0068     		ldr	r0, [r0]
 601              	.LVL39:
 400:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = theta;
 602              		.loc 1 400 17 view .LVU155
 603 0096 FFF7FEFF 		bl	_IQ20toF
 604              	.LVL40:
 401:../BLDCMotor/motorctrl.c ****         state_ = 4;
 605              		.loc 1 401 9 is_stmt 1 view .LVU156
 401:../BLDCMotor/motorctrl.c ****         state_ = 4;
 606              		.loc 1 401 27 is_stmt 0 view .LVU157
 607 009a 084B     		ldr	r3, .L33+16
 608 009c 83ED000A 		vstr.32	s0, [r3]
 402:../BLDCMotor/motorctrl.c ****         break;
 609              		.loc 1 402 9 is_stmt 1 view .LVU158
 402:../BLDCMotor/motorctrl.c ****         break;
 610              		.loc 1 402 16 is_stmt 0 view .LVU159
 611 00a0 034B     		ldr	r3, .L33+4
 612 00a2 0422     		movs	r2, #4
 613 00a4 1A80     		strh	r2, [r3]	@ movhi
 403:../BLDCMotor/motorctrl.c **** 
 614              		.loc 1 403 9 is_stmt 1 view .LVU160
 615 00a6 BDE7     		b	.L28
 616              	.LVL41:
 617              	.L30:
 413:../BLDCMotor/motorctrl.c ****     }
 618              		.loc 1 413 16 is_stmt 0 view .LVU161
 619 00a8 0020     		movs	r0, #0
 620 00aa C1E7     		b	.L29
 621              	.L34:
 622              		.align	2
 623              	.L33:
 624 00ac CDCCCC3E 		.word	1053609165
 625 00b0 00000000 		.word	.LANCHOR9
 626 00b4 00000000 		.word	0
 627 00b8 00000000 		.word	.LANCHOR10
 628 00bc 00000000 		.word	.LANCHOR11
 629              		.cfi_endproc
 630              	.LFE246:
 632              		.global	__aeabi_f2d
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 21


 633              		.global	__aeabi_d2f
 634              		.section	.text._limit_voltagecircle,"ax",%progbits
 635              		.align	1
 636              		.global	_limit_voltagecircle
 637              		.syntax unified
 638              		.thumb
 639              		.thumb_func
 641              	_limit_voltagecircle:
 642              	.LVL42:
 643              	.LFB238:
 240:../BLDCMotor/motorctrl.c ****     float max_voltage = D_MAX_VAL;// ËøôÈáåÂ∫îËØ•ÊòØ‰Ω†ÁöÑÊúÄÂ§ßÂÖÅËÆ∏ÁîµÂéãÂÄºÔºå‰æãÂ¶ÇÂØπ‰∫é‰∏âÁõ
 644              		.loc 1 240 49 is_stmt 1 view -0
 645              		.cfi_startproc
 646              		@ args = 20, pretend = 16, frame = 0
 647              		@ frame_needed = 0, uses_anonymous_args = 0
 240:../BLDCMotor/motorctrl.c ****     float max_voltage = D_MAX_VAL;// ËøôÈáåÂ∫îËØ•ÊòØ‰Ω†ÁöÑÊúÄÂ§ßÂÖÅËÆ∏ÁîµÂéãÂÄºÔºå‰æãÂ¶ÇÂØπ‰∫é‰∏âÁõ
 648              		.loc 1 240 49 is_stmt 0 view .LVU163
 649 0000 84B0     		sub	sp, sp, #16
 650              	.LCFI21:
 651              		.cfi_def_cfa_offset 16
 652 0002 10B5     		push	{r4, lr}
 653              	.LCFI22:
 654              		.cfi_def_cfa_offset 24
 655              		.cfi_offset 4, -24
 656              		.cfi_offset 14, -20
 657 0004 2DED028B 		vpush.64	{d8}
 658              	.LCFI23:
 659              		.cfi_def_cfa_offset 32
 660              		.cfi_offset 80, -32
 661              		.cfi_offset 81, -28
 662 0008 0446     		mov	r4, r0
 663 000a 05A8     		add	r0, sp, #20
 664 000c 80E80E00 		stm	r0, {r1, r2, r3}
 241:../BLDCMotor/motorctrl.c ****     float voltage_magnitude = sqrt(raw_uab.alpha * raw_uab.alpha + raw_uab.beta * raw_uab.beta); //
 665              		.loc 1 241 5 is_stmt 1 view .LVU164
 666              	.LVL43:
 242:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 667              		.loc 1 242 5 view .LVU165
 242:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 668              		.loc 1 242 43 is_stmt 0 view .LVU166
 669 0010 DDED058A 		vldr.32	s17, [sp, #20]
 242:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 670              		.loc 1 242 50 view .LVU167
 671 0014 28EEA87A 		vmul.f32	s14, s17, s17
 242:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 672              		.loc 1 242 75 view .LVU168
 673 0018 9DED068A 		vldr.32	s16, [sp, #24]
 242:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 674              		.loc 1 242 81 view .LVU169
 675 001c 68EE087A 		vmul.f32	s15, s16, s16
 242:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 676              		.loc 1 242 31 view .LVU170
 677 0020 77EE277A 		vadd.f32	s15, s14, s15
 678 0024 17EE900A 		vmov	r0, s15
 679              	.LVL44:
 242:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 680              		.loc 1 242 31 view .LVU171
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 22


 681 0028 FFF7FEFF 		bl	__aeabi_f2d
 682              	.LVL45:
 683 002c 41EC100B 		vmov	d0, r0, r1
 684 0030 FFF7FEFF 		bl	sqrt
 685              	.LVL46:
 686 0034 51EC100B 		vmov	r0, r1, d0
 242:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 687              		.loc 1 242 11 view .LVU172
 688 0038 FFF7FEFF 		bl	__aeabi_d2f
 689              	.LVL47:
 690 003c 07EE900A 		vmov	s15, r0
 691              	.LVL48:
 243:../BLDCMotor/motorctrl.c ****     if (voltage_magnitude > max_voltage) {  
 692              		.loc 1 243 5 is_stmt 1 view .LVU173
 244:../BLDCMotor/motorctrl.c ****         // Â¶ÇÊûúÁü¢ÈáèÈïøÂ∫¶Ë∂ÖËøáÊúÄÂ§ßÁîµÂéãÔºåÂàôÊåâÊØî‰æãÁº©ÊîæÁü¢Èáè‰ª•‰ΩøÂÖ∂ËêΩÂú®ÁîµÂéãÁü¢È
 693              		.loc 1 244 5 view .LVU174
 244:../BLDCMotor/motorctrl.c ****         // Â¶ÇÊûúÁü¢ÈáèÈïøÂ∫¶Ë∂ÖËøáÊúÄÂ§ßÁîµÂéãÔºåÂàôÊåâÊØî‰æãÁº©ÊîæÁü¢Èáè‰ª•‰ΩøÂÖ∂ËêΩÂú®ÁîµÂéãÁü¢È
 694              		.loc 1 244 8 is_stmt 0 view .LVU175
 695 0040 B1EE007A 		vmov.f32	s14, #4.0e+0
 696 0044 F4EEC77A 		vcmpe.f32	s15, s14
 697 0048 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 698 004c 12DD     		ble	.L40
 699              	.LBB2:
 246:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha * scale_factor;  
 700              		.loc 1 246 9 is_stmt 1 view .LVU176
 246:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha * scale_factor;  
 701              		.loc 1 246 15 is_stmt 0 view .LVU177
 702 004e F0EE476A 		vmov.f32	s13, s14
 703 0052 86EEA77A 		vdiv.f32	s14, s13, s15
 704              	.LVL49:
 247:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 705              		.loc 1 247 9 is_stmt 1 view .LVU178
 247:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 706              		.loc 1 247 35 is_stmt 0 view .LVU179
 707 0056 68EE878A 		vmul.f32	s17, s17, s14
 247:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 708              		.loc 1 247 19 view .LVU180
 709 005a C4ED008A 		vstr.32	s17, [r4]
 248:../BLDCMotor/motorctrl.c ****     } else {  
 710              		.loc 1 248 9 is_stmt 1 view .LVU181
 248:../BLDCMotor/motorctrl.c ****     } else {  
 711              		.loc 1 248 33 is_stmt 0 view .LVU182
 712 005e 28EE078A 		vmul.f32	s16, s16, s14
 248:../BLDCMotor/motorctrl.c ****     } else {  
 713              		.loc 1 248 18 view .LVU183
 714 0062 84ED018A 		vstr.32	s16, [r4, #4]
 715              	.LVL50:
 716              	.L35:
 248:../BLDCMotor/motorctrl.c ****     } else {  
 717              		.loc 1 248 18 view .LVU184
 718              	.LBE2:
 255:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 719              		.loc 1 255 1 view .LVU185
 720 0066 2046     		mov	r0, r4
 721              	.LVL51:
 255:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 722              		.loc 1 255 1 view .LVU186
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 23


 723 0068 BDEC028B 		vldm	sp!, {d8}
 724              	.LCFI24:
 725              		.cfi_remember_state
 726              		.cfi_restore 80
 727              		.cfi_restore 81
 728              		.cfi_def_cfa_offset 24
 729 006c BDE81040 		pop	{r4, lr}
 730              	.LCFI25:
 731              		.cfi_restore 14
 732              		.cfi_restore 4
 733              		.cfi_def_cfa_offset 16
 734              	.LVL52:
 255:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 735              		.loc 1 255 1 view .LVU187
 736 0070 04B0     		add	sp, sp, #16
 737              	.LCFI26:
 738              		.cfi_def_cfa_offset 0
 739 0072 7047     		bx	lr
 740              	.LVL53:
 741              	.L40:
 742              	.LCFI27:
 743              		.cfi_restore_state
 251:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta;  
 744              		.loc 1 251 9 is_stmt 1 view .LVU188
 251:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta;  
 745              		.loc 1 251 19 is_stmt 0 view .LVU189
 746 0074 C4ED008A 		vstr.32	s17, [r4]
 252:../BLDCMotor/motorctrl.c ****     }
 747              		.loc 1 252 9 is_stmt 1 view .LVU190
 252:../BLDCMotor/motorctrl.c ****     }
 748              		.loc 1 252 18 is_stmt 0 view .LVU191
 749 0078 84ED018A 		vstr.32	s16, [r4, #4]
 254:../BLDCMotor/motorctrl.c **** }
 750              		.loc 1 254 5 is_stmt 1 view .LVU192
 254:../BLDCMotor/motorctrl.c **** }
 751              		.loc 1 254 12 is_stmt 0 view .LVU193
 752 007c F3E7     		b	.L35
 753              		.cfi_endproc
 754              	.LFE238:
 756              		.section	.rodata._50uscycle_process.str1.4,"aMS",%progbits,1
 757              		.align	2
 758              	.LC0:
 759 0000 656E7465 		.ascii	"enter IDLE\015\012\000"
 759      72204944 
 759      4C450D0A 
 759      00
 760              		.section	.text._50uscycle_process,"ax",%progbits
 761              		.align	1
 762              		.global	_50uscycle_process
 763              		.syntax unified
 764              		.thumb
 765              		.thumb_func
 767              	_50uscycle_process:
 768              	.LVL54:
 769              	.LFB237:
 104:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 770              		.loc 1 104 1 is_stmt 1 view -0
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 24


 771              		.cfi_startproc
 772              		@ args = 0, pretend = 0, frame = 112
 773              		@ frame_needed = 0, uses_anonymous_args = 0
 104:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 774              		.loc 1 104 1 is_stmt 0 view .LVU195
 775 0000 30B5     		push	{r4, r5, lr}
 776              	.LCFI28:
 777              		.cfi_def_cfa_offset 12
 778              		.cfi_offset 4, -12
 779              		.cfi_offset 5, -8
 780              		.cfi_offset 14, -4
 781 0002 2DED048B 		vpush.64	{d8, d9}
 782              	.LCFI29:
 783              		.cfi_def_cfa_offset 28
 784              		.cfi_offset 80, -28
 785              		.cfi_offset 81, -24
 786              		.cfi_offset 82, -20
 787              		.cfi_offset 83, -16
 788 0006 A1B0     		sub	sp, sp, #132
 789              	.LCFI30:
 790              		.cfi_def_cfa_offset 160
 105:../BLDCMotor/motorctrl.c ****     int32_t Q15_Mechtheta;    
 791              		.loc 1 105 5 is_stmt 1 view .LVU196
 106:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 792              		.loc 1 106 5 view .LVU197
 107:../BLDCMotor/motorctrl.c ****     abc_t i_abc;
 793              		.loc 1 107 5 view .LVU198
 108:../BLDCMotor/motorctrl.c ****     dq_t udq;
 794              		.loc 1 108 5 view .LVU199
 109:../BLDCMotor/motorctrl.c **** 
 795              		.loc 1 109 5 view .LVU200
 113:../BLDCMotor/motorctrl.c ****     int32_t a1,b1,c1;
 796              		.loc 1 113 5 view .LVU201
 114:../BLDCMotor/motorctrl.c ****     a1 = abc_vale[0] - A_ADCCHANNL_OFFSET;
 797              		.loc 1 114 5 view .LVU202
 115:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 798              		.loc 1 115 5 view .LVU203
 115:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 799              		.loc 1 115 18 is_stmt 0 view .LVU204
 800 0008 0368     		ldr	r3, [r0]
 115:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 801              		.loc 1 115 22 view .LVU205
 802 000a A3F64903 		subw	r3, r3, #2121
 803              	.LVL55:
 116:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 804              		.loc 1 116 5 is_stmt 1 view .LVU206
 116:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 805              		.loc 1 116 18 is_stmt 0 view .LVU207
 806 000e 4268     		ldr	r2, [r0, #4]
 116:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 807              		.loc 1 116 22 view .LVU208
 808 0010 A2F65A02 		subw	r2, r2, #2138
 809 0014 08EE102A 		vmov	s16, r2	@ int
 810              	.LVL56:
 117:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ia = a1;
 811              		.loc 1 117 5 is_stmt 1 view .LVU209
 118:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 25


 812              		.loc 1 118 5 view .LVU210
 118:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 813              		.loc 1 118 24 is_stmt 0 view .LVU211
 814 0018 964A     		ldr	r2, .L57
 815              	.LVL57:
 118:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 816              		.loc 1 118 24 view .LVU212
 817 001a D361     		str	r3, [r2, #28]
 818              	.LVL58:
 119:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 819              		.loc 1 119 5 is_stmt 1 view .LVU213
 119:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 820              		.loc 1 119 10 is_stmt 0 view .LVU214
 821 001c 07EE903A 		vmov	s15, r3	@ int
 822 0020 B8EEE70A 		vcvt.f32.s32	s0, s15
 823              	.LVL59:
 119:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 824              		.loc 1 119 8 view .LVU215
 825 0024 DFED947A 		vldr.32	s15, .L57+4
 826 0028 20EE270A 		vmul.f32	s0, s0, s15
 827              	.LVL60:
 120:../BLDCMotor/motorctrl.c ****     // Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 828              		.loc 1 120 5 is_stmt 1 view .LVU216
 120:../BLDCMotor/motorctrl.c ****     // Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 829              		.loc 1 120 10 is_stmt 0 view .LVU217
 830 002c B8EEC88A 		vcvt.f32.s32	s16, s16
 831              	.LVL61:
 120:../BLDCMotor/motorctrl.c ****     // Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 832              		.loc 1 120 8 view .LVU218
 833 0030 DFED927A 		vldr.32	s15, .L57+8
 834 0034 28EE278A 		vmul.f32	s16, s16, s15
 835              	.LVL62:
 122:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 836              		.loc 1 122 5 is_stmt 1 view .LVU219
 122:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 837              		.loc 1 122 10 is_stmt 0 view .LVU220
 838 0038 F1EE409A 		vneg.f32	s19, s0
 122:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 839              		.loc 1 122 8 view .LVU221
 840 003c 79EEC89A 		vsub.f32	s19, s19, s16
 841              	.LVL63:
 123:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 842              		.loc 1 123 5 is_stmt 1 view .LVU222
 123:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 843              		.loc 1 123 15 is_stmt 0 view .LVU223
 844 0040 8F4C     		ldr	r4, .L57+12
 845 0042 2046     		mov	r0, r4
 846              	.LVL64:
 123:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 847              		.loc 1 123 15 view .LVU224
 848 0044 FFF7FEFF 		bl	lowfilter_cale
 849              	.LVL65:
 123:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 850              		.loc 1 123 15 view .LVU225
 851 0048 B0EE409A 		vmov.f32	s18, s0
 123:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 852              		.loc 1 123 13 view .LVU226
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 26


 853 004c 8DED140A 		vstr.32	s0, [sp, #80]
 124:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 854              		.loc 1 124 5 is_stmt 1 view .LVU227
 124:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 855              		.loc 1 124 15 is_stmt 0 view .LVU228
 856 0050 B0EE480A 		vmov.f32	s0, s16
 857 0054 04F10800 		add	r0, r4, #8
 858 0058 FFF7FEFF 		bl	lowfilter_cale
 859              	.LVL66:
 860 005c F0EE408A 		vmov.f32	s17, s0
 124:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 861              		.loc 1 124 13 view .LVU229
 862 0060 8DED150A 		vstr.32	s0, [sp, #84]
 125:../BLDCMotor/motorctrl.c **** 
 863              		.loc 1 125 5 is_stmt 1 view .LVU230
 125:../BLDCMotor/motorctrl.c **** 
 864              		.loc 1 125 15 is_stmt 0 view .LVU231
 865 0064 B0EE690A 		vmov.f32	s0, s19
 866 0068 04F11000 		add	r0, r4, #16
 867 006c FFF7FEFF 		bl	lowfilter_cale
 868              	.LVL67:
 125:../BLDCMotor/motorctrl.c **** 
 869              		.loc 1 125 13 view .LVU232
 870 0070 8DED160A 		vstr.32	s0, [sp, #88]
 129:../BLDCMotor/motorctrl.c ****         OFFSET=0,
 871              		.loc 1 129 5 is_stmt 1 view .LVU233
 136:../BLDCMotor/motorctrl.c ****     switch (state0_)
 872              		.loc 1 136 5 view .LVU234
 137:../BLDCMotor/motorctrl.c ****     {
 873              		.loc 1 137 5 view .LVU235
 874 0074 834B     		ldr	r3, .L57+16
 875 0076 B3F90030 		ldrsh	r3, [r3]
 876 007a 042B     		cmp	r3, #4
 877 007c 7CD8     		bhi	.L42
 878 007e DFE803F0 		tbb	[pc, r3]
 879              	.L45:
 880 0082 03       		.byte	(.L48-.L45)/2
 881 0083 7B       		.byte	(.L42-.L45)/2
 882 0084 7F       		.byte	(.L47-.L45)/2
 883 0085 24       		.byte	(.L46-.L45)/2
 884 0086 0E       		.byte	(.L44-.L45)/2
 885 0087 00       		.p2align 1
 886              	.L48:
 887              	.LBB3:
 140:../BLDCMotor/motorctrl.c ****             {
 888              		.loc 1 140 13 view .LVU236
 140:../BLDCMotor/motorctrl.c ****             {
 889              		.loc 1 140 17 is_stmt 0 view .LVU237
 890 0088 FFF7FEFF 		bl	_get_angleoffset
 891              	.LVL68:
 140:../BLDCMotor/motorctrl.c ****             {
 892              		.loc 1 140 16 view .LVU238
 893 008c 0028     		cmp	r0, #0
 894 008e 73D1     		bne	.L42
 144:../BLDCMotor/motorctrl.c ****             state0_ = CLOSELOOP;
 895              		.loc 1 144 13 is_stmt 1 view .LVU239
 896 0090 7D49     		ldr	r1, .L57+20
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 27


 897 0092 FFF7FEFF 		bl	SEGGER_RTT_printf
 898              	.LVL69:
 145:../BLDCMotor/motorctrl.c ****             break;
 899              		.loc 1 145 13 view .LVU240
 145:../BLDCMotor/motorctrl.c ****             break;
 900              		.loc 1 145 21 is_stmt 0 view .LVU241
 901 0096 7B4B     		ldr	r3, .L57+16
 902 0098 0222     		movs	r2, #2
 903 009a 1A80     		strh	r2, [r3]	@ movhi
 146:../BLDCMotor/motorctrl.c ****         case IDLE:
 904              		.loc 1 146 13 is_stmt 1 view .LVU242
 905 009c 6CE0     		b	.L42
 906              	.L44:
 148:../BLDCMotor/motorctrl.c ****             {
 907              		.loc 1 148 13 view .LVU243
 148:../BLDCMotor/motorctrl.c ****             {
 908              		.loc 1 148 30 is_stmt 0 view .LVU244
 909 009e 754B     		ldr	r3, .L57
 910 00a0 D3ED107A 		vldr.32	s15, [r3, #64]
 148:../BLDCMotor/motorctrl.c ****             {
 911              		.loc 1 148 16 view .LVU245
 912 00a4 F5EE407A 		vcmp.f32	s15, #0
 913 00a8 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 914 00ac 06D1     		bne	.L49
 148:../BLDCMotor/motorctrl.c ****             {
 915              		.loc 1 148 64 discriminator 1 view .LVU246
 916 00ae D3ED127A 		vldr.32	s15, [r3, #72]
 148:../BLDCMotor/motorctrl.c ****             {
 917              		.loc 1 148 48 discriminator 1 view .LVU247
 918 00b2 F5EE407A 		vcmp.f32	s15, #0
 919 00b6 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 920 00ba 5DD0     		beq	.L42
 921              	.L49:
 150:../BLDCMotor/motorctrl.c ****                 state0_ = SPEEDLOOP;
 922              		.loc 1 150 17 is_stmt 1 view .LVU248
 150:../BLDCMotor/motorctrl.c ****                 state0_ = SPEEDLOOP;
 923              		.loc 1 150 41 is_stmt 0 view .LVU249
 924 00bc 6D4B     		ldr	r3, .L57
 925 00be 0022     		movs	r2, #0
 926 00c0 1A67     		str	r2, [r3, #112]	@ float
 151:../BLDCMotor/motorctrl.c ****             }
 927              		.loc 1 151 17 is_stmt 1 view .LVU250
 151:../BLDCMotor/motorctrl.c ****             }
 928              		.loc 1 151 25 is_stmt 0 view .LVU251
 929 00c2 704B     		ldr	r3, .L57+16
 930 00c4 0322     		movs	r2, #3
 931 00c6 1A80     		strh	r2, [r3]	@ movhi
 932 00c8 56E0     		b	.L42
 933              	.L46:
 155:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(Q15_Mechtheta);
 934              		.loc 1 155 13 is_stmt 1 view .LVU252
 155:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(Q15_Mechtheta);
 935              		.loc 1 155 40 is_stmt 0 view .LVU253
 936 00ca 0121     		movs	r1, #1
 937 00cc 0020     		movs	r0, #0
 938 00ce FFF7FEFF 		bl	sensor_user_read
 939              	.LVL70:
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 28


 156:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 940              		.loc 1 156 13 is_stmt 1 view .LVU254
 156:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 941              		.loc 1 156 26 is_stmt 0 view .LVU255
 942 00d2 0068     		ldr	r0, [r0]
 943              	.LVL71:
 156:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 944              		.loc 1 156 26 view .LVU256
 945 00d4 FFF7FEFF 		bl	_IQ20toF
 946              	.LVL72:
 156:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 947              		.loc 1 156 26 view .LVU257
 948 00d8 B0EE408A 		vmov.f32	s16, s0
 949              	.LVL73:
 157:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 950              		.loc 1 157 13 is_stmt 1 view .LVU258
 157:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 951              		.loc 1 157 40 is_stmt 0 view .LVU259
 952 00dc FFF7FEFF 		bl	motor_speedcale
 953              	.LVL74:
 157:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 954              		.loc 1 157 38 view .LVU260
 955 00e0 644C     		ldr	r4, .L57
 956 00e2 84ED110A 		vstr.32	s0, [r4, #68]
 158:../BLDCMotor/motorctrl.c ****             elec_theta -= sg_MecThetaOffset;
 957              		.loc 1 158 13 is_stmt 1 view .LVU261
 158:../BLDCMotor/motorctrl.c ****             elec_theta -= sg_MecThetaOffset;
 958              		.loc 1 158 24 is_stmt 0 view .LVU262
 959 00e6 B1EE0C0A 		vmov.f32	s0, #7.0e+0
 960 00ea 28EE008A 		vmul.f32	s16, s16, s0
 961              	.LVL75:
 159:../BLDCMotor/motorctrl.c **** 
 962              		.loc 1 159 13 is_stmt 1 view .LVU263
 963 00ee 674B     		ldr	r3, .L57+24
 964 00f0 93ED000A 		vldr.32	s0, [r3]
 965              	.LVL76:
 161:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 966              		.loc 1 161 13 view .LVU264
 161:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 967              		.loc 1 161 26 is_stmt 0 view .LVU265
 968 00f4 38EE400A 		vsub.f32	s0, s16, s0
 969              	.LVL77:
 161:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 970              		.loc 1 161 26 view .LVU266
 971 00f8 FFF7FEFF 		bl	_normalize_angle
 972              	.LVL78:
 161:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 973              		.loc 1 161 26 view .LVU267
 974 00fc B0EE408A 		vmov.f32	s16, s0
 975              	.LVL79:
 162:../BLDCMotor/motorctrl.c **** 
 976              		.loc 1 162 13 is_stmt 1 view .LVU268
 977 0100 04AD     		add	r5, sp, #16
 978 0102 17AB     		add	r3, sp, #92
 979 0104 93E80700 		ldm	r3, {r0, r1, r2}
 980 0108 8DE80700 		stm	sp, {r0, r1, r2}
 981 010c 14AB     		add	r3, sp, #80
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 29


 982 010e 0ECB     		ldm	r3, {r1, r2, r3}
 983 0110 2846     		mov	r0, r5
 984 0112 FFF7FEFF 		bl	_currmentloop
 985              	.LVL80:
 164:../BLDCMotor/motorctrl.c ****             static unsigned short cnt = 0;
 986              		.loc 1 164 13 view .LVU269
 164:../BLDCMotor/motorctrl.c ****             static unsigned short cnt = 0;
 987              		.loc 1 164 37 is_stmt 0 view .LVU270
 988 0116 84ED1C8A 		vstr.32	s16, [r4, #112]
 165:../BLDCMotor/motorctrl.c ****             if (cnt++ < 200)
 989              		.loc 1 165 13 is_stmt 1 view .LVU271
 166:../BLDCMotor/motorctrl.c ****             {
 990              		.loc 1 166 13 view .LVU272
 166:../BLDCMotor/motorctrl.c ****             {
 991              		.loc 1 166 20 is_stmt 0 view .LVU273
 992 011a 5D4B     		ldr	r3, .L57+28
 993 011c 1A88     		ldrh	r2, [r3]
 994 011e 0132     		adds	r2, r2, #1
 995 0120 1A80     		strh	r2, [r3]	@ movhi
 169:../BLDCMotor/motorctrl.c ****             cnt = 0;
 996              		.loc 1 169 13 is_stmt 1 view .LVU274
 170:../BLDCMotor/motorctrl.c ****             udq.q = 0.3f;
 997              		.loc 1 170 13 view .LVU275
 170:../BLDCMotor/motorctrl.c ****             udq.q = 0.3f;
 998              		.loc 1 170 17 is_stmt 0 view .LVU276
 999 0122 0022     		movs	r2, #0
 1000 0124 1A80     		strh	r2, [r3]	@ movhi
 171:../BLDCMotor/motorctrl.c ****             udq.d = 0;
 1001              		.loc 1 171 13 is_stmt 1 view .LVU277
 171:../BLDCMotor/motorctrl.c ****             udq.d = 0;
 1002              		.loc 1 171 19 is_stmt 0 view .LVU278
 1003 0126 5B4B     		ldr	r3, .L57+32
 1004 0128 1193     		str	r3, [sp, #68]	@ float
 172:../BLDCMotor/motorctrl.c ****             alpbet_t uab;
 1005              		.loc 1 172 13 is_stmt 1 view .LVU279
 172:../BLDCMotor/motorctrl.c ****             alpbet_t uab;
 1006              		.loc 1 172 19 is_stmt 0 view .LVU280
 1007 012a 0023     		movs	r3, #0
 1008 012c 1093     		str	r3, [sp, #64]	@ float
 173:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, elec_theta - PI_2);  
 1009              		.loc 1 173 13 is_stmt 1 view .LVU281
 174:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 1010              		.loc 1 174 13 view .LVU282
 174:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 1011              		.loc 1 174 19 is_stmt 0 view .LVU283
 1012 012e 0CAC     		add	r4, sp, #48
 1013 0130 139B     		ldr	r3, [sp, #76]
 1014 0132 0093     		str	r3, [sp]
 1015 0134 10AB     		add	r3, sp, #64
 1016 0136 0ECB     		ldm	r3, {r1, r2, r3}
 1017 0138 9FED570A 		vldr.32	s0, .L57+36
 1018 013c 38EE400A 		vsub.f32	s0, s16, s0
 1019 0140 2046     		mov	r0, r4
 1020 0142 FFF7FEFF 		bl	_2r_2s
 1021              	.LVL81:
 175:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 1022              		.loc 1 175 13 is_stmt 1 view .LVU284
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 30


 175:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 1023              		.loc 1 175 19 is_stmt 0 view .LVU285
 1024 0146 0F9B     		ldr	r3, [sp, #60]
 1025 0148 0093     		str	r3, [sp]
 1026 014a 94E80E00 		ldm	r4, {r1, r2, r3}
 1027 014e 2846     		mov	r0, r5
 1028 0150 FFF7FEFF 		bl	_limit_voltagecircle
 1029              	.LVL82:
 1030 0154 95E80F00 		ldm	r5, {r0, r1, r2, r3}
 1031 0158 84E80F00 		stm	r4, {r0, r1, r2, r3}
 176:../BLDCMotor/motorctrl.c ****             break;
 1032              		.loc 1 176 13 is_stmt 1 view .LVU286
 1033 015c DDED0D0A 		vldr.32	s1, [sp, #52]
 1034 0160 9DED0C0A 		vldr.32	s0, [sp, #48]
 1035 0164 FFF7FEFF 		bl	_svpwm
 1036              	.LVL83:
 1037 0168 8DED1A0A 		vstr.32	s0, [sp, #104]
 1038 016c CDED1B0A 		vstr.32	s1, [sp, #108]
 1039 0170 8DED1C1A 		vstr.32	s2, [sp, #112]
 1040 0174 FFF7FEFF 		bl	motor_set_pwm
 1041              	.LVL84:
 177:../BLDCMotor/motorctrl.c ****         case CLOSELOOP:
 1042              		.loc 1 177 13 view .LVU287
 1043              	.L42:
 177:../BLDCMotor/motorctrl.c ****         case CLOSELOOP:
 1044              		.loc 1 177 13 is_stmt 0 view .LVU288
 1045              	.LBE3:
 236:../BLDCMotor/motorctrl.c **** 
 1046              		.loc 1 236 1 view .LVU289
 1047 0178 21B0     		add	sp, sp, #132
 1048              	.LCFI31:
 1049              		.cfi_remember_state
 1050              		.cfi_def_cfa_offset 28
 1051              		@ sp needed
 1052 017a BDEC048B 		vldm	sp!, {d8-d9}
 1053              	.LCFI32:
 1054              		.cfi_restore 82
 1055              		.cfi_restore 83
 1056              		.cfi_restore 80
 1057              		.cfi_restore 81
 1058              		.cfi_def_cfa_offset 12
 1059 017e 30BD     		pop	{r4, r5, pc}
 1060              	.LVL85:
 1061              	.L47:
 1062              	.LCFI33:
 1063              		.cfi_restore_state
 236:../BLDCMotor/motorctrl.c **** 
 1064              		.loc 1 236 1 view .LVU290
 1065 0180 B0EE408A 		vmov.f32	s16, s0
 1066              	.LVL86:
 1067              	.LBB6:
 1068              	.LBB4:
 181:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(Q15_Mechtheta);
 1069              		.loc 1 181 13 is_stmt 1 view .LVU291
 181:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(Q15_Mechtheta);
 1070              		.loc 1 181 40 is_stmt 0 view .LVU292
 1071 0184 0121     		movs	r1, #1
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 31


 1072 0186 0020     		movs	r0, #0
 1073 0188 FFF7FEFF 		bl	sensor_user_read
 1074              	.LVL87:
 182:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 1075              		.loc 1 182 13 is_stmt 1 view .LVU293
 182:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 1076              		.loc 1 182 26 is_stmt 0 view .LVU294
 1077 018c 0068     		ldr	r0, [r0]
 1078              	.LVL88:
 182:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 1079              		.loc 1 182 26 view .LVU295
 1080 018e FFF7FEFF 		bl	_IQ20toF
 1081              	.LVL89:
 182:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 1082              		.loc 1 182 26 view .LVU296
 1083 0192 F0EE409A 		vmov.f32	s19, s0
 1084              	.LVL90:
 183:../BLDCMotor/motorctrl.c **** 
 1085              		.loc 1 183 13 is_stmt 1 view .LVU297
 183:../BLDCMotor/motorctrl.c **** 
 1086              		.loc 1 183 40 is_stmt 0 view .LVU298
 1087 0196 FFF7FEFF 		bl	motor_speedcale
 1088              	.LVL91:
 183:../BLDCMotor/motorctrl.c **** 
 1089              		.loc 1 183 38 view .LVU299
 1090 019a 364C     		ldr	r4, .L57
 1091 019c 84ED110A 		vstr.32	s0, [r4, #68]
 185:../BLDCMotor/motorctrl.c ****             elec_theta -= sg_MecThetaOffset;
 1092              		.loc 1 185 13 is_stmt 1 view .LVU300
 185:../BLDCMotor/motorctrl.c ****             elec_theta -= sg_MecThetaOffset;
 1093              		.loc 1 185 24 is_stmt 0 view .LVU301
 1094 01a0 B1EE0C0A 		vmov.f32	s0, #7.0e+0
 1095 01a4 69EE809A 		vmul.f32	s19, s19, s0
 1096              	.LVL92:
 186:../BLDCMotor/motorctrl.c **** 
 1097              		.loc 1 186 13 is_stmt 1 view .LVU302
 1098 01a8 384B     		ldr	r3, .L57+24
 1099 01aa 93ED000A 		vldr.32	s0, [r3]
 1100              	.LVL93:
 188:../BLDCMotor/motorctrl.c ****             sg_motordebug.ele_angle = elec_theta;
 1101              		.loc 1 188 13 view .LVU303
 188:../BLDCMotor/motorctrl.c ****             sg_motordebug.ele_angle = elec_theta;
 1102              		.loc 1 188 26 is_stmt 0 view .LVU304
 1103 01ae 39EEC00A 		vsub.f32	s0, s19, s0
 1104              	.LVL94:
 188:../BLDCMotor/motorctrl.c ****             sg_motordebug.ele_angle = elec_theta;
 1105              		.loc 1 188 26 view .LVU305
 1106 01b2 FFF7FEFF 		bl	_normalize_angle
 1107              	.LVL95:
 188:../BLDCMotor/motorctrl.c ****             sg_motordebug.ele_angle = elec_theta;
 1108              		.loc 1 188 26 view .LVU306
 1109 01b6 F0EE409A 		vmov.f32	s19, s0
 1110              	.LVL96:
 189:../BLDCMotor/motorctrl.c **** 
 1111              		.loc 1 189 13 is_stmt 1 view .LVU307
 189:../BLDCMotor/motorctrl.c **** 
 1112              		.loc 1 189 37 is_stmt 0 view .LVU308
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 32


 1113 01ba 84ED1C0A 		vstr.32	s0, [r4, #112]
 204:../BLDCMotor/motorctrl.c ****             #if 0/*Èó≠ÁéØÊéßÂà∂*/
 1114              		.loc 1 204 13 is_stmt 1 view .LVU309
 204:../BLDCMotor/motorctrl.c ****             #if 0/*Èó≠ÁéØÊéßÂà∂*/
 1115              		.loc 1 204 18 is_stmt 0 view .LVU310
 1116 01be 0023     		movs	r3, #0
 1117 01c0 0893     		str	r3, [sp, #32]	@ float
 1118 01c2 0993     		str	r3, [sp, #36]	@ float
 1119 01c4 0023     		movs	r3, #0
 1120 01c6 0A93     		str	r3, [sp, #40]
 1121 01c8 46F26663 		movw	r3, #26214
 1122 01cc 0B93     		str	r3, [sp, #44]
 212:../BLDCMotor/motorctrl.c ****                 {
 1123              		.loc 1 212 17 is_stmt 1 view .LVU311
 212:../BLDCMotor/motorctrl.c ****                 {
 1124              		.loc 1 212 34 is_stmt 0 view .LVU312
 1125 01ce D4ED127A 		vldr.32	s15, [r4, #72]
 212:../BLDCMotor/motorctrl.c ****                 {
 1126              		.loc 1 212 20 view .LVU313
 1127 01d2 F5EEC07A 		vcmpe.f32	s15, #0
 1128 01d6 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1129 01da 3CD4     		bmi	.L56
 216:../BLDCMotor/motorctrl.c ****                     i_abc.b = -i_abc.b;
 1130              		.loc 1 216 21 is_stmt 1 view .LVU314
 216:../BLDCMotor/motorctrl.c ****                     i_abc.b = -i_abc.b;
 1131              		.loc 1 216 31 is_stmt 0 view .LVU315
 1132 01dc B1EE499A 		vneg.f32	s18, s18
 216:../BLDCMotor/motorctrl.c ****                     i_abc.b = -i_abc.b;
 1133              		.loc 1 216 29 view .LVU316
 1134 01e0 8DED149A 		vstr.32	s18, [sp, #80]
 217:../BLDCMotor/motorctrl.c ****                     i_abc.c = -i_abc.c;
 1135              		.loc 1 217 21 is_stmt 1 view .LVU317
 217:../BLDCMotor/motorctrl.c ****                     i_abc.c = -i_abc.c;
 1136              		.loc 1 217 31 is_stmt 0 view .LVU318
 1137 01e4 F1EE688A 		vneg.f32	s17, s17
 217:../BLDCMotor/motorctrl.c ****                     i_abc.c = -i_abc.c;
 1138              		.loc 1 217 29 view .LVU319
 1139 01e8 CDED158A 		vstr.32	s17, [sp, #84]
 218:../BLDCMotor/motorctrl.c ****                     _currmentloop(i_abc,elec_theta);
 1140              		.loc 1 218 21 is_stmt 1 view .LVU320
 218:../BLDCMotor/motorctrl.c ****                     _currmentloop(i_abc,elec_theta);
 1141              		.loc 1 218 31 is_stmt 0 view .LVU321
 1142 01ec B1EE488A 		vneg.f32	s16, s16
 218:../BLDCMotor/motorctrl.c ****                     _currmentloop(i_abc,elec_theta);
 1143              		.loc 1 218 29 view .LVU322
 1144 01f0 8DED168A 		vstr.32	s16, [sp, #88]
 219:../BLDCMotor/motorctrl.c ****                 }
 1145              		.loc 1 219 21 is_stmt 1 view .LVU323
 1146 01f4 17AB     		add	r3, sp, #92
 1147 01f6 93E80700 		ldm	r3, {r0, r1, r2}
 1148 01fa 8DE80700 		stm	sp, {r0, r1, r2}
 1149 01fe 14AB     		add	r3, sp, #80
 1150 0200 0ECB     		ldm	r3, {r1, r2, r3}
 1151 0202 04A8     		add	r0, sp, #16
 1152 0204 FFF7FEFF 		bl	_currmentloop
 1153              	.LVL97:
 1154              	.L52:
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 33


 222:../BLDCMotor/motorctrl.c ****                 udq.d = 0.0f;
 1155              		.loc 1 222 17 discriminator 2 view .LVU324
 222:../BLDCMotor/motorctrl.c ****                 udq.d = 0.0f;
 1156              		.loc 1 222 23 is_stmt 0 discriminator 2 view .LVU325
 1157 0208 244B     		ldr	r3, .L57+40
 1158 020a 0993     		str	r3, [sp, #36]	@ float
 223:../BLDCMotor/motorctrl.c ****                 // udq.q = _speedloop(300.0f,sg_motordebug.real_speed);
 1159              		.loc 1 223 17 is_stmt 1 discriminator 2 view .LVU326
 226:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, elec_theta);  
 1160              		.loc 1 226 13 discriminator 2 view .LVU327
 227:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 1161              		.loc 1 227 13 discriminator 2 view .LVU328
 227:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 1162              		.loc 1 227 19 is_stmt 0 discriminator 2 view .LVU329
 1163 020c 0CAC     		add	r4, sp, #48
 1164 020e 0B9B     		ldr	r3, [sp, #44]
 1165 0210 0093     		str	r3, [sp]
 1166 0212 08AB     		add	r3, sp, #32
 1167 0214 0ECB     		ldm	r3, {r1, r2, r3}
 1168 0216 B0EE690A 		vmov.f32	s0, s19
 1169 021a 2046     		mov	r0, r4
 1170 021c FFF7FEFF 		bl	_2r_2s
 1171              	.LVL98:
 228:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 1172              		.loc 1 228 13 is_stmt 1 discriminator 2 view .LVU330
 228:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 1173              		.loc 1 228 19 is_stmt 0 discriminator 2 view .LVU331
 1174 0220 04AD     		add	r5, sp, #16
 1175 0222 0F9B     		ldr	r3, [sp, #60]
 1176 0224 0093     		str	r3, [sp]
 1177 0226 94E80E00 		ldm	r4, {r1, r2, r3}
 1178 022a 2846     		mov	r0, r5
 1179 022c FFF7FEFF 		bl	_limit_voltagecircle
 1180              	.LVL99:
 1181 0230 95E80F00 		ldm	r5, {r0, r1, r2, r3}
 1182 0234 84E80F00 		stm	r4, {r0, r1, r2, r3}
 229:../BLDCMotor/motorctrl.c **** #endif
 1183              		.loc 1 229 13 is_stmt 1 discriminator 2 view .LVU332
 1184 0238 DDED0D0A 		vldr.32	s1, [sp, #52]
 1185 023c 9DED0C0A 		vldr.32	s0, [sp, #48]
 1186 0240 FFF7FEFF 		bl	_svpwm
 1187              	.LVL100:
 1188 0244 8DED1D0A 		vstr.32	s0, [sp, #116]
 1189 0248 CDED1E0A 		vstr.32	s1, [sp, #120]
 1190 024c 8DED1F1A 		vstr.32	s2, [sp, #124]
 1191 0250 FFF7FEFF 		bl	motor_set_pwm
 1192              	.LVL101:
 1193              	.LBE4:
 232:../BLDCMotor/motorctrl.c ****         default:
 1194              		.loc 1 232 13 discriminator 2 view .LVU333
 1195              	.LBE6:
 236:../BLDCMotor/motorctrl.c **** 
 1196              		.loc 1 236 1 is_stmt 0 discriminator 2 view .LVU334
 1197 0254 90E7     		b	.L42
 1198              	.LVL102:
 1199              	.L56:
 1200              	.LBB7:
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 34


 1201              	.LBB5:
 214:../BLDCMotor/motorctrl.c ****                 }else{
 1202              		.loc 1 214 17 is_stmt 1 view .LVU335
 1203 0256 17AB     		add	r3, sp, #92
 1204 0258 93E80700 		ldm	r3, {r0, r1, r2}
 1205 025c 8DE80700 		stm	sp, {r0, r1, r2}
 1206 0260 14AB     		add	r3, sp, #80
 1207 0262 0ECB     		ldm	r3, {r1, r2, r3}
 1208 0264 9FED0C0A 		vldr.32	s0, .L57+36
 1209              	.LVL103:
 214:../BLDCMotor/motorctrl.c ****                 }else{
 1210              		.loc 1 214 17 is_stmt 0 view .LVU336
 1211 0268 39EE800A 		vadd.f32	s0, s19, s0
 1212 026c 04A8     		add	r0, sp, #16
 1213 026e FFF7FEFF 		bl	_currmentloop
 1214              	.LVL104:
 1215 0272 C9E7     		b	.L52
 1216              	.L58:
 1217              		.align	2
 1218              	.L57:
 1219 0274 00000000 		.word	.LANCHOR3
 1220 0278 52B89E3E 		.word	1050589266
 1221 027c 3333B33E 		.word	1051931443
 1222 0280 00000000 		.word	.LANCHOR12
 1223 0284 00000000 		.word	.LANCHOR13
 1224 0288 00000000 		.word	.LC0
 1225 028c 00000000 		.word	.LANCHOR11
 1226 0290 00000000 		.word	.LANCHOR14
 1227 0294 9A99993E 		.word	1050253722
 1228 0298 D80FC93F 		.word	1070141400
 1229 029c CDCCCC3E 		.word	1053609165
 1230              	.LBE5:
 1231              	.LBE7:
 1232              		.cfi_endproc
 1233              	.LFE237:
 1235              		.section	.text.foc_paraminit,"ax",%progbits
 1236              		.align	1
 1237              		.global	foc_paraminit
 1238              		.syntax unified
 1239              		.thumb
 1240              		.thumb_func
 1242              	foc_paraminit:
 1243              	.LFB247:
 417:../BLDCMotor/motorctrl.c **** 
 418:../BLDCMotor/motorctrl.c **** void foc_paraminit(void)
 419:../BLDCMotor/motorctrl.c **** {
 1244              		.loc 1 419 1 is_stmt 1 view -0
 1245              		.cfi_startproc
 1246              		@ args = 0, pretend = 0, frame = 0
 1247              		@ frame_needed = 0, uses_anonymous_args = 0
 1248 0000 70B5     		push	{r4, r5, r6, lr}
 1249              	.LCFI34:
 1250              		.cfi_def_cfa_offset 16
 1251              		.cfi_offset 4, -16
 1252              		.cfi_offset 5, -12
 1253              		.cfi_offset 6, -8
 1254              		.cfi_offset 14, -4
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 35


 1255 0002 2DED028B 		vpush.64	{d8}
 1256              	.LCFI35:
 1257              		.cfi_def_cfa_offset 24
 1258              		.cfi_offset 80, -24
 1259              		.cfi_offset 81, -20
 420:../BLDCMotor/motorctrl.c ****     sgp_curloop_d_pid = &sg_curloop_param.d_pid;
 1260              		.loc 1 420 5 view .LVU338
 1261              		.loc 1 420 23 is_stmt 0 view .LVU339
 1262 0006 2448     		ldr	r0, .L61
 1263 0008 244B     		ldr	r3, .L61+4
 1264 000a 1860     		str	r0, [r3]
 421:../BLDCMotor/motorctrl.c ****     sgp_curloop_q_pid = &sg_curloop_param.q_pid;
 1265              		.loc 1 421 5 is_stmt 1 view .LVU340
 1266              		.loc 1 421 23 is_stmt 0 view .LVU341
 1267 000c 244E     		ldr	r6, .L61+8
 1268 000e 00F11C03 		add	r3, r0, #28
 1269 0012 3360     		str	r3, [r6]
 422:../BLDCMotor/motorctrl.c ****     sgp_speed_pid = &sg_speed_pid;
 1270              		.loc 1 422 5 is_stmt 1 view .LVU342
 1271              		.loc 1 422 19 is_stmt 0 view .LVU343
 1272 0014 234D     		ldr	r5, .L61+12
 1273 0016 244B     		ldr	r3, .L61+16
 1274 0018 2B60     		str	r3, [r5]
 423:../BLDCMotor/motorctrl.c ****     pid_init(sgp_curloop_d_pid,sg_motordebug.pid_d_kp,sg_motordebug.pid_d_ki,1.0f,D_MAX_VAL,D_MIN_V
 1275              		.loc 1 423 5 is_stmt 1 view .LVU344
 1276 001a 244C     		ldr	r4, .L61+20
 1277 001c B9EE002A 		vmov.f32	s4, #-4.0e+0
 1278 0020 F1EE001A 		vmov.f32	s3, #4.0e+0
 1279 0024 B7EE001A 		vmov.f32	s2, #1.0e+0
 1280 0028 D4ED1B0A 		vldr.32	s1, [r4, #108]
 1281 002c 94ED1A0A 		vldr.32	s0, [r4, #104]
 1282 0030 FFF7FEFF 		bl	pid_init
 1283              	.LVL105:
 424:../BLDCMotor/motorctrl.c ****     pid_init(sgp_curloop_q_pid,sg_motordebug.pid_d_kp,sg_motordebug.pid_d_ki,1.0f,D_MAX_VAL,D_MIN_V
 1284              		.loc 1 424 5 view .LVU345
 1285 0034 B9EE002A 		vmov.f32	s4, #-4.0e+0
 1286 0038 F1EE001A 		vmov.f32	s3, #4.0e+0
 1287 003c B7EE001A 		vmov.f32	s2, #1.0e+0
 1288 0040 D4ED1B0A 		vldr.32	s1, [r4, #108]
 1289 0044 94ED1A0A 		vldr.32	s0, [r4, #104]
 1290 0048 3068     		ldr	r0, [r6]
 1291 004a FFF7FEFF 		bl	pid_init
 1292              	.LVL106:
 425:../BLDCMotor/motorctrl.c ****     pid_init(sgp_speed_pid,sg_motordebug.pid_d_kp,sg_motordebug.pid_d_ki,1.0f,3.0,-3.0);
 1293              		.loc 1 425 5 view .LVU346
 1294 004e B8EE082A 		vmov.f32	s4, #-3.0e+0
 1295 0052 F0EE081A 		vmov.f32	s3, #3.0e+0
 1296 0056 B7EE001A 		vmov.f32	s2, #1.0e+0
 1297 005a D4ED1B0A 		vldr.32	s1, [r4, #108]
 1298 005e 94ED1A0A 		vldr.32	s0, [r4, #104]
 1299 0062 2868     		ldr	r0, [r5]
 1300 0064 FFF7FEFF 		bl	pid_init
 1301              	.LVL107:
 426:../BLDCMotor/motorctrl.c **** 
 427:../BLDCMotor/motorctrl.c ****     lowfilter_init(&sg_elefilter[0],80);
 1302              		.loc 1 427 5 view .LVU347
 1303 0068 9FED118A 		vldr.32	s16, .L61+24
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 36


 1304 006c 114C     		ldr	r4, .L61+28
 1305 006e B0EE480A 		vmov.f32	s0, s16
 1306 0072 2046     		mov	r0, r4
 1307 0074 FFF7FEFF 		bl	lowfilter_init
 1308              	.LVL108:
 428:../BLDCMotor/motorctrl.c ****     lowfilter_init(&sg_elefilter[1],80);
 1309              		.loc 1 428 5 view .LVU348
 1310 0078 B0EE480A 		vmov.f32	s0, s16
 1311 007c 04F10800 		add	r0, r4, #8
 1312 0080 FFF7FEFF 		bl	lowfilter_init
 1313              	.LVL109:
 429:../BLDCMotor/motorctrl.c ****     lowfilter_init(&sg_elefilter[2],80);
 1314              		.loc 1 429 5 view .LVU349
 1315 0084 B0EE480A 		vmov.f32	s0, s16
 1316 0088 04F11000 		add	r0, r4, #16
 1317 008c FFF7FEFF 		bl	lowfilter_init
 1318              	.LVL110:
 430:../BLDCMotor/motorctrl.c **** }
 1319              		.loc 1 430 1 is_stmt 0 view .LVU350
 1320 0090 BDEC028B 		vldm	sp!, {d8}
 1321              	.LCFI36:
 1322              		.cfi_restore 80
 1323              		.cfi_restore 81
 1324              		.cfi_def_cfa_offset 16
 1325 0094 70BD     		pop	{r4, r5, r6, pc}
 1326              	.L62:
 1327 0096 00BF     		.align	2
 1328              	.L61:
 1329 0098 00000000 		.word	.LANCHOR15
 1330 009c 00000000 		.word	.LANCHOR4
 1331 00a0 00000000 		.word	.LANCHOR5
 1332 00a4 00000000 		.word	.LANCHOR16
 1333 00a8 00000000 		.word	.LANCHOR17
 1334 00ac 00000000 		.word	.LANCHOR3
 1335 00b0 0000A042 		.word	1117782016
 1336 00b4 00000000 		.word	.LANCHOR12
 1337              		.cfi_endproc
 1338              	.LFE247:
 1340              		.section	.rodata.motortctrl_process.str1.4,"aMS",%progbits,1
 1341              		.align	2
 1342              	.LC1:
 1343 0000 6D6F746F 		.ascii	"motor stop\000"
 1343      72207374 
 1343      6F7000
 1344              		.section	.text.motortctrl_process,"ax",%progbits
 1345              		.align	1
 1346              		.global	motortctrl_process
 1347              		.syntax unified
 1348              		.thumb
 1349              		.thumb_func
 1351              	motortctrl_process:
 1352              	.LFB236:
  63:../BLDCMotor/motorctrl.c ****     char rec_buf[64];
 1353              		.loc 1 63 1 is_stmt 1 view -0
 1354              		.cfi_startproc
 1355              		@ args = 0, pretend = 0, frame = 0
 1356              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 37


 1357 0000 08B5     		push	{r3, lr}
 1358              	.LCFI37:
 1359              		.cfi_def_cfa_offset 8
 1360              		.cfi_offset 3, -8
 1361              		.cfi_offset 14, -4
  64:../BLDCMotor/motorctrl.c ****     char cnt = 0;
 1362              		.loc 1 64 5 view .LVU352
  65:../BLDCMotor/motorctrl.c ****     // if (readline_fromPC(rec_buf,sizeof(rec_buf)))
 1363              		.loc 1 65 5 view .LVU353
 1364              	.LVL111:
  70:../BLDCMotor/motorctrl.c ****     switch (g_Motor1.state)
 1365              		.loc 1 70 5 view .LVU354
 1366 0002 FFF7FEFF 		bl	motorprotocol_process
 1367              	.LVL112:
  71:../BLDCMotor/motorctrl.c ****     {
 1368              		.loc 1 71 5 view .LVU355
  71:../BLDCMotor/motorctrl.c ****     {
 1369              		.loc 1 71 21 is_stmt 0 view .LVU356
 1370 0006 114B     		ldr	r3, .L69
 1371 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  71:../BLDCMotor/motorctrl.c ****     {
 1372              		.loc 1 71 5 view .LVU357
 1373 000a 042B     		cmp	r3, #4
 1374 000c 11D0     		beq	.L64
 1375 000e 052B     		cmp	r3, #5
 1376 0010 19D0     		beq	.L65
 1377 0012 012B     		cmp	r3, #1
 1378 0014 00D0     		beq	.L68
 1379              	.L63:
  99:../BLDCMotor/motorctrl.c **** /*------------Âë®ÊúüÊÄßË¢´Ë∞ÉÁî®----------------*/
 1380              		.loc 1 99 1 view .LVU358
 1381 0016 08BD     		pop	{r3, pc}
 1382              	.L68:
  78:../BLDCMotor/motorctrl.c ****         lowfilter_init(&sg_speedfilter,80);
 1383              		.loc 1 78 9 is_stmt 1 view .LVU359
 1384 0018 FFF7FEFF 		bl	foc_paraminit
 1385              	.LVL113:
  79:../BLDCMotor/motorctrl.c ****         motor_enable();
 1386              		.loc 1 79 9 view .LVU360
 1387 001c 9FED0C0A 		vldr.32	s0, .L69+4
 1388 0020 0C48     		ldr	r0, .L69+8
 1389 0022 FFF7FEFF 		bl	lowfilter_init
 1390              	.LVL114:
  80:../BLDCMotor/motorctrl.c ****         g_Motor1.state = MOTOR_RUNING;
 1391              		.loc 1 80 9 view .LVU361
 1392 0026 FFF7FEFF 		bl	motor_enable
 1393              	.LVL115:
  81:../BLDCMotor/motorctrl.c ****         break;
 1394              		.loc 1 81 9 view .LVU362
  81:../BLDCMotor/motorctrl.c ****         break;
 1395              		.loc 1 81 24 is_stmt 0 view .LVU363
 1396 002a 084B     		ldr	r3, .L69
 1397 002c 0422     		movs	r2, #4
 1398 002e 1A70     		strb	r2, [r3]
  82:../BLDCMotor/motorctrl.c **** 
 1399              		.loc 1 82 9 is_stmt 1 view .LVU364
 1400 0030 F1E7     		b	.L63
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 38


 1401              	.L64:
  86:../BLDCMotor/motorctrl.c ****             {
 1402              		.loc 1 86 13 view .LVU365
  86:../BLDCMotor/motorctrl.c ****             {
 1403              		.loc 1 86 30 is_stmt 0 view .LVU366
 1404 0032 094B     		ldr	r3, .L69+12
 1405 0034 D3F88420 		ldr	r2, [r3, #132]
  86:../BLDCMotor/motorctrl.c ****             {
 1406              		.loc 1 86 16 view .LVU367
 1407 0038 084B     		ldr	r3, .L69+16
 1408 003a 9A42     		cmp	r2, r3
 1409 003c EBD1     		bne	.L63
  88:../BLDCMotor/motorctrl.c ****             }
 1410              		.loc 1 88 17 is_stmt 1 view .LVU368
  88:../BLDCMotor/motorctrl.c ****             }
 1411              		.loc 1 88 32 is_stmt 0 view .LVU369
 1412 003e 034B     		ldr	r3, .L69
 1413 0040 0522     		movs	r2, #5
 1414 0042 1A70     		strb	r2, [r3]
 1415 0044 E7E7     		b	.L63
 1416              	.L65:
  94:../BLDCMotor/motorctrl.c ****         break;
 1417              		.loc 1 94 9 is_stmt 1 view .LVU370
 1418 0046 FFF7FEFF 		bl	motor_disable
 1419              	.LVL116:
  95:../BLDCMotor/motorctrl.c ****     default:
 1420              		.loc 1 95 9 view .LVU371
  99:../BLDCMotor/motorctrl.c **** /*------------Âë®ÊúüÊÄßË¢´Ë∞ÉÁî®----------------*/
 1421              		.loc 1 99 1 is_stmt 0 view .LVU372
 1422 004a E4E7     		b	.L63
 1423              	.L70:
 1424              		.align	2
 1425              	.L69:
 1426 004c 00000000 		.word	.LANCHOR18
 1427 0050 0000A042 		.word	1117782016
 1428 0054 00000000 		.word	.LANCHOR2
 1429 0058 00000000 		.word	.LANCHOR3
 1430 005c 00000000 		.word	.LC1
 1431              		.cfi_endproc
 1432              	.LFE236:
 1434              		.global	test_c
 1435              		.global	test_b
 1436              		.global	test_a
 1437              		.global	test_d_pid
 1438              		.global	sg_speedfilter
 1439              		.global	g_Motor1
 1440              		.global	sg_motordebug
 1441              		.section	.bss.cnt.1,"aw",%nobits
 1442              		.align	1
 1443              		.set	.LANCHOR0,. + 0
 1446              	cnt.1:
 1447 0000 0000     		.space	2
 1448              		.section	.bss.cnt.4,"aw",%nobits
 1449              		.align	1
 1450              		.set	.LANCHOR14,. + 0
 1453              	cnt.4:
 1454 0000 0000     		.space	2
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 39


 1455              		.section	.bss.cnt_.2,"aw",%nobits
 1456              		.align	1
 1457              		.set	.LANCHOR10,. + 0
 1460              	cnt_.2:
 1461 0000 0000     		.space	2
 1462              		.section	.bss.pre_theta.0,"aw",%nobits
 1463              		.align	2
 1464              		.set	.LANCHOR1,. + 0
 1467              	pre_theta.0:
 1468 0000 00000000 		.space	4
 1469              		.section	.bss.sg_MecThetaOffset,"aw",%nobits
 1470              		.align	2
 1471              		.set	.LANCHOR11,. + 0
 1474              	sg_MecThetaOffset:
 1475 0000 00000000 		.space	4
 1476              		.section	.bss.sg_curloop_param,"aw",%nobits
 1477              		.align	2
 1478              		.set	.LANCHOR15,. + 0
 1481              	sg_curloop_param:
 1482 0000 00000000 		.space	56
 1482      00000000 
 1482      00000000 
 1482      00000000 
 1482      00000000 
 1483              		.section	.bss.sg_elefilter,"aw",%nobits
 1484              		.align	2
 1485              		.set	.LANCHOR12,. + 0
 1488              	sg_elefilter:
 1489 0000 00000000 		.space	24
 1489      00000000 
 1489      00000000 
 1489      00000000 
 1489      00000000 
 1490              		.section	.bss.sg_motordebug,"aw",%nobits
 1491              		.align	2
 1492              		.set	.LANCHOR3,. + 0
 1495              	sg_motordebug:
 1496 0000 00000000 		.space	136
 1496      00000000 
 1496      00000000 
 1496      00000000 
 1496      00000000 
 1497              		.section	.bss.sg_speed_pid,"aw",%nobits
 1498              		.align	2
 1499              		.set	.LANCHOR17,. + 0
 1502              	sg_speed_pid:
 1503 0000 00000000 		.space	28
 1503      00000000 
 1503      00000000 
 1503      00000000 
 1503      00000000 
 1504              		.section	.bss.sg_speedfilter,"aw",%nobits
 1505              		.align	2
 1506              		.set	.LANCHOR2,. + 0
 1509              	sg_speedfilter:
 1510 0000 00000000 		.space	8
 1510      00000000 
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 40


 1511              		.section	.bss.sgp_curloop_d_pid,"aw",%nobits
 1512              		.align	2
 1513              		.set	.LANCHOR4,. + 0
 1516              	sgp_curloop_d_pid:
 1517 0000 00000000 		.space	4
 1518              		.section	.bss.sgp_curloop_q_pid,"aw",%nobits
 1519              		.align	2
 1520              		.set	.LANCHOR5,. + 0
 1523              	sgp_curloop_q_pid:
 1524 0000 00000000 		.space	4
 1525              		.section	.bss.sgp_speed_pid,"aw",%nobits
 1526              		.align	2
 1527              		.set	.LANCHOR16,. + 0
 1530              	sgp_speed_pid:
 1531 0000 00000000 		.space	4
 1532              		.section	.bss.state0_.5,"aw",%nobits
 1533              		.align	1
 1534              		.set	.LANCHOR13,. + 0
 1537              	state0_.5:
 1538 0000 0000     		.space	2
 1539              		.section	.bss.test_a,"aw",%nobits
 1540              		.align	2
 1541              		.set	.LANCHOR6,. + 0
 1544              	test_a:
 1545 0000 00000000 		.space	4
 1546              		.section	.bss.test_b,"aw",%nobits
 1547              		.align	2
 1548              		.set	.LANCHOR7,. + 0
 1551              	test_b:
 1552 0000 00000000 		.space	4
 1553              		.section	.bss.test_c,"aw",%nobits
 1554              		.align	2
 1555              		.set	.LANCHOR8,. + 0
 1558              	test_c:
 1559 0000 00000000 		.space	4
 1560              		.section	.bss.test_d_pid,"aw",%nobits
 1561              		.align	2
 1564              	test_d_pid:
 1565 0000 00000000 		.space	28
 1565      00000000 
 1565      00000000 
 1565      00000000 
 1565      00000000 
 1566              		.section	.data.g_Motor1,"aw"
 1567              		.align	2
 1568              		.set	.LANCHOR18,. + 0
 1571              	g_Motor1:
 1572 0000 01       		.byte	1
 1573 0001 00       		.space	1
 1574 0002 0000     		.short	0
 1575              		.section	.data.state_.3,"aw"
 1576              		.align	1
 1577              		.set	.LANCHOR9,. + 0
 1580              	state_.3:
 1581 0000 0100     		.short	1
 1582              		.text
 1583              	.Letext0:
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 41


 1584              		.file 2 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\machine\\_defa
 1585              		.file 3 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\sys\\_stdint.h
 1586              		.file 4 "../Common/method/pid.h"
 1587              		.file 5 "../Common/method/filter.h"
 1588              		.file 6 "../Common/IQMath/ti/IQmathLib.h"
 1589              		.file 7 "../BLDCMotor/motorctrl_common.h"
 1590              		.file 8 "./Board/board.h"
 1591              		.file 9 "../Sensor/sensor.h"
 1592              		.file 10 "Inc/tim.h"
 1593              		.file 11 "Inc/adc.h"
 1594              		.file 12 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\math.h"
 1595              		.file 13 "../Common/debuglog/SEGGER_RTT_V792h/RTT/SEGGER_RTT.h"
 1596              		.file 14 "../BLDCMotor/./motorctrl.h"
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 42


DEFINED SYMBOLS
                            *ABS*:00000000 motorctrl.c
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:20     .text.motor_enable:00000000 $t
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:25     .text.motor_enable:00000000 motor_enable
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:52     .text.motor_disable:00000000 $t
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:57     .text.motor_disable:00000000 motor_disable
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:80     .text.motor_speedcale:00000000 $t
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:85     .text.motor_speedcale:00000000 motor_speedcale
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:220    .text.motor_speedcale:000000bc $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:232    .text._currmentloop:00000000 $t
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:237    .text._currmentloop:00000000 _currmentloop
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:414    .text._currmentloop:000000d0 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:421    .text.motor_set_pwm:00000000 $t
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:426    .text.motor_set_pwm:00000000 motor_set_pwm
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:466    .text.motor_set_pwm:0000002c $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:473    .text._get_angleoffset:00000000 $t
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:478    .text._get_angleoffset:00000000 _get_angleoffset
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:624    .text._get_angleoffset:000000ac $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:635    .text._limit_voltagecircle:00000000 $t
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:641    .text._limit_voltagecircle:00000000 _limit_voltagecircle
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:757    .rodata._50uscycle_process.str1.4:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:761    .text._50uscycle_process:00000000 $t
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:767    .text._50uscycle_process:00000000 _50uscycle_process
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:880    .text._50uscycle_process:00000082 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1219   .text._50uscycle_process:00000274 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1236   .text.foc_paraminit:00000000 $t
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1242   .text.foc_paraminit:00000000 foc_paraminit
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1329   .text.foc_paraminit:00000098 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1341   .rodata.motortctrl_process.str1.4:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1345   .text.motortctrl_process:00000000 $t
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1351   .text.motortctrl_process:00000000 motortctrl_process
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1426   .text.motortctrl_process:0000004c $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1558   .bss.test_c:00000000 test_c
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1551   .bss.test_b:00000000 test_b
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1544   .bss.test_a:00000000 test_a
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1564   .bss.test_d_pid:00000000 test_d_pid
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1509   .bss.sg_speedfilter:00000000 sg_speedfilter
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1571   .data.g_Motor1:00000000 g_Motor1
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1495   .bss.sg_motordebug:00000000 sg_motordebug
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1442   .bss.cnt.1:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1446   .bss.cnt.1:00000000 cnt.1
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1449   .bss.cnt.4:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1453   .bss.cnt.4:00000000 cnt.4
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1456   .bss.cnt_.2:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1460   .bss.cnt_.2:00000000 cnt_.2
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1463   .bss.pre_theta.0:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1467   .bss.pre_theta.0:00000000 pre_theta.0
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1470   .bss.sg_MecThetaOffset:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1474   .bss.sg_MecThetaOffset:00000000 sg_MecThetaOffset
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1477   .bss.sg_curloop_param:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1481   .bss.sg_curloop_param:00000000 sg_curloop_param
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1484   .bss.sg_elefilter:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1488   .bss.sg_elefilter:00000000 sg_elefilter
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1491   .bss.sg_motordebug:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1498   .bss.sg_speed_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1502   .bss.sg_speed_pid:00000000 sg_speed_pid
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1505   .bss.sg_speedfilter:00000000 $d
ARM GAS  C:\Users\57308\AppData\Local\Temp\cceaQXqV.s 			page 43


C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1512   .bss.sgp_curloop_d_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1516   .bss.sgp_curloop_d_pid:00000000 sgp_curloop_d_pid
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1519   .bss.sgp_curloop_q_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1523   .bss.sgp_curloop_q_pid:00000000 sgp_curloop_q_pid
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1526   .bss.sgp_speed_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1530   .bss.sgp_speed_pid:00000000 sgp_speed_pid
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1533   .bss.state0_.5:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1537   .bss.state0_.5:00000000 state0_.5
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1540   .bss.test_a:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1547   .bss.test_b:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1554   .bss.test_c:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1561   .bss.test_d_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1567   .data.g_Motor1:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1576   .data.state_.3:00000000 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:1580   .data.state_.3:00000000 state_.3
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:885    .text._50uscycle_process:00000087 $d
C:\Users\57308\AppData\Local\Temp\cceaQXqV.s:885    .text._50uscycle_process:00000088 $t

UNDEFINED SYMBOLS
tim_pwm_enable
tim_tigger_adc
adc_start
tim_pwm_disable
adc_stop
lowfilter_cale
_3s_2s
_2s_2r
pid_contrl
tim_set_pwm
_2r_2s
_svpwm
sensor_user_read
_IQ20toF
__aeabi_f2d
__aeabi_d2f
sqrt
SEGGER_RTT_printf
_normalize_angle
pid_init
lowfilter_init
motorprotocol_process
