ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"motorctrl.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.motor_enable,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	motor_enable:
  26              	.LFB241:
  27              		.file 1 "../BLDCMotor/motorctrl.c"
   1:../BLDCMotor/motorctrl.c **** #include "./motorctrl.h"
   2:../BLDCMotor/motorctrl.c **** #include "debuglog.h"
   3:../BLDCMotor/motorctrl.c **** #include "motorctrl_common.h"
   4:../BLDCMotor/motorctrl.c **** 
   5:../BLDCMotor/motorctrl.c **** #include "board.h"
   6:../BLDCMotor/motorctrl.c **** #include "string.h"
   7:../BLDCMotor/motorctrl.c **** 
   8:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
   9:../BLDCMotor/motorctrl.c **** #endif
  10:../BLDCMotor/motorctrl.c **** #define Q15_PI_2                   (51471)
  11:../BLDCMotor/motorctrl.c **** #define Q15_2PI                    (205884)
  12:../BLDCMotor/motorctrl.c **** #define PI_2                       (1.570796f)
  13:../BLDCMotor/motorctrl.c **** #define MOTORCTRL_PERCI            (1)
  14:../BLDCMotor/motorctrl.c **** 
  15:../BLDCMotor/motorctrl.c **** enum{
  16:../BLDCMotor/motorctrl.c ****     MOTOR_ZERO,
  17:../BLDCMotor/motorctrl.c ****     MOTOR_INIT,
  18:../BLDCMotor/motorctrl.c ****     MOTOR_IDLE,
  19:../BLDCMotor/motorctrl.c ****     MOTOR_START, 
  20:../BLDCMotor/motorctrl.c ****     MOTOR_RUNING,
  21:../BLDCMotor/motorctrl.c ****     MOTOR_STOP,
  22:../BLDCMotor/motorctrl.c **** };
  23:../BLDCMotor/motorctrl.c **** 
  24:../BLDCMotor/motorctrl.c **** motordebug_t sg_motordebug = {0};
  25:../BLDCMotor/motorctrl.c **** typedef struct
  26:../BLDCMotor/motorctrl.c **** {
  27:../BLDCMotor/motorctrl.c ****     unsigned char state;
  28:../BLDCMotor/motorctrl.c ****     unsigned short cnt;
  29:../BLDCMotor/motorctrl.c **** }motorctrl_t;
  30:../BLDCMotor/motorctrl.c **** 
  31:../BLDCMotor/motorctrl.c **** static dq_t _currmentloop(abc_t i_abc,float ele_theta);
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 2


  32:../BLDCMotor/motorctrl.c **** static short _get_angleoffset(void);
  33:../BLDCMotor/motorctrl.c **** static void motor_enable(void);
  34:../BLDCMotor/motorctrl.c **** static void motor_disable(void);
  35:../BLDCMotor/motorctrl.c **** static void motor_set_pwm(duty_t temp);
  36:../BLDCMotor/motorctrl.c **** static void sg_debug_clear(void)
  37:../BLDCMotor/motorctrl.c **** {
  38:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_targe =0.0f;
  39:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_targe =0.0f;
  40:../BLDCMotor/motorctrl.c ****     sg_motordebug.ele_angle = 0.0f;
  41:../BLDCMotor/motorctrl.c ****     memset(&sg_motordebug,0,sizeof(sg_motordebug)-4);
  42:../BLDCMotor/motorctrl.c **** }
  43:../BLDCMotor/motorctrl.c **** alpbet_t _limit_voltagecircle(alpbet_t raw_uab);
  44:../BLDCMotor/motorctrl.c **** static float motor_speedcale(float cur_theta);
  45:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real);
  46:../BLDCMotor/motorctrl.c **** 
  47:../BLDCMotor/motorctrl.c **** motorctrl_t g_Motor1 = {
  48:../BLDCMotor/motorctrl.c ****     .state = MOTOR_INIT,
  49:../BLDCMotor/motorctrl.c ****     .cnt = 0,
  50:../BLDCMotor/motorctrl.c **** };
  51:../BLDCMotor/motorctrl.c **** static volatile float sg_MecThetaOffset = 0.0f;
  52:../BLDCMotor/motorctrl.c **** static lowfilter_t sg_elefilter[3];
  53:../BLDCMotor/motorctrl.c **** lowfilter_t sg_speedfilter = {0.0f};
  54:../BLDCMotor/motorctrl.c **** pid_cb_t test_d_pid = {0};
  55:../BLDCMotor/motorctrl.c **** static pid_cb_t *sgp_curloop_d_pid;
  56:../BLDCMotor/motorctrl.c **** static pid_cb_t *sgp_curloop_q_pid;
  57:../BLDCMotor/motorctrl.c **** static pid_cb_t *sgp_speed_pid;
  58:../BLDCMotor/motorctrl.c **** static pid_cb_t sg_speed_pid;
  59:../BLDCMotor/motorctrl.c **** static curloop_t sg_curloop_param;
  60:../BLDCMotor/motorctrl.c **** 
  61:../BLDCMotor/motorctrl.c **** 
  62:../BLDCMotor/motorctrl.c **** void motortctrl_process(void)
  63:../BLDCMotor/motorctrl.c **** {
  64:../BLDCMotor/motorctrl.c ****     char rec_buf[64];
  65:../BLDCMotor/motorctrl.c ****     char cnt = 0;
  66:../BLDCMotor/motorctrl.c ****     // if (readline_fromPC(rec_buf,sizeof(rec_buf)))
  67:../BLDCMotor/motorctrl.c ****     // {
  68:../BLDCMotor/motorctrl.c ****     //     motorprotocol_pause(rec_buf);
  69:../BLDCMotor/motorctrl.c ****     // }
  70:../BLDCMotor/motorctrl.c ****     motorprotocol_process();
  71:../BLDCMotor/motorctrl.c ****     switch (g_Motor1.state)
  72:../BLDCMotor/motorctrl.c ****     {
  73:../BLDCMotor/motorctrl.c ****     case MOTOR_INIT:
  74:../BLDCMotor/motorctrl.c ****         // if (sg_motordebug.motor_stat != 4)
  75:../BLDCMotor/motorctrl.c ****         // {
  76:../BLDCMotor/motorctrl.c ****         //     break;
  77:../BLDCMotor/motorctrl.c ****         // }
  78:../BLDCMotor/motorctrl.c ****         foc_paraminit();
  79:../BLDCMotor/motorctrl.c ****         lowfilter_init(&sg_speedfilter,80);
  80:../BLDCMotor/motorctrl.c ****         motor_enable();
  81:../BLDCMotor/motorctrl.c ****         g_Motor1.state = MOTOR_RUNING;
  82:../BLDCMotor/motorctrl.c ****         break;
  83:../BLDCMotor/motorctrl.c **** 
  84:../BLDCMotor/motorctrl.c ****     case MOTOR_RUNING:
  85:../BLDCMotor/motorctrl.c ****         {
  86:../BLDCMotor/motorctrl.c ****             if (sg_motordebug.motor_statue_To == "motor stop")
  87:../BLDCMotor/motorctrl.c ****             {
  88:../BLDCMotor/motorctrl.c ****                 g_Motor1.state = MOTOR_STOP;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 3


  89:../BLDCMotor/motorctrl.c ****             }
  90:../BLDCMotor/motorctrl.c ****         }
  91:../BLDCMotor/motorctrl.c ****         break;
  92:../BLDCMotor/motorctrl.c **** 
  93:../BLDCMotor/motorctrl.c ****     case MOTOR_STOP:
  94:../BLDCMotor/motorctrl.c ****         motor_disable();
  95:../BLDCMotor/motorctrl.c ****         break;
  96:../BLDCMotor/motorctrl.c ****     default:
  97:../BLDCMotor/motorctrl.c ****         break;
  98:../BLDCMotor/motorctrl.c ****     }
  99:../BLDCMotor/motorctrl.c **** }
 100:../BLDCMotor/motorctrl.c **** /*------------Âë®ÊúüÊÄßË¢´Ë∞ÉÁî®----------------*/
 101:../BLDCMotor/motorctrl.c **** void _50uscycle_process(unsigned int *abc_vale,float _elec_theta)
 102:../BLDCMotor/motorctrl.c **** {
 103:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 104:../BLDCMotor/motorctrl.c ****     int32_t Q15_Mechtheta;    
 105:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 106:../BLDCMotor/motorctrl.c ****     abc_t i_abc;
 107:../BLDCMotor/motorctrl.c ****     dq_t udq;
 108:../BLDCMotor/motorctrl.c **** 
 109:../BLDCMotor/motorctrl.c **** /*----------------‰∏âÁõ∏ÁîµÊµÅÂ§ÑÁêÜ------------------------------*/    
 110:../BLDCMotor/motorctrl.c **** #if 1
 111:../BLDCMotor/motorctrl.c ****     float Ia,Ib,Ic;
 112:../BLDCMotor/motorctrl.c ****     int32_t a1,b1,c1;
 113:../BLDCMotor/motorctrl.c ****     a1 = abc_vale[0] - A_ADCCHANNL_OFFSET;
 114:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 115:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 116:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ia = a1;
 117:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 118:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 119:../BLDCMotor/motorctrl.c ****     // Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 120:../BLDCMotor/motorctrl.c ****     Ic = -Ia - Ib;
 121:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 122:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 123:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 124:../BLDCMotor/motorctrl.c **** 
 125:../BLDCMotor/motorctrl.c **** #endif
 126:../BLDCMotor/motorctrl.c **** 
 127:../BLDCMotor/motorctrl.c ****     enum{
 128:../BLDCMotor/motorctrl.c ****         OFFSET=0,
 129:../BLDCMotor/motorctrl.c ****         OPENLOOP,
 130:../BLDCMotor/motorctrl.c ****         CLOSELOOP,
 131:../BLDCMotor/motorctrl.c ****         SPEEDLOOP,
 132:../BLDCMotor/motorctrl.c ****         IDLE,
 133:../BLDCMotor/motorctrl.c ****     };
 134:../BLDCMotor/motorctrl.c ****     static short state0_ = OFFSET;
 135:../BLDCMotor/motorctrl.c ****     switch (state0_)
 136:../BLDCMotor/motorctrl.c ****     {
 137:../BLDCMotor/motorctrl.c ****         case OFFSET:
 138:../BLDCMotor/motorctrl.c ****             // if (_get_angleoffset() != 0)
 139:../BLDCMotor/motorctrl.c ****             // {
 140:../BLDCMotor/motorctrl.c ****             //     break;
 141:../BLDCMotor/motorctrl.c ****             // }
 142:../BLDCMotor/motorctrl.c ****             USER_DEBUG_NORMAL("enter IDLE\r\n");
 143:../BLDCMotor/motorctrl.c ****             state0_ = CLOSELOOP;
 144:../BLDCMotor/motorctrl.c ****             break;
 145:../BLDCMotor/motorctrl.c ****         case IDLE:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 4


 146:../BLDCMotor/motorctrl.c ****             if (sg_motordebug.id_targe != 0.0f || sg_motordebug.iq_targe != 0.0f)
 147:../BLDCMotor/motorctrl.c ****             {
 148:../BLDCMotor/motorctrl.c ****                 sg_motordebug.ele_angle = 0.0f;
 149:../BLDCMotor/motorctrl.c ****                 state0_ = SPEEDLOOP;
 150:../BLDCMotor/motorctrl.c ****             }
 151:../BLDCMotor/motorctrl.c ****             break;
 152:../BLDCMotor/motorctrl.c ****         case SPEEDLOOP:
 153:../BLDCMotor/motorctrl.c ****             Q15_Mechtheta = ((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_COV))[0];
 154:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(Q15_Mechtheta);
 155:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 156:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 157:../BLDCMotor/motorctrl.c ****             elec_theta -= sg_MecThetaOffset;
 158:../BLDCMotor/motorctrl.c **** 
 159:../BLDCMotor/motorctrl.c ****             elec_theta = _normalize_angle(elec_theta);
 160:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 161:../BLDCMotor/motorctrl.c **** 
 162:../BLDCMotor/motorctrl.c ****             sg_motordebug.ele_angle = elec_theta;    
 163:../BLDCMotor/motorctrl.c ****             static unsigned short cnt = 0;
 164:../BLDCMotor/motorctrl.c ****             if (cnt++ < 200)
 165:../BLDCMotor/motorctrl.c ****             {
 166:../BLDCMotor/motorctrl.c ****                 // break;
 167:../BLDCMotor/motorctrl.c ****             }
 168:../BLDCMotor/motorctrl.c ****             cnt = 0;
 169:../BLDCMotor/motorctrl.c ****             udq.q = 0.3f;
 170:../BLDCMotor/motorctrl.c ****             udq.d = 0;
 171:../BLDCMotor/motorctrl.c ****             alpbet_t uab;
 172:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, elec_theta - PI_2);  
 173:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 174:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 175:../BLDCMotor/motorctrl.c ****             break;
 176:../BLDCMotor/motorctrl.c ****         case CLOSELOOP:
 177:../BLDCMotor/motorctrl.c ****         {
 178:../BLDCMotor/motorctrl.c ****             //Ëé∑ÂèñÁîµËßíÂ∫¶
 179:../BLDCMotor/motorctrl.c ****             // Q15_Mechtheta = ((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_COV))[0];
 180:../BLDCMotor/motorctrl.c ****             // mech_theta = _IQ20toF(Q15_Mechtheta);
 181:../BLDCMotor/motorctrl.c ****             // sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 182:../BLDCMotor/motorctrl.c **** 
 183:../BLDCMotor/motorctrl.c ****             // elec_theta = mech_theta * MOTOR_PAIR;
 184:../BLDCMotor/motorctrl.c ****             // elec_theta -= sg_MecThetaOffset;
 185:../BLDCMotor/motorctrl.c **** 
 186:../BLDCMotor/motorctrl.c ****             // elec_theta = _normalize_angle(elec_theta);
 187:../BLDCMotor/motorctrl.c ****             // sg_motordebug.ele_angle = elec_theta;
 188:../BLDCMotor/motorctrl.c **** 
 189:../BLDCMotor/motorctrl.c **** #if 1//ÂºÄÁéØ
 190:../BLDCMotor/motorctrl.c ****             // _currmentloop(i_abc,elec_theta);
 191:../BLDCMotor/motorctrl.c ****             dq_t udq = {0.0f,0.2f,_IQ15(0.0f),_IQ15(0.0f)};
 192:../BLDCMotor/motorctrl.c ****             alpbet_t uab,uab_q15;
 193:../BLDCMotor/motorctrl.c ****             if(sg_motordebug.self_ele_theta>_2PI)
 194:../BLDCMotor/motorctrl.c ****             {
 195:../BLDCMotor/motorctrl.c ****                 sg_motordebug.self_ele_theta = 0.0f;
 196:../BLDCMotor/motorctrl.c ****             }
 197:../BLDCMotor/motorctrl.c ****             sg_motordebug.self_ele_theta += 0.001f;
 198:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, sg_motordebug.self_ele_theta); 
 199:../BLDCMotor/motorctrl.c ****             dut01 = _svpwm(uab.alpha,uab.beta);
 200:../BLDCMotor/motorctrl.c ****             motor_set_pwm(dut01);
 201:../BLDCMotor/motorctrl.c **** #else
 202:../BLDCMotor/motorctrl.c ****             dq_t udq = {0.0f,0.0f,_IQ15(0.0f),_IQ15(0.8f)};
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 5


 203:../BLDCMotor/motorctrl.c ****             #if 0/*Èó≠ÁéØÊéßÂà∂*/
 204:../BLDCMotor/motorctrl.c ****                 udq = _currmentloop(i_abc,elec_theta - PI_2);
 205:../BLDCMotor/motorctrl.c ****                 // udq.d = 0.0f;
 206:../BLDCMotor/motorctrl.c ****                 // udq.q = 0.6f;
 207:../BLDCMotor/motorctrl.c ****                 // udq.d = sg_motordebug.id_targe;
 208:../BLDCMotor/motorctrl.c ****                 udq.q = sg_motordebug.iq_targe;
 209:../BLDCMotor/motorctrl.c ****             #else
 210:../BLDCMotor/motorctrl.c ****                 if (sg_motordebug.iq_targe < 0.0f)
 211:../BLDCMotor/motorctrl.c ****                 {
 212:../BLDCMotor/motorctrl.c ****                 _currmentloop(i_abc,elec_theta + PI_2);
 213:../BLDCMotor/motorctrl.c ****                 }else{
 214:../BLDCMotor/motorctrl.c ****                     i_abc.a = -i_abc.a;
 215:../BLDCMotor/motorctrl.c ****                     i_abc.b = -i_abc.b;
 216:../BLDCMotor/motorctrl.c ****                     i_abc.c = -i_abc.c;
 217:../BLDCMotor/motorctrl.c ****                     _currmentloop(i_abc,elec_theta);
 218:../BLDCMotor/motorctrl.c ****                 }
 219:../BLDCMotor/motorctrl.c ****                 // udq.d = sg_motordebug.id_targe;
 220:../BLDCMotor/motorctrl.c ****                 udq.q = sg_motordebug.iq_targe;
 221:../BLDCMotor/motorctrl.c ****                 udq.d = 0.0f;
 222:../BLDCMotor/motorctrl.c ****                 // udq.q = _speedloop(300.0f,sg_motordebug.real_speed);
 223:../BLDCMotor/motorctrl.c ****             #endif
 224:../BLDCMotor/motorctrl.c ****             alpbet_t uab;
 225:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, elec_theta);  
 226:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 227:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 228:../BLDCMotor/motorctrl.c **** #endif
 229:../BLDCMotor/motorctrl.c ****         }
 230:../BLDCMotor/motorctrl.c ****             break;
 231:../BLDCMotor/motorctrl.c ****         default:
 232:../BLDCMotor/motorctrl.c ****             break;
 233:../BLDCMotor/motorctrl.c ****     }
 234:../BLDCMotor/motorctrl.c **** }
 235:../BLDCMotor/motorctrl.c **** 
 236:../BLDCMotor/motorctrl.c **** 
 237:../BLDCMotor/motorctrl.c **** 
 238:../BLDCMotor/motorctrl.c **** alpbet_t _limit_voltagecircle(alpbet_t raw_uab) {  
 239:../BLDCMotor/motorctrl.c ****     float max_voltage = D_MAX_VAL;// ËøôÈáåÂ∫îËØ•ÊòØ‰Ω†ÁöÑÊúÄÂ§ßÂÖÅËÆ∏ÁîµÂéãÂÄºÔºå‰æãÂ¶ÇÂØπ‰∫é‰∏âÁõ
 240:../BLDCMotor/motorctrl.c ****     float voltage_magnitude = sqrt(raw_uab.alpha * raw_uab.alpha + raw_uab.beta * raw_uab.beta); //
 241:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 242:../BLDCMotor/motorctrl.c ****     if (voltage_magnitude > max_voltage) {  
 243:../BLDCMotor/motorctrl.c ****         // Â¶ÇÊûúÁü¢ÈáèÈïøÂ∫¶Ë∂ÖËøáÊúÄÂ§ßÁîµÂéãÔºåÂàôÊåâÊØî‰æãÁº©ÊîæÁü¢Èáè‰ª•‰ΩøÂÖ∂ËêΩÂú®ÁîµÂéãÁü¢È
 244:../BLDCMotor/motorctrl.c ****         float scale_factor = max_voltage / voltage_magnitude;  
 245:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha * scale_factor;  
 246:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 247:../BLDCMotor/motorctrl.c ****     } else {  
 248:../BLDCMotor/motorctrl.c ****         // Â¶ÇÊûúÁü¢ÈáèÈïøÂ∫¶Âú®ÂÖÅËÆ∏ËåÉÂõ¥ÂÜÖÔºåÂàô‰∏çËøõË°å‰ªª‰ΩïÊîπÂèò  
 249:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha;  
 250:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta;  
 251:../BLDCMotor/motorctrl.c ****     }
 252:../BLDCMotor/motorctrl.c ****     return uab;
 253:../BLDCMotor/motorctrl.c **** }
 254:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 255:../BLDCMotor/motorctrl.c **** {
 256:../BLDCMotor/motorctrl.c **** #if 1
 257:../BLDCMotor/motorctrl.c ****     alpbet_t i_alphbeta;
 258:../BLDCMotor/motorctrl.c ****     float _tempa,_tempb,_tempc;
 259:../BLDCMotor/motorctrl.c ****     dq_t i_dq;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 6


 260:../BLDCMotor/motorctrl.c ****     _tempa = i_abc.a;
 261:../BLDCMotor/motorctrl.c ****     _tempb = i_abc.b;
 262:../BLDCMotor/motorctrl.c ****     _tempc = i_abc.c;
 263:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
 264:../BLDCMotor/motorctrl.c ****     /*bac  */
 265:../BLDCMotor/motorctrl.c ****     i_abc.a = -_tempa;
 266:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempc;
 267:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempb;
 268:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 269:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 270:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 271:../BLDCMotor/motorctrl.c **** #endif
 272:../BLDCMotor/motorctrl.c ****     _3s_2s(i_abc,&i_alphbeta);   
 273:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 274:../BLDCMotor/motorctrl.c ****     sg_motordebug.id = (i_dq.d);
 275:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 276:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 277:../BLDCMotor/motorctrl.c **** #if 1
 278:../BLDCMotor/motorctrl.c ****     float tar_id = 0.0f,tar_iq = 0.0f;
 279:../BLDCMotor/motorctrl.c ****     tar_id = sg_motordebug.id_targe;
 280:../BLDCMotor/motorctrl.c ****     tar_iq = sg_motordebug.iq_targe;
 281:../BLDCMotor/motorctrl.c ****     udq.d = pid_contrl(sgp_curloop_d_pid,tar_id,i_dq.d);
 282:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_real = i_dq.d;
 283:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_D_out = udq.d;
 284:../BLDCMotor/motorctrl.c ****     udq.q =pid_contrl(sgp_curloop_q_pid,tar_iq,i_dq.q);
 285:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_real = i_dq.q;
 286:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_Q_out = udq.q;
 287:../BLDCMotor/motorctrl.c **** #endif
 288:../BLDCMotor/motorctrl.c ****     return udq;
 289:../BLDCMotor/motorctrl.c **** #endif
 290:../BLDCMotor/motorctrl.c **** }
 291:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real)
 292:../BLDCMotor/motorctrl.c **** {
 293:../BLDCMotor/motorctrl.c ****    return pid_contrl(sgp_speed_pid,tar,real);
 294:../BLDCMotor/motorctrl.c **** }
 295:../BLDCMotor/motorctrl.c **** static void motor_enable(void)
 296:../BLDCMotor/motorctrl.c **** {
  28              		.loc 1 296 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32 0000 08B5     		push	{r3, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 3, -8
  36              		.cfi_offset 14, -4
 297:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 298:../BLDCMotor/motorctrl.c ****     gpio_setmotor_power();
 299:../BLDCMotor/motorctrl.c **** #endif
 300:../BLDCMotor/motorctrl.c ****     /*pwm ‰ΩøËÉΩ*/
 301:../BLDCMotor/motorctrl.c ****     tim_pwm_enable();
  37              		.loc 1 301 5 view .LVU1
  38 0002 FFF7FEFF 		bl	tim_pwm_enable
  39              	.LVL0:
 302:../BLDCMotor/motorctrl.c ****     tim_tigger_adc();
  40              		.loc 1 302 5 view .LVU2
  41 0006 FFF7FEFF 		bl	tim_tigger_adc
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 7


  42              	.LVL1:
 303:../BLDCMotor/motorctrl.c ****     adc_start();
  43              		.loc 1 303 5 view .LVU3
  44 000a FFF7FEFF 		bl	adc_start
  45              	.LVL2:
 304:../BLDCMotor/motorctrl.c **** }
  46              		.loc 1 304 1 is_stmt 0 view .LVU4
  47 000e 08BD     		pop	{r3, pc}
  48              		.cfi_endproc
  49              	.LFE241:
  51              		.section	.text.motor_disable,"ax",%progbits
  52              		.align	1
  53              		.syntax unified
  54              		.thumb
  55              		.thumb_func
  57              	motor_disable:
  58              	.LFB243:
 305:../BLDCMotor/motorctrl.c **** static void motor_enable_noirq(void)
 306:../BLDCMotor/motorctrl.c **** {
 307:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 308:../BLDCMotor/motorctrl.c ****     gpio_setmotor_power();
 309:../BLDCMotor/motorctrl.c **** #endif
 310:../BLDCMotor/motorctrl.c ****     /*pwm ‰ΩøËÉΩ*/
 311:../BLDCMotor/motorctrl.c ****     tim_pwm_enable();
 312:../BLDCMotor/motorctrl.c **** }
 313:../BLDCMotor/motorctrl.c **** static void motor_disable(void)
 314:../BLDCMotor/motorctrl.c **** {
  59              		.loc 1 314 1 is_stmt 1 view -0
  60              		.cfi_startproc
  61              		@ args = 0, pretend = 0, frame = 0
  62              		@ frame_needed = 0, uses_anonymous_args = 0
  63 0000 08B5     		push	{r3, lr}
  64              	.LCFI1:
  65              		.cfi_def_cfa_offset 8
  66              		.cfi_offset 3, -8
  67              		.cfi_offset 14, -4
 315:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 316:../BLDCMotor/motorctrl.c ****     gpio_setmotor_powerdown();
 317:../BLDCMotor/motorctrl.c **** #endif    
 318:../BLDCMotor/motorctrl.c ****     tim_pwm_disable();
  68              		.loc 1 318 5 view .LVU6
  69 0002 FFF7FEFF 		bl	tim_pwm_disable
  70              	.LVL3:
 319:../BLDCMotor/motorctrl.c ****     adc_stop();
  71              		.loc 1 319 5 view .LVU7
  72 0006 FFF7FEFF 		bl	adc_stop
  73              	.LVL4:
 320:../BLDCMotor/motorctrl.c **** }
  74              		.loc 1 320 1 is_stmt 0 view .LVU8
  75 000a 08BD     		pop	{r3, pc}
  76              		.cfi_endproc
  77              	.LFE243:
  79              		.section	.text.motor_speedcale,"ax",%progbits
  80              		.align	1
  81              		.syntax unified
  82              		.thumb
  83              		.thumb_func
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 8


  85              	motor_speedcale:
  86              	.LVL5:
  87              	.LFB245:
 321:../BLDCMotor/motorctrl.c **** static void motor_set_pwm(duty_t temp)
 322:../BLDCMotor/motorctrl.c **** {
 323:../BLDCMotor/motorctrl.c ****     tim_set_pwm(temp._a,temp._b,temp._c);
 324:../BLDCMotor/motorctrl.c **** }
 325:../BLDCMotor/motorctrl.c **** 
 326:../BLDCMotor/motorctrl.c **** static float motor_speedcale(float cur_theta)
 327:../BLDCMotor/motorctrl.c **** {
  88              		.loc 1 327 1 is_stmt 1 view -0
  89              		.cfi_startproc
  90              		@ args = 0, pretend = 0, frame = 0
  91              		@ frame_needed = 0, uses_anonymous_args = 0
  92              		.loc 1 327 1 is_stmt 0 view .LVU10
  93 0000 08B5     		push	{r3, lr}
  94              	.LCFI2:
  95              		.cfi_def_cfa_offset 8
  96              		.cfi_offset 3, -8
  97              		.cfi_offset 14, -4
  98 0002 2DED028B 		vpush.64	{d8}
  99              	.LCFI3:
 100              		.cfi_def_cfa_offset 16
 101              		.cfi_offset 80, -16
 102              		.cfi_offset 81, -12
 328:../BLDCMotor/motorctrl.c ****     float delta_theta = 0.0f;
 103              		.loc 1 328 5 is_stmt 1 view .LVU11
 104              	.LVL6:
 329:../BLDCMotor/motorctrl.c ****     static unsigned short cnt = 0;
 105              		.loc 1 329 5 view .LVU12
 330:../BLDCMotor/motorctrl.c ****     if (cnt++ > 20)
 106              		.loc 1 330 5 view .LVU13
 107              		.loc 1 330 12 is_stmt 0 view .LVU14
 108 0006 2D4A     		ldr	r2, .L15
 109 0008 1388     		ldrh	r3, [r2]
 110 000a 591C     		adds	r1, r3, #1
 111 000c 1180     		strh	r1, [r2]	@ movhi
 112              		.loc 1 330 8 view .LVU15
 113 000e 142B     		cmp	r3, #20
 114 0010 36D8     		bhi	.L5
 115 0012 B0EE408A 		vmov.f32	s16, s0
 331:../BLDCMotor/motorctrl.c ****     {
 332:../BLDCMotor/motorctrl.c ****         return;
 333:../BLDCMotor/motorctrl.c ****     }
 334:../BLDCMotor/motorctrl.c ****     cnt = 0;
 116              		.loc 1 334 5 is_stmt 1 view .LVU16
 117              		.loc 1 334 9 is_stmt 0 view .LVU17
 118 0016 294B     		ldr	r3, .L15
 119 0018 0022     		movs	r2, #0
 120 001a 1A80     		strh	r2, [r3]	@ movhi
 335:../BLDCMotor/motorctrl.c ****     static float pre_theta = 0.0f;
 121              		.loc 1 335 5 is_stmt 1 view .LVU18
 336:../BLDCMotor/motorctrl.c ****     delta_theta = (cur_theta -pre_theta)*100.0f;
 122              		.loc 1 336 5 view .LVU19
 123              		.loc 1 336 30 is_stmt 0 view .LVU20
 124 001c 284B     		ldr	r3, .L15+4
 125 001e D3ED007A 		vldr.32	s15, [r3]
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 9


 126 0022 70EE677A 		vsub.f32	s15, s0, s15
 127              		.loc 1 336 17 view .LVU21
 128 0026 9FED270A 		vldr.32	s0, .L15+8
 129              	.LVL7:
 130              		.loc 1 336 17 view .LVU22
 131 002a 27EE800A 		vmul.f32	s0, s15, s0
 132              	.LVL8:
 337:../BLDCMotor/motorctrl.c **** 
 338:../BLDCMotor/motorctrl.c ****     // Â§ÑÁêÜËßíÂ∫¶Ë∑®Ë∂ä2œÄËæπÁïåÁöÑÊÉÖÂÜµ  
 339:../BLDCMotor/motorctrl.c ****     if (delta_theta > _2PI) {  
 133              		.loc 1 339 5 is_stmt 1 view .LVU23
 134              		.loc 1 339 8 is_stmt 0 view .LVU24
 135 002e DFED267A 		vldr.32	s15, .L15+12
 136 0032 B4EEE70A 		vcmpe.f32	s0, s15
 137 0036 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 138 003a 24DD     		ble	.L13
 340:../BLDCMotor/motorctrl.c ****         delta_theta -= (int)(delta_theta / _2PI +1) * _2PI;  
 139              		.loc 1 340 9 is_stmt 1 view .LVU25
 140              		.loc 1 340 42 is_stmt 0 view .LVU26
 141 003c B0EE677A 		vmov.f32	s14, s15
 142 0040 C0EE077A 		vdiv.f32	s15, s0, s14
 143              		.loc 1 340 49 view .LVU27
 144 0044 F7EE006A 		vmov.f32	s13, #1.0e+0
 145 0048 77EEA67A 		vadd.f32	s15, s15, s13
 146              		.loc 1 340 24 view .LVU28
 147 004c FDEEE77A 		vcvt.s32.f32	s15, s15
 148              		.loc 1 340 53 view .LVU29
 149 0050 F8EEE77A 		vcvt.f32.s32	s15, s15
 150 0054 67EE877A 		vmul.f32	s15, s15, s14
 151              		.loc 1 340 21 view .LVU30
 152 0058 30EE670A 		vsub.f32	s0, s0, s15
 153              	.LVL9:
 154              	.L9:
 341:../BLDCMotor/motorctrl.c ****     } else if (delta_theta < -_2PI) {  
 342:../BLDCMotor/motorctrl.c ****         delta_theta += (int)(-delta_theta / _2PI + 1) * _2PI;  
 343:../BLDCMotor/motorctrl.c ****     }  
 344:../BLDCMotor/motorctrl.c **** 
 345:../BLDCMotor/motorctrl.c ****     delta_theta = lowfilter_cale(&sg_speedfilter,delta_theta);
 155              		.loc 1 345 5 is_stmt 1 view .LVU31
 156              		.loc 1 345 19 is_stmt 0 view .LVU32
 157 005c 1B48     		ldr	r0, .L15+16
 158 005e FFF7FEFF 		bl	lowfilter_cale
 159              	.LVL10:
 346:../BLDCMotor/motorctrl.c ****     float omeg_c = (delta_theta)/0.002f/100.0f;
 160              		.loc 1 346 5 is_stmt 1 view .LVU33
 161              		.loc 1 346 33 is_stmt 0 view .LVU34
 162 0062 DFED1B7A 		vldr.32	s15, .L15+20
 163 0066 80EE277A 		vdiv.f32	s14, s0, s15
 164              		.loc 1 346 11 view .LVU35
 165 006a DFED167A 		vldr.32	s15, .L15+8
 166 006e 87EE270A 		vdiv.f32	s0, s14, s15
 167              	.LVL11:
 347:../BLDCMotor/motorctrl.c ****     float N_rpm = omeg_c * 9.5492965855f;//60.0f/_2PI
 168              		.loc 1 347 5 is_stmt 1 view .LVU36
 169              		.loc 1 347 11 is_stmt 0 view .LVU37
 170 0072 DFED187A 		vldr.32	s15, .L15+24
 171 0076 20EE270A 		vmul.f32	s0, s0, s15
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 10


 172              	.LVL12:
 348:../BLDCMotor/motorctrl.c ****     pre_theta = cur_theta;
 173              		.loc 1 348 5 is_stmt 1 view .LVU38
 174              		.loc 1 348 15 is_stmt 0 view .LVU39
 175 007a 114B     		ldr	r3, .L15+4
 176 007c 83ED008A 		vstr.32	s16, [r3]
 349:../BLDCMotor/motorctrl.c ****     // N_rpm = lowfilter_cale(&sg_speedfilter,N_rpm);
 350:../BLDCMotor/motorctrl.c ****     return N_rpm;
 177              		.loc 1 350 5 is_stmt 1 view .LVU40
 178              	.LVL13:
 179              	.L5:
 351:../BLDCMotor/motorctrl.c **** }
 180              		.loc 1 351 1 is_stmt 0 view .LVU41
 181 0080 BDEC028B 		vldm	sp!, {d8}
 182              	.LCFI4:
 183              		.cfi_remember_state
 184              		.cfi_restore 80
 185              		.cfi_restore 81
 186              		.cfi_def_cfa_offset 8
 187 0084 08BD     		pop	{r3, pc}
 188              	.LVL14:
 189              	.L13:
 190              	.LCFI5:
 191              		.cfi_restore_state
 341:../BLDCMotor/motorctrl.c ****         delta_theta += (int)(-delta_theta / _2PI + 1) * _2PI;  
 192              		.loc 1 341 12 is_stmt 1 view .LVU42
 341:../BLDCMotor/motorctrl.c ****         delta_theta += (int)(-delta_theta / _2PI + 1) * _2PI;  
 193              		.loc 1 341 15 is_stmt 0 view .LVU43
 194 0086 DFED147A 		vldr.32	s15, .L15+28
 195 008a B4EEE70A 		vcmpe.f32	s0, s15
 196 008e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 197 0092 E3D5     		bpl	.L9
 342:../BLDCMotor/motorctrl.c ****     }  
 198              		.loc 1 342 9 is_stmt 1 view .LVU44
 342:../BLDCMotor/motorctrl.c ****     }  
 199              		.loc 1 342 30 is_stmt 0 view .LVU45
 200 0094 F1EE406A 		vneg.f32	s13, s0
 342:../BLDCMotor/motorctrl.c ****     }  
 201              		.loc 1 342 43 view .LVU46
 202 0098 9FED0B7A 		vldr.32	s14, .L15+12
 203 009c C6EE877A 		vdiv.f32	s15, s13, s14
 342:../BLDCMotor/motorctrl.c ****     }  
 204              		.loc 1 342 50 view .LVU47
 205 00a0 F7EE006A 		vmov.f32	s13, #1.0e+0
 206 00a4 77EEA67A 		vadd.f32	s15, s15, s13
 342:../BLDCMotor/motorctrl.c ****     }  
 207              		.loc 1 342 24 view .LVU48
 208 00a8 FDEEE77A 		vcvt.s32.f32	s15, s15
 342:../BLDCMotor/motorctrl.c ****     }  
 209              		.loc 1 342 55 view .LVU49
 210 00ac F8EEE77A 		vcvt.f32.s32	s15, s15
 211 00b0 67EE877A 		vmul.f32	s15, s15, s14
 342:../BLDCMotor/motorctrl.c ****     }  
 212              		.loc 1 342 21 view .LVU50
 213 00b4 30EE270A 		vadd.f32	s0, s0, s15
 214              	.LVL15:
 342:../BLDCMotor/motorctrl.c ****     }  
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 11


 215              		.loc 1 342 21 view .LVU51
 216 00b8 D0E7     		b	.L9
 217              	.L16:
 218 00ba 00BF     		.align	2
 219              	.L15:
 220 00bc 00000000 		.word	.LANCHOR0
 221 00c0 00000000 		.word	.LANCHOR1
 222 00c4 0000C842 		.word	1120403456
 223 00c8 DA0FC940 		.word	1086918618
 224 00cc 00000000 		.word	.LANCHOR2
 225 00d0 6F12033B 		.word	990057071
 226 00d4 EBC91841 		.word	1092143595
 227 00d8 DA0FC9C0 		.word	-1060565030
 228              		.cfi_endproc
 229              	.LFE245:
 231              		.section	.text._currmentloop,"ax",%progbits
 232              		.align	1
 233              		.syntax unified
 234              		.thumb
 235              		.thumb_func
 237              	_currmentloop:
 238              	.LVL16:
 239              	.LFB239:
 255:../BLDCMotor/motorctrl.c **** #if 1
 240              		.loc 1 255 1 is_stmt 1 view -0
 241              		.cfi_startproc
 242              		@ args = 28, pretend = 16, frame = 32
 243              		@ frame_needed = 0, uses_anonymous_args = 0
 255:../BLDCMotor/motorctrl.c **** #if 1
 244              		.loc 1 255 1 is_stmt 0 view .LVU53
 245 0000 84B0     		sub	sp, sp, #16
 246              	.LCFI6:
 247              		.cfi_def_cfa_offset 16
 248 0002 70B5     		push	{r4, r5, r6, lr}
 249              	.LCFI7:
 250              		.cfi_def_cfa_offset 32
 251              		.cfi_offset 4, -32
 252              		.cfi_offset 5, -28
 253              		.cfi_offset 6, -24
 254              		.cfi_offset 14, -20
 255 0004 2DED028B 		vpush.64	{d8}
 256              	.LCFI8:
 257              		.cfi_def_cfa_offset 40
 258              		.cfi_offset 80, -40
 259              		.cfi_offset 81, -36
 260 0008 8CB0     		sub	sp, sp, #48
 261              	.LCFI9:
 262              		.cfi_def_cfa_offset 88
 263 000a 0546     		mov	r5, r0
 264 000c 0DF14C0C 		add	ip, sp, #76
 265 0010 8CE80E00 		stm	ip, {r1, r2, r3}
 266 0014 B0EE408A 		vmov.f32	s16, s0
 257:../BLDCMotor/motorctrl.c ****     float _tempa,_tempb,_tempc;
 267              		.loc 1 257 5 is_stmt 1 view .LVU54
 258:../BLDCMotor/motorctrl.c ****     dq_t i_dq;
 268              		.loc 1 258 5 view .LVU55
 259:../BLDCMotor/motorctrl.c ****     _tempa = i_abc.a;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 12


 269              		.loc 1 259 5 view .LVU56
 260:../BLDCMotor/motorctrl.c ****     _tempb = i_abc.b;
 270              		.loc 1 260 5 view .LVU57
 271              	.LVL17:
 261:../BLDCMotor/motorctrl.c ****     _tempc = i_abc.c;
 272              		.loc 1 261 5 view .LVU58
 261:../BLDCMotor/motorctrl.c ****     _tempc = i_abc.c;
 273              		.loc 1 261 12 is_stmt 0 view .LVU59
 274 0018 DDED147A 		vldr.32	s15, [sp, #80]
 275              	.LVL18:
 262:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
 276              		.loc 1 262 5 is_stmt 1 view .LVU60
 265:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempc;
 277              		.loc 1 265 5 view .LVU61
 265:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempc;
 278              		.loc 1 265 15 is_stmt 0 view .LVU62
 279 001c DDED136A 		vldr.32	s13, [sp, #76]
 280 0020 F1EE666A 		vneg.f32	s13, s13
 265:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempc;
 281              		.loc 1 265 13 view .LVU63
 282 0024 CDED136A 		vstr.32	s13, [sp, #76]
 283              	.LVL19:
 266:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempb;
 284              		.loc 1 266 5 is_stmt 1 view .LVU64
 266:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempb;
 285              		.loc 1 266 15 is_stmt 0 view .LVU65
 286 0028 9DED157A 		vldr.32	s14, [sp, #84]
 287 002c B1EE477A 		vneg.f32	s14, s14
 266:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempb;
 288              		.loc 1 266 13 view .LVU66
 289 0030 8DED147A 		vstr.32	s14, [sp, #80]
 267:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 290              		.loc 1 267 5 is_stmt 1 view .LVU67
 267:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 291              		.loc 1 267 15 is_stmt 0 view .LVU68
 292 0034 F1EE677A 		vneg.f32	s15, s15
 293              	.LVL20:
 267:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 294              		.loc 1 267 13 view .LVU69
 295 0038 CDED157A 		vstr.32	s15, [sp, #84]
 296              	.LVL21:
 268:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 297              		.loc 1 268 5 is_stmt 1 view .LVU70
 268:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 298              		.loc 1 268 22 is_stmt 0 view .LVU71
 299 003c 244C     		ldr	r4, .L19
 300 003e C4ED006A 		vstr.32	s13, [r4]
 269:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 301              		.loc 1 269 5 is_stmt 1 view .LVU72
 269:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 302              		.loc 1 269 22 is_stmt 0 view .LVU73
 303 0042 84ED017A 		vstr.32	s14, [r4, #4]
 270:../BLDCMotor/motorctrl.c **** #endif
 304              		.loc 1 270 5 is_stmt 1 view .LVU74
 270:../BLDCMotor/motorctrl.c **** #endif
 305              		.loc 1 270 22 is_stmt 0 view .LVU75
 306 0046 C4ED027A 		vstr.32	s15, [r4, #8]
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 13


 272:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 307              		.loc 1 272 5 is_stmt 1 view .LVU76
 308 004a 08AE     		add	r6, sp, #32
 309 004c 0296     		str	r6, [sp, #8]
 310 004e 17AB     		add	r3, sp, #92
 311 0050 93E80300 		ldm	r3, {r0, r1}
 312              	.LVL22:
 272:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 313              		.loc 1 272 5 is_stmt 0 view .LVU77
 314 0054 8DE80300 		stm	sp, {r0, r1}
 315 0058 9CE80F00 		ldm	ip, {r0, r1, r2, r3}
 316 005c FFF7FEFF 		bl	_3s_2s
 317              	.LVL23:
 273:../BLDCMotor/motorctrl.c ****     sg_motordebug.id = (i_dq.d);
 318              		.loc 1 273 5 is_stmt 1 view .LVU78
 319 0060 04AB     		add	r3, sp, #16
 320 0062 0093     		str	r3, [sp]
 321 0064 B0EE480A 		vmov.f32	s0, s16
 322 0068 96E80F00 		ldm	r6, {r0, r1, r2, r3}
 323 006c FFF7FEFF 		bl	_2s_2r
 324              	.LVL24:
 274:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 325              		.loc 1 274 5 view .LVU79
 274:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 326              		.loc 1 274 29 is_stmt 0 view .LVU80
 327 0070 DDED040A 		vldr.32	s1, [sp, #16]
 274:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 328              		.loc 1 274 22 view .LVU81
 329 0074 C4ED050A 		vstr.32	s1, [r4, #20]
 275:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 330              		.loc 1 275 5 is_stmt 1 view .LVU82
 275:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 331              		.loc 1 275 29 is_stmt 0 view .LVU83
 332 0078 059B     		ldr	r3, [sp, #20]	@ float
 275:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 333              		.loc 1 275 22 view .LVU84
 334 007a A361     		str	r3, [r4, #24]	@ float
 276:../BLDCMotor/motorctrl.c **** #if 1
 335              		.loc 1 276 5 is_stmt 1 view .LVU85
 276:../BLDCMotor/motorctrl.c **** #if 1
 336              		.loc 1 276 10 is_stmt 0 view .LVU86
 337 007c 0023     		movs	r3, #0
 338 007e 2B60     		str	r3, [r5]
 339 0080 6B60     		str	r3, [r5, #4]
 340 0082 AB60     		str	r3, [r5, #8]
 341 0084 EB60     		str	r3, [r5, #12]
 278:../BLDCMotor/motorctrl.c ****     tar_id = sg_motordebug.id_targe;
 342              		.loc 1 278 5 is_stmt 1 view .LVU87
 343              	.LVL25:
 279:../BLDCMotor/motorctrl.c ****     tar_iq = sg_motordebug.iq_targe;
 344              		.loc 1 279 5 view .LVU88
 280:../BLDCMotor/motorctrl.c ****     udq.d = pid_contrl(sgp_curloop_d_pid,tar_id,i_dq.d);
 345              		.loc 1 280 5 view .LVU89
 280:../BLDCMotor/motorctrl.c ****     udq.d = pid_contrl(sgp_curloop_d_pid,tar_id,i_dq.d);
 346              		.loc 1 280 12 is_stmt 0 view .LVU90
 347 0086 94ED128A 		vldr.32	s16, [r4, #72]
 348              	.LVL26:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 14


 281:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_real = i_dq.d;
 349              		.loc 1 281 5 is_stmt 1 view .LVU91
 281:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_real = i_dq.d;
 350              		.loc 1 281 13 is_stmt 0 view .LVU92
 351 008a 94ED100A 		vldr.32	s0, [r4, #64]
 352 008e 114B     		ldr	r3, .L19+4
 353 0090 1868     		ldr	r0, [r3]
 354 0092 FFF7FEFF 		bl	pid_contrl
 355              	.LVL27:
 281:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_real = i_dq.d;
 356              		.loc 1 281 11 view .LVU93
 357 0096 85ED000A 		vstr.32	s0, [r5]
 282:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_D_out = udq.d;
 358              		.loc 1 282 5 is_stmt 1 view .LVU94
 282:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_D_out = udq.d;
 359              		.loc 1 282 33 is_stmt 0 view .LVU95
 360 009a 049B     		ldr	r3, [sp, #16]	@ float
 282:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_D_out = udq.d;
 361              		.loc 1 282 27 view .LVU96
 362 009c A363     		str	r3, [r4, #56]	@ float
 283:../BLDCMotor/motorctrl.c ****     udq.q =pid_contrl(sgp_curloop_q_pid,tar_iq,i_dq.q);
 363              		.loc 1 283 5 is_stmt 1 view .LVU97
 283:../BLDCMotor/motorctrl.c ****     udq.q =pid_contrl(sgp_curloop_q_pid,tar_iq,i_dq.q);
 364              		.loc 1 283 29 is_stmt 0 view .LVU98
 365 009e 84ED190A 		vstr.32	s0, [r4, #100]
 284:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_real = i_dq.q;
 366              		.loc 1 284 5 is_stmt 1 view .LVU99
 284:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_real = i_dq.q;
 367              		.loc 1 284 12 is_stmt 0 view .LVU100
 368 00a2 DDED050A 		vldr.32	s1, [sp, #20]
 369 00a6 B0EE480A 		vmov.f32	s0, s16
 370 00aa 0B4B     		ldr	r3, .L19+8
 371 00ac 1868     		ldr	r0, [r3]
 372 00ae FFF7FEFF 		bl	pid_contrl
 373              	.LVL28:
 284:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_real = i_dq.q;
 374              		.loc 1 284 11 view .LVU101
 375 00b2 85ED010A 		vstr.32	s0, [r5, #4]
 285:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_Q_out = udq.q;
 376              		.loc 1 285 5 is_stmt 1 view .LVU102
 285:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_Q_out = udq.q;
 377              		.loc 1 285 33 is_stmt 0 view .LVU103
 378 00b6 059B     		ldr	r3, [sp, #20]	@ float
 285:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_Q_out = udq.q;
 379              		.loc 1 285 27 view .LVU104
 380 00b8 2365     		str	r3, [r4, #80]	@ float
 286:../BLDCMotor/motorctrl.c **** #endif
 381              		.loc 1 286 5 is_stmt 1 view .LVU105
 286:../BLDCMotor/motorctrl.c **** #endif
 382              		.loc 1 286 29 is_stmt 0 view .LVU106
 383 00ba 84ED160A 		vstr.32	s0, [r4, #88]
 288:../BLDCMotor/motorctrl.c **** #endif
 384              		.loc 1 288 5 is_stmt 1 view .LVU107
 290:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real)
 385              		.loc 1 290 1 is_stmt 0 view .LVU108
 386 00be 2846     		mov	r0, r5
 387 00c0 0CB0     		add	sp, sp, #48
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 15


 388              	.LCFI10:
 389              		.cfi_def_cfa_offset 40
 390              		@ sp needed
 391 00c2 BDEC028B 		vldm	sp!, {d8}
 392              	.LCFI11:
 393              		.cfi_restore 80
 394              		.cfi_restore 81
 395              		.cfi_def_cfa_offset 32
 396              	.LVL29:
 290:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real)
 397              		.loc 1 290 1 view .LVU109
 398 00c6 BDE87040 		pop	{r4, r5, r6, lr}
 399              	.LCFI12:
 400              		.cfi_restore 14
 401              		.cfi_restore 6
 402              		.cfi_restore 5
 403              		.cfi_restore 4
 404              		.cfi_def_cfa_offset 16
 405              	.LVL30:
 290:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real)
 406              		.loc 1 290 1 view .LVU110
 407 00ca 04B0     		add	sp, sp, #16
 408              	.LCFI13:
 409              		.cfi_def_cfa_offset 0
 410 00cc 7047     		bx	lr
 411              	.L20:
 412 00ce 00BF     		.align	2
 413              	.L19:
 414 00d0 00000000 		.word	.LANCHOR3
 415 00d4 00000000 		.word	.LANCHOR4
 416 00d8 00000000 		.word	.LANCHOR5
 417              		.cfi_endproc
 418              	.LFE239:
 420              		.global	__aeabi_f2d
 421              		.section	.text.motor_set_pwm,"ax",%progbits
 422              		.align	1
 423              		.syntax unified
 424              		.thumb
 425              		.thumb_func
 427              	motor_set_pwm:
 428              	.LFB244:
 322:../BLDCMotor/motorctrl.c ****     tim_set_pwm(temp._a,temp._b,temp._c);
 429              		.loc 1 322 1 is_stmt 1 view -0
 430              		.cfi_startproc
 431              		@ args = 0, pretend = 0, frame = 16
 432              		@ frame_needed = 0, uses_anonymous_args = 0
 433 0000 30B5     		push	{r4, r5, lr}
 434              	.LCFI14:
 435              		.cfi_def_cfa_offset 12
 436              		.cfi_offset 4, -12
 437              		.cfi_offset 5, -8
 438              		.cfi_offset 14, -4
 439 0002 2DED048B 		vpush.64	{d8, d9}
 440              	.LCFI15:
 441              		.cfi_def_cfa_offset 28
 442              		.cfi_offset 80, -28
 443              		.cfi_offset 81, -24
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 16


 444              		.cfi_offset 82, -20
 445              		.cfi_offset 83, -16
 446 0006 85B0     		sub	sp, sp, #20
 447              	.LCFI16:
 448              		.cfi_def_cfa_offset 48
 449 0008 10EE104A 		vmov	r4, s0
 450 000c 10EE905A 		vmov	r5, s1
 451 0010 11EE100A 		vmov	r0, s2
 452 0014 8DED010A 		vstr.32	s0, [sp, #4]
 453 0018 CDED020A 		vstr.32	s1, [sp, #8]
 454 001c 8DED031A 		vstr.32	s2, [sp, #12]
 323:../BLDCMotor/motorctrl.c **** }
 455              		.loc 1 323 5 view .LVU112
 456 0020 FFF7FEFF 		bl	__aeabi_f2d
 457              	.LVL31:
 458 0024 41EC190B 		vmov	d9, r0, r1
 459 0028 2846     		mov	r0, r5	@ float
 460 002a FFF7FEFF 		bl	__aeabi_f2d
 461              	.LVL32:
 462 002e 41EC180B 		vmov	d8, r0, r1
 463 0032 2046     		mov	r0, r4	@ float
 464 0034 FFF7FEFF 		bl	__aeabi_f2d
 465              	.LVL33:
 466 0038 B0EE492A 		vmov.f32	s4, s18
 467 003c F0EE692A 		vmov.f32	s5, s19
 468 0040 B0EE481A 		vmov.f32	s2, s16
 469 0044 F0EE681A 		vmov.f32	s3, s17
 470 0048 41EC100B 		vmov	d0, r0, r1
 471 004c FFF7FEFF 		bl	tim_set_pwm
 472              	.LVL34:
 324:../BLDCMotor/motorctrl.c **** 
 473              		.loc 1 324 1 is_stmt 0 view .LVU113
 474 0050 05B0     		add	sp, sp, #20
 475              	.LCFI17:
 476              		.cfi_def_cfa_offset 28
 477              		@ sp needed
 478 0052 BDEC048B 		vldm	sp!, {d8-d9}
 479              	.LCFI18:
 480              		.cfi_restore 82
 481              		.cfi_restore 83
 482              		.cfi_restore 80
 483              		.cfi_restore 81
 484              		.cfi_def_cfa_offset 12
 485 0056 30BD     		pop	{r4, r5, pc}
 486              		.cfi_endproc
 487              	.LFE244:
 489              		.global	__aeabi_d2f
 490              		.section	.text._limit_voltagecircle,"ax",%progbits
 491              		.align	1
 492              		.global	_limit_voltagecircle
 493              		.syntax unified
 494              		.thumb
 495              		.thumb_func
 497              	_limit_voltagecircle:
 498              	.LVL35:
 499              	.LFB238:
 238:../BLDCMotor/motorctrl.c ****     float max_voltage = D_MAX_VAL;// ËøôÈáåÂ∫îËØ•ÊòØ‰Ω†ÁöÑÊúÄÂ§ßÂÖÅËÆ∏ÁîµÂéãÂÄºÔºå‰æãÂ¶ÇÂØπ‰∫é‰∏âÁõ
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 17


 500              		.loc 1 238 49 is_stmt 1 view -0
 501              		.cfi_startproc
 502              		@ args = 20, pretend = 16, frame = 0
 503              		@ frame_needed = 0, uses_anonymous_args = 0
 238:../BLDCMotor/motorctrl.c ****     float max_voltage = D_MAX_VAL;// ËøôÈáåÂ∫îËØ•ÊòØ‰Ω†ÁöÑÊúÄÂ§ßÂÖÅËÆ∏ÁîµÂéãÂÄºÔºå‰æãÂ¶ÇÂØπ‰∫é‰∏âÁõ
 504              		.loc 1 238 49 is_stmt 0 view .LVU115
 505 0000 84B0     		sub	sp, sp, #16
 506              	.LCFI19:
 507              		.cfi_def_cfa_offset 16
 508 0002 10B5     		push	{r4, lr}
 509              	.LCFI20:
 510              		.cfi_def_cfa_offset 24
 511              		.cfi_offset 4, -24
 512              		.cfi_offset 14, -20
 513 0004 2DED028B 		vpush.64	{d8}
 514              	.LCFI21:
 515              		.cfi_def_cfa_offset 32
 516              		.cfi_offset 80, -32
 517              		.cfi_offset 81, -28
 518 0008 0446     		mov	r4, r0
 519 000a 05A8     		add	r0, sp, #20
 520 000c 80E80E00 		stm	r0, {r1, r2, r3}
 239:../BLDCMotor/motorctrl.c ****     float voltage_magnitude = sqrt(raw_uab.alpha * raw_uab.alpha + raw_uab.beta * raw_uab.beta); //
 521              		.loc 1 239 5 is_stmt 1 view .LVU116
 522              	.LVL36:
 240:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 523              		.loc 1 240 5 view .LVU117
 240:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 524              		.loc 1 240 43 is_stmt 0 view .LVU118
 525 0010 DDED058A 		vldr.32	s17, [sp, #20]
 240:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 526              		.loc 1 240 50 view .LVU119
 527 0014 28EEA87A 		vmul.f32	s14, s17, s17
 240:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 528              		.loc 1 240 75 view .LVU120
 529 0018 9DED068A 		vldr.32	s16, [sp, #24]
 240:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 530              		.loc 1 240 81 view .LVU121
 531 001c 68EE087A 		vmul.f32	s15, s16, s16
 240:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 532              		.loc 1 240 31 view .LVU122
 533 0020 77EE277A 		vadd.f32	s15, s14, s15
 534 0024 17EE900A 		vmov	r0, s15
 535              	.LVL37:
 240:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 536              		.loc 1 240 31 view .LVU123
 537 0028 FFF7FEFF 		bl	__aeabi_f2d
 538              	.LVL38:
 539 002c 41EC100B 		vmov	d0, r0, r1
 540 0030 FFF7FEFF 		bl	sqrt
 541              	.LVL39:
 542 0034 51EC100B 		vmov	r0, r1, d0
 240:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 543              		.loc 1 240 11 view .LVU124
 544 0038 FFF7FEFF 		bl	__aeabi_d2f
 545              	.LVL40:
 546 003c 07EE900A 		vmov	s15, r0
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 18


 547              	.LVL41:
 241:../BLDCMotor/motorctrl.c ****     if (voltage_magnitude > max_voltage) {  
 548              		.loc 1 241 5 is_stmt 1 view .LVU125
 242:../BLDCMotor/motorctrl.c ****         // Â¶ÇÊûúÁü¢ÈáèÈïøÂ∫¶Ë∂ÖËøáÊúÄÂ§ßÁîµÂéãÔºåÂàôÊåâÊØî‰æãÁº©ÊîæÁü¢Èáè‰ª•‰ΩøÂÖ∂ËêΩÂú®ÁîµÂéãÁü¢È
 549              		.loc 1 242 5 view .LVU126
 242:../BLDCMotor/motorctrl.c ****         // Â¶ÇÊûúÁü¢ÈáèÈïøÂ∫¶Ë∂ÖËøáÊúÄÂ§ßÁîµÂéãÔºåÂàôÊåâÊØî‰æãÁº©ÊîæÁü¢Èáè‰ª•‰ΩøÂÖ∂ËêΩÂú®ÁîµÂéãÁü¢È
 550              		.loc 1 242 8 is_stmt 0 view .LVU127
 551 0040 B1EE007A 		vmov.f32	s14, #4.0e+0
 552 0044 F4EEC77A 		vcmpe.f32	s15, s14
 553 0048 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 554 004c 12DD     		ble	.L28
 555              	.LBB2:
 244:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha * scale_factor;  
 556              		.loc 1 244 9 is_stmt 1 view .LVU128
 244:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha * scale_factor;  
 557              		.loc 1 244 15 is_stmt 0 view .LVU129
 558 004e F0EE476A 		vmov.f32	s13, s14
 559 0052 86EEA77A 		vdiv.f32	s14, s13, s15
 560              	.LVL42:
 245:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 561              		.loc 1 245 9 is_stmt 1 view .LVU130
 245:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 562              		.loc 1 245 35 is_stmt 0 view .LVU131
 563 0056 68EE878A 		vmul.f32	s17, s17, s14
 245:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 564              		.loc 1 245 19 view .LVU132
 565 005a C4ED008A 		vstr.32	s17, [r4]
 246:../BLDCMotor/motorctrl.c ****     } else {  
 566              		.loc 1 246 9 is_stmt 1 view .LVU133
 246:../BLDCMotor/motorctrl.c ****     } else {  
 567              		.loc 1 246 33 is_stmt 0 view .LVU134
 568 005e 28EE078A 		vmul.f32	s16, s16, s14
 246:../BLDCMotor/motorctrl.c ****     } else {  
 569              		.loc 1 246 18 view .LVU135
 570 0062 84ED018A 		vstr.32	s16, [r4, #4]
 571              	.LVL43:
 572              	.L23:
 246:../BLDCMotor/motorctrl.c ****     } else {  
 573              		.loc 1 246 18 view .LVU136
 574              	.LBE2:
 253:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 575              		.loc 1 253 1 view .LVU137
 576 0066 2046     		mov	r0, r4
 577              	.LVL44:
 253:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 578              		.loc 1 253 1 view .LVU138
 579 0068 BDEC028B 		vldm	sp!, {d8}
 580              	.LCFI22:
 581              		.cfi_remember_state
 582              		.cfi_restore 80
 583              		.cfi_restore 81
 584              		.cfi_def_cfa_offset 24
 585 006c BDE81040 		pop	{r4, lr}
 586              	.LCFI23:
 587              		.cfi_restore 14
 588              		.cfi_restore 4
 589              		.cfi_def_cfa_offset 16
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 19


 590              	.LVL45:
 253:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 591              		.loc 1 253 1 view .LVU139
 592 0070 04B0     		add	sp, sp, #16
 593              	.LCFI24:
 594              		.cfi_def_cfa_offset 0
 595 0072 7047     		bx	lr
 596              	.LVL46:
 597              	.L28:
 598              	.LCFI25:
 599              		.cfi_restore_state
 249:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta;  
 600              		.loc 1 249 9 is_stmt 1 view .LVU140
 249:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta;  
 601              		.loc 1 249 19 is_stmt 0 view .LVU141
 602 0074 C4ED008A 		vstr.32	s17, [r4]
 250:../BLDCMotor/motorctrl.c ****     }
 603              		.loc 1 250 9 is_stmt 1 view .LVU142
 250:../BLDCMotor/motorctrl.c ****     }
 604              		.loc 1 250 18 is_stmt 0 view .LVU143
 605 0078 84ED018A 		vstr.32	s16, [r4, #4]
 252:../BLDCMotor/motorctrl.c **** }
 606              		.loc 1 252 5 is_stmt 1 view .LVU144
 252:../BLDCMotor/motorctrl.c **** }
 607              		.loc 1 252 12 is_stmt 0 view .LVU145
 608 007c F3E7     		b	.L23
 609              		.cfi_endproc
 610              	.LFE238:
 612              		.section	.rodata._50uscycle_process.str1.4,"aMS",%progbits,1
 613              		.align	2
 614              	.LC0:
 615 0000 656E7465 		.ascii	"enter IDLE\015\012\000"
 615      72204944 
 615      4C450D0A 
 615      00
 616              		.section	.text._50uscycle_process,"ax",%progbits
 617              		.align	1
 618              		.global	_50uscycle_process
 619              		.syntax unified
 620              		.thumb
 621              		.thumb_func
 623              	_50uscycle_process:
 624              	.LVL47:
 625              	.LFB237:
 102:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 626              		.loc 1 102 1 is_stmt 1 view -0
 627              		.cfi_startproc
 628              		@ args = 0, pretend = 0, frame = 112
 629              		@ frame_needed = 0, uses_anonymous_args = 0
 102:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 630              		.loc 1 102 1 is_stmt 0 view .LVU147
 631 0000 30B5     		push	{r4, r5, lr}
 632              	.LCFI26:
 633              		.cfi_def_cfa_offset 12
 634              		.cfi_offset 4, -12
 635              		.cfi_offset 5, -8
 636              		.cfi_offset 14, -4
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 20


 637 0002 2DED028B 		vpush.64	{d8}
 638              	.LCFI27:
 639              		.cfi_def_cfa_offset 20
 640              		.cfi_offset 80, -20
 641              		.cfi_offset 81, -16
 642 0006 A1B0     		sub	sp, sp, #132
 643              	.LCFI28:
 644              		.cfi_def_cfa_offset 152
 103:../BLDCMotor/motorctrl.c ****     int32_t Q15_Mechtheta;    
 645              		.loc 1 103 5 is_stmt 1 view .LVU148
 104:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 646              		.loc 1 104 5 view .LVU149
 105:../BLDCMotor/motorctrl.c ****     abc_t i_abc;
 647              		.loc 1 105 5 view .LVU150
 106:../BLDCMotor/motorctrl.c ****     dq_t udq;
 648              		.loc 1 106 5 view .LVU151
 107:../BLDCMotor/motorctrl.c **** 
 649              		.loc 1 107 5 view .LVU152
 111:../BLDCMotor/motorctrl.c ****     int32_t a1,b1,c1;
 650              		.loc 1 111 5 view .LVU153
 112:../BLDCMotor/motorctrl.c ****     a1 = abc_vale[0] - A_ADCCHANNL_OFFSET;
 651              		.loc 1 112 5 view .LVU154
 113:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 652              		.loc 1 113 5 view .LVU155
 113:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 653              		.loc 1 113 18 is_stmt 0 view .LVU156
 654 0008 0368     		ldr	r3, [r0]
 113:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 655              		.loc 1 113 22 view .LVU157
 656 000a A3F64903 		subw	r3, r3, #2121
 657              	.LVL48:
 114:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 658              		.loc 1 114 5 is_stmt 1 view .LVU158
 114:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 659              		.loc 1 114 18 is_stmt 0 view .LVU159
 660 000e 4268     		ldr	r2, [r0, #4]
 114:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 661              		.loc 1 114 22 view .LVU160
 662 0010 A2F65A02 		subw	r2, r2, #2138
 663 0014 08EE102A 		vmov	s16, r2	@ int
 664              	.LVL49:
 115:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ia = a1;
 665              		.loc 1 115 5 is_stmt 1 view .LVU161
 116:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 666              		.loc 1 116 5 view .LVU162
 116:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 667              		.loc 1 116 24 is_stmt 0 view .LVU163
 668 0018 6F4A     		ldr	r2, .L42
 669              	.LVL50:
 116:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 670              		.loc 1 116 24 view .LVU164
 671 001a D361     		str	r3, [r2, #28]
 672              	.LVL51:
 117:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 673              		.loc 1 117 5 is_stmt 1 view .LVU165
 117:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 674              		.loc 1 117 10 is_stmt 0 view .LVU166
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 21


 675 001c 07EE903A 		vmov	s15, r3	@ int
 676 0020 B8EEE70A 		vcvt.f32.s32	s0, s15
 677              	.LVL52:
 117:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 678              		.loc 1 117 8 view .LVU167
 679 0024 DFED6D7A 		vldr.32	s15, .L42+4
 680 0028 20EE270A 		vmul.f32	s0, s0, s15
 681              	.LVL53:
 118:../BLDCMotor/motorctrl.c ****     // Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 682              		.loc 1 118 5 is_stmt 1 view .LVU168
 118:../BLDCMotor/motorctrl.c ****     // Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 683              		.loc 1 118 10 is_stmt 0 view .LVU169
 684 002c B8EEC88A 		vcvt.f32.s32	s16, s16
 685              	.LVL54:
 118:../BLDCMotor/motorctrl.c ****     // Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 686              		.loc 1 118 8 view .LVU170
 687 0030 DFED6B7A 		vldr.32	s15, .L42+8
 688 0034 28EE278A 		vmul.f32	s16, s16, s15
 689              	.LVL55:
 120:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 690              		.loc 1 120 5 is_stmt 1 view .LVU171
 120:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 691              		.loc 1 120 10 is_stmt 0 view .LVU172
 692 0038 F1EE408A 		vneg.f32	s17, s0
 120:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 693              		.loc 1 120 8 view .LVU173
 694 003c 78EEC88A 		vsub.f32	s17, s17, s16
 695              	.LVL56:
 121:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 696              		.loc 1 121 5 is_stmt 1 view .LVU174
 121:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 697              		.loc 1 121 15 is_stmt 0 view .LVU175
 698 0040 684C     		ldr	r4, .L42+12
 699 0042 2046     		mov	r0, r4
 700              	.LVL57:
 121:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 701              		.loc 1 121 15 view .LVU176
 702 0044 FFF7FEFF 		bl	lowfilter_cale
 703              	.LVL58:
 121:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 704              		.loc 1 121 13 view .LVU177
 705 0048 8DED140A 		vstr.32	s0, [sp, #80]
 122:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 706              		.loc 1 122 5 is_stmt 1 view .LVU178
 122:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 707              		.loc 1 122 15 is_stmt 0 view .LVU179
 708 004c B0EE480A 		vmov.f32	s0, s16
 709 0050 04F10800 		add	r0, r4, #8
 710 0054 FFF7FEFF 		bl	lowfilter_cale
 711              	.LVL59:
 122:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 712              		.loc 1 122 13 view .LVU180
 713 0058 8DED150A 		vstr.32	s0, [sp, #84]
 123:../BLDCMotor/motorctrl.c **** 
 714              		.loc 1 123 5 is_stmt 1 view .LVU181
 123:../BLDCMotor/motorctrl.c **** 
 715              		.loc 1 123 15 is_stmt 0 view .LVU182
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 22


 716 005c B0EE680A 		vmov.f32	s0, s17
 717 0060 04F11000 		add	r0, r4, #16
 718 0064 FFF7FEFF 		bl	lowfilter_cale
 719              	.LVL60:
 123:../BLDCMotor/motorctrl.c **** 
 720              		.loc 1 123 13 view .LVU183
 721 0068 8DED160A 		vstr.32	s0, [sp, #88]
 127:../BLDCMotor/motorctrl.c ****         OFFSET=0,
 722              		.loc 1 127 5 is_stmt 1 view .LVU184
 134:../BLDCMotor/motorctrl.c ****     switch (state0_)
 723              		.loc 1 134 5 view .LVU185
 135:../BLDCMotor/motorctrl.c ****     {
 724              		.loc 1 135 5 view .LVU186
 725 006c 5E4B     		ldr	r3, .L42+16
 726 006e B3F90030 		ldrsh	r3, [r3]
 727 0072 042B     		cmp	r3, #4
 728 0074 0BD8     		bhi	.L30
 729 0076 DFE803F0 		tbb	[pc, r3]
 730              	.L33:
 731 007a 03       		.byte	(.L36-.L33)/2
 732 007b 0A       		.byte	(.L30-.L33)/2
 733 007c 7C       		.byte	(.L35-.L33)/2
 734 007d 24       		.byte	(.L34-.L33)/2
 735 007e 0E       		.byte	(.L32-.L33)/2
 736 007f 00       		.p2align 1
 737              	.L36:
 738              	.LBB3:
 142:../BLDCMotor/motorctrl.c ****             state0_ = CLOSELOOP;
 739              		.loc 1 142 13 view .LVU187
 740 0080 5A49     		ldr	r1, .L42+20
 741 0082 0020     		movs	r0, #0
 742 0084 FFF7FEFF 		bl	SEGGER_RTT_printf
 743              	.LVL61:
 143:../BLDCMotor/motorctrl.c ****             break;
 744              		.loc 1 143 13 view .LVU188
 143:../BLDCMotor/motorctrl.c ****             break;
 745              		.loc 1 143 21 is_stmt 0 view .LVU189
 746 0088 574B     		ldr	r3, .L42+16
 747 008a 0222     		movs	r2, #2
 748 008c 1A80     		strh	r2, [r3]	@ movhi
 144:../BLDCMotor/motorctrl.c ****         case IDLE:
 749              		.loc 1 144 13 is_stmt 1 view .LVU190
 750              	.LVL62:
 751              	.L30:
 144:../BLDCMotor/motorctrl.c ****         case IDLE:
 752              		.loc 1 144 13 is_stmt 0 view .LVU191
 753              	.LBE3:
 234:../BLDCMotor/motorctrl.c **** 
 754              		.loc 1 234 1 view .LVU192
 755 008e 21B0     		add	sp, sp, #132
 756              	.LCFI29:
 757              		.cfi_remember_state
 758              		.cfi_def_cfa_offset 20
 759              		@ sp needed
 760 0090 BDEC028B 		vldm	sp!, {d8}
 761              	.LCFI30:
 762              		.cfi_restore 80
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 23


 763              		.cfi_restore 81
 764              		.cfi_def_cfa_offset 12
 765 0094 30BD     		pop	{r4, r5, pc}
 766              	.LVL63:
 767              	.L32:
 768              	.LCFI31:
 769              		.cfi_restore_state
 770              	.LBB5:
 146:../BLDCMotor/motorctrl.c ****             {
 771              		.loc 1 146 13 is_stmt 1 view .LVU193
 146:../BLDCMotor/motorctrl.c ****             {
 772              		.loc 1 146 30 is_stmt 0 view .LVU194
 773 0096 504B     		ldr	r3, .L42
 774 0098 D3ED107A 		vldr.32	s15, [r3, #64]
 146:../BLDCMotor/motorctrl.c ****             {
 775              		.loc 1 146 16 view .LVU195
 776 009c F5EE407A 		vcmp.f32	s15, #0
 777 00a0 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 778 00a4 06D1     		bne	.L37
 146:../BLDCMotor/motorctrl.c ****             {
 779              		.loc 1 146 64 discriminator 1 view .LVU196
 780 00a6 D3ED127A 		vldr.32	s15, [r3, #72]
 146:../BLDCMotor/motorctrl.c ****             {
 781              		.loc 1 146 48 discriminator 1 view .LVU197
 782 00aa F5EE407A 		vcmp.f32	s15, #0
 783 00ae F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 784 00b2 ECD0     		beq	.L30
 785              	.L37:
 148:../BLDCMotor/motorctrl.c ****                 state0_ = SPEEDLOOP;
 786              		.loc 1 148 17 is_stmt 1 view .LVU198
 148:../BLDCMotor/motorctrl.c ****                 state0_ = SPEEDLOOP;
 787              		.loc 1 148 41 is_stmt 0 view .LVU199
 788 00b4 484B     		ldr	r3, .L42
 789 00b6 0022     		movs	r2, #0
 790 00b8 1A67     		str	r2, [r3, #112]	@ float
 149:../BLDCMotor/motorctrl.c ****             }
 791              		.loc 1 149 17 is_stmt 1 view .LVU200
 149:../BLDCMotor/motorctrl.c ****             }
 792              		.loc 1 149 25 is_stmt 0 view .LVU201
 793 00ba 4B4B     		ldr	r3, .L42+16
 794 00bc 0322     		movs	r2, #3
 795 00be 1A80     		strh	r2, [r3]	@ movhi
 796 00c0 E5E7     		b	.L30
 797              	.L34:
 153:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(Q15_Mechtheta);
 798              		.loc 1 153 13 is_stmt 1 view .LVU202
 153:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(Q15_Mechtheta);
 799              		.loc 1 153 40 is_stmt 0 view .LVU203
 800 00c2 0121     		movs	r1, #1
 801 00c4 0020     		movs	r0, #0
 802 00c6 FFF7FEFF 		bl	sensor_user_read
 803              	.LVL64:
 154:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 804              		.loc 1 154 13 is_stmt 1 view .LVU204
 154:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 805              		.loc 1 154 26 is_stmt 0 view .LVU205
 806 00ca 0068     		ldr	r0, [r0]
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 24


 807              	.LVL65:
 154:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 808              		.loc 1 154 26 view .LVU206
 809 00cc FFF7FEFF 		bl	_IQ20toF
 810              	.LVL66:
 154:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 811              		.loc 1 154 26 view .LVU207
 812 00d0 B0EE408A 		vmov.f32	s16, s0
 813              	.LVL67:
 155:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 814              		.loc 1 155 13 is_stmt 1 view .LVU208
 155:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 815              		.loc 1 155 40 is_stmt 0 view .LVU209
 816 00d4 FFF7FEFF 		bl	motor_speedcale
 817              	.LVL68:
 155:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 818              		.loc 1 155 38 view .LVU210
 819 00d8 3F4C     		ldr	r4, .L42
 820 00da 84ED110A 		vstr.32	s0, [r4, #68]
 156:../BLDCMotor/motorctrl.c ****             elec_theta -= sg_MecThetaOffset;
 821              		.loc 1 156 13 is_stmt 1 view .LVU211
 156:../BLDCMotor/motorctrl.c ****             elec_theta -= sg_MecThetaOffset;
 822              		.loc 1 156 24 is_stmt 0 view .LVU212
 823 00de B1EE0C0A 		vmov.f32	s0, #7.0e+0
 824 00e2 28EE008A 		vmul.f32	s16, s16, s0
 825              	.LVL69:
 157:../BLDCMotor/motorctrl.c **** 
 826              		.loc 1 157 13 is_stmt 1 view .LVU213
 827 00e6 424B     		ldr	r3, .L42+24
 828 00e8 93ED000A 		vldr.32	s0, [r3]
 829              	.LVL70:
 159:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 830              		.loc 1 159 13 view .LVU214
 159:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 831              		.loc 1 159 26 is_stmt 0 view .LVU215
 832 00ec 38EE400A 		vsub.f32	s0, s16, s0
 833              	.LVL71:
 159:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 834              		.loc 1 159 26 view .LVU216
 835 00f0 FFF7FEFF 		bl	_normalize_angle
 836              	.LVL72:
 159:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 837              		.loc 1 159 26 view .LVU217
 838 00f4 B0EE408A 		vmov.f32	s16, s0
 839              	.LVL73:
 160:../BLDCMotor/motorctrl.c **** 
 840              		.loc 1 160 13 is_stmt 1 view .LVU218
 841 00f8 04AD     		add	r5, sp, #16
 842 00fa 17AB     		add	r3, sp, #92
 843 00fc 93E80700 		ldm	r3, {r0, r1, r2}
 844 0100 8DE80700 		stm	sp, {r0, r1, r2}
 845 0104 14AB     		add	r3, sp, #80
 846 0106 0ECB     		ldm	r3, {r1, r2, r3}
 847 0108 2846     		mov	r0, r5
 848 010a FFF7FEFF 		bl	_currmentloop
 849              	.LVL74:
 162:../BLDCMotor/motorctrl.c ****             static unsigned short cnt = 0;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 25


 850              		.loc 1 162 13 view .LVU219
 162:../BLDCMotor/motorctrl.c ****             static unsigned short cnt = 0;
 851              		.loc 1 162 37 is_stmt 0 view .LVU220
 852 010e 84ED1C8A 		vstr.32	s16, [r4, #112]
 163:../BLDCMotor/motorctrl.c ****             if (cnt++ < 200)
 853              		.loc 1 163 13 is_stmt 1 view .LVU221
 164:../BLDCMotor/motorctrl.c ****             {
 854              		.loc 1 164 13 view .LVU222
 164:../BLDCMotor/motorctrl.c ****             {
 855              		.loc 1 164 20 is_stmt 0 view .LVU223
 856 0112 384B     		ldr	r3, .L42+28
 857 0114 1A88     		ldrh	r2, [r3]
 858 0116 0132     		adds	r2, r2, #1
 859 0118 1A80     		strh	r2, [r3]	@ movhi
 167:../BLDCMotor/motorctrl.c ****             cnt = 0;
 860              		.loc 1 167 13 is_stmt 1 view .LVU224
 168:../BLDCMotor/motorctrl.c ****             udq.q = 0.3f;
 861              		.loc 1 168 13 view .LVU225
 168:../BLDCMotor/motorctrl.c ****             udq.q = 0.3f;
 862              		.loc 1 168 17 is_stmt 0 view .LVU226
 863 011a 0022     		movs	r2, #0
 864 011c 1A80     		strh	r2, [r3]	@ movhi
 169:../BLDCMotor/motorctrl.c ****             udq.d = 0;
 865              		.loc 1 169 13 is_stmt 1 view .LVU227
 169:../BLDCMotor/motorctrl.c ****             udq.d = 0;
 866              		.loc 1 169 19 is_stmt 0 view .LVU228
 867 011e 364B     		ldr	r3, .L42+32
 868 0120 1193     		str	r3, [sp, #68]	@ float
 170:../BLDCMotor/motorctrl.c ****             alpbet_t uab;
 869              		.loc 1 170 13 is_stmt 1 view .LVU229
 170:../BLDCMotor/motorctrl.c ****             alpbet_t uab;
 870              		.loc 1 170 19 is_stmt 0 view .LVU230
 871 0122 0023     		movs	r3, #0
 872 0124 1093     		str	r3, [sp, #64]	@ float
 171:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, elec_theta - PI_2);  
 873              		.loc 1 171 13 is_stmt 1 view .LVU231
 172:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 874              		.loc 1 172 13 view .LVU232
 172:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 875              		.loc 1 172 19 is_stmt 0 view .LVU233
 876 0126 0CAC     		add	r4, sp, #48
 877 0128 139B     		ldr	r3, [sp, #76]
 878 012a 0093     		str	r3, [sp]
 879 012c 10AB     		add	r3, sp, #64
 880 012e 0ECB     		ldm	r3, {r1, r2, r3}
 881 0130 9FED320A 		vldr.32	s0, .L42+36
 882 0134 38EE400A 		vsub.f32	s0, s16, s0
 883 0138 2046     		mov	r0, r4
 884 013a FFF7FEFF 		bl	_2r_2s
 885              	.LVL75:
 173:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 886              		.loc 1 173 13 is_stmt 1 view .LVU234
 173:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 887              		.loc 1 173 19 is_stmt 0 view .LVU235
 888 013e 0F9B     		ldr	r3, [sp, #60]
 889 0140 0093     		str	r3, [sp]
 890 0142 94E80E00 		ldm	r4, {r1, r2, r3}
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 26


 891 0146 2846     		mov	r0, r5
 892 0148 FFF7FEFF 		bl	_limit_voltagecircle
 893              	.LVL76:
 894 014c 95E80F00 		ldm	r5, {r0, r1, r2, r3}
 895 0150 84E80F00 		stm	r4, {r0, r1, r2, r3}
 174:../BLDCMotor/motorctrl.c ****             break;
 896              		.loc 1 174 13 is_stmt 1 view .LVU236
 897 0154 DDED0D0A 		vldr.32	s1, [sp, #52]
 898 0158 9DED0C0A 		vldr.32	s0, [sp, #48]
 899 015c FFF7FEFF 		bl	_svpwm
 900              	.LVL77:
 901 0160 8DED1D0A 		vstr.32	s0, [sp, #116]
 902 0164 CDED1E0A 		vstr.32	s1, [sp, #120]
 903 0168 8DED1F1A 		vstr.32	s2, [sp, #124]
 904 016c FFF7FEFF 		bl	motor_set_pwm
 905              	.LVL78:
 175:../BLDCMotor/motorctrl.c ****         case CLOSELOOP:
 906              		.loc 1 175 13 view .LVU237
 907 0170 8DE7     		b	.L30
 908              	.LVL79:
 909              	.L35:
 910              	.LBB4:
 191:../BLDCMotor/motorctrl.c ****             alpbet_t uab,uab_q15;
 911              		.loc 1 191 13 view .LVU238
 191:../BLDCMotor/motorctrl.c ****             alpbet_t uab,uab_q15;
 912              		.loc 1 191 18 is_stmt 0 view .LVU239
 913 0172 0023     		movs	r3, #0
 914 0174 0893     		str	r3, [sp, #32]	@ float
 915 0176 224B     		ldr	r3, .L42+40
 916 0178 0993     		str	r3, [sp, #36]	@ float
 917 017a 0023     		movs	r3, #0
 918 017c 0A93     		str	r3, [sp, #40]
 919 017e 0B93     		str	r3, [sp, #44]
 192:../BLDCMotor/motorctrl.c ****             if(sg_motordebug.self_ele_theta>_2PI)
 920              		.loc 1 192 13 is_stmt 1 view .LVU240
 193:../BLDCMotor/motorctrl.c ****             {
 921              		.loc 1 193 13 view .LVU241
 193:../BLDCMotor/motorctrl.c ****             {
 922              		.loc 1 193 29 is_stmt 0 view .LVU242
 923 0180 154B     		ldr	r3, .L42
 924 0182 93ED1D7A 		vldr.32	s14, [r3, #116]
 193:../BLDCMotor/motorctrl.c ****             {
 925              		.loc 1 193 15 view .LVU243
 926 0186 DFED1F7A 		vldr.32	s15, .L42+44
 927 018a B4EEE77A 		vcmpe.f32	s14, s15
 928 018e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 929 0192 01DD     		ble	.L38
 195:../BLDCMotor/motorctrl.c ****             }
 930              		.loc 1 195 17 is_stmt 1 view .LVU244
 195:../BLDCMotor/motorctrl.c ****             }
 931              		.loc 1 195 46 is_stmt 0 view .LVU245
 932 0194 0022     		movs	r2, #0
 933 0196 5A67     		str	r2, [r3, #116]	@ float
 934              	.L38:
 197:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, sg_motordebug.self_ele_theta); 
 935              		.loc 1 197 13 is_stmt 1 discriminator 2 view .LVU246
 197:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, sg_motordebug.self_ele_theta); 
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 27


 936              		.loc 1 197 42 is_stmt 0 discriminator 2 view .LVU247
 937 0198 0F4B     		ldr	r3, .L42
 938 019a 93ED1D0A 		vldr.32	s0, [r3, #116]
 939 019e DFED1A7A 		vldr.32	s15, .L42+48
 940 01a2 30EE270A 		vadd.f32	s0, s0, s15
 941 01a6 83ED1D0A 		vstr.32	s0, [r3, #116]
 198:../BLDCMotor/motorctrl.c ****             dut01 = _svpwm(uab.alpha,uab.beta);
 942              		.loc 1 198 13 is_stmt 1 discriminator 2 view .LVU248
 198:../BLDCMotor/motorctrl.c ****             dut01 = _svpwm(uab.alpha,uab.beta);
 943              		.loc 1 198 19 is_stmt 0 discriminator 2 view .LVU249
 944 01aa 0B9B     		ldr	r3, [sp, #44]
 945 01ac 0093     		str	r3, [sp]
 946 01ae 08AB     		add	r3, sp, #32
 947 01b0 0ECB     		ldm	r3, {r1, r2, r3}
 948 01b2 0CA8     		add	r0, sp, #48
 949 01b4 FFF7FEFF 		bl	_2r_2s
 950              	.LVL80:
 199:../BLDCMotor/motorctrl.c ****             motor_set_pwm(dut01);
 951              		.loc 1 199 13 is_stmt 1 discriminator 2 view .LVU250
 199:../BLDCMotor/motorctrl.c ****             motor_set_pwm(dut01);
 952              		.loc 1 199 21 is_stmt 0 discriminator 2 view .LVU251
 953 01b8 DDED0D0A 		vldr.32	s1, [sp, #52]
 954 01bc 9DED0C0A 		vldr.32	s0, [sp, #48]
 955 01c0 FFF7FEFF 		bl	_svpwm
 956              	.LVL81:
 957 01c4 8DED1A0A 		vstr.32	s0, [sp, #104]
 958 01c8 CDED1B0A 		vstr.32	s1, [sp, #108]
 959 01cc 8DED1C1A 		vstr.32	s2, [sp, #112]
 200:../BLDCMotor/motorctrl.c **** #else
 960              		.loc 1 200 13 is_stmt 1 discriminator 2 view .LVU252
 961 01d0 FFF7FEFF 		bl	motor_set_pwm
 962              	.LVL82:
 963              	.LBE4:
 230:../BLDCMotor/motorctrl.c ****         default:
 964              		.loc 1 230 13 discriminator 2 view .LVU253
 965              	.LBE5:
 234:../BLDCMotor/motorctrl.c **** 
 966              		.loc 1 234 1 is_stmt 0 discriminator 2 view .LVU254
 967 01d4 5BE7     		b	.L30
 968              	.L43:
 969 01d6 00BF     		.align	2
 970              	.L42:
 971 01d8 00000000 		.word	.LANCHOR3
 972 01dc 52B89E3E 		.word	1050589266
 973 01e0 3333B33E 		.word	1051931443
 974 01e4 00000000 		.word	.LANCHOR6
 975 01e8 00000000 		.word	.LANCHOR7
 976 01ec 00000000 		.word	.LC0
 977 01f0 00000000 		.word	.LANCHOR8
 978 01f4 00000000 		.word	.LANCHOR9
 979 01f8 9A99993E 		.word	1050253722
 980 01fc D80FC93F 		.word	1070141400
 981 0200 CDCC4C3E 		.word	1045220557
 982 0204 DA0FC940 		.word	1086918618
 983 0208 6F12833A 		.word	981668463
 984              		.cfi_endproc
 985              	.LFE237:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 28


 987              		.section	.text.foc_paraminit,"ax",%progbits
 988              		.align	1
 989              		.global	foc_paraminit
 990              		.syntax unified
 991              		.thumb
 992              		.thumb_func
 994              	foc_paraminit:
 995              	.LFB247:
 352:../BLDCMotor/motorctrl.c **** 
 353:../BLDCMotor/motorctrl.c **** 
 354:../BLDCMotor/motorctrl.c **** 
 355:../BLDCMotor/motorctrl.c **** 
 356:../BLDCMotor/motorctrl.c **** 
 357:../BLDCMotor/motorctrl.c **** static short _get_angleoffset(void)
 358:../BLDCMotor/motorctrl.c **** {
 359:../BLDCMotor/motorctrl.c ****     static short state_ = 1;
 360:../BLDCMotor/motorctrl.c **** 
 361:../BLDCMotor/motorctrl.c ****     /*-----------ËÆæÁΩÆalpha/betaÂùêÊ†áÁ≥ª------------------*/
 362:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 363:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.4f,0.0f};
 364:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 365:../BLDCMotor/motorctrl.c ****     float theta;
 366:../BLDCMotor/motorctrl.c ****     static short cnt_ = 0;
 367:../BLDCMotor/motorctrl.c ****     int32_t Q15_theta = 0;
 368:../BLDCMotor/motorctrl.c ****     int32_t Q_thetaSum = 0;
 369:../BLDCMotor/motorctrl.c ****     switch (state_)
 370:../BLDCMotor/motorctrl.c ****     {
 371:../BLDCMotor/motorctrl.c ****     case 1://ËØªÂèñÂÅèÁßªÂÄº
 372:../BLDCMotor/motorctrl.c ****         uab = _2r_2s(udq,0.0f);
 373:../BLDCMotor/motorctrl.c ****         dut01 = _svpwm(uab.alpha,uab.beta);
 374:../BLDCMotor/motorctrl.c ****         motor_set_pwm(dut01);
 375:../BLDCMotor/motorctrl.c ****         state_ = 2;
 376:../BLDCMotor/motorctrl.c ****         break;
 377:../BLDCMotor/motorctrl.c **** 
 378:../BLDCMotor/motorctrl.c ****     case 2:
 379:../BLDCMotor/motorctrl.c ****         if (cnt_++ > 15000)
 380:../BLDCMotor/motorctrl.c ****         {
 381:../BLDCMotor/motorctrl.c ****             cnt_ = 0;
 382:../BLDCMotor/motorctrl.c ****             state_ = 3;
 383:../BLDCMotor/motorctrl.c ****             // dut01 = _svpwm(0.0f,00.0f);
 384:../BLDCMotor/motorctrl.c ****             // motor_set_pwm(dut01);             
 385:../BLDCMotor/motorctrl.c ****         }
 386:../BLDCMotor/motorctrl.c ****         break;
 387:../BLDCMotor/motorctrl.c **** 
 388:../BLDCMotor/motorctrl.c ****     case 3:
 389:../BLDCMotor/motorctrl.c ****    
 390:../BLDCMotor/motorctrl.c ****         // for (uint8_t i = 0; i < 10; i++)
 391:../BLDCMotor/motorctrl.c ****         // {
 392:../BLDCMotor/motorctrl.c ****         //     Q_thetaSum += ((int32_t*)(sensor_user_read(SENSOR_01,EN_SENSORDATA_COV)))[0];
 393:../BLDCMotor/motorctrl.c ****         // }
 394:../BLDCMotor/motorctrl.c ****         // Q15_theta = Q_thetaSum/10;
 395:../BLDCMotor/motorctrl.c ****         Q15_theta = ((int32_t*)(sensor_user_read(SENSOR_01,EN_SENSORDATA_COV)))[0];
 396:../BLDCMotor/motorctrl.c ****         theta = _IQ20toF(Q15_theta);
 397:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = theta;
 398:../BLDCMotor/motorctrl.c ****         state_ = 4;
 399:../BLDCMotor/motorctrl.c ****         break;
 400:../BLDCMotor/motorctrl.c **** 
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 29


 401:../BLDCMotor/motorctrl.c ****     case 4:
 402:../BLDCMotor/motorctrl.c **** 
 403:../BLDCMotor/motorctrl.c ****         break;             
 404:../BLDCMotor/motorctrl.c ****     default:
 405:../BLDCMotor/motorctrl.c ****         break;
 406:../BLDCMotor/motorctrl.c ****     }
 407:../BLDCMotor/motorctrl.c ****     if (state_ == 4)
 408:../BLDCMotor/motorctrl.c ****     {
 409:../BLDCMotor/motorctrl.c ****         return 0;
 410:../BLDCMotor/motorctrl.c ****     }
 411:../BLDCMotor/motorctrl.c ****     return 1;
 412:../BLDCMotor/motorctrl.c **** }
 413:../BLDCMotor/motorctrl.c **** 
 414:../BLDCMotor/motorctrl.c **** void foc_paraminit(void)
 415:../BLDCMotor/motorctrl.c **** {
 996              		.loc 1 415 1 is_stmt 1 view -0
 997              		.cfi_startproc
 998              		@ args = 0, pretend = 0, frame = 0
 999              		@ frame_needed = 0, uses_anonymous_args = 0
 1000 0000 70B5     		push	{r4, r5, r6, lr}
 1001              	.LCFI32:
 1002              		.cfi_def_cfa_offset 16
 1003              		.cfi_offset 4, -16
 1004              		.cfi_offset 5, -12
 1005              		.cfi_offset 6, -8
 1006              		.cfi_offset 14, -4
 1007 0002 2DED028B 		vpush.64	{d8}
 1008              	.LCFI33:
 1009              		.cfi_def_cfa_offset 24
 1010              		.cfi_offset 80, -24
 1011              		.cfi_offset 81, -20
 416:../BLDCMotor/motorctrl.c ****     sgp_curloop_d_pid = &sg_curloop_param.d_pid;
 1012              		.loc 1 416 5 view .LVU256
 1013              		.loc 1 416 23 is_stmt 0 view .LVU257
 1014 0006 2448     		ldr	r0, .L46
 1015 0008 244B     		ldr	r3, .L46+4
 1016 000a 1860     		str	r0, [r3]
 417:../BLDCMotor/motorctrl.c ****     sgp_curloop_q_pid = &sg_curloop_param.q_pid;
 1017              		.loc 1 417 5 is_stmt 1 view .LVU258
 1018              		.loc 1 417 23 is_stmt 0 view .LVU259
 1019 000c 244E     		ldr	r6, .L46+8
 1020 000e 00F11C03 		add	r3, r0, #28
 1021 0012 3360     		str	r3, [r6]
 418:../BLDCMotor/motorctrl.c ****     sgp_speed_pid = &sg_speed_pid;
 1022              		.loc 1 418 5 is_stmt 1 view .LVU260
 1023              		.loc 1 418 19 is_stmt 0 view .LVU261
 1024 0014 234D     		ldr	r5, .L46+12
 1025 0016 244B     		ldr	r3, .L46+16
 1026 0018 2B60     		str	r3, [r5]
 419:../BLDCMotor/motorctrl.c ****     pid_init(sgp_curloop_d_pid,sg_motordebug.pid_d_kp,sg_motordebug.pid_d_ki,1.0f,D_MAX_VAL,D_MIN_V
 1027              		.loc 1 419 5 is_stmt 1 view .LVU262
 1028 001a 244C     		ldr	r4, .L46+20
 1029 001c B9EE002A 		vmov.f32	s4, #-4.0e+0
 1030 0020 F1EE001A 		vmov.f32	s3, #4.0e+0
 1031 0024 B7EE001A 		vmov.f32	s2, #1.0e+0
 1032 0028 D4ED1B0A 		vldr.32	s1, [r4, #108]
 1033 002c 94ED1A0A 		vldr.32	s0, [r4, #104]
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 30


 1034 0030 FFF7FEFF 		bl	pid_init
 1035              	.LVL83:
 420:../BLDCMotor/motorctrl.c ****     pid_init(sgp_curloop_q_pid,sg_motordebug.pid_d_kp,sg_motordebug.pid_d_ki,1.0f,D_MAX_VAL,D_MIN_V
 1036              		.loc 1 420 5 view .LVU263
 1037 0034 B9EE002A 		vmov.f32	s4, #-4.0e+0
 1038 0038 F1EE001A 		vmov.f32	s3, #4.0e+0
 1039 003c B7EE001A 		vmov.f32	s2, #1.0e+0
 1040 0040 D4ED1B0A 		vldr.32	s1, [r4, #108]
 1041 0044 94ED1A0A 		vldr.32	s0, [r4, #104]
 1042 0048 3068     		ldr	r0, [r6]
 1043 004a FFF7FEFF 		bl	pid_init
 1044              	.LVL84:
 421:../BLDCMotor/motorctrl.c ****     pid_init(sgp_speed_pid,sg_motordebug.pid_d_kp,sg_motordebug.pid_d_ki,1.0f,3.0,-3.0);
 1045              		.loc 1 421 5 view .LVU264
 1046 004e B8EE082A 		vmov.f32	s4, #-3.0e+0
 1047 0052 F0EE081A 		vmov.f32	s3, #3.0e+0
 1048 0056 B7EE001A 		vmov.f32	s2, #1.0e+0
 1049 005a D4ED1B0A 		vldr.32	s1, [r4, #108]
 1050 005e 94ED1A0A 		vldr.32	s0, [r4, #104]
 1051 0062 2868     		ldr	r0, [r5]
 1052 0064 FFF7FEFF 		bl	pid_init
 1053              	.LVL85:
 422:../BLDCMotor/motorctrl.c **** 
 423:../BLDCMotor/motorctrl.c ****     lowfilter_init(&sg_elefilter[0],80);
 1054              		.loc 1 423 5 view .LVU265
 1055 0068 9FED118A 		vldr.32	s16, .L46+24
 1056 006c 114C     		ldr	r4, .L46+28
 1057 006e B0EE480A 		vmov.f32	s0, s16
 1058 0072 2046     		mov	r0, r4
 1059 0074 FFF7FEFF 		bl	lowfilter_init
 1060              	.LVL86:
 424:../BLDCMotor/motorctrl.c ****     lowfilter_init(&sg_elefilter[1],80);
 1061              		.loc 1 424 5 view .LVU266
 1062 0078 B0EE480A 		vmov.f32	s0, s16
 1063 007c 04F10800 		add	r0, r4, #8
 1064 0080 FFF7FEFF 		bl	lowfilter_init
 1065              	.LVL87:
 425:../BLDCMotor/motorctrl.c ****     lowfilter_init(&sg_elefilter[2],80);
 1066              		.loc 1 425 5 view .LVU267
 1067 0084 B0EE480A 		vmov.f32	s0, s16
 1068 0088 04F11000 		add	r0, r4, #16
 1069 008c FFF7FEFF 		bl	lowfilter_init
 1070              	.LVL88:
 426:../BLDCMotor/motorctrl.c **** }
 1071              		.loc 1 426 1 is_stmt 0 view .LVU268
 1072 0090 BDEC028B 		vldm	sp!, {d8}
 1073              	.LCFI34:
 1074              		.cfi_restore 80
 1075              		.cfi_restore 81
 1076              		.cfi_def_cfa_offset 16
 1077 0094 70BD     		pop	{r4, r5, r6, pc}
 1078              	.L47:
 1079 0096 00BF     		.align	2
 1080              	.L46:
 1081 0098 00000000 		.word	.LANCHOR10
 1082 009c 00000000 		.word	.LANCHOR4
 1083 00a0 00000000 		.word	.LANCHOR5
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 31


 1084 00a4 00000000 		.word	.LANCHOR11
 1085 00a8 00000000 		.word	.LANCHOR12
 1086 00ac 00000000 		.word	.LANCHOR3
 1087 00b0 0000A042 		.word	1117782016
 1088 00b4 00000000 		.word	.LANCHOR6
 1089              		.cfi_endproc
 1090              	.LFE247:
 1092              		.section	.rodata.motortctrl_process.str1.4,"aMS",%progbits,1
 1093              		.align	2
 1094              	.LC1:
 1095 0000 6D6F746F 		.ascii	"motor stop\000"
 1095      72207374 
 1095      6F7000
 1096              		.section	.text.motortctrl_process,"ax",%progbits
 1097              		.align	1
 1098              		.global	motortctrl_process
 1099              		.syntax unified
 1100              		.thumb
 1101              		.thumb_func
 1103              	motortctrl_process:
 1104              	.LFB236:
  63:../BLDCMotor/motorctrl.c ****     char rec_buf[64];
 1105              		.loc 1 63 1 is_stmt 1 view -0
 1106              		.cfi_startproc
 1107              		@ args = 0, pretend = 0, frame = 0
 1108              		@ frame_needed = 0, uses_anonymous_args = 0
 1109 0000 08B5     		push	{r3, lr}
 1110              	.LCFI35:
 1111              		.cfi_def_cfa_offset 8
 1112              		.cfi_offset 3, -8
 1113              		.cfi_offset 14, -4
  64:../BLDCMotor/motorctrl.c ****     char cnt = 0;
 1114              		.loc 1 64 5 view .LVU270
  65:../BLDCMotor/motorctrl.c ****     // if (readline_fromPC(rec_buf,sizeof(rec_buf)))
 1115              		.loc 1 65 5 view .LVU271
 1116              	.LVL89:
  70:../BLDCMotor/motorctrl.c ****     switch (g_Motor1.state)
 1117              		.loc 1 70 5 view .LVU272
 1118 0002 FFF7FEFF 		bl	motorprotocol_process
 1119              	.LVL90:
  71:../BLDCMotor/motorctrl.c ****     {
 1120              		.loc 1 71 5 view .LVU273
  71:../BLDCMotor/motorctrl.c ****     {
 1121              		.loc 1 71 21 is_stmt 0 view .LVU274
 1122 0006 114B     		ldr	r3, .L54
 1123 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  71:../BLDCMotor/motorctrl.c ****     {
 1124              		.loc 1 71 5 view .LVU275
 1125 000a 042B     		cmp	r3, #4
 1126 000c 11D0     		beq	.L49
 1127 000e 052B     		cmp	r3, #5
 1128 0010 19D0     		beq	.L50
 1129 0012 012B     		cmp	r3, #1
 1130 0014 00D0     		beq	.L53
 1131              	.L48:
  99:../BLDCMotor/motorctrl.c **** /*------------Âë®ÊúüÊÄßË¢´Ë∞ÉÁî®----------------*/
 1132              		.loc 1 99 1 view .LVU276
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 32


 1133 0016 08BD     		pop	{r3, pc}
 1134              	.L53:
  78:../BLDCMotor/motorctrl.c ****         lowfilter_init(&sg_speedfilter,80);
 1135              		.loc 1 78 9 is_stmt 1 view .LVU277
 1136 0018 FFF7FEFF 		bl	foc_paraminit
 1137              	.LVL91:
  79:../BLDCMotor/motorctrl.c ****         motor_enable();
 1138              		.loc 1 79 9 view .LVU278
 1139 001c 9FED0C0A 		vldr.32	s0, .L54+4
 1140 0020 0C48     		ldr	r0, .L54+8
 1141 0022 FFF7FEFF 		bl	lowfilter_init
 1142              	.LVL92:
  80:../BLDCMotor/motorctrl.c ****         g_Motor1.state = MOTOR_RUNING;
 1143              		.loc 1 80 9 view .LVU279
 1144 0026 FFF7FEFF 		bl	motor_enable
 1145              	.LVL93:
  81:../BLDCMotor/motorctrl.c ****         break;
 1146              		.loc 1 81 9 view .LVU280
  81:../BLDCMotor/motorctrl.c ****         break;
 1147              		.loc 1 81 24 is_stmt 0 view .LVU281
 1148 002a 084B     		ldr	r3, .L54
 1149 002c 0422     		movs	r2, #4
 1150 002e 1A70     		strb	r2, [r3]
  82:../BLDCMotor/motorctrl.c **** 
 1151              		.loc 1 82 9 is_stmt 1 view .LVU282
 1152 0030 F1E7     		b	.L48
 1153              	.L49:
  86:../BLDCMotor/motorctrl.c ****             {
 1154              		.loc 1 86 13 view .LVU283
  86:../BLDCMotor/motorctrl.c ****             {
 1155              		.loc 1 86 30 is_stmt 0 view .LVU284
 1156 0032 094B     		ldr	r3, .L54+12
 1157 0034 D3F88420 		ldr	r2, [r3, #132]
  86:../BLDCMotor/motorctrl.c ****             {
 1158              		.loc 1 86 16 view .LVU285
 1159 0038 084B     		ldr	r3, .L54+16
 1160 003a 9A42     		cmp	r2, r3
 1161 003c EBD1     		bne	.L48
  88:../BLDCMotor/motorctrl.c ****             }
 1162              		.loc 1 88 17 is_stmt 1 view .LVU286
  88:../BLDCMotor/motorctrl.c ****             }
 1163              		.loc 1 88 32 is_stmt 0 view .LVU287
 1164 003e 034B     		ldr	r3, .L54
 1165 0040 0522     		movs	r2, #5
 1166 0042 1A70     		strb	r2, [r3]
 1167 0044 E7E7     		b	.L48
 1168              	.L50:
  94:../BLDCMotor/motorctrl.c ****         break;
 1169              		.loc 1 94 9 is_stmt 1 view .LVU288
 1170 0046 FFF7FEFF 		bl	motor_disable
 1171              	.LVL94:
  95:../BLDCMotor/motorctrl.c ****     default:
 1172              		.loc 1 95 9 view .LVU289
  99:../BLDCMotor/motorctrl.c **** /*------------Âë®ÊúüÊÄßË¢´Ë∞ÉÁî®----------------*/
 1173              		.loc 1 99 1 is_stmt 0 view .LVU290
 1174 004a E4E7     		b	.L48
 1175              	.L55:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 33


 1176              		.align	2
 1177              	.L54:
 1178 004c 00000000 		.word	.LANCHOR13
 1179 0050 0000A042 		.word	1117782016
 1180 0054 00000000 		.word	.LANCHOR2
 1181 0058 00000000 		.word	.LANCHOR3
 1182 005c 00000000 		.word	.LC1
 1183              		.cfi_endproc
 1184              	.LFE236:
 1186              		.global	test_d_pid
 1187              		.global	sg_speedfilter
 1188              		.global	g_Motor1
 1189              		.global	sg_motordebug
 1190              		.section	.bss.cnt.1,"aw",%nobits
 1191              		.align	1
 1192              		.set	.LANCHOR0,. + 0
 1195              	cnt.1:
 1196 0000 0000     		.space	2
 1197              		.section	.bss.cnt.2,"aw",%nobits
 1198              		.align	1
 1199              		.set	.LANCHOR9,. + 0
 1202              	cnt.2:
 1203 0000 0000     		.space	2
 1204              		.section	.bss.pre_theta.0,"aw",%nobits
 1205              		.align	2
 1206              		.set	.LANCHOR1,. + 0
 1209              	pre_theta.0:
 1210 0000 00000000 		.space	4
 1211              		.section	.bss.sg_MecThetaOffset,"aw",%nobits
 1212              		.align	2
 1213              		.set	.LANCHOR8,. + 0
 1216              	sg_MecThetaOffset:
 1217 0000 00000000 		.space	4
 1218              		.section	.bss.sg_curloop_param,"aw",%nobits
 1219              		.align	2
 1220              		.set	.LANCHOR10,. + 0
 1223              	sg_curloop_param:
 1224 0000 00000000 		.space	56
 1224      00000000 
 1224      00000000 
 1224      00000000 
 1224      00000000 
 1225              		.section	.bss.sg_elefilter,"aw",%nobits
 1226              		.align	2
 1227              		.set	.LANCHOR6,. + 0
 1230              	sg_elefilter:
 1231 0000 00000000 		.space	24
 1231      00000000 
 1231      00000000 
 1231      00000000 
 1231      00000000 
 1232              		.section	.bss.sg_motordebug,"aw",%nobits
 1233              		.align	2
 1234              		.set	.LANCHOR3,. + 0
 1237              	sg_motordebug:
 1238 0000 00000000 		.space	136
 1238      00000000 
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 34


 1238      00000000 
 1238      00000000 
 1238      00000000 
 1239              		.section	.bss.sg_speed_pid,"aw",%nobits
 1240              		.align	2
 1241              		.set	.LANCHOR12,. + 0
 1244              	sg_speed_pid:
 1245 0000 00000000 		.space	28
 1245      00000000 
 1245      00000000 
 1245      00000000 
 1245      00000000 
 1246              		.section	.bss.sg_speedfilter,"aw",%nobits
 1247              		.align	2
 1248              		.set	.LANCHOR2,. + 0
 1251              	sg_speedfilter:
 1252 0000 00000000 		.space	8
 1252      00000000 
 1253              		.section	.bss.sgp_curloop_d_pid,"aw",%nobits
 1254              		.align	2
 1255              		.set	.LANCHOR4,. + 0
 1258              	sgp_curloop_d_pid:
 1259 0000 00000000 		.space	4
 1260              		.section	.bss.sgp_curloop_q_pid,"aw",%nobits
 1261              		.align	2
 1262              		.set	.LANCHOR5,. + 0
 1265              	sgp_curloop_q_pid:
 1266 0000 00000000 		.space	4
 1267              		.section	.bss.sgp_speed_pid,"aw",%nobits
 1268              		.align	2
 1269              		.set	.LANCHOR11,. + 0
 1272              	sgp_speed_pid:
 1273 0000 00000000 		.space	4
 1274              		.section	.bss.state0_.3,"aw",%nobits
 1275              		.align	1
 1276              		.set	.LANCHOR7,. + 0
 1279              	state0_.3:
 1280 0000 0000     		.space	2
 1281              		.section	.bss.test_d_pid,"aw",%nobits
 1282              		.align	2
 1285              	test_d_pid:
 1286 0000 00000000 		.space	28
 1286      00000000 
 1286      00000000 
 1286      00000000 
 1286      00000000 
 1287              		.section	.data.g_Motor1,"aw"
 1288              		.align	2
 1289              		.set	.LANCHOR13,. + 0
 1292              	g_Motor1:
 1293 0000 01       		.byte	1
 1294 0001 00       		.space	1
 1295 0002 0000     		.short	0
 1296              		.text
 1297              	.Letext0:
 1298              		.file 2 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\machine\\_defa
 1299              		.file 3 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\sys\\_stdint.h
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 35


 1300              		.file 4 "../Common/method/pid.h"
 1301              		.file 5 "../Common/method/filter.h"
 1302              		.file 6 "../Common/IQMath/ti/IQmathLib.h"
 1303              		.file 7 "../BLDCMotor/motorctrl_common.h"
 1304              		.file 8 "./Board/board.h"
 1305              		.file 9 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\math.h"
 1306              		.file 10 "../Common/debuglog/SEGGER_RTT_V792h/RTT/SEGGER_RTT.h"
 1307              		.file 11 "../Sensor/sensor.h"
 1308              		.file 12 "../BLDCMotor/./motorctrl.h"
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 36


DEFINED SYMBOLS
                            *ABS*:00000000 motorctrl.c
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:20     .text.motor_enable:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:25     .text.motor_enable:00000000 motor_enable
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:52     .text.motor_disable:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:57     .text.motor_disable:00000000 motor_disable
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:80     .text.motor_speedcale:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:85     .text.motor_speedcale:00000000 motor_speedcale
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:220    .text.motor_speedcale:000000bc $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:232    .text._currmentloop:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:237    .text._currmentloop:00000000 _currmentloop
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:414    .text._currmentloop:000000d0 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:422    .text.motor_set_pwm:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:427    .text.motor_set_pwm:00000000 motor_set_pwm
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:491    .text._limit_voltagecircle:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:497    .text._limit_voltagecircle:00000000 _limit_voltagecircle
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:613    .rodata._50uscycle_process.str1.4:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:617    .text._50uscycle_process:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:623    .text._50uscycle_process:00000000 _50uscycle_process
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:731    .text._50uscycle_process:0000007a $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:971    .text._50uscycle_process:000001d8 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:988    .text.foc_paraminit:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:994    .text.foc_paraminit:00000000 foc_paraminit
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1081   .text.foc_paraminit:00000098 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1093   .rodata.motortctrl_process.str1.4:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1097   .text.motortctrl_process:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1103   .text.motortctrl_process:00000000 motortctrl_process
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1178   .text.motortctrl_process:0000004c $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1285   .bss.test_d_pid:00000000 test_d_pid
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1251   .bss.sg_speedfilter:00000000 sg_speedfilter
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1292   .data.g_Motor1:00000000 g_Motor1
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1237   .bss.sg_motordebug:00000000 sg_motordebug
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1191   .bss.cnt.1:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1195   .bss.cnt.1:00000000 cnt.1
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1198   .bss.cnt.2:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1202   .bss.cnt.2:00000000 cnt.2
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1205   .bss.pre_theta.0:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1209   .bss.pre_theta.0:00000000 pre_theta.0
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1212   .bss.sg_MecThetaOffset:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1216   .bss.sg_MecThetaOffset:00000000 sg_MecThetaOffset
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1219   .bss.sg_curloop_param:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1223   .bss.sg_curloop_param:00000000 sg_curloop_param
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1226   .bss.sg_elefilter:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1230   .bss.sg_elefilter:00000000 sg_elefilter
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1233   .bss.sg_motordebug:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1240   .bss.sg_speed_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1244   .bss.sg_speed_pid:00000000 sg_speed_pid
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1247   .bss.sg_speedfilter:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1254   .bss.sgp_curloop_d_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1258   .bss.sgp_curloop_d_pid:00000000 sgp_curloop_d_pid
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1261   .bss.sgp_curloop_q_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1265   .bss.sgp_curloop_q_pid:00000000 sgp_curloop_q_pid
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1268   .bss.sgp_speed_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1272   .bss.sgp_speed_pid:00000000 sgp_speed_pid
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1275   .bss.state0_.3:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1279   .bss.state0_.3:00000000 state0_.3
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1282   .bss.test_d_pid:00000000 $d
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccQtJG59.s 			page 37


C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:1288   .data.g_Motor1:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:736    .text._50uscycle_process:0000007f $d
C:\Users\57308\AppData\Local\Temp\ccQtJG59.s:736    .text._50uscycle_process:00000080 $t

UNDEFINED SYMBOLS
tim_pwm_enable
tim_tigger_adc
adc_start
tim_pwm_disable
adc_stop
lowfilter_cale
_3s_2s
_2s_2r
pid_contrl
__aeabi_f2d
tim_set_pwm
__aeabi_d2f
sqrt
SEGGER_RTT_printf
sensor_user_read
_IQ20toF
_normalize_angle
_2r_2s
_svpwm
pid_init
lowfilter_init
motorprotocol_process
