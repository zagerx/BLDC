ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"motorctrl.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.motor_enable,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	motor_enable:
  26              	.LFB373:
  27              		.file 1 "../BLDCMotor/motorctrl.c"
   1:../BLDCMotor/motorctrl.c **** #include "./motorctrl.h"
   2:../BLDCMotor/motorctrl.c **** #include "debuglog.h"
   3:../BLDCMotor/motorctrl.c **** #include "motorctrl_common.h"
   4:../BLDCMotor/motorctrl.c **** 
   5:../BLDCMotor/motorctrl.c **** #include "board.h"
   6:../BLDCMotor/motorctrl.c **** #include "string.h"
   7:../BLDCMotor/motorctrl.c **** 
   8:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
   9:../BLDCMotor/motorctrl.c **** #endif
  10:../BLDCMotor/motorctrl.c **** #define Q15_PI_2                   (51471)
  11:../BLDCMotor/motorctrl.c **** #define Q15_2PI                    (205884)
  12:../BLDCMotor/motorctrl.c **** #define PI_2                       (1.570796f)
  13:../BLDCMotor/motorctrl.c **** #define MOTORCTRL_PERCI            (1)
  14:../BLDCMotor/motorctrl.c **** 
  15:../BLDCMotor/motorctrl.c **** enum{
  16:../BLDCMotor/motorctrl.c ****     MOTOR_ZERO,
  17:../BLDCMotor/motorctrl.c ****     MOTOR_INIT,
  18:../BLDCMotor/motorctrl.c ****     MOTOR_IDLE,
  19:../BLDCMotor/motorctrl.c ****     MOTOR_START, 
  20:../BLDCMotor/motorctrl.c ****     MOTOR_RUNING,
  21:../BLDCMotor/motorctrl.c ****     MOTOR_STOP,
  22:../BLDCMotor/motorctrl.c **** };
  23:../BLDCMotor/motorctrl.c **** 
  24:../BLDCMotor/motorctrl.c **** motordebug_t sg_motordebug = {0};
  25:../BLDCMotor/motorctrl.c **** typedef struct
  26:../BLDCMotor/motorctrl.c **** {
  27:../BLDCMotor/motorctrl.c ****     unsigned char state;
  28:../BLDCMotor/motorctrl.c ****     unsigned short cnt;
  29:../BLDCMotor/motorctrl.c **** }motorctrl_t;
  30:../BLDCMotor/motorctrl.c **** 
  31:../BLDCMotor/motorctrl.c **** static dq_t _currmentloop(abc_t i_abc,float ele_theta);
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 2


  32:../BLDCMotor/motorctrl.c **** static short _get_angleoffset(void);
  33:../BLDCMotor/motorctrl.c **** static void motor_enable(void);
  34:../BLDCMotor/motorctrl.c **** static void motor_disable(void);
  35:../BLDCMotor/motorctrl.c **** static void motor_set_pwm(duty_t temp);
  36:../BLDCMotor/motorctrl.c **** static void sg_debug_clear(void)
  37:../BLDCMotor/motorctrl.c **** {
  38:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_targe =0.0f;
  39:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_targe =0.0f;
  40:../BLDCMotor/motorctrl.c ****     sg_motordebug.ele_angle = 0.0f;
  41:../BLDCMotor/motorctrl.c ****     memset(&sg_motordebug,0,sizeof(sg_motordebug)-4);
  42:../BLDCMotor/motorctrl.c **** }
  43:../BLDCMotor/motorctrl.c **** alpbet_t _limit_voltagecircle(alpbet_t raw_uab);
  44:../BLDCMotor/motorctrl.c **** 
  45:../BLDCMotor/motorctrl.c **** static void g431_angletest(abc_t i_abc);
  46:../BLDCMotor/motorctrl.c **** 
  47:../BLDCMotor/motorctrl.c **** motorctrl_t g_Motor1 = {
  48:../BLDCMotor/motorctrl.c ****     .state = MOTOR_ZERO,
  49:../BLDCMotor/motorctrl.c ****     .cnt = 0,
  50:../BLDCMotor/motorctrl.c **** };
  51:../BLDCMotor/motorctrl.c **** static volatile float sg_MecThetaOffset = 0.0f;
  52:../BLDCMotor/motorctrl.c **** static lowfilter_t sg_elefilter[3];
  53:../BLDCMotor/motorctrl.c **** pid_cb_t test_d_pid = {0};
  54:../BLDCMotor/motorctrl.c **** static pid_cb_t *sgp_curloop_d_pid;
  55:../BLDCMotor/motorctrl.c **** static pid_cb_t *sgp_curloop_q_pid;
  56:../BLDCMotor/motorctrl.c **** static curloop_t sg_curloop_param;
  57:../BLDCMotor/motorctrl.c **** float pre_angle_test = 0.0f;
  58:../BLDCMotor/motorctrl.c **** float next_angle_test = 0.0f;
  59:../BLDCMotor/motorctrl.c **** float raw_angle = 0.0f;
  60:../BLDCMotor/motorctrl.c **** float test_ia = 0.0f;
  61:../BLDCMotor/motorctrl.c **** float test_ib = 0.0f;
  62:../BLDCMotor/motorctrl.c **** float test_ic = 0.0f;
  63:../BLDCMotor/motorctrl.c **** void motortctrl_process(void)
  64:../BLDCMotor/motorctrl.c **** {
  65:../BLDCMotor/motorctrl.c ****     char rec_buf[64];
  66:../BLDCMotor/motorctrl.c ****     char cnt = 0;
  67:../BLDCMotor/motorctrl.c ****     // if (readline_fromPC(rec_buf,sizeof(rec_buf)))
  68:../BLDCMotor/motorctrl.c ****     // {
  69:../BLDCMotor/motorctrl.c ****     //     motorprotocol_pause(rec_buf);
  70:../BLDCMotor/motorctrl.c ****     // }
  71:../BLDCMotor/motorctrl.c ****     motorprotocol_process();
  72:../BLDCMotor/motorctrl.c ****     switch (g_Motor1.state)
  73:../BLDCMotor/motorctrl.c ****     {
  74:../BLDCMotor/motorctrl.c ****     case MOTOR_ZERO:
  75:../BLDCMotor/motorctrl.c ****         // sg_debug_clear();
  76:../BLDCMotor/motorctrl.c ****         g_Motor1.state = MOTOR_INIT;
  77:../BLDCMotor/motorctrl.c ****         break;
  78:../BLDCMotor/motorctrl.c ****     case MOTOR_INIT:
  79:../BLDCMotor/motorctrl.c ****         // sg_MecThetaOffset = _get_angleoffset();
  80:../BLDCMotor/motorctrl.c ****         if (sg_motordebug.motor_stat != 4)
  81:../BLDCMotor/motorctrl.c ****         {
  82:../BLDCMotor/motorctrl.c ****             break;
  83:../BLDCMotor/motorctrl.c ****         }
  84:../BLDCMotor/motorctrl.c ****         foc_paraminit();
  85:../BLDCMotor/motorctrl.c ****         motor_enable();
  86:../BLDCMotor/motorctrl.c ****         g_Motor1.state = MOTOR_RUNING;
  87:../BLDCMotor/motorctrl.c ****         break;
  88:../BLDCMotor/motorctrl.c **** 
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 3


  89:../BLDCMotor/motorctrl.c ****     case MOTOR_RUNING:
  90:../BLDCMotor/motorctrl.c ****         {
  91:../BLDCMotor/motorctrl.c ****             if (sg_motordebug.motor_stat == 1)
  92:../BLDCMotor/motorctrl.c ****             {
  93:../BLDCMotor/motorctrl.c ****                 // g_Motor1.state = MOTOR_STOP;
  94:../BLDCMotor/motorctrl.c ****             }
  95:../BLDCMotor/motorctrl.c ****         }
  96:../BLDCMotor/motorctrl.c ****         break;
  97:../BLDCMotor/motorctrl.c **** 
  98:../BLDCMotor/motorctrl.c ****     case MOTOR_STOP:
  99:../BLDCMotor/motorctrl.c ****         motor_disable();
 100:../BLDCMotor/motorctrl.c ****         g_Motor1.state = MOTOR_ZERO;
 101:../BLDCMotor/motorctrl.c ****         break;
 102:../BLDCMotor/motorctrl.c ****     case MOTOR_IDLE:
 103:../BLDCMotor/motorctrl.c ****         if (sg_motordebug.motor_stat == 3)
 104:../BLDCMotor/motorctrl.c ****         {
 105:../BLDCMotor/motorctrl.c ****             g_Motor1.state = MOTOR_INIT;
 106:../BLDCMotor/motorctrl.c ****         }
 107:../BLDCMotor/motorctrl.c ****         break;
 108:../BLDCMotor/motorctrl.c ****     
 109:../BLDCMotor/motorctrl.c ****     default:
 110:../BLDCMotor/motorctrl.c ****         break;
 111:../BLDCMotor/motorctrl.c ****     }
 112:../BLDCMotor/motorctrl.c **** }
 113:../BLDCMotor/motorctrl.c **** /*------------å‘¨æœŸæ€§è¢«è°ƒç”¨----------------*/
 114:../BLDCMotor/motorctrl.c **** unsigned int test_angletime = 0;
 115:../BLDCMotor/motorctrl.c **** float per_eleangle = 0.0f;
 116:../BLDCMotor/motorctrl.c **** void _50uscycle_process(unsigned int *abc_vale,float _elec_theta)
 117:../BLDCMotor/motorctrl.c **** {
 118:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 119:../BLDCMotor/motorctrl.c ****     int32_t Q15_Mechtheta;    
 120:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 121:../BLDCMotor/motorctrl.c ****     abc_t i_abc;
 122:../BLDCMotor/motorctrl.c **** 
 123:../BLDCMotor/motorctrl.c **** /*----------------ä¸‰ç›¸ç”µæµå¤„ç†------------------------------*/    
 124:../BLDCMotor/motorctrl.c **** #if 1
 125:../BLDCMotor/motorctrl.c ****     float Ia,Ib,Ic;
 126:../BLDCMotor/motorctrl.c ****     int32_t a1,b1,c1;
 127:../BLDCMotor/motorctrl.c ****     a1 = abc_vale[0] - A_ADCCHANNL_OFFSET;
 128:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 129:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 130:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ia = a1;
 131:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 132:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 133:../BLDCMotor/motorctrl.c ****     // Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 134:../BLDCMotor/motorctrl.c ****     Ic = -Ia - Ib;
 135:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 136:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 137:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 138:../BLDCMotor/motorctrl.c **** 
 139:../BLDCMotor/motorctrl.c **** #endif
 140:../BLDCMotor/motorctrl.c **** 
 141:../BLDCMotor/motorctrl.c ****     enum{
 142:../BLDCMotor/motorctrl.c ****         OFFSET=0,
 143:../BLDCMotor/motorctrl.c ****         OPENLOOP,
 144:../BLDCMotor/motorctrl.c ****         CLOSELOOP,
 145:../BLDCMotor/motorctrl.c ****         IDLE,
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 4


 146:../BLDCMotor/motorctrl.c ****     };
 147:../BLDCMotor/motorctrl.c ****     static short state0_ = OFFSET;
 148:../BLDCMotor/motorctrl.c ****     switch (state0_)
 149:../BLDCMotor/motorctrl.c ****     {
 150:../BLDCMotor/motorctrl.c ****         case OFFSET:
 151:../BLDCMotor/motorctrl.c ****             if (_get_angleoffset() != 0)
 152:../BLDCMotor/motorctrl.c ****             {
 153:../BLDCMotor/motorctrl.c ****                 break;
 154:../BLDCMotor/motorctrl.c ****             }   
 155:../BLDCMotor/motorctrl.c ****             USER_DEBUG_NORMAL("enter IDLE\r\n");
 156:../BLDCMotor/motorctrl.c ****             state0_ = IDLE;
 157:../BLDCMotor/motorctrl.c ****             break;
 158:../BLDCMotor/motorctrl.c ****         case IDLE:
 159:../BLDCMotor/motorctrl.c ****             if (sg_motordebug.id_targe != 0.0f || sg_motordebug.iq_targe != 0.0f)
 160:../BLDCMotor/motorctrl.c ****             {
 161:../BLDCMotor/motorctrl.c ****                 state0_ = CLOSELOOP;
 162:../BLDCMotor/motorctrl.c ****             }
 163:../BLDCMotor/motorctrl.c ****             break;
 164:../BLDCMotor/motorctrl.c **** 
 165:../BLDCMotor/motorctrl.c ****         case CLOSELOOP:
 166:../BLDCMotor/motorctrl.c ****         {//èŽ·å–ç”µè§’åº¦
 167:../BLDCMotor/motorctrl.c ****             Q15_Mechtheta = ((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_COV))[0];
 168:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(Q15_Mechtheta);
 169:../BLDCMotor/motorctrl.c ****             mech_theta -= sg_MecThetaOffset;
 170:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 171:../BLDCMotor/motorctrl.c **** 
 172:../BLDCMotor/motorctrl.c ****             if (sg_motordebug.iq_targe > 0.0f )
 173:../BLDCMotor/motorctrl.c ****             {
 174:../BLDCMotor/motorctrl.c ****                 /* code */
 175:../BLDCMotor/motorctrl.c ****                 elec_theta += ANGLE_COMPENSATA + 0.1f;
 176:../BLDCMotor/motorctrl.c ****             }else{
 177:../BLDCMotor/motorctrl.c ****                 elec_theta += ANGLE_COMPENSATA;
 178:../BLDCMotor/motorctrl.c ****             }
 179:../BLDCMotor/motorctrl.c ****             
 180:../BLDCMotor/motorctrl.c ****             elec_theta = _normalize_angle(elec_theta);
 181:../BLDCMotor/motorctrl.c **** 
 182:../BLDCMotor/motorctrl.c ****             // if (!flag_)
 183:../BLDCMotor/motorctrl.c ****             // {
 184:../BLDCMotor/motorctrl.c ****             //     flag_ = 1;
 185:../BLDCMotor/motorctrl.c ****             //     elec_theta = 0.0f;
 186:../BLDCMotor/motorctrl.c ****             // }
 187:../BLDCMotor/motorctrl.c ****             sg_motordebug.ele_angle = elec_theta;
 188:../BLDCMotor/motorctrl.c **** 
 189:../BLDCMotor/motorctrl.c ****             dq_t udq = {0.0f,0.0f,_IQ15(0.0f),_IQ15(0.8f)};
 190:../BLDCMotor/motorctrl.c ****             #if 1/*é—­çŽ¯æŽ§åˆ¶*/
 191:../BLDCMotor/motorctrl.c ****                 udq = _currmentloop(i_abc,elec_theta - PI_2);
 192:../BLDCMotor/motorctrl.c ****                 // udq.d = 0.0f;
 193:../BLDCMotor/motorctrl.c ****                 // udq.q = 0.8f;
 194:../BLDCMotor/motorctrl.c ****                 // udq.q = sg_motordebug.iq_targe;
 195:../BLDCMotor/motorctrl.c ****             #else
 196:../BLDCMotor/motorctrl.c ****                 _currmentloop(i_abc,elec_theta - PI_2);
 197:../BLDCMotor/motorctrl.c ****                 udq.d = sg_motordebug.id_targe;
 198:../BLDCMotor/motorctrl.c ****                 udq.q = sg_motordebug.iq_targe;
 199:../BLDCMotor/motorctrl.c ****             #endif
 200:../BLDCMotor/motorctrl.c ****             alpbet_t uab;
 201:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, elec_theta);  
 202:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 5


 203:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta));   
 204:../BLDCMotor/motorctrl.c ****         }
 205:../BLDCMotor/motorctrl.c ****             break;
 206:../BLDCMotor/motorctrl.c ****         default:
 207:../BLDCMotor/motorctrl.c ****             break;
 208:../BLDCMotor/motorctrl.c ****     }
 209:../BLDCMotor/motorctrl.c **** }
 210:../BLDCMotor/motorctrl.c **** 
 211:../BLDCMotor/motorctrl.c **** 
 212:../BLDCMotor/motorctrl.c **** float test_eletheta = 0.0f;
 213:../BLDCMotor/motorctrl.c **** static void g431_angletest(abc_t i_abc)
 214:../BLDCMotor/motorctrl.c **** {
 215:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 216:../BLDCMotor/motorctrl.c ****     int32_t Q15_Mechtheta;
 217:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 218:../BLDCMotor/motorctrl.c ****     static short flag_ = 0;
 219:../BLDCMotor/motorctrl.c ****     Q15_Mechtheta = ((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_COV))[0];
 220:../BLDCMotor/motorctrl.c ****     mech_theta = _IQ20toF(Q15_Mechtheta);
 221:../BLDCMotor/motorctrl.c ****     mech_theta -= sg_MecThetaOffset;//3.53934f;//
 222:../BLDCMotor/motorctrl.c ****     elec_theta = mech_theta * MOTOR_PAIR;
 223:../BLDCMotor/motorctrl.c ****     elec_theta = _normalize_angle(elec_theta);
 224:../BLDCMotor/motorctrl.c ****     
 225:../BLDCMotor/motorctrl.c ****     if (!flag_)
 226:../BLDCMotor/motorctrl.c ****     {
 227:../BLDCMotor/motorctrl.c ****         flag_ = 1;
 228:../BLDCMotor/motorctrl.c ****         elec_theta = 0.0f;
 229:../BLDCMotor/motorctrl.c ****     }
 230:../BLDCMotor/motorctrl.c ****     sg_motordebug.ele_angle = elec_theta;
 231:../BLDCMotor/motorctrl.c ****     #if 0//å¼ºæ‹–
 232:../BLDCMotor/motorctrl.c ****         {
 233:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 234:../BLDCMotor/motorctrl.c ****             #if 1 //æ­£è½¬
 235:../BLDCMotor/motorctrl.c ****             dq_t udq = {0.0f,0.6f,_IQ15(0.0f),_IQ15(0.0f)};
 236:../BLDCMotor/motorctrl.c ****             alpbet_t uab,uab_q15;
 237:../BLDCMotor/motorctrl.c ****             if (sg_motordebug.self_ele_theta < -_2PI)
 238:../BLDCMotor/motorctrl.c ****             {
 239:../BLDCMotor/motorctrl.c ****                 sg_motordebug.self_ele_theta += _2PI;
 240:../BLDCMotor/motorctrl.c ****             }
 241:../BLDCMotor/motorctrl.c ****             // udq.q = sg_motordebug.iq_targe;
 242:../BLDCMotor/motorctrl.c ****             sg_motordebug.iq_targe = udq.q;
 243:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, sg_motordebug.self_ele_theta); 
 244:../BLDCMotor/motorctrl.c ****             dut01 = _svpwm(uab.alpha,uab.beta);
 245:../BLDCMotor/motorctrl.c ****             motor_set_pwm(dut01);
 246:../BLDCMotor/motorctrl.c ****             sg_motordebug.self_ele_theta -= 0.0011415926f;
 247:../BLDCMotor/motorctrl.c ****             #else //åè½¬
 248:../BLDCMotor/motorctrl.c ****             dq_t udq = {0.0f,-0.8f,_IQ15(0.0f),_IQ15(0.0f)};
 249:../BLDCMotor/motorctrl.c ****             alpbet_t uab,uab_q15;
 250:../BLDCMotor/motorctrl.c ****             // udq.q = sg_motordebug.iq_targe; 
 251:../BLDCMotor/motorctrl.c ****             if (sg_motordebug.self_ele_theta <= 0.0f)
 252:../BLDCMotor/motorctrl.c ****             {
 253:../BLDCMotor/motorctrl.c ****                 sg_motordebug.self_ele_theta += _2PI;
 254:../BLDCMotor/motorctrl.c ****             }
 255:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, sg_motordebug.self_ele_theta); 
 256:../BLDCMotor/motorctrl.c ****             dut01 = _svpwm(uab.alpha,uab.beta);
 257:../BLDCMotor/motorctrl.c ****             motor_set_pwm(dut01);
 258:../BLDCMotor/motorctrl.c ****             sg_motordebug.self_ele_theta -= 0.0041415926f;
 259:../BLDCMotor/motorctrl.c ****             #endif
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 6


 260:../BLDCMotor/motorctrl.c ****         }
 261:../BLDCMotor/motorctrl.c ****     #else //ä½¿ç”¨ä¼ æ„Ÿå™¨
 262:../BLDCMotor/motorctrl.c ****     {
 263:../BLDCMotor/motorctrl.c ****         dq_t udq = {0.0f,0.8f,_IQ15(0.0f),_IQ15(0.8f)};
 264:../BLDCMotor/motorctrl.c ****         alpbet_t uab,uab_q15;
 265:../BLDCMotor/motorctrl.c ****         #if 1/*é—­çŽ¯æŽ§åˆ¶*/
 266:../BLDCMotor/motorctrl.c ****             udq = _currmentloop(i_abc,elec_theta);
 267:../BLDCMotor/motorctrl.c ****             // udq.d = 0.0f;
 268:../BLDCMotor/motorctrl.c ****             // udq.q = 0.8f;
 269:../BLDCMotor/motorctrl.c ****             // udq.q = sg_motordebug.iq_targe;
 270:../BLDCMotor/motorctrl.c ****         #else
 271:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 272:../BLDCMotor/motorctrl.c ****             // udq.d = sg_motordebug.id_targe;
 273:../BLDCMotor/motorctrl.c ****             // udq.q = sg_motordebug.iq_targe;
 274:../BLDCMotor/motorctrl.c ****         #endif
 275:../BLDCMotor/motorctrl.c ****         uab = _2r_2s(udq, elec_theta);
 276:../BLDCMotor/motorctrl.c ****         uab = _limit_voltagecircle(uab);
 277:../BLDCMotor/motorctrl.c ****         motor_set_pwm(_svpwm(uab.alpha,uab.beta));
 278:../BLDCMotor/motorctrl.c ****     }
 279:../BLDCMotor/motorctrl.c ****     #endif
 280:../BLDCMotor/motorctrl.c **** }
 281:../BLDCMotor/motorctrl.c **** 
 282:../BLDCMotor/motorctrl.c **** alpbet_t _limit_voltagecircle(alpbet_t raw_uab) {  
 283:../BLDCMotor/motorctrl.c ****     float max_voltage = D_MAX_VAL;// è¿™é‡Œåº”è¯¥æ˜¯ä½ çš„æœ€å¤§å…è®¸ç”µåŽ‹å€¼ï¼Œä¾‹å¦‚å¯¹äºŽä¸‰ç›
 284:../BLDCMotor/motorctrl.c ****     float voltage_magnitude = sqrt(raw_uab.alpha * raw_uab.alpha + raw_uab.beta * raw_uab.beta); //
 285:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 286:../BLDCMotor/motorctrl.c ****     if (voltage_magnitude > max_voltage) {  
 287:../BLDCMotor/motorctrl.c ****         // å¦‚æžœçŸ¢é‡é•¿åº¦è¶…è¿‡æœ€å¤§ç”µåŽ‹ï¼Œåˆ™æŒ‰æ¯”ä¾‹ç¼©æ”¾çŸ¢é‡ä»¥ä½¿å…¶è½åœ¨ç”µåŽ‹çŸ¢é
 288:../BLDCMotor/motorctrl.c ****         float scale_factor = max_voltage / voltage_magnitude;  
 289:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha * scale_factor;  
 290:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 291:../BLDCMotor/motorctrl.c ****     } else {  
 292:../BLDCMotor/motorctrl.c ****         // å¦‚æžœçŸ¢é‡é•¿åº¦åœ¨å…è®¸èŒƒå›´å†…ï¼Œåˆ™ä¸è¿›è¡Œä»»ä½•æ”¹å˜  
 293:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha;  
 294:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta;  
 295:../BLDCMotor/motorctrl.c ****     }
 296:../BLDCMotor/motorctrl.c ****     return uab;
 297:../BLDCMotor/motorctrl.c **** }
 298:../BLDCMotor/motorctrl.c **** #include "arm_math.h"
 299:../BLDCMotor/motorctrl.c **** float temp_ia,temp_ib,temp_ic;
 300:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 301:../BLDCMotor/motorctrl.c **** {
 302:../BLDCMotor/motorctrl.c **** #if 1
 303:../BLDCMotor/motorctrl.c ****     alpbet_t i_alphbeta;
 304:../BLDCMotor/motorctrl.c ****     float _tempa,_tempb,_tempc;
 305:../BLDCMotor/motorctrl.c ****     dq_t i_dq;
 306:../BLDCMotor/motorctrl.c ****     _tempa = i_abc.a;
 307:../BLDCMotor/motorctrl.c ****     _tempb = i_abc.b;
 308:../BLDCMotor/motorctrl.c ****     _tempc = i_abc.c;
 309:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
 310:../BLDCMotor/motorctrl.c ****     /*bac  */
 311:../BLDCMotor/motorctrl.c ****     i_abc.a = -_tempb;
 312:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempa;
 313:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempc;
 314:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 315:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 316:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 7


 317:../BLDCMotor/motorctrl.c **** #endif
 318:../BLDCMotor/motorctrl.c ****     _3s_2s(i_abc,&i_alphbeta);   
 319:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 320:../BLDCMotor/motorctrl.c ****     sg_motordebug.id = (i_dq.d);
 321:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 322:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 323:../BLDCMotor/motorctrl.c **** #if 1
 324:../BLDCMotor/motorctrl.c ****     float tar_id = 0.0f,tar_iq = 0.0f;
 325:../BLDCMotor/motorctrl.c ****     tar_id = sg_motordebug.id_targe;
 326:../BLDCMotor/motorctrl.c ****     tar_iq = sg_motordebug.iq_targe;
 327:../BLDCMotor/motorctrl.c ****     udq.d = pid_contrl(sgp_curloop_d_pid,tar_id,i_dq.d);
 328:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_real = i_dq.d;
 329:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_D_out = udq.d;
 330:../BLDCMotor/motorctrl.c ****     udq.q =pid_contrl(sgp_curloop_q_pid,tar_iq,i_dq.q);
 331:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_real = i_dq.q;
 332:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_Q_out = udq.q;
 333:../BLDCMotor/motorctrl.c **** #endif
 334:../BLDCMotor/motorctrl.c ****     return udq;
 335:../BLDCMotor/motorctrl.c **** #endif
 336:../BLDCMotor/motorctrl.c **** }
 337:../BLDCMotor/motorctrl.c **** 
 338:../BLDCMotor/motorctrl.c **** static void motor_enable(void)
 339:../BLDCMotor/motorctrl.c **** {
  28              		.loc 1 339 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32 0000 08B5     		push	{r3, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 3, -8
  36              		.cfi_offset 14, -4
 340:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 341:../BLDCMotor/motorctrl.c ****     gpio_setmotor_power();
 342:../BLDCMotor/motorctrl.c **** #endif
 343:../BLDCMotor/motorctrl.c ****     /*pwm ä½¿èƒ½*/
 344:../BLDCMotor/motorctrl.c ****     tim_pwm_enable();
  37              		.loc 1 344 5 view .LVU1
  38 0002 FFF7FEFF 		bl	tim_pwm_enable
  39              	.LVL0:
 345:../BLDCMotor/motorctrl.c ****     tim_tigger_adc();
  40              		.loc 1 345 5 view .LVU2
  41 0006 FFF7FEFF 		bl	tim_tigger_adc
  42              	.LVL1:
 346:../BLDCMotor/motorctrl.c ****     adc_start();
  43              		.loc 1 346 5 view .LVU3
  44 000a FFF7FEFF 		bl	adc_start
  45              	.LVL2:
 347:../BLDCMotor/motorctrl.c **** }
  46              		.loc 1 347 1 is_stmt 0 view .LVU4
  47 000e 08BD     		pop	{r3, pc}
  48              		.cfi_endproc
  49              	.LFE373:
  51              		.section	.text.motor_disable,"ax",%progbits
  52              		.align	1
  53              		.syntax unified
  54              		.thumb
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 8


  55              		.thumb_func
  57              	motor_disable:
  58              	.LFB375:
 348:../BLDCMotor/motorctrl.c **** static void motor_enable_noirq(void)
 349:../BLDCMotor/motorctrl.c **** {
 350:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 351:../BLDCMotor/motorctrl.c ****     gpio_setmotor_power();
 352:../BLDCMotor/motorctrl.c **** #endif
 353:../BLDCMotor/motorctrl.c ****     /*pwm ä½¿èƒ½*/
 354:../BLDCMotor/motorctrl.c ****     tim_pwm_enable();
 355:../BLDCMotor/motorctrl.c **** }
 356:../BLDCMotor/motorctrl.c **** static void motor_disable(void)
 357:../BLDCMotor/motorctrl.c **** {
  59              		.loc 1 357 1 is_stmt 1 view -0
  60              		.cfi_startproc
  61              		@ args = 0, pretend = 0, frame = 0
  62              		@ frame_needed = 0, uses_anonymous_args = 0
  63 0000 08B5     		push	{r3, lr}
  64              	.LCFI1:
  65              		.cfi_def_cfa_offset 8
  66              		.cfi_offset 3, -8
  67              		.cfi_offset 14, -4
 358:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 359:../BLDCMotor/motorctrl.c ****     gpio_setmotor_powerdown();
 360:../BLDCMotor/motorctrl.c **** #endif    
 361:../BLDCMotor/motorctrl.c ****     tim_pwm_disable();
  68              		.loc 1 361 5 view .LVU6
  69 0002 FFF7FEFF 		bl	tim_pwm_disable
  70              	.LVL3:
 362:../BLDCMotor/motorctrl.c ****     adc_stop();
  71              		.loc 1 362 5 view .LVU7
  72 0006 FFF7FEFF 		bl	adc_stop
  73              	.LVL4:
 363:../BLDCMotor/motorctrl.c **** }
  74              		.loc 1 363 1 is_stmt 0 view .LVU8
  75 000a 08BD     		pop	{r3, pc}
  76              		.cfi_endproc
  77              	.LFE375:
  79              		.section	.text._currmentloop,"ax",%progbits
  80              		.align	1
  81              		.syntax unified
  82              		.thumb
  83              		.thumb_func
  85              	_currmentloop:
  86              	.LVL5:
  87              	.LFB372:
 301:../BLDCMotor/motorctrl.c **** #if 1
  88              		.loc 1 301 1 is_stmt 1 view -0
  89              		.cfi_startproc
  90              		@ args = 28, pretend = 16, frame = 32
  91              		@ frame_needed = 0, uses_anonymous_args = 0
 301:../BLDCMotor/motorctrl.c **** #if 1
  92              		.loc 1 301 1 is_stmt 0 view .LVU10
  93 0000 84B0     		sub	sp, sp, #16
  94              	.LCFI2:
  95              		.cfi_def_cfa_offset 16
  96 0002 70B5     		push	{r4, r5, r6, lr}
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 9


  97              	.LCFI3:
  98              		.cfi_def_cfa_offset 32
  99              		.cfi_offset 4, -32
 100              		.cfi_offset 5, -28
 101              		.cfi_offset 6, -24
 102              		.cfi_offset 14, -20
 103 0004 2DED028B 		vpush.64	{d8}
 104              	.LCFI4:
 105              		.cfi_def_cfa_offset 40
 106              		.cfi_offset 80, -40
 107              		.cfi_offset 81, -36
 108 0008 8CB0     		sub	sp, sp, #48
 109              	.LCFI5:
 110              		.cfi_def_cfa_offset 88
 111 000a 0546     		mov	r5, r0
 112 000c 0DF14C0C 		add	ip, sp, #76
 113 0010 8CE80E00 		stm	ip, {r1, r2, r3}
 114 0014 B0EE408A 		vmov.f32	s16, s0
 303:../BLDCMotor/motorctrl.c ****     float _tempa,_tempb,_tempc;
 115              		.loc 1 303 5 is_stmt 1 view .LVU11
 304:../BLDCMotor/motorctrl.c ****     dq_t i_dq;
 116              		.loc 1 304 5 view .LVU12
 305:../BLDCMotor/motorctrl.c ****     _tempa = i_abc.a;
 117              		.loc 1 305 5 view .LVU13
 306:../BLDCMotor/motorctrl.c ****     _tempb = i_abc.b;
 118              		.loc 1 306 5 view .LVU14
 306:../BLDCMotor/motorctrl.c ****     _tempb = i_abc.b;
 119              		.loc 1 306 12 is_stmt 0 view .LVU15
 120 0018 9DED137A 		vldr.32	s14, [sp, #76]
 121              	.LVL6:
 307:../BLDCMotor/motorctrl.c ****     _tempc = i_abc.c;
 122              		.loc 1 307 5 is_stmt 1 view .LVU16
 308:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
 123              		.loc 1 308 5 view .LVU17
 311:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempa;
 124              		.loc 1 311 5 view .LVU18
 311:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempa;
 125              		.loc 1 311 15 is_stmt 0 view .LVU19
 126 001c DDED146A 		vldr.32	s13, [sp, #80]
 127 0020 F1EE666A 		vneg.f32	s13, s13
 311:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempa;
 128              		.loc 1 311 13 view .LVU20
 129 0024 CDED136A 		vstr.32	s13, [sp, #76]
 312:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempc;
 130              		.loc 1 312 5 is_stmt 1 view .LVU21
 312:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempc;
 131              		.loc 1 312 15 is_stmt 0 view .LVU22
 132 0028 B1EE477A 		vneg.f32	s14, s14
 133              	.LVL7:
 312:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempc;
 134              		.loc 1 312 13 view .LVU23
 135 002c 8DED147A 		vstr.32	s14, [sp, #80]
 136              	.LVL8:
 313:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 137              		.loc 1 313 5 is_stmt 1 view .LVU24
 313:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 138              		.loc 1 313 15 is_stmt 0 view .LVU25
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 10


 139 0030 DDED157A 		vldr.32	s15, [sp, #84]
 140 0034 F1EE677A 		vneg.f32	s15, s15
 313:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 141              		.loc 1 313 13 view .LVU26
 142 0038 CDED157A 		vstr.32	s15, [sp, #84]
 143              	.LVL9:
 314:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 144              		.loc 1 314 5 is_stmt 1 view .LVU27
 314:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 145              		.loc 1 314 22 is_stmt 0 view .LVU28
 146 003c 244C     		ldr	r4, .L7
 147 003e C4ED006A 		vstr.32	s13, [r4]
 315:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 148              		.loc 1 315 5 is_stmt 1 view .LVU29
 315:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 149              		.loc 1 315 22 is_stmt 0 view .LVU30
 150 0042 84ED017A 		vstr.32	s14, [r4, #4]
 316:../BLDCMotor/motorctrl.c **** #endif
 151              		.loc 1 316 5 is_stmt 1 view .LVU31
 316:../BLDCMotor/motorctrl.c **** #endif
 152              		.loc 1 316 22 is_stmt 0 view .LVU32
 153 0046 C4ED027A 		vstr.32	s15, [r4, #8]
 318:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 154              		.loc 1 318 5 is_stmt 1 view .LVU33
 155 004a 08AE     		add	r6, sp, #32
 156 004c 0296     		str	r6, [sp, #8]
 157 004e 17AB     		add	r3, sp, #92
 158 0050 93E80300 		ldm	r3, {r0, r1}
 159              	.LVL10:
 318:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 160              		.loc 1 318 5 is_stmt 0 view .LVU34
 161 0054 8DE80300 		stm	sp, {r0, r1}
 162 0058 9CE80F00 		ldm	ip, {r0, r1, r2, r3}
 163 005c FFF7FEFF 		bl	_3s_2s
 164              	.LVL11:
 319:../BLDCMotor/motorctrl.c ****     sg_motordebug.id = (i_dq.d);
 165              		.loc 1 319 5 is_stmt 1 view .LVU35
 166 0060 04AB     		add	r3, sp, #16
 167 0062 0093     		str	r3, [sp]
 168 0064 B0EE480A 		vmov.f32	s0, s16
 169 0068 96E80F00 		ldm	r6, {r0, r1, r2, r3}
 170 006c FFF7FEFF 		bl	_2s_2r
 171              	.LVL12:
 320:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 172              		.loc 1 320 5 view .LVU36
 320:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 173              		.loc 1 320 29 is_stmt 0 view .LVU37
 174 0070 DDED040A 		vldr.32	s1, [sp, #16]
 320:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 175              		.loc 1 320 22 view .LVU38
 176 0074 C4ED050A 		vstr.32	s1, [r4, #20]
 321:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 177              		.loc 1 321 5 is_stmt 1 view .LVU39
 321:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 178              		.loc 1 321 29 is_stmt 0 view .LVU40
 179 0078 059B     		ldr	r3, [sp, #20]	@ float
 321:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 11


 180              		.loc 1 321 22 view .LVU41
 181 007a A361     		str	r3, [r4, #24]	@ float
 322:../BLDCMotor/motorctrl.c **** #if 1
 182              		.loc 1 322 5 is_stmt 1 view .LVU42
 322:../BLDCMotor/motorctrl.c **** #if 1
 183              		.loc 1 322 10 is_stmt 0 view .LVU43
 184 007c 0023     		movs	r3, #0
 185 007e 2B60     		str	r3, [r5]
 186 0080 6B60     		str	r3, [r5, #4]
 187 0082 AB60     		str	r3, [r5, #8]
 188 0084 EB60     		str	r3, [r5, #12]
 324:../BLDCMotor/motorctrl.c ****     tar_id = sg_motordebug.id_targe;
 189              		.loc 1 324 5 is_stmt 1 view .LVU44
 190              	.LVL13:
 325:../BLDCMotor/motorctrl.c ****     tar_iq = sg_motordebug.iq_targe;
 191              		.loc 1 325 5 view .LVU45
 326:../BLDCMotor/motorctrl.c ****     udq.d = pid_contrl(sgp_curloop_d_pid,tar_id,i_dq.d);
 192              		.loc 1 326 5 view .LVU46
 326:../BLDCMotor/motorctrl.c ****     udq.d = pid_contrl(sgp_curloop_d_pid,tar_id,i_dq.d);
 193              		.loc 1 326 12 is_stmt 0 view .LVU47
 194 0086 94ED118A 		vldr.32	s16, [r4, #68]
 195              	.LVL14:
 327:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_real = i_dq.d;
 196              		.loc 1 327 5 is_stmt 1 view .LVU48
 327:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_real = i_dq.d;
 197              		.loc 1 327 13 is_stmt 0 view .LVU49
 198 008a 94ED100A 		vldr.32	s0, [r4, #64]
 199 008e 114B     		ldr	r3, .L7+4
 200 0090 1868     		ldr	r0, [r3]
 201 0092 FFF7FEFF 		bl	pid_contrl
 202              	.LVL15:
 327:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_real = i_dq.d;
 203              		.loc 1 327 11 view .LVU50
 204 0096 85ED000A 		vstr.32	s0, [r5]
 328:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_D_out = udq.d;
 205              		.loc 1 328 5 is_stmt 1 view .LVU51
 328:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_D_out = udq.d;
 206              		.loc 1 328 33 is_stmt 0 view .LVU52
 207 009a 049B     		ldr	r3, [sp, #16]	@ float
 328:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_D_out = udq.d;
 208              		.loc 1 328 27 view .LVU53
 209 009c A363     		str	r3, [r4, #56]	@ float
 329:../BLDCMotor/motorctrl.c ****     udq.q =pid_contrl(sgp_curloop_q_pid,tar_iq,i_dq.q);
 210              		.loc 1 329 5 is_stmt 1 view .LVU54
 329:../BLDCMotor/motorctrl.c ****     udq.q =pid_contrl(sgp_curloop_q_pid,tar_iq,i_dq.q);
 211              		.loc 1 329 29 is_stmt 0 view .LVU55
 212 009e 84ED170A 		vstr.32	s0, [r4, #92]
 330:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_real = i_dq.q;
 213              		.loc 1 330 5 is_stmt 1 view .LVU56
 330:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_real = i_dq.q;
 214              		.loc 1 330 12 is_stmt 0 view .LVU57
 215 00a2 DDED050A 		vldr.32	s1, [sp, #20]
 216 00a6 B0EE480A 		vmov.f32	s0, s16
 217 00aa 0B4B     		ldr	r3, .L7+8
 218 00ac 1868     		ldr	r0, [r3]
 219 00ae FFF7FEFF 		bl	pid_contrl
 220              	.LVL16:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 12


 330:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_real = i_dq.q;
 221              		.loc 1 330 11 view .LVU58
 222 00b2 85ED010A 		vstr.32	s0, [r5, #4]
 331:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_Q_out = udq.q;
 223              		.loc 1 331 5 is_stmt 1 view .LVU59
 331:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_Q_out = udq.q;
 224              		.loc 1 331 33 is_stmt 0 view .LVU60
 225 00b6 059B     		ldr	r3, [sp, #20]	@ float
 331:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_Q_out = udq.q;
 226              		.loc 1 331 27 view .LVU61
 227 00b8 E364     		str	r3, [r4, #76]	@ float
 332:../BLDCMotor/motorctrl.c **** #endif
 228              		.loc 1 332 5 is_stmt 1 view .LVU62
 332:../BLDCMotor/motorctrl.c **** #endif
 229              		.loc 1 332 29 is_stmt 0 view .LVU63
 230 00ba 84ED140A 		vstr.32	s0, [r4, #80]
 334:../BLDCMotor/motorctrl.c **** #endif
 231              		.loc 1 334 5 is_stmt 1 view .LVU64
 336:../BLDCMotor/motorctrl.c **** 
 232              		.loc 1 336 1 is_stmt 0 view .LVU65
 233 00be 2846     		mov	r0, r5
 234 00c0 0CB0     		add	sp, sp, #48
 235              	.LCFI6:
 236              		.cfi_def_cfa_offset 40
 237              		@ sp needed
 238 00c2 BDEC028B 		vldm	sp!, {d8}
 239              	.LCFI7:
 240              		.cfi_restore 80
 241              		.cfi_restore 81
 242              		.cfi_def_cfa_offset 32
 243              	.LVL17:
 336:../BLDCMotor/motorctrl.c **** 
 244              		.loc 1 336 1 view .LVU66
 245 00c6 BDE87040 		pop	{r4, r5, r6, lr}
 246              	.LCFI8:
 247              		.cfi_restore 14
 248              		.cfi_restore 6
 249              		.cfi_restore 5
 250              		.cfi_restore 4
 251              		.cfi_def_cfa_offset 16
 252              	.LVL18:
 336:../BLDCMotor/motorctrl.c **** 
 253              		.loc 1 336 1 view .LVU67
 254 00ca 04B0     		add	sp, sp, #16
 255              	.LCFI9:
 256              		.cfi_def_cfa_offset 0
 257 00cc 7047     		bx	lr
 258              	.L8:
 259 00ce 00BF     		.align	2
 260              	.L7:
 261 00d0 00000000 		.word	.LANCHOR0
 262 00d4 00000000 		.word	.LANCHOR1
 263 00d8 00000000 		.word	.LANCHOR2
 264              		.cfi_endproc
 265              	.LFE372:
 267              		.section	.text.motor_set_pwm,"ax",%progbits
 268              		.align	1
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 13


 269              		.syntax unified
 270              		.thumb
 271              		.thumb_func
 273              	motor_set_pwm:
 274              	.LFB376:
 364:../BLDCMotor/motorctrl.c **** static void motor_set_pwm(duty_t temp)
 365:../BLDCMotor/motorctrl.c **** {
 275              		.loc 1 365 1 is_stmt 1 view -0
 276              		.cfi_startproc
 277              		@ args = 0, pretend = 0, frame = 16
 278              		@ frame_needed = 0, uses_anonymous_args = 0
 279 0000 00B5     		push	{lr}
 280              	.LCFI10:
 281              		.cfi_def_cfa_offset 4
 282              		.cfi_offset 14, -4
 283 0002 85B0     		sub	sp, sp, #20
 284              	.LCFI11:
 285              		.cfi_def_cfa_offset 24
 286 0004 8DED010A 		vstr.32	s0, [sp, #4]
 287 0008 CDED020A 		vstr.32	s1, [sp, #8]
 288 000c 8DED031A 		vstr.32	s2, [sp, #12]
 366:../BLDCMotor/motorctrl.c ****     tim_set_pwm(temp._a,temp._b,temp._c);
 289              		.loc 1 366 5 view .LVU69
 290 0010 FFF7FEFF 		bl	tim_set_pwm
 291              	.LVL19:
 367:../BLDCMotor/motorctrl.c **** }
 292              		.loc 1 367 1 is_stmt 0 view .LVU70
 293 0014 05B0     		add	sp, sp, #20
 294              	.LCFI12:
 295              		.cfi_def_cfa_offset 4
 296              		@ sp needed
 297 0016 5DF804FB 		ldr	pc, [sp], #4
 298              		.cfi_endproc
 299              	.LFE376:
 301              		.section	.text._get_angleoffset,"ax",%progbits
 302              		.align	1
 303              		.syntax unified
 304              		.thumb
 305              		.thumb_func
 307              	_get_angleoffset:
 308              	.LFB377:
 368:../BLDCMotor/motorctrl.c **** 
 369:../BLDCMotor/motorctrl.c **** float temp_offsettheta = 0.0f;
 370:../BLDCMotor/motorctrl.c **** 
 371:../BLDCMotor/motorctrl.c **** 
 372:../BLDCMotor/motorctrl.c **** 
 373:../BLDCMotor/motorctrl.c **** 
 374:../BLDCMotor/motorctrl.c **** 
 375:../BLDCMotor/motorctrl.c **** static short _get_angleoffset(void)
 376:../BLDCMotor/motorctrl.c **** {
 309              		.loc 1 376 1 is_stmt 1 view -0
 310              		.cfi_startproc
 311              		@ args = 0, pretend = 0, frame = 48
 312              		@ frame_needed = 0, uses_anonymous_args = 0
 313 0000 30B5     		push	{r4, r5, lr}
 314              	.LCFI13:
 315              		.cfi_def_cfa_offset 12
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 14


 316              		.cfi_offset 4, -12
 317              		.cfi_offset 5, -8
 318              		.cfi_offset 14, -4
 319 0002 2DED028B 		vpush.64	{d8}
 320              	.LCFI14:
 321              		.cfi_def_cfa_offset 20
 322              		.cfi_offset 80, -20
 323              		.cfi_offset 81, -16
 324 0006 8FB0     		sub	sp, sp, #60
 325              	.LCFI15:
 326              		.cfi_def_cfa_offset 80
 377:../BLDCMotor/motorctrl.c ****     static short state_ = 1;
 327              		.loc 1 377 5 view .LVU72
 378:../BLDCMotor/motorctrl.c **** 
 379:../BLDCMotor/motorctrl.c ****     /*-----------è®¾ç½®alpha/betaåæ ‡ç³»------------------*/
 380:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 328              		.loc 1 380 5 view .LVU73
 381:../BLDCMotor/motorctrl.c ****     dq_t udq = {1.0f,0.0f};
 329              		.loc 1 381 5 view .LVU74
 330              		.loc 1 381 10 is_stmt 0 view .LVU75
 331 0008 0023     		movs	r3, #0
 332 000a 0693     		str	r3, [sp, #24]
 333 000c 0793     		str	r3, [sp, #28]
 334 000e 0893     		str	r3, [sp, #32]
 335 0010 0993     		str	r3, [sp, #36]
 336 0012 4FF07E53 		mov	r3, #1065353216
 337 0016 0693     		str	r3, [sp, #24]	@ float
 382:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 338              		.loc 1 382 5 is_stmt 1 view .LVU76
 383:../BLDCMotor/motorctrl.c ****     float theta;
 339              		.loc 1 383 5 view .LVU77
 384:../BLDCMotor/motorctrl.c ****     static short cnt_ = 0;
 340              		.loc 1 384 5 view .LVU78
 385:../BLDCMotor/motorctrl.c ****     int32_t Q15_theta = 0;
 341              		.loc 1 385 5 view .LVU79
 342              	.LVL20:
 386:../BLDCMotor/motorctrl.c ****     int32_t Q_thetaSum = 0;
 343              		.loc 1 386 5 view .LVU80
 387:../BLDCMotor/motorctrl.c ****     switch (state_)
 344              		.loc 1 387 5 view .LVU81
 345 0018 2E4B     		ldr	r3, .L21
 346 001a B3F90030 		ldrsh	r3, [r3]
 347 001e 022B     		cmp	r3, #2
 348 0020 2AD0     		beq	.L12
 349 0022 032B     		cmp	r3, #3
 350 0024 51D0     		beq	.L17
 351 0026 012B     		cmp	r3, #1
 352 0028 09D0     		beq	.L20
 353              	.LVL21:
 354              	.L14:
 388:../BLDCMotor/motorctrl.c ****     {
 389:../BLDCMotor/motorctrl.c ****     case 1://è¯»å–åç§»å€¼
 390:../BLDCMotor/motorctrl.c ****         uab = _2r_2s(udq,0.0f);
 391:../BLDCMotor/motorctrl.c ****         dut01 = _svpwm(1.0f,00.0f);
 392:../BLDCMotor/motorctrl.c ****         motor_set_pwm(dut01);
 393:../BLDCMotor/motorctrl.c ****         // USER_DEBUG_NORMAL("XXX");
 394:../BLDCMotor/motorctrl.c ****         state_ = 2;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 15


 395:../BLDCMotor/motorctrl.c ****         break;
 396:../BLDCMotor/motorctrl.c **** 
 397:../BLDCMotor/motorctrl.c ****     case 2:
 398:../BLDCMotor/motorctrl.c ****         if (cnt_++ > 15000)
 399:../BLDCMotor/motorctrl.c ****         {
 400:../BLDCMotor/motorctrl.c ****             cnt_ = 0;
 401:../BLDCMotor/motorctrl.c ****             state_ = 3;
 402:../BLDCMotor/motorctrl.c ****         }
 403:../BLDCMotor/motorctrl.c ****         break;
 404:../BLDCMotor/motorctrl.c **** 
 405:../BLDCMotor/motorctrl.c ****     case 3:
 406:../BLDCMotor/motorctrl.c ****         for (uint8_t i = 0; i < 10; i++)
 407:../BLDCMotor/motorctrl.c ****         {
 408:../BLDCMotor/motorctrl.c ****             Q_thetaSum += ((int32_t*)(sensor_user_read(SENSOR_01,EN_SENSORDATA_COV)))[0];
 409:../BLDCMotor/motorctrl.c ****         }
 410:../BLDCMotor/motorctrl.c ****         Q15_theta = Q_thetaSum/10;
 411:../BLDCMotor/motorctrl.c ****         theta = _IQ20toF(Q15_theta);
 412:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = theta;
 413:../BLDCMotor/motorctrl.c ****         state_ = 4;
 414:../BLDCMotor/motorctrl.c ****         break;
 415:../BLDCMotor/motorctrl.c **** 
 416:../BLDCMotor/motorctrl.c ****     case 4:
 417:../BLDCMotor/motorctrl.c ****         break;             
 418:../BLDCMotor/motorctrl.c ****     default:
 419:../BLDCMotor/motorctrl.c ****         break;
 420:../BLDCMotor/motorctrl.c ****     }
 421:../BLDCMotor/motorctrl.c ****     if (state_ == 4)
 355              		.loc 1 421 5 view .LVU82
 356              		.loc 1 421 16 is_stmt 0 view .LVU83
 357 002a 2A4B     		ldr	r3, .L21
 358 002c B3F90030 		ldrsh	r3, [r3]
 359              		.loc 1 421 8 view .LVU84
 360 0030 042B     		cmp	r3, #4
 361 0032 4DD0     		beq	.L18
 422:../BLDCMotor/motorctrl.c ****     {
 423:../BLDCMotor/motorctrl.c ****         return 0;
 424:../BLDCMotor/motorctrl.c ****     }
 425:../BLDCMotor/motorctrl.c ****     return 1;
 362              		.loc 1 425 12 view .LVU85
 363 0034 0120     		movs	r0, #1
 364              	.L16:
 426:../BLDCMotor/motorctrl.c **** }
 365              		.loc 1 426 1 view .LVU86
 366 0036 0FB0     		add	sp, sp, #60
 367              	.LCFI16:
 368              		.cfi_remember_state
 369              		.cfi_def_cfa_offset 20
 370              		@ sp needed
 371 0038 BDEC028B 		vldm	sp!, {d8}
 372              	.LCFI17:
 373              		.cfi_restore 80
 374              		.cfi_restore 81
 375              		.cfi_def_cfa_offset 12
 376 003c 30BD     		pop	{r4, r5, pc}
 377              	.LVL22:
 378              	.L20:
 379              	.LCFI18:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 16


 380              		.cfi_restore_state
 390:../BLDCMotor/motorctrl.c ****         dut01 = _svpwm(1.0f,00.0f);
 381              		.loc 1 390 9 is_stmt 1 view .LVU87
 390:../BLDCMotor/motorctrl.c ****         dut01 = _svpwm(1.0f,00.0f);
 382              		.loc 1 390 15 is_stmt 0 view .LVU88
 383 003e 9FED268A 		vldr.32	s16, .L21+4
 384 0042 0023     		movs	r3, #0
 385 0044 0093     		str	r3, [sp]
 386 0046 06AB     		add	r3, sp, #24
 387 0048 0ECB     		ldm	r3, {r1, r2, r3}
 388 004a B0EE480A 		vmov.f32	s0, s16
 389 004e 0AA8     		add	r0, sp, #40
 390 0050 FFF7FEFF 		bl	_2r_2s
 391              	.LVL23:
 391:../BLDCMotor/motorctrl.c ****         motor_set_pwm(dut01);
 392              		.loc 1 391 9 is_stmt 1 view .LVU89
 391:../BLDCMotor/motorctrl.c ****         motor_set_pwm(dut01);
 393              		.loc 1 391 17 is_stmt 0 view .LVU90
 394 0054 F0EE480A 		vmov.f32	s1, s16
 395 0058 B7EE000A 		vmov.f32	s0, #1.0e+0
 396 005c FFF7FEFF 		bl	_svpwm
 397              	.LVL24:
 398 0060 8DED030A 		vstr.32	s0, [sp, #12]
 399 0064 CDED040A 		vstr.32	s1, [sp, #16]
 400 0068 8DED051A 		vstr.32	s2, [sp, #20]
 392:../BLDCMotor/motorctrl.c ****         // USER_DEBUG_NORMAL("XXX");
 401              		.loc 1 392 9 is_stmt 1 view .LVU91
 402 006c FFF7FEFF 		bl	motor_set_pwm
 403              	.LVL25:
 394:../BLDCMotor/motorctrl.c ****         break;
 404              		.loc 1 394 9 view .LVU92
 394:../BLDCMotor/motorctrl.c ****         break;
 405              		.loc 1 394 16 is_stmt 0 view .LVU93
 406 0070 184B     		ldr	r3, .L21
 407 0072 0222     		movs	r2, #2
 408 0074 1A80     		strh	r2, [r3]	@ movhi
 395:../BLDCMotor/motorctrl.c **** 
 409              		.loc 1 395 9 is_stmt 1 view .LVU94
 410 0076 D8E7     		b	.L14
 411              	.L12:
 398:../BLDCMotor/motorctrl.c ****         {
 412              		.loc 1 398 9 view .LVU95
 398:../BLDCMotor/motorctrl.c ****         {
 413              		.loc 1 398 17 is_stmt 0 view .LVU96
 414 0078 184A     		ldr	r2, .L21+8
 415 007a B2F90030 		ldrsh	r3, [r2]
 416 007e 591C     		adds	r1, r3, #1
 417 0080 1180     		strh	r1, [r2]	@ movhi
 398:../BLDCMotor/motorctrl.c ****         {
 418              		.loc 1 398 12 view .LVU97
 419 0082 43F69822 		movw	r2, #15000
 420 0086 9342     		cmp	r3, r2
 421 0088 CFDD     		ble	.L14
 400:../BLDCMotor/motorctrl.c ****             state_ = 3;
 422              		.loc 1 400 13 is_stmt 1 view .LVU98
 400:../BLDCMotor/motorctrl.c ****             state_ = 3;
 423              		.loc 1 400 18 is_stmt 0 view .LVU99
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 17


 424 008a 144B     		ldr	r3, .L21+8
 425 008c 0022     		movs	r2, #0
 426 008e 1A80     		strh	r2, [r3]	@ movhi
 401:../BLDCMotor/motorctrl.c ****         }
 427              		.loc 1 401 13 is_stmt 1 view .LVU100
 401:../BLDCMotor/motorctrl.c ****         }
 428              		.loc 1 401 20 is_stmt 0 view .LVU101
 429 0090 104B     		ldr	r3, .L21
 430 0092 0322     		movs	r2, #3
 431 0094 1A80     		strh	r2, [r3]	@ movhi
 432 0096 C8E7     		b	.L14
 433              	.LVL26:
 434              	.L15:
 435              	.LBB2:
 408:../BLDCMotor/motorctrl.c ****         }
 436              		.loc 1 408 13 is_stmt 1 discriminator 3 view .LVU102
 408:../BLDCMotor/motorctrl.c ****         }
 437              		.loc 1 408 39 is_stmt 0 discriminator 3 view .LVU103
 438 0098 0121     		movs	r1, #1
 439 009a 0020     		movs	r0, #0
 440 009c FFF7FEFF 		bl	sensor_user_read
 441              	.LVL27:
 408:../BLDCMotor/motorctrl.c ****         }
 442              		.loc 1 408 86 discriminator 3 view .LVU104
 443 00a0 0368     		ldr	r3, [r0]
 408:../BLDCMotor/motorctrl.c ****         }
 444              		.loc 1 408 24 discriminator 3 view .LVU105
 445 00a2 1D44     		add	r5, r5, r3
 446              	.LVL28:
 406:../BLDCMotor/motorctrl.c ****         {
 447              		.loc 1 406 37 is_stmt 1 discriminator 3 view .LVU106
 406:../BLDCMotor/motorctrl.c ****         {
 448              		.loc 1 406 38 is_stmt 0 discriminator 3 view .LVU107
 449 00a4 0134     		adds	r4, r4, #1
 450              	.LVL29:
 406:../BLDCMotor/motorctrl.c ****         {
 451              		.loc 1 406 38 discriminator 3 view .LVU108
 452 00a6 E4B2     		uxtb	r4, r4
 453              	.LVL30:
 454              	.L13:
 406:../BLDCMotor/motorctrl.c ****         {
 455              		.loc 1 406 29 is_stmt 1 discriminator 1 view .LVU109
 406:../BLDCMotor/motorctrl.c ****         {
 456              		.loc 1 406 9 is_stmt 0 discriminator 1 view .LVU110
 457 00a8 092C     		cmp	r4, #9
 458 00aa F5D9     		bls	.L15
 459              	.LBE2:
 410:../BLDCMotor/motorctrl.c ****         theta = _IQ20toF(Q15_theta);
 460              		.loc 1 410 9 is_stmt 1 view .LVU111
 410:../BLDCMotor/motorctrl.c ****         theta = _IQ20toF(Q15_theta);
 461              		.loc 1 410 19 is_stmt 0 view .LVU112
 462 00ac 0C48     		ldr	r0, .L21+12
 463 00ae 80FB0530 		smull	r3, r0, r0, r5
 464 00b2 ED17     		asrs	r5, r5, #31
 465              	.LVL31:
 411:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = theta;
 466              		.loc 1 411 9 is_stmt 1 view .LVU113
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 18


 411:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = theta;
 467              		.loc 1 411 17 is_stmt 0 view .LVU114
 468 00b4 C5EBA000 		rsb	r0, r5, r0, asr #2
 469              	.LVL32:
 411:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = theta;
 470              		.loc 1 411 17 view .LVU115
 471 00b8 FFF7FEFF 		bl	_IQ20toF
 472              	.LVL33:
 412:../BLDCMotor/motorctrl.c ****         state_ = 4;
 473              		.loc 1 412 9 is_stmt 1 view .LVU116
 412:../BLDCMotor/motorctrl.c ****         state_ = 4;
 474              		.loc 1 412 27 is_stmt 0 view .LVU117
 475 00bc 094B     		ldr	r3, .L21+16
 476 00be 83ED000A 		vstr.32	s0, [r3]
 413:../BLDCMotor/motorctrl.c ****         break;
 477              		.loc 1 413 9 is_stmt 1 view .LVU118
 413:../BLDCMotor/motorctrl.c ****         break;
 478              		.loc 1 413 16 is_stmt 0 view .LVU119
 479 00c2 044B     		ldr	r3, .L21
 480 00c4 0422     		movs	r2, #4
 481 00c6 1A80     		strh	r2, [r3]	@ movhi
 414:../BLDCMotor/motorctrl.c **** 
 482              		.loc 1 414 9 is_stmt 1 view .LVU120
 483 00c8 AFE7     		b	.L14
 484              	.LVL34:
 485              	.L17:
 387:../BLDCMotor/motorctrl.c ****     {
 486              		.loc 1 387 5 is_stmt 0 view .LVU121
 487 00ca 0024     		movs	r4, #0
 488 00cc 2546     		mov	r5, r4
 489 00ce EBE7     		b	.L13
 490              	.LVL35:
 491              	.L18:
 423:../BLDCMotor/motorctrl.c ****     }
 492              		.loc 1 423 16 view .LVU122
 493 00d0 0020     		movs	r0, #0
 494 00d2 B0E7     		b	.L16
 495              	.L22:
 496              		.align	2
 497              	.L21:
 498 00d4 00000000 		.word	.LANCHOR3
 499 00d8 00000000 		.word	0
 500 00dc 00000000 		.word	.LANCHOR4
 501 00e0 67666666 		.word	1717986919
 502 00e4 00000000 		.word	.LANCHOR5
 503              		.cfi_endproc
 504              	.LFE377:
 506              		.global	__aeabi_f2d
 507              		.global	__aeabi_d2f
 508              		.section	.text._limit_voltagecircle,"ax",%progbits
 509              		.align	1
 510              		.global	_limit_voltagecircle
 511              		.syntax unified
 512              		.thumb
 513              		.thumb_func
 515              	_limit_voltagecircle:
 516              	.LVL36:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 19


 517              	.LFB338:
 282:../BLDCMotor/motorctrl.c ****     float max_voltage = D_MAX_VAL;// è¿™é‡Œåº”è¯¥æ˜¯ä½ çš„æœ€å¤§å…è®¸ç”µåŽ‹å€¼ï¼Œä¾‹å¦‚å¯¹äºŽä¸‰ç›
 518              		.loc 1 282 49 is_stmt 1 view -0
 519              		.cfi_startproc
 520              		@ args = 20, pretend = 16, frame = 0
 521              		@ frame_needed = 0, uses_anonymous_args = 0
 282:../BLDCMotor/motorctrl.c ****     float max_voltage = D_MAX_VAL;// è¿™é‡Œåº”è¯¥æ˜¯ä½ çš„æœ€å¤§å…è®¸ç”µåŽ‹å€¼ï¼Œä¾‹å¦‚å¯¹äºŽä¸‰ç›
 522              		.loc 1 282 49 is_stmt 0 view .LVU124
 523 0000 84B0     		sub	sp, sp, #16
 524              	.LCFI19:
 525              		.cfi_def_cfa_offset 16
 526 0002 10B5     		push	{r4, lr}
 527              	.LCFI20:
 528              		.cfi_def_cfa_offset 24
 529              		.cfi_offset 4, -24
 530              		.cfi_offset 14, -20
 531 0004 2DED028B 		vpush.64	{d8}
 532              	.LCFI21:
 533              		.cfi_def_cfa_offset 32
 534              		.cfi_offset 80, -32
 535              		.cfi_offset 81, -28
 536 0008 0446     		mov	r4, r0
 537 000a 05A8     		add	r0, sp, #20
 538 000c 80E80E00 		stm	r0, {r1, r2, r3}
 283:../BLDCMotor/motorctrl.c ****     float voltage_magnitude = sqrt(raw_uab.alpha * raw_uab.alpha + raw_uab.beta * raw_uab.beta); //
 539              		.loc 1 283 5 is_stmt 1 view .LVU125
 540              	.LVL37:
 284:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 541              		.loc 1 284 5 view .LVU126
 284:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 542              		.loc 1 284 43 is_stmt 0 view .LVU127
 543 0010 DDED058A 		vldr.32	s17, [sp, #20]
 284:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 544              		.loc 1 284 50 view .LVU128
 545 0014 28EEA87A 		vmul.f32	s14, s17, s17
 284:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 546              		.loc 1 284 75 view .LVU129
 547 0018 9DED068A 		vldr.32	s16, [sp, #24]
 284:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 548              		.loc 1 284 81 view .LVU130
 549 001c 68EE087A 		vmul.f32	s15, s16, s16
 284:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 550              		.loc 1 284 31 view .LVU131
 551 0020 77EE277A 		vadd.f32	s15, s14, s15
 552 0024 17EE900A 		vmov	r0, s15
 553              	.LVL38:
 284:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 554              		.loc 1 284 31 view .LVU132
 555 0028 FFF7FEFF 		bl	__aeabi_f2d
 556              	.LVL39:
 557 002c 41EC100B 		vmov	d0, r0, r1
 558 0030 FFF7FEFF 		bl	sqrt
 559              	.LVL40:
 560 0034 51EC100B 		vmov	r0, r1, d0
 284:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 561              		.loc 1 284 11 view .LVU133
 562 0038 FFF7FEFF 		bl	__aeabi_d2f
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 20


 563              	.LVL41:
 564 003c 07EE900A 		vmov	s15, r0
 565              	.LVL42:
 285:../BLDCMotor/motorctrl.c ****     if (voltage_magnitude > max_voltage) {  
 566              		.loc 1 285 5 is_stmt 1 view .LVU134
 286:../BLDCMotor/motorctrl.c ****         // å¦‚æžœçŸ¢é‡é•¿åº¦è¶…è¿‡æœ€å¤§ç”µåŽ‹ï¼Œåˆ™æŒ‰æ¯”ä¾‹ç¼©æ”¾çŸ¢é‡ä»¥ä½¿å…¶è½åœ¨ç”µåŽ‹çŸ¢é
 567              		.loc 1 286 5 view .LVU135
 286:../BLDCMotor/motorctrl.c ****         // å¦‚æžœçŸ¢é‡é•¿åº¦è¶…è¿‡æœ€å¤§ç”µåŽ‹ï¼Œåˆ™æŒ‰æ¯”ä¾‹ç¼©æ”¾çŸ¢é‡ä»¥ä½¿å…¶è½åœ¨ç”µåŽ‹çŸ¢é
 568              		.loc 1 286 8 is_stmt 0 view .LVU136
 569 0040 B2EE087A 		vmov.f32	s14, #1.2e+1
 570 0044 F4EEC77A 		vcmpe.f32	s15, s14
 571 0048 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 572 004c 12DD     		ble	.L28
 573              	.LBB3:
 288:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha * scale_factor;  
 574              		.loc 1 288 9 is_stmt 1 view .LVU137
 288:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha * scale_factor;  
 575              		.loc 1 288 15 is_stmt 0 view .LVU138
 576 004e F0EE476A 		vmov.f32	s13, s14
 577 0052 86EEA77A 		vdiv.f32	s14, s13, s15
 578              	.LVL43:
 289:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 579              		.loc 1 289 9 is_stmt 1 view .LVU139
 289:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 580              		.loc 1 289 35 is_stmt 0 view .LVU140
 581 0056 68EE878A 		vmul.f32	s17, s17, s14
 289:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 582              		.loc 1 289 19 view .LVU141
 583 005a C4ED008A 		vstr.32	s17, [r4]
 290:../BLDCMotor/motorctrl.c ****     } else {  
 584              		.loc 1 290 9 is_stmt 1 view .LVU142
 290:../BLDCMotor/motorctrl.c ****     } else {  
 585              		.loc 1 290 33 is_stmt 0 view .LVU143
 586 005e 28EE078A 		vmul.f32	s16, s16, s14
 290:../BLDCMotor/motorctrl.c ****     } else {  
 587              		.loc 1 290 18 view .LVU144
 588 0062 84ED018A 		vstr.32	s16, [r4, #4]
 589              	.LVL44:
 590              	.L23:
 290:../BLDCMotor/motorctrl.c ****     } else {  
 591              		.loc 1 290 18 view .LVU145
 592              	.LBE3:
 297:../BLDCMotor/motorctrl.c **** #include "arm_math.h"
 593              		.loc 1 297 1 view .LVU146
 594 0066 2046     		mov	r0, r4
 595              	.LVL45:
 297:../BLDCMotor/motorctrl.c **** #include "arm_math.h"
 596              		.loc 1 297 1 view .LVU147
 597 0068 BDEC028B 		vldm	sp!, {d8}
 598              	.LCFI22:
 599              		.cfi_remember_state
 600              		.cfi_restore 80
 601              		.cfi_restore 81
 602              		.cfi_def_cfa_offset 24
 603 006c BDE81040 		pop	{r4, lr}
 604              	.LCFI23:
 605              		.cfi_restore 14
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 21


 606              		.cfi_restore 4
 607              		.cfi_def_cfa_offset 16
 608              	.LVL46:
 297:../BLDCMotor/motorctrl.c **** #include "arm_math.h"
 609              		.loc 1 297 1 view .LVU148
 610 0070 04B0     		add	sp, sp, #16
 611              	.LCFI24:
 612              		.cfi_def_cfa_offset 0
 613 0072 7047     		bx	lr
 614              	.LVL47:
 615              	.L28:
 616              	.LCFI25:
 617              		.cfi_restore_state
 293:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta;  
 618              		.loc 1 293 9 is_stmt 1 view .LVU149
 293:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta;  
 619              		.loc 1 293 19 is_stmt 0 view .LVU150
 620 0074 C4ED008A 		vstr.32	s17, [r4]
 294:../BLDCMotor/motorctrl.c ****     }
 621              		.loc 1 294 9 is_stmt 1 view .LVU151
 294:../BLDCMotor/motorctrl.c ****     }
 622              		.loc 1 294 18 is_stmt 0 view .LVU152
 623 0078 84ED018A 		vstr.32	s16, [r4, #4]
 296:../BLDCMotor/motorctrl.c **** }
 624              		.loc 1 296 5 is_stmt 1 view .LVU153
 296:../BLDCMotor/motorctrl.c **** }
 625              		.loc 1 296 12 is_stmt 0 view .LVU154
 626 007c F3E7     		b	.L23
 627              		.cfi_endproc
 628              	.LFE338:
 630              		.section	.rodata._50uscycle_process.str1.4,"aMS",%progbits,1
 631              		.align	2
 632              	.LC0:
 633 0000 656E7465 		.ascii	"enter IDLE\015\012\000"
 633      72204944 
 633      4C450D0A 
 633      00
 634              		.section	.text._50uscycle_process,"ax",%progbits
 635              		.align	1
 636              		.global	_50uscycle_process
 637              		.syntax unified
 638              		.thumb
 639              		.thumb_func
 641              	_50uscycle_process:
 642              	.LVL48:
 643              	.LFB336:
 117:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 644              		.loc 1 117 1 is_stmt 1 view -0
 645              		.cfi_startproc
 646              		@ args = 0, pretend = 0, frame = 88
 647              		@ frame_needed = 0, uses_anonymous_args = 0
 117:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 648              		.loc 1 117 1 is_stmt 0 view .LVU156
 649 0000 30B5     		push	{r4, r5, lr}
 650              	.LCFI26:
 651              		.cfi_def_cfa_offset 12
 652              		.cfi_offset 4, -12
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 22


 653              		.cfi_offset 5, -8
 654              		.cfi_offset 14, -4
 655 0002 2DED028B 		vpush.64	{d8}
 656              	.LCFI27:
 657              		.cfi_def_cfa_offset 20
 658              		.cfi_offset 80, -20
 659              		.cfi_offset 81, -16
 660 0006 9BB0     		sub	sp, sp, #108
 661              	.LCFI28:
 662              		.cfi_def_cfa_offset 128
 118:../BLDCMotor/motorctrl.c ****     int32_t Q15_Mechtheta;    
 663              		.loc 1 118 5 is_stmt 1 view .LVU157
 119:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 664              		.loc 1 119 5 view .LVU158
 120:../BLDCMotor/motorctrl.c ****     abc_t i_abc;
 665              		.loc 1 120 5 view .LVU159
 121:../BLDCMotor/motorctrl.c **** 
 666              		.loc 1 121 5 view .LVU160
 125:../BLDCMotor/motorctrl.c ****     int32_t a1,b1,c1;
 667              		.loc 1 125 5 view .LVU161
 126:../BLDCMotor/motorctrl.c ****     a1 = abc_vale[0] - A_ADCCHANNL_OFFSET;
 668              		.loc 1 126 5 view .LVU162
 127:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 669              		.loc 1 127 5 view .LVU163
 127:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 670              		.loc 1 127 18 is_stmt 0 view .LVU164
 671 0008 0368     		ldr	r3, [r0]
 127:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 672              		.loc 1 127 22 view .LVU165
 673 000a A3F64903 		subw	r3, r3, #2121
 674              	.LVL49:
 128:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 675              		.loc 1 128 5 is_stmt 1 view .LVU166
 128:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 676              		.loc 1 128 18 is_stmt 0 view .LVU167
 677 000e 4268     		ldr	r2, [r0, #4]
 128:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 678              		.loc 1 128 22 view .LVU168
 679 0010 A2F65A02 		subw	r2, r2, #2138
 680 0014 08EE102A 		vmov	s16, r2	@ int
 681              	.LVL50:
 129:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ia = a1;
 682              		.loc 1 129 5 is_stmt 1 view .LVU169
 130:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 683              		.loc 1 130 5 view .LVU170
 130:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 684              		.loc 1 130 24 is_stmt 0 view .LVU171
 685 0018 5A4A     		ldr	r2, .L42
 686              	.LVL51:
 130:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 687              		.loc 1 130 24 view .LVU172
 688 001a D361     		str	r3, [r2, #28]
 689              	.LVL52:
 131:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 690              		.loc 1 131 5 is_stmt 1 view .LVU173
 131:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 691              		.loc 1 131 10 is_stmt 0 view .LVU174
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 23


 692 001c 07EE903A 		vmov	s15, r3	@ int
 693 0020 B8EEE70A 		vcvt.f32.s32	s0, s15
 694              	.LVL53:
 131:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 695              		.loc 1 131 8 view .LVU175
 696 0024 DFED587A 		vldr.32	s15, .L42+4
 697 0028 20EE270A 		vmul.f32	s0, s0, s15
 698              	.LVL54:
 132:../BLDCMotor/motorctrl.c ****     // Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 699              		.loc 1 132 5 is_stmt 1 view .LVU176
 132:../BLDCMotor/motorctrl.c ****     // Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 700              		.loc 1 132 10 is_stmt 0 view .LVU177
 701 002c B8EEC88A 		vcvt.f32.s32	s16, s16
 702              	.LVL55:
 132:../BLDCMotor/motorctrl.c ****     // Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 703              		.loc 1 132 8 view .LVU178
 704 0030 DFED567A 		vldr.32	s15, .L42+8
 705 0034 28EE278A 		vmul.f32	s16, s16, s15
 706              	.LVL56:
 134:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 707              		.loc 1 134 5 is_stmt 1 view .LVU179
 134:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 708              		.loc 1 134 10 is_stmt 0 view .LVU180
 709 0038 F1EE408A 		vneg.f32	s17, s0
 134:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 710              		.loc 1 134 8 view .LVU181
 711 003c 78EEC88A 		vsub.f32	s17, s17, s16
 712              	.LVL57:
 135:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 713              		.loc 1 135 5 is_stmt 1 view .LVU182
 135:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 714              		.loc 1 135 15 is_stmt 0 view .LVU183
 715 0040 534C     		ldr	r4, .L42+12
 716 0042 2046     		mov	r0, r4
 717              	.LVL58:
 135:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 718              		.loc 1 135 15 view .LVU184
 719 0044 FFF7FEFF 		bl	lowfilter_cale
 720              	.LVL59:
 135:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 721              		.loc 1 135 13 view .LVU185
 722 0048 8DED110A 		vstr.32	s0, [sp, #68]
 136:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 723              		.loc 1 136 5 is_stmt 1 view .LVU186
 136:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 724              		.loc 1 136 15 is_stmt 0 view .LVU187
 725 004c B0EE480A 		vmov.f32	s0, s16
 726 0050 04F10800 		add	r0, r4, #8
 727 0054 FFF7FEFF 		bl	lowfilter_cale
 728              	.LVL60:
 136:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 729              		.loc 1 136 13 view .LVU188
 730 0058 8DED120A 		vstr.32	s0, [sp, #72]
 137:../BLDCMotor/motorctrl.c **** 
 731              		.loc 1 137 5 is_stmt 1 view .LVU189
 137:../BLDCMotor/motorctrl.c **** 
 732              		.loc 1 137 15 is_stmt 0 view .LVU190
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 24


 733 005c B0EE680A 		vmov.f32	s0, s17
 734 0060 04F11000 		add	r0, r4, #16
 735 0064 FFF7FEFF 		bl	lowfilter_cale
 736              	.LVL61:
 137:../BLDCMotor/motorctrl.c **** 
 737              		.loc 1 137 13 view .LVU191
 738 0068 8DED130A 		vstr.32	s0, [sp, #76]
 141:../BLDCMotor/motorctrl.c ****         OFFSET=0,
 739              		.loc 1 141 5 is_stmt 1 view .LVU192
 147:../BLDCMotor/motorctrl.c ****     switch (state0_)
 740              		.loc 1 147 5 view .LVU193
 148:../BLDCMotor/motorctrl.c ****     {
 741              		.loc 1 148 5 view .LVU194
 742 006c 494B     		ldr	r3, .L42+16
 743 006e B3F90030 		ldrsh	r3, [r3]
 744 0072 022B     		cmp	r3, #2
 745 0074 24D0     		beq	.L31
 746 0076 032B     		cmp	r3, #3
 747 0078 0FD0     		beq	.L32
 748 007a 1BB1     		cbz	r3, .L41
 749              	.LVL62:
 750              	.L30:
 209:../BLDCMotor/motorctrl.c **** 
 751              		.loc 1 209 1 is_stmt 0 view .LVU195
 752 007c 1BB0     		add	sp, sp, #108
 753              	.LCFI29:
 754              		.cfi_remember_state
 755              		.cfi_def_cfa_offset 20
 756              		@ sp needed
 757 007e BDEC028B 		vldm	sp!, {d8}
 758              	.LCFI30:
 759              		.cfi_restore 80
 760              		.cfi_restore 81
 761              		.cfi_def_cfa_offset 12
 762 0082 30BD     		pop	{r4, r5, pc}
 763              	.LVL63:
 764              	.L41:
 765              	.LCFI31:
 766              		.cfi_restore_state
 151:../BLDCMotor/motorctrl.c ****             {
 767              		.loc 1 151 13 is_stmt 1 view .LVU196
 151:../BLDCMotor/motorctrl.c ****             {
 768              		.loc 1 151 17 is_stmt 0 view .LVU197
 769 0084 FFF7FEFF 		bl	_get_angleoffset
 770              	.LVL64:
 151:../BLDCMotor/motorctrl.c ****             {
 771              		.loc 1 151 16 view .LVU198
 772 0088 0028     		cmp	r0, #0
 773 008a F7D1     		bne	.L30
 155:../BLDCMotor/motorctrl.c ****             state0_ = IDLE;
 774              		.loc 1 155 13 is_stmt 1 view .LVU199
 775 008c 4249     		ldr	r1, .L42+20
 776 008e FFF7FEFF 		bl	SEGGER_RTT_printf
 777              	.LVL65:
 156:../BLDCMotor/motorctrl.c ****             break;
 778              		.loc 1 156 13 view .LVU200
 156:../BLDCMotor/motorctrl.c ****             break;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 25


 779              		.loc 1 156 21 is_stmt 0 view .LVU201
 780 0092 404B     		ldr	r3, .L42+16
 781 0094 0322     		movs	r2, #3
 782 0096 1A80     		strh	r2, [r3]	@ movhi
 157:../BLDCMotor/motorctrl.c ****         case IDLE:
 783              		.loc 1 157 13 is_stmt 1 view .LVU202
 784 0098 F0E7     		b	.L30
 785              	.L32:
 159:../BLDCMotor/motorctrl.c ****             {
 786              		.loc 1 159 13 view .LVU203
 159:../BLDCMotor/motorctrl.c ****             {
 787              		.loc 1 159 30 is_stmt 0 view .LVU204
 788 009a 3A4B     		ldr	r3, .L42
 789 009c D3ED107A 		vldr.32	s15, [r3, #64]
 159:../BLDCMotor/motorctrl.c ****             {
 790              		.loc 1 159 16 view .LVU205
 791 00a0 F5EE407A 		vcmp.f32	s15, #0
 792 00a4 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 793 00a8 06D1     		bne	.L34
 159:../BLDCMotor/motorctrl.c ****             {
 794              		.loc 1 159 64 discriminator 1 view .LVU206
 795 00aa D3ED117A 		vldr.32	s15, [r3, #68]
 159:../BLDCMotor/motorctrl.c ****             {
 796              		.loc 1 159 48 discriminator 1 view .LVU207
 797 00ae F5EE407A 		vcmp.f32	s15, #0
 798 00b2 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 799 00b6 E1D0     		beq	.L30
 800              	.L34:
 161:../BLDCMotor/motorctrl.c ****             }
 801              		.loc 1 161 17 is_stmt 1 view .LVU208
 161:../BLDCMotor/motorctrl.c ****             }
 802              		.loc 1 161 25 is_stmt 0 view .LVU209
 803 00b8 364B     		ldr	r3, .L42+16
 804 00ba 0222     		movs	r2, #2
 805 00bc 1A80     		strh	r2, [r3]	@ movhi
 806 00be DDE7     		b	.L30
 807              	.L31:
 808              	.LBB4:
 167:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(Q15_Mechtheta);
 809              		.loc 1 167 13 is_stmt 1 view .LVU210
 167:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(Q15_Mechtheta);
 810              		.loc 1 167 40 is_stmt 0 view .LVU211
 811 00c0 0121     		movs	r1, #1
 812 00c2 0020     		movs	r0, #0
 813 00c4 FFF7FEFF 		bl	sensor_user_read
 814              	.LVL66:
 168:../BLDCMotor/motorctrl.c ****             mech_theta -= sg_MecThetaOffset;
 815              		.loc 1 168 13 is_stmt 1 view .LVU212
 168:../BLDCMotor/motorctrl.c ****             mech_theta -= sg_MecThetaOffset;
 816              		.loc 1 168 26 is_stmt 0 view .LVU213
 817 00c8 0068     		ldr	r0, [r0]
 818              	.LVL67:
 168:../BLDCMotor/motorctrl.c ****             mech_theta -= sg_MecThetaOffset;
 819              		.loc 1 168 26 view .LVU214
 820 00ca FFF7FEFF 		bl	_IQ20toF
 821              	.LVL68:
 169:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 26


 822              		.loc 1 169 13 is_stmt 1 view .LVU215
 823 00ce 334B     		ldr	r3, .L42+24
 824 00d0 D3ED007A 		vldr.32	s15, [r3]
 169:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 825              		.loc 1 169 24 is_stmt 0 view .LVU216
 826 00d4 30EE670A 		vsub.f32	s0, s0, s15
 827              	.LVL69:
 170:../BLDCMotor/motorctrl.c **** 
 828              		.loc 1 170 13 is_stmt 1 view .LVU217
 170:../BLDCMotor/motorctrl.c **** 
 829              		.loc 1 170 24 is_stmt 0 view .LVU218
 830 00d8 30EE000A 		vadd.f32	s0, s0, s0
 831              	.LVL70:
 172:../BLDCMotor/motorctrl.c ****             {
 832              		.loc 1 172 13 is_stmt 1 view .LVU219
 172:../BLDCMotor/motorctrl.c ****             {
 833              		.loc 1 172 30 is_stmt 0 view .LVU220
 834 00dc 294B     		ldr	r3, .L42
 835 00de D3ED117A 		vldr.32	s15, [r3, #68]
 172:../BLDCMotor/motorctrl.c ****             {
 836              		.loc 1 172 16 view .LVU221
 837 00e2 F5EEC07A 		vcmpe.f32	s15, #0
 838 00e6 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 839 00ea 46DD     		ble	.L39
 175:../BLDCMotor/motorctrl.c ****             }else{
 840              		.loc 1 175 17 is_stmt 1 view .LVU222
 175:../BLDCMotor/motorctrl.c ****             }else{
 841              		.loc 1 175 28 is_stmt 0 view .LVU223
 842 00ec DFED2C7A 		vldr.32	s15, .L42+28
 843 00f0 30EE270A 		vadd.f32	s0, s0, s15
 844              	.LVL71:
 845              	.L37:
 180:../BLDCMotor/motorctrl.c **** 
 846              		.loc 1 180 13 is_stmt 1 discriminator 2 view .LVU224
 180:../BLDCMotor/motorctrl.c **** 
 847              		.loc 1 180 26 is_stmt 0 discriminator 2 view .LVU225
 848 00f4 FFF7FEFF 		bl	_normalize_angle
 849              	.LVL72:
 180:../BLDCMotor/motorctrl.c **** 
 850              		.loc 1 180 26 discriminator 2 view .LVU226
 851 00f8 B0EE408A 		vmov.f32	s16, s0
 852              	.LVL73:
 187:../BLDCMotor/motorctrl.c **** 
 853              		.loc 1 187 13 is_stmt 1 discriminator 2 view .LVU227
 187:../BLDCMotor/motorctrl.c **** 
 854              		.loc 1 187 37 is_stmt 0 discriminator 2 view .LVU228
 855 00fc 214B     		ldr	r3, .L42
 856 00fe 83ED1A0A 		vstr.32	s0, [r3, #104]
 189:../BLDCMotor/motorctrl.c ****             #if 1/*é—­çŽ¯æŽ§åˆ¶*/
 857              		.loc 1 189 13 is_stmt 1 discriminator 2 view .LVU229
 189:../BLDCMotor/motorctrl.c ****             #if 1/*é—­çŽ¯æŽ§åˆ¶*/
 858              		.loc 1 189 18 is_stmt 0 discriminator 2 view .LVU230
 859 0102 0023     		movs	r3, #0
 860 0104 0993     		str	r3, [sp, #36]	@ float
 861 0106 0A93     		str	r3, [sp, #40]	@ float
 862 0108 0023     		movs	r3, #0
 863 010a 0B93     		str	r3, [sp, #44]
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 27


 864 010c 46F26663 		movw	r3, #26214
 865 0110 0C93     		str	r3, [sp, #48]
 191:../BLDCMotor/motorctrl.c ****                 // udq.d = 0.0f;
 866              		.loc 1 191 17 is_stmt 1 discriminator 2 view .LVU231
 191:../BLDCMotor/motorctrl.c ****                 // udq.d = 0.0f;
 867              		.loc 1 191 23 is_stmt 0 discriminator 2 view .LVU232
 868 0112 09AD     		add	r5, sp, #36
 869 0114 14AB     		add	r3, sp, #80
 870 0116 93E80700 		ldm	r3, {r0, r1, r2}
 871 011a 8DE80700 		stm	sp, {r0, r1, r2}
 872 011e 11AB     		add	r3, sp, #68
 873 0120 0ECB     		ldm	r3, {r1, r2, r3}
 874 0122 9FED200A 		vldr.32	s0, .L42+32
 875              	.LVL74:
 191:../BLDCMotor/motorctrl.c ****                 // udq.d = 0.0f;
 876              		.loc 1 191 23 discriminator 2 view .LVU233
 877 0126 38EE400A 		vsub.f32	s0, s16, s0
 878 012a 2846     		mov	r0, r5
 879 012c FFF7FEFF 		bl	_currmentloop
 880              	.LVL75:
 200:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, elec_theta);  
 881              		.loc 1 200 13 is_stmt 1 discriminator 2 view .LVU234
 201:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 882              		.loc 1 201 13 discriminator 2 view .LVU235
 201:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 883              		.loc 1 201 19 is_stmt 0 discriminator 2 view .LVU236
 884 0130 0DAC     		add	r4, sp, #52
 885 0132 0C9B     		ldr	r3, [sp, #48]
 886 0134 0093     		str	r3, [sp]
 887 0136 95E80E00 		ldm	r5, {r1, r2, r3}
 888 013a B0EE480A 		vmov.f32	s0, s16
 889 013e 2046     		mov	r0, r4
 890 0140 FFF7FEFF 		bl	_2r_2s
 891              	.LVL76:
 202:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta));   
 892              		.loc 1 202 13 is_stmt 1 discriminator 2 view .LVU237
 202:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta));   
 893              		.loc 1 202 19 is_stmt 0 discriminator 2 view .LVU238
 894 0144 04AD     		add	r5, sp, #16
 895 0146 109B     		ldr	r3, [sp, #64]
 896 0148 0093     		str	r3, [sp]
 897 014a 94E80E00 		ldm	r4, {r1, r2, r3}
 898 014e 2846     		mov	r0, r5
 899 0150 FFF7FEFF 		bl	_limit_voltagecircle
 900              	.LVL77:
 901 0154 95E80F00 		ldm	r5, {r0, r1, r2, r3}
 902 0158 84E80F00 		stm	r4, {r0, r1, r2, r3}
 203:../BLDCMotor/motorctrl.c ****         }
 903              		.loc 1 203 13 is_stmt 1 discriminator 2 view .LVU239
 904 015c DDED0E0A 		vldr.32	s1, [sp, #56]
 905 0160 9DED0D0A 		vldr.32	s0, [sp, #52]
 906 0164 FFF7FEFF 		bl	_svpwm
 907              	.LVL78:
 908 0168 8DED170A 		vstr.32	s0, [sp, #92]
 909 016c CDED180A 		vstr.32	s1, [sp, #96]
 910 0170 8DED191A 		vstr.32	s2, [sp, #100]
 911 0174 FFF7FEFF 		bl	motor_set_pwm
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 28


 912              	.LVL79:
 913              	.LBE4:
 205:../BLDCMotor/motorctrl.c ****         default:
 914              		.loc 1 205 13 discriminator 2 view .LVU240
 209:../BLDCMotor/motorctrl.c **** 
 915              		.loc 1 209 1 is_stmt 0 discriminator 2 view .LVU241
 916 0178 80E7     		b	.L30
 917              	.LVL80:
 918              	.L39:
 919              	.LBB5:
 177:../BLDCMotor/motorctrl.c ****             }
 920              		.loc 1 177 17 is_stmt 1 view .LVU242
 177:../BLDCMotor/motorctrl.c ****             }
 921              		.loc 1 177 28 is_stmt 0 view .LVU243
 922 017a DFED0B7A 		vldr.32	s15, .L42+36
 923 017e 30EE270A 		vadd.f32	s0, s0, s15
 924              	.LVL81:
 177:../BLDCMotor/motorctrl.c ****             }
 925              		.loc 1 177 28 view .LVU244
 926 0182 B7E7     		b	.L37
 927              	.L43:
 928              		.align	2
 929              	.L42:
 930 0184 00000000 		.word	.LANCHOR0
 931 0188 52B89E3E 		.word	1050589266
 932 018c 3333B33E 		.word	1051931443
 933 0190 00000000 		.word	.LANCHOR6
 934 0194 00000000 		.word	.LANCHOR7
 935 0198 00000000 		.word	.LC0
 936 019c 00000000 		.word	.LANCHOR5
 937 01a0 CDCC4C3E 		.word	1045220557
 938 01a4 D80FC93F 		.word	1070141400
 939 01a8 CDCCCC3D 		.word	1036831949
 940              	.LBE5:
 941              		.cfi_endproc
 942              	.LFE336:
 944              		.section	.text.foc_paraminit,"ax",%progbits
 945              		.align	1
 946              		.global	foc_paraminit
 947              		.syntax unified
 948              		.thumb
 949              		.thumb_func
 951              	foc_paraminit:
 952              	.LFB378:
 427:../BLDCMotor/motorctrl.c **** 
 428:../BLDCMotor/motorctrl.c **** void foc_paraminit(void)
 429:../BLDCMotor/motorctrl.c **** {
 953              		.loc 1 429 1 is_stmt 1 view -0
 954              		.cfi_startproc
 955              		@ args = 0, pretend = 0, frame = 0
 956              		@ frame_needed = 0, uses_anonymous_args = 0
 957 0000 38B5     		push	{r3, r4, r5, lr}
 958              	.LCFI32:
 959              		.cfi_def_cfa_offset 16
 960              		.cfi_offset 3, -16
 961              		.cfi_offset 4, -12
 962              		.cfi_offset 5, -8
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 29


 963              		.cfi_offset 14, -4
 964 0002 2DED028B 		vpush.64	{d8}
 965              	.LCFI33:
 966              		.cfi_def_cfa_offset 24
 967              		.cfi_offset 80, -24
 968              		.cfi_offset 81, -20
 430:../BLDCMotor/motorctrl.c ****     sgp_curloop_d_pid = &(sg_curloop_param.d_pid);
 969              		.loc 1 430 5 view .LVU246
 970              		.loc 1 430 23 is_stmt 0 view .LVU247
 971 0006 1C48     		ldr	r0, .L46
 972 0008 1C4B     		ldr	r3, .L46+4
 973 000a 1860     		str	r0, [r3]
 431:../BLDCMotor/motorctrl.c ****     sgp_curloop_q_pid = &sg_curloop_param.q_pid;
 974              		.loc 1 431 5 is_stmt 1 view .LVU248
 975              		.loc 1 431 23 is_stmt 0 view .LVU249
 976 000c 1C4D     		ldr	r5, .L46+8
 977 000e 00F11C03 		add	r3, r0, #28
 978 0012 2B60     		str	r3, [r5]
 432:../BLDCMotor/motorctrl.c ****     pid_init(sgp_curloop_d_pid,sg_motordebug.pid_d_kp,sg_motordebug.pid_d_ki,1.0f,D_MAX_VAL,D_MIN_V
 979              		.loc 1 432 5 is_stmt 1 view .LVU250
 980 0014 1B4C     		ldr	r4, .L46+12
 981 0016 BAEE082A 		vmov.f32	s4, #-1.2e+1
 982 001a F2EE081A 		vmov.f32	s3, #1.2e+1
 983 001e B7EE001A 		vmov.f32	s2, #1.0e+0
 984 0022 D4ED190A 		vldr.32	s1, [r4, #100]
 985 0026 94ED180A 		vldr.32	s0, [r4, #96]
 986 002a FFF7FEFF 		bl	pid_init
 987              	.LVL82:
 433:../BLDCMotor/motorctrl.c ****     pid_init(sgp_curloop_q_pid,sg_motordebug.pid_d_kp,sg_motordebug.pid_d_ki,1.0f,D_MAX_VAL,D_MIN_V
 988              		.loc 1 433 5 view .LVU251
 989 002e BAEE082A 		vmov.f32	s4, #-1.2e+1
 990 0032 F2EE081A 		vmov.f32	s3, #1.2e+1
 991 0036 B7EE001A 		vmov.f32	s2, #1.0e+0
 992 003a D4ED190A 		vldr.32	s1, [r4, #100]
 993 003e 94ED180A 		vldr.32	s0, [r4, #96]
 994 0042 2868     		ldr	r0, [r5]
 995 0044 FFF7FEFF 		bl	pid_init
 996              	.LVL83:
 434:../BLDCMotor/motorctrl.c ****     lowfilter_init(&sg_elefilter[0],80);
 997              		.loc 1 434 5 view .LVU252
 998 0048 9FED0F8A 		vldr.32	s16, .L46+16
 999 004c 0F4C     		ldr	r4, .L46+20
 1000 004e B0EE480A 		vmov.f32	s0, s16
 1001 0052 2046     		mov	r0, r4
 1002 0054 FFF7FEFF 		bl	lowfilter_init
 1003              	.LVL84:
 435:../BLDCMotor/motorctrl.c ****     lowfilter_init(&sg_elefilter[1],80);
 1004              		.loc 1 435 5 view .LVU253
 1005 0058 B0EE480A 		vmov.f32	s0, s16
 1006 005c 04F10800 		add	r0, r4, #8
 1007 0060 FFF7FEFF 		bl	lowfilter_init
 1008              	.LVL85:
 436:../BLDCMotor/motorctrl.c ****     lowfilter_init(&sg_elefilter[2],80);
 1009              		.loc 1 436 5 view .LVU254
 1010 0064 B0EE480A 		vmov.f32	s0, s16
 1011 0068 04F11000 		add	r0, r4, #16
 1012 006c FFF7FEFF 		bl	lowfilter_init
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 30


 1013              	.LVL86:
 437:../BLDCMotor/motorctrl.c **** }
 1014              		.loc 1 437 1 is_stmt 0 view .LVU255
 1015 0070 BDEC028B 		vldm	sp!, {d8}
 1016              	.LCFI34:
 1017              		.cfi_restore 80
 1018              		.cfi_restore 81
 1019              		.cfi_def_cfa_offset 16
 1020 0074 38BD     		pop	{r3, r4, r5, pc}
 1021              	.L47:
 1022 0076 00BF     		.align	2
 1023              	.L46:
 1024 0078 00000000 		.word	.LANCHOR8
 1025 007c 00000000 		.word	.LANCHOR1
 1026 0080 00000000 		.word	.LANCHOR2
 1027 0084 00000000 		.word	.LANCHOR0
 1028 0088 0000A042 		.word	1117782016
 1029 008c 00000000 		.word	.LANCHOR6
 1030              		.cfi_endproc
 1031              	.LFE378:
 1033              		.section	.text.motortctrl_process,"ax",%progbits
 1034              		.align	1
 1035              		.global	motortctrl_process
 1036              		.syntax unified
 1037              		.thumb
 1038              		.thumb_func
 1040              	motortctrl_process:
 1041              	.LFB335:
  64:../BLDCMotor/motorctrl.c ****     char rec_buf[64];
 1042              		.loc 1 64 1 is_stmt 1 view -0
 1043              		.cfi_startproc
 1044              		@ args = 0, pretend = 0, frame = 0
 1045              		@ frame_needed = 0, uses_anonymous_args = 0
 1046 0000 08B5     		push	{r3, lr}
 1047              	.LCFI35:
 1048              		.cfi_def_cfa_offset 8
 1049              		.cfi_offset 3, -8
 1050              		.cfi_offset 14, -4
  65:../BLDCMotor/motorctrl.c ****     char cnt = 0;
 1051              		.loc 1 65 5 view .LVU257
  66:../BLDCMotor/motorctrl.c ****     // if (readline_fromPC(rec_buf,sizeof(rec_buf)))
 1052              		.loc 1 66 5 view .LVU258
 1053              	.LVL87:
  71:../BLDCMotor/motorctrl.c ****     switch (g_Motor1.state)
 1054              		.loc 1 71 5 view .LVU259
 1055 0002 FFF7FEFF 		bl	motorprotocol_process
 1056              	.LVL88:
  72:../BLDCMotor/motorctrl.c ****     {
 1057              		.loc 1 72 5 view .LVU260
  72:../BLDCMotor/motorctrl.c ****     {
 1058              		.loc 1 72 21 is_stmt 0 view .LVU261
 1059 0006 134B     		ldr	r3, .L56
 1060 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  72:../BLDCMotor/motorctrl.c ****     {
 1061              		.loc 1 72 5 view .LVU262
 1062 000a 052B     		cmp	r3, #5
 1063 000c 07D8     		bhi	.L48
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 31


 1064 000e DFE803F0 		tbb	[pc, r3]
 1065              	.L51:
 1066 0012 03       		.byte	(.L54-.L51)/2
 1067 0013 07       		.byte	(.L53-.L51)/2
 1068 0014 19       		.byte	(.L52-.L51)/2
 1069 0015 06       		.byte	(.L48-.L51)/2
 1070 0016 06       		.byte	(.L48-.L51)/2
 1071 0017 13       		.byte	(.L50-.L51)/2
 1072              		.p2align 1
 1073              	.L54:
  76:../BLDCMotor/motorctrl.c ****         break;
 1074              		.loc 1 76 9 is_stmt 1 view .LVU263
  76:../BLDCMotor/motorctrl.c ****         break;
 1075              		.loc 1 76 24 is_stmt 0 view .LVU264
 1076 0018 0E4B     		ldr	r3, .L56
 1077 001a 0122     		movs	r2, #1
 1078 001c 1A70     		strb	r2, [r3]
  77:../BLDCMotor/motorctrl.c ****     case MOTOR_INIT:
 1079              		.loc 1 77 9 is_stmt 1 view .LVU265
 1080              	.L48:
 112:../BLDCMotor/motorctrl.c **** /*------------å‘¨æœŸæ€§è¢«è°ƒç”¨----------------*/
 1081              		.loc 1 112 1 is_stmt 0 view .LVU266
 1082 001e 08BD     		pop	{r3, pc}
 1083              	.L53:
  80:../BLDCMotor/motorctrl.c ****         {
 1084              		.loc 1 80 9 is_stmt 1 view .LVU267
  80:../BLDCMotor/motorctrl.c ****         {
 1085              		.loc 1 80 26 is_stmt 0 view .LVU268
 1086 0020 0D4B     		ldr	r3, .L56+4
 1087 0022 9B6F     		ldr	r3, [r3, #120]
  80:../BLDCMotor/motorctrl.c ****         {
 1088              		.loc 1 80 12 view .LVU269
 1089 0024 042B     		cmp	r3, #4
 1090 0026 FAD1     		bne	.L48
  84:../BLDCMotor/motorctrl.c ****         motor_enable();
 1091              		.loc 1 84 9 is_stmt 1 view .LVU270
 1092 0028 FFF7FEFF 		bl	foc_paraminit
 1093              	.LVL89:
  85:../BLDCMotor/motorctrl.c ****         g_Motor1.state = MOTOR_RUNING;
 1094              		.loc 1 85 9 view .LVU271
 1095 002c FFF7FEFF 		bl	motor_enable
 1096              	.LVL90:
  86:../BLDCMotor/motorctrl.c ****         break;
 1097              		.loc 1 86 9 view .LVU272
  86:../BLDCMotor/motorctrl.c ****         break;
 1098              		.loc 1 86 24 is_stmt 0 view .LVU273
 1099 0030 084B     		ldr	r3, .L56
 1100 0032 0422     		movs	r2, #4
 1101 0034 1A70     		strb	r2, [r3]
  87:../BLDCMotor/motorctrl.c **** 
 1102              		.loc 1 87 9 is_stmt 1 view .LVU274
 1103 0036 F2E7     		b	.L48
 1104              	.L50:
  99:../BLDCMotor/motorctrl.c ****         g_Motor1.state = MOTOR_ZERO;
 1105              		.loc 1 99 9 view .LVU275
 1106 0038 FFF7FEFF 		bl	motor_disable
 1107              	.LVL91:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 32


 100:../BLDCMotor/motorctrl.c ****         break;
 1108              		.loc 1 100 9 view .LVU276
 100:../BLDCMotor/motorctrl.c ****         break;
 1109              		.loc 1 100 24 is_stmt 0 view .LVU277
 1110 003c 054B     		ldr	r3, .L56
 1111 003e 0022     		movs	r2, #0
 1112 0040 1A70     		strb	r2, [r3]
 101:../BLDCMotor/motorctrl.c ****     case MOTOR_IDLE:
 1113              		.loc 1 101 9 is_stmt 1 view .LVU278
 1114 0042 ECE7     		b	.L48
 1115              	.L52:
 103:../BLDCMotor/motorctrl.c ****         {
 1116              		.loc 1 103 9 view .LVU279
 103:../BLDCMotor/motorctrl.c ****         {
 1117              		.loc 1 103 26 is_stmt 0 view .LVU280
 1118 0044 044B     		ldr	r3, .L56+4
 1119 0046 9B6F     		ldr	r3, [r3, #120]
 103:../BLDCMotor/motorctrl.c ****         {
 1120              		.loc 1 103 12 view .LVU281
 1121 0048 032B     		cmp	r3, #3
 1122 004a E8D1     		bne	.L48
 105:../BLDCMotor/motorctrl.c ****         }
 1123              		.loc 1 105 13 is_stmt 1 view .LVU282
 105:../BLDCMotor/motorctrl.c ****         }
 1124              		.loc 1 105 28 is_stmt 0 view .LVU283
 1125 004c 014B     		ldr	r3, .L56
 1126 004e 0122     		movs	r2, #1
 1127 0050 1A70     		strb	r2, [r3]
 112:../BLDCMotor/motorctrl.c **** /*------------å‘¨æœŸæ€§è¢«è°ƒç”¨----------------*/
 1128              		.loc 1 112 1 view .LVU284
 1129 0052 E4E7     		b	.L48
 1130              	.L57:
 1131              		.align	2
 1132              	.L56:
 1133 0054 00000000 		.word	.LANCHOR9
 1134 0058 00000000 		.word	.LANCHOR0
 1135              		.cfi_endproc
 1136              	.LFE335:
 1138              		.global	temp_offsettheta
 1139              		.global	temp_ic
 1140              		.global	temp_ib
 1141              		.global	temp_ia
 1142              		.global	test_eletheta
 1143              		.global	per_eleangle
 1144              		.global	test_angletime
 1145              		.global	test_ic
 1146              		.global	test_ib
 1147              		.global	test_ia
 1148              		.global	raw_angle
 1149              		.global	next_angle_test
 1150              		.global	pre_angle_test
 1151              		.global	test_d_pid
 1152              		.global	g_Motor1
 1153              		.global	sg_motordebug
 1154              		.section	.bss.cnt_.0,"aw",%nobits
 1155              		.align	1
 1156              		.set	.LANCHOR4,. + 0
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 33


 1159              	cnt_.0:
 1160 0000 0000     		.space	2
 1161              		.section	.bss.g_Motor1,"aw",%nobits
 1162              		.align	2
 1163              		.set	.LANCHOR9,. + 0
 1166              	g_Motor1:
 1167 0000 00000000 		.space	4
 1168              		.section	.bss.next_angle_test,"aw",%nobits
 1169              		.align	2
 1172              	next_angle_test:
 1173 0000 00000000 		.space	4
 1174              		.section	.bss.per_eleangle,"aw",%nobits
 1175              		.align	2
 1178              	per_eleangle:
 1179 0000 00000000 		.space	4
 1180              		.section	.bss.pre_angle_test,"aw",%nobits
 1181              		.align	2
 1184              	pre_angle_test:
 1185 0000 00000000 		.space	4
 1186              		.section	.bss.raw_angle,"aw",%nobits
 1187              		.align	2
 1190              	raw_angle:
 1191 0000 00000000 		.space	4
 1192              		.section	.bss.sg_MecThetaOffset,"aw",%nobits
 1193              		.align	2
 1194              		.set	.LANCHOR5,. + 0
 1197              	sg_MecThetaOffset:
 1198 0000 00000000 		.space	4
 1199              		.section	.bss.sg_curloop_param,"aw",%nobits
 1200              		.align	2
 1201              		.set	.LANCHOR8,. + 0
 1204              	sg_curloop_param:
 1205 0000 00000000 		.space	56
 1205      00000000 
 1205      00000000 
 1205      00000000 
 1205      00000000 
 1206              		.section	.bss.sg_elefilter,"aw",%nobits
 1207              		.align	2
 1208              		.set	.LANCHOR6,. + 0
 1211              	sg_elefilter:
 1212 0000 00000000 		.space	24
 1212      00000000 
 1212      00000000 
 1212      00000000 
 1212      00000000 
 1213              		.section	.bss.sg_motordebug,"aw",%nobits
 1214              		.align	2
 1215              		.set	.LANCHOR0,. + 0
 1218              	sg_motordebug:
 1219 0000 00000000 		.space	124
 1219      00000000 
 1219      00000000 
 1219      00000000 
 1219      00000000 
 1220              		.section	.bss.sgp_curloop_d_pid,"aw",%nobits
 1221              		.align	2
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 34


 1222              		.set	.LANCHOR1,. + 0
 1225              	sgp_curloop_d_pid:
 1226 0000 00000000 		.space	4
 1227              		.section	.bss.sgp_curloop_q_pid,"aw",%nobits
 1228              		.align	2
 1229              		.set	.LANCHOR2,. + 0
 1232              	sgp_curloop_q_pid:
 1233 0000 00000000 		.space	4
 1234              		.section	.bss.state0_.2,"aw",%nobits
 1235              		.align	1
 1236              		.set	.LANCHOR7,. + 0
 1239              	state0_.2:
 1240 0000 0000     		.space	2
 1241              		.section	.bss.temp_ia,"aw",%nobits
 1242              		.align	2
 1245              	temp_ia:
 1246 0000 00000000 		.space	4
 1247              		.section	.bss.temp_ib,"aw",%nobits
 1248              		.align	2
 1251              	temp_ib:
 1252 0000 00000000 		.space	4
 1253              		.section	.bss.temp_ic,"aw",%nobits
 1254              		.align	2
 1257              	temp_ic:
 1258 0000 00000000 		.space	4
 1259              		.section	.bss.temp_offsettheta,"aw",%nobits
 1260              		.align	2
 1263              	temp_offsettheta:
 1264 0000 00000000 		.space	4
 1265              		.section	.bss.test_angletime,"aw",%nobits
 1266              		.align	2
 1269              	test_angletime:
 1270 0000 00000000 		.space	4
 1271              		.section	.bss.test_d_pid,"aw",%nobits
 1272              		.align	2
 1275              	test_d_pid:
 1276 0000 00000000 		.space	28
 1276      00000000 
 1276      00000000 
 1276      00000000 
 1276      00000000 
 1277              		.section	.bss.test_eletheta,"aw",%nobits
 1278              		.align	2
 1281              	test_eletheta:
 1282 0000 00000000 		.space	4
 1283              		.section	.bss.test_ia,"aw",%nobits
 1284              		.align	2
 1287              	test_ia:
 1288 0000 00000000 		.space	4
 1289              		.section	.bss.test_ib,"aw",%nobits
 1290              		.align	2
 1293              	test_ib:
 1294 0000 00000000 		.space	4
 1295              		.section	.bss.test_ic,"aw",%nobits
 1296              		.align	2
 1299              	test_ic:
 1300 0000 00000000 		.space	4
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 35


 1301              		.section	.data.state_.1,"aw"
 1302              		.align	1
 1303              		.set	.LANCHOR3,. + 0
 1306              	state_.1:
 1307 0000 0100     		.short	1
 1308              		.text
 1309              	.Letext0:
 1310              		.file 2 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\machine\\_defa
 1311              		.file 3 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\sys\\_stdint.h
 1312              		.file 4 "../Common/method/pid.h"
 1313              		.file 5 "../Common/method/filter.h"
 1314              		.file 6 "../Common/IQMath/ti/IQmathLib.h"
 1315              		.file 7 "../BLDCMotor/motorctrl_common.h"
 1316              		.file 8 "./Board/board.h"
 1317              		.file 9 "../Sensor/sensor.h"
 1318              		.file 10 "Inc/tim.h"
 1319              		.file 11 "Inc/adc.h"
 1320              		.file 12 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\math.h"
 1321              		.file 13 "../Common/debuglog/SEGGER_RTT_V792h/RTT/SEGGER_RTT.h"
 1322              		.file 14 "../BLDCMotor/./motorctrl.h"
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 36


DEFINED SYMBOLS
                            *ABS*:00000000 motorctrl.c
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:20     .text.motor_enable:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:25     .text.motor_enable:00000000 motor_enable
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:52     .text.motor_disable:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:57     .text.motor_disable:00000000 motor_disable
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:80     .text._currmentloop:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:85     .text._currmentloop:00000000 _currmentloop
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:261    .text._currmentloop:000000d0 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:268    .text.motor_set_pwm:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:273    .text.motor_set_pwm:00000000 motor_set_pwm
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:302    .text._get_angleoffset:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:307    .text._get_angleoffset:00000000 _get_angleoffset
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:498    .text._get_angleoffset:000000d4 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:509    .text._limit_voltagecircle:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:515    .text._limit_voltagecircle:00000000 _limit_voltagecircle
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:631    .rodata._50uscycle_process.str1.4:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:635    .text._50uscycle_process:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:641    .text._50uscycle_process:00000000 _50uscycle_process
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:930    .text._50uscycle_process:00000184 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:945    .text.foc_paraminit:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:951    .text.foc_paraminit:00000000 foc_paraminit
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1024   .text.foc_paraminit:00000078 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1034   .text.motortctrl_process:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1040   .text.motortctrl_process:00000000 motortctrl_process
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1066   .text.motortctrl_process:00000012 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1072   .text.motortctrl_process:00000018 $t
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1133   .text.motortctrl_process:00000054 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1263   .bss.temp_offsettheta:00000000 temp_offsettheta
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1257   .bss.temp_ic:00000000 temp_ic
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1251   .bss.temp_ib:00000000 temp_ib
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1245   .bss.temp_ia:00000000 temp_ia
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1281   .bss.test_eletheta:00000000 test_eletheta
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1178   .bss.per_eleangle:00000000 per_eleangle
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1269   .bss.test_angletime:00000000 test_angletime
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1299   .bss.test_ic:00000000 test_ic
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1293   .bss.test_ib:00000000 test_ib
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1287   .bss.test_ia:00000000 test_ia
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1190   .bss.raw_angle:00000000 raw_angle
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1172   .bss.next_angle_test:00000000 next_angle_test
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1184   .bss.pre_angle_test:00000000 pre_angle_test
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1275   .bss.test_d_pid:00000000 test_d_pid
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1166   .bss.g_Motor1:00000000 g_Motor1
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1218   .bss.sg_motordebug:00000000 sg_motordebug
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1155   .bss.cnt_.0:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1159   .bss.cnt_.0:00000000 cnt_.0
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1162   .bss.g_Motor1:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1169   .bss.next_angle_test:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1175   .bss.per_eleangle:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1181   .bss.pre_angle_test:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1187   .bss.raw_angle:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1193   .bss.sg_MecThetaOffset:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1197   .bss.sg_MecThetaOffset:00000000 sg_MecThetaOffset
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1200   .bss.sg_curloop_param:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1204   .bss.sg_curloop_param:00000000 sg_curloop_param
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1207   .bss.sg_elefilter:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1211   .bss.sg_elefilter:00000000 sg_elefilter
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s 			page 37


C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1214   .bss.sg_motordebug:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1221   .bss.sgp_curloop_d_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1225   .bss.sgp_curloop_d_pid:00000000 sgp_curloop_d_pid
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1228   .bss.sgp_curloop_q_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1232   .bss.sgp_curloop_q_pid:00000000 sgp_curloop_q_pid
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1235   .bss.state0_.2:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1239   .bss.state0_.2:00000000 state0_.2
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1242   .bss.temp_ia:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1248   .bss.temp_ib:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1254   .bss.temp_ic:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1260   .bss.temp_offsettheta:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1266   .bss.test_angletime:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1272   .bss.test_d_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1278   .bss.test_eletheta:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1284   .bss.test_ia:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1290   .bss.test_ib:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1296   .bss.test_ic:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1302   .data.state_.1:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccqA1mTl.s:1306   .data.state_.1:00000000 state_.1

UNDEFINED SYMBOLS
tim_pwm_enable
tim_tigger_adc
adc_start
tim_pwm_disable
adc_stop
_3s_2s
_2s_2r
pid_contrl
tim_set_pwm
_2r_2s
_svpwm
sensor_user_read
_IQ20toF
__aeabi_f2d
__aeabi_d2f
sqrt
lowfilter_cale
SEGGER_RTT_printf
_normalize_angle
pid_init
lowfilter_init
motorprotocol_process
