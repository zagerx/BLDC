ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"motorctrl.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.motor_enable,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	motor_enable:
  26              	.LFB340:
  27              		.file 1 "../BLDCMotor/motorctrl.c"
   1:../BLDCMotor/motorctrl.c **** #include "./motorctrl.h"
   2:../BLDCMotor/motorctrl.c **** #include "debuglog.h"
   3:../BLDCMotor/motorctrl.c **** #include "motorctrl_common.h"
   4:../BLDCMotor/motorctrl.c **** 
   5:../BLDCMotor/motorctrl.c **** #include "board.h"
   6:../BLDCMotor/motorctrl.c **** #include "string.h"
   7:../BLDCMotor/motorctrl.c **** 
   8:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
   9:../BLDCMotor/motorctrl.c **** #endif
  10:../BLDCMotor/motorctrl.c **** #define Q15_PI_2                   (51471)
  11:../BLDCMotor/motorctrl.c **** #define Q15_2PI                    (205884)
  12:../BLDCMotor/motorctrl.c **** #define PI_2                       (1.570796f)
  13:../BLDCMotor/motorctrl.c **** #define MOTORCTRL_PERCI            (1)
  14:../BLDCMotor/motorctrl.c **** 
  15:../BLDCMotor/motorctrl.c **** enum{
  16:../BLDCMotor/motorctrl.c ****     MOTOR_ZERO,
  17:../BLDCMotor/motorctrl.c ****     MOTOR_INIT,
  18:../BLDCMotor/motorctrl.c ****     MOTOR_IDLE,
  19:../BLDCMotor/motorctrl.c ****     MOTOR_START, 
  20:../BLDCMotor/motorctrl.c ****     MOTOR_RUNING,
  21:../BLDCMotor/motorctrl.c ****     MOTOR_STOP,
  22:../BLDCMotor/motorctrl.c **** };
  23:../BLDCMotor/motorctrl.c **** 
  24:../BLDCMotor/motorctrl.c **** motordebug_t sg_motordebug = {0};
  25:../BLDCMotor/motorctrl.c **** typedef struct
  26:../BLDCMotor/motorctrl.c **** {
  27:../BLDCMotor/motorctrl.c ****     unsigned char state;
  28:../BLDCMotor/motorctrl.c ****     unsigned short cnt;
  29:../BLDCMotor/motorctrl.c **** }motorctrl_t;
  30:../BLDCMotor/motorctrl.c **** 
  31:../BLDCMotor/motorctrl.c **** static dq_t _currmentloop(abc_t i_abc,float ele_theta);
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 2


  32:../BLDCMotor/motorctrl.c **** static short _get_angleoffset(void);
  33:../BLDCMotor/motorctrl.c **** static void motor_enable(void);
  34:../BLDCMotor/motorctrl.c **** static void motor_disable(void);
  35:../BLDCMotor/motorctrl.c **** static void motor_set_pwm(duty_t temp);
  36:../BLDCMotor/motorctrl.c **** static void sg_debug_clear(void)
  37:../BLDCMotor/motorctrl.c **** {
  38:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_targe =0.0f;
  39:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_targe =0.0f;
  40:../BLDCMotor/motorctrl.c ****     sg_motordebug.ele_angle = 0.0f;
  41:../BLDCMotor/motorctrl.c ****     memset(&sg_motordebug,0,sizeof(sg_motordebug)-4);
  42:../BLDCMotor/motorctrl.c **** }
  43:../BLDCMotor/motorctrl.c **** alpbet_t _limit_voltagecircle(alpbet_t raw_uab);
  44:../BLDCMotor/motorctrl.c **** static float motor_speedcale(float cur_theta);
  45:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real);
  46:../BLDCMotor/motorctrl.c **** 
  47:../BLDCMotor/motorctrl.c **** motorctrl_t g_Motor1 = {
  48:../BLDCMotor/motorctrl.c ****     .state = MOTOR_INIT,
  49:../BLDCMotor/motorctrl.c ****     .cnt = 0,
  50:../BLDCMotor/motorctrl.c **** };
  51:../BLDCMotor/motorctrl.c **** static volatile float sg_MecThetaOffset = 0.0f;
  52:../BLDCMotor/motorctrl.c **** static lowfilter_t sg_elefilter[3];
  53:../BLDCMotor/motorctrl.c **** lowfilter_t sg_speedfilter = {0.0f};
  54:../BLDCMotor/motorctrl.c **** pid_cb_t test_d_pid = {0};
  55:../BLDCMotor/motorctrl.c **** static pid_cb_t *sgp_curloop_d_pid;
  56:../BLDCMotor/motorctrl.c **** static pid_cb_t *sgp_curloop_q_pid;
  57:../BLDCMotor/motorctrl.c **** static pid_cb_t *sgp_speed_pid;
  58:../BLDCMotor/motorctrl.c **** static pid_cb_t sg_speed_pid;
  59:../BLDCMotor/motorctrl.c **** static curloop_t sg_curloop_param;
  60:../BLDCMotor/motorctrl.c **** 
  61:../BLDCMotor/motorctrl.c **** 
  62:../BLDCMotor/motorctrl.c **** void motortctrl_process(void)
  63:../BLDCMotor/motorctrl.c **** {
  64:../BLDCMotor/motorctrl.c ****     char rec_buf[64];
  65:../BLDCMotor/motorctrl.c ****     char cnt = 0;
  66:../BLDCMotor/motorctrl.c ****     // if (readline_fromPC(rec_buf,sizeof(rec_buf)))
  67:../BLDCMotor/motorctrl.c ****     // {
  68:../BLDCMotor/motorctrl.c ****     //     motorprotocol_pause(rec_buf);
  69:../BLDCMotor/motorctrl.c ****     // }
  70:../BLDCMotor/motorctrl.c ****     motorprotocol_process();
  71:../BLDCMotor/motorctrl.c ****     switch (g_Motor1.state)
  72:../BLDCMotor/motorctrl.c ****     {
  73:../BLDCMotor/motorctrl.c ****     case MOTOR_INIT:
  74:../BLDCMotor/motorctrl.c ****         if (sg_motordebug.motor_stat != 4)
  75:../BLDCMotor/motorctrl.c ****         {
  76:../BLDCMotor/motorctrl.c ****             break;
  77:../BLDCMotor/motorctrl.c ****         }
  78:../BLDCMotor/motorctrl.c ****         foc_paraminit();
  79:../BLDCMotor/motorctrl.c ****         lowfilter_init(&sg_speedfilter,80);
  80:../BLDCMotor/motorctrl.c **** 
  81:../BLDCMotor/motorctrl.c ****         motor_enable();
  82:../BLDCMotor/motorctrl.c ****         g_Motor1.state = MOTOR_RUNING;
  83:../BLDCMotor/motorctrl.c ****         break;
  84:../BLDCMotor/motorctrl.c **** 
  85:../BLDCMotor/motorctrl.c ****     case MOTOR_RUNING:
  86:../BLDCMotor/motorctrl.c ****         {
  87:../BLDCMotor/motorctrl.c ****             if (sg_motordebug.motor_statue_To == "motor stop")
  88:../BLDCMotor/motorctrl.c ****             {
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 3


  89:../BLDCMotor/motorctrl.c ****                 g_Motor1.state = MOTOR_STOP;
  90:../BLDCMotor/motorctrl.c ****             }
  91:../BLDCMotor/motorctrl.c ****         }
  92:../BLDCMotor/motorctrl.c ****         break;
  93:../BLDCMotor/motorctrl.c **** 
  94:../BLDCMotor/motorctrl.c ****     case MOTOR_STOP:
  95:../BLDCMotor/motorctrl.c ****         motor_disable();
  96:../BLDCMotor/motorctrl.c ****         break;
  97:../BLDCMotor/motorctrl.c ****     default:
  98:../BLDCMotor/motorctrl.c ****         break;
  99:../BLDCMotor/motorctrl.c ****     }
 100:../BLDCMotor/motorctrl.c **** }
 101:../BLDCMotor/motorctrl.c **** /*------------Âë®ÊúüÊÄßË¢´Ë∞ÉÁî®----------------*/
 102:../BLDCMotor/motorctrl.c **** void _50uscycle_process(unsigned int *abc_vale,float _elec_theta)
 103:../BLDCMotor/motorctrl.c **** {
 104:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 105:../BLDCMotor/motorctrl.c ****     int32_t Q15_Mechtheta;    
 106:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 107:../BLDCMotor/motorctrl.c ****     abc_t i_abc;
 108:../BLDCMotor/motorctrl.c ****     dq_t udq;
 109:../BLDCMotor/motorctrl.c **** 
 110:../BLDCMotor/motorctrl.c **** /*----------------‰∏âÁõ∏ÁîµÊµÅÂ§ÑÁêÜ------------------------------*/    
 111:../BLDCMotor/motorctrl.c **** #if 1
 112:../BLDCMotor/motorctrl.c ****     float Ia,Ib,Ic;
 113:../BLDCMotor/motorctrl.c ****     int32_t a1,b1,c1;
 114:../BLDCMotor/motorctrl.c ****     a1 = abc_vale[0] - A_ADCCHANNL_OFFSET;
 115:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 116:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 117:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ia = a1;
 118:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 119:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 120:../BLDCMotor/motorctrl.c ****     // Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 121:../BLDCMotor/motorctrl.c ****     Ic = -Ia - Ib;
 122:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 123:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 124:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 125:../BLDCMotor/motorctrl.c **** 
 126:../BLDCMotor/motorctrl.c **** #endif
 127:../BLDCMotor/motorctrl.c **** 
 128:../BLDCMotor/motorctrl.c ****     enum{
 129:../BLDCMotor/motorctrl.c ****         OFFSET=0,
 130:../BLDCMotor/motorctrl.c ****         OPENLOOP,
 131:../BLDCMotor/motorctrl.c ****         CLOSELOOP,
 132:../BLDCMotor/motorctrl.c ****         SPEEDLOOP,
 133:../BLDCMotor/motorctrl.c ****         IDLE,
 134:../BLDCMotor/motorctrl.c ****     };
 135:../BLDCMotor/motorctrl.c ****     static short state0_ = OFFSET;
 136:../BLDCMotor/motorctrl.c ****     switch (state0_)
 137:../BLDCMotor/motorctrl.c ****     {
 138:../BLDCMotor/motorctrl.c ****         case OFFSET:
 139:../BLDCMotor/motorctrl.c ****             if (_get_angleoffset() != 0)
 140:../BLDCMotor/motorctrl.c ****             {
 141:../BLDCMotor/motorctrl.c ****                 break;
 142:../BLDCMotor/motorctrl.c ****             }
 143:../BLDCMotor/motorctrl.c ****             USER_DEBUG_NORMAL("enter IDLE\r\n");
 144:../BLDCMotor/motorctrl.c ****             state0_ = IDLE;
 145:../BLDCMotor/motorctrl.c ****             break;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 4


 146:../BLDCMotor/motorctrl.c ****         case IDLE:
 147:../BLDCMotor/motorctrl.c ****             if (sg_motordebug.id_targe != 0.0f || sg_motordebug.iq_targe != 0.0f)
 148:../BLDCMotor/motorctrl.c ****             {
 149:../BLDCMotor/motorctrl.c ****                 sg_motordebug.ele_angle = 0.0f;
 150:../BLDCMotor/motorctrl.c ****                 state0_ = SPEEDLOOP;
 151:../BLDCMotor/motorctrl.c ****             }
 152:../BLDCMotor/motorctrl.c ****             break;
 153:../BLDCMotor/motorctrl.c ****         case SPEEDLOOP:
 154:../BLDCMotor/motorctrl.c ****             Q15_Mechtheta = ((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_COV))[0];
 155:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(Q15_Mechtheta);
 156:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 157:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 158:../BLDCMotor/motorctrl.c ****             elec_theta -= sg_MecThetaOffset;
 159:../BLDCMotor/motorctrl.c **** 
 160:../BLDCMotor/motorctrl.c ****             elec_theta = _normalize_angle(elec_theta);
 161:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 162:../BLDCMotor/motorctrl.c **** 
 163:../BLDCMotor/motorctrl.c ****             sg_motordebug.ele_angle = elec_theta;    
 164:../BLDCMotor/motorctrl.c ****             static unsigned short cnt = 0;
 165:../BLDCMotor/motorctrl.c ****             if (cnt++ < 200)
 166:../BLDCMotor/motorctrl.c ****             {
 167:../BLDCMotor/motorctrl.c ****                 // break;
 168:../BLDCMotor/motorctrl.c ****             }
 169:../BLDCMotor/motorctrl.c ****             cnt = 0;
 170:../BLDCMotor/motorctrl.c ****             udq.q = 0.3f;//pid_contrl(sgp_speed_pid,300,sg_motordebug.real_speed);
 171:../BLDCMotor/motorctrl.c ****             udq.d = 0;
 172:../BLDCMotor/motorctrl.c ****             alpbet_t uab;
 173:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, elec_theta - PI_2);  
 174:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 175:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 176:../BLDCMotor/motorctrl.c ****             break;
 177:../BLDCMotor/motorctrl.c ****         case CLOSELOOP:
 178:../BLDCMotor/motorctrl.c ****         {
 179:../BLDCMotor/motorctrl.c ****             //Ëé∑ÂèñÁîµËßíÂ∫¶
 180:../BLDCMotor/motorctrl.c ****             Q15_Mechtheta = ((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_COV))[0];
 181:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(Q15_Mechtheta);
 182:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 183:../BLDCMotor/motorctrl.c **** 
 184:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 185:../BLDCMotor/motorctrl.c ****             elec_theta -= sg_MecThetaOffset;
 186:../BLDCMotor/motorctrl.c **** 
 187:../BLDCMotor/motorctrl.c ****             elec_theta = _normalize_angle(elec_theta);
 188:../BLDCMotor/motorctrl.c ****             sg_motordebug.ele_angle = elec_theta;
 189:../BLDCMotor/motorctrl.c **** 
 190:../BLDCMotor/motorctrl.c **** #if 1//ÂºÄÁéØ
 191:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 192:../BLDCMotor/motorctrl.c ****             dq_t udq = {0.0f,-0.2f,_IQ15(0.0f),_IQ15(0.0f)};
 193:../BLDCMotor/motorctrl.c ****             alpbet_t uab,uab_q15;
 194:../BLDCMotor/motorctrl.c ****             if(sg_motordebug.self_ele_theta>_2PI)
 195:../BLDCMotor/motorctrl.c ****             {
 196:../BLDCMotor/motorctrl.c ****                 sg_motordebug.self_ele_theta = 0.0f;
 197:../BLDCMotor/motorctrl.c ****             }
 198:../BLDCMotor/motorctrl.c ****             sg_motordebug.self_ele_theta += 0.001f;
 199:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, sg_motordebug.self_ele_theta); 
 200:../BLDCMotor/motorctrl.c ****             dut01 = _svpwm(uab.alpha,uab.beta);
 201:../BLDCMotor/motorctrl.c ****             motor_set_pwm(dut01);
 202:../BLDCMotor/motorctrl.c **** #else
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 5


 203:../BLDCMotor/motorctrl.c ****             dq_t udq = {0.0f,0.0f,_IQ15(0.0f),_IQ15(0.8f)};
 204:../BLDCMotor/motorctrl.c ****             #if 0/*Èó≠ÁéØÊéßÂà∂*/
 205:../BLDCMotor/motorctrl.c ****                 udq = _currmentloop(i_abc,elec_theta - PI_2);
 206:../BLDCMotor/motorctrl.c ****                 // udq.d = 0.0f;
 207:../BLDCMotor/motorctrl.c ****                 // udq.q = 0.6f;
 208:../BLDCMotor/motorctrl.c ****                 // udq.d = sg_motordebug.id_targe;
 209:../BLDCMotor/motorctrl.c ****                 udq.q = sg_motordebug.iq_targe;
 210:../BLDCMotor/motorctrl.c ****             #else
 211:../BLDCMotor/motorctrl.c ****                 if (sg_motordebug.iq_targe < 0.0f)
 212:../BLDCMotor/motorctrl.c ****                 {
 213:../BLDCMotor/motorctrl.c ****                 _currmentloop(i_abc,elec_theta + PI_2);
 214:../BLDCMotor/motorctrl.c ****                 }else{
 215:../BLDCMotor/motorctrl.c ****                     i_abc.a = -i_abc.a;
 216:../BLDCMotor/motorctrl.c ****                     i_abc.b = -i_abc.b;
 217:../BLDCMotor/motorctrl.c ****                     i_abc.c = -i_abc.c;
 218:../BLDCMotor/motorctrl.c ****                     _currmentloop(i_abc,elec_theta);
 219:../BLDCMotor/motorctrl.c ****                 }
 220:../BLDCMotor/motorctrl.c ****                 // udq.d = sg_motordebug.id_targe;
 221:../BLDCMotor/motorctrl.c ****                 udq.q = sg_motordebug.iq_targe;
 222:../BLDCMotor/motorctrl.c ****                 udq.d = 0.0f;
 223:../BLDCMotor/motorctrl.c ****                 // udq.q = _speedloop(300.0f,sg_motordebug.real_speed);
 224:../BLDCMotor/motorctrl.c ****             #endif
 225:../BLDCMotor/motorctrl.c ****             alpbet_t uab;
 226:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, elec_theta);  
 227:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 228:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 229:../BLDCMotor/motorctrl.c **** #endif
 230:../BLDCMotor/motorctrl.c ****         }
 231:../BLDCMotor/motorctrl.c ****             break;
 232:../BLDCMotor/motorctrl.c ****         default:
 233:../BLDCMotor/motorctrl.c ****             break;
 234:../BLDCMotor/motorctrl.c ****     }
 235:../BLDCMotor/motorctrl.c **** }
 236:../BLDCMotor/motorctrl.c **** 
 237:../BLDCMotor/motorctrl.c **** 
 238:../BLDCMotor/motorctrl.c **** 
 239:../BLDCMotor/motorctrl.c **** alpbet_t _limit_voltagecircle(alpbet_t raw_uab) {  
 240:../BLDCMotor/motorctrl.c ****     float max_voltage = D_MAX_VAL;// ËøôÈáåÂ∫îËØ•ÊòØ‰Ω†ÁöÑÊúÄÂ§ßÂÖÅËÆ∏ÁîµÂéãÂÄºÔºå‰æãÂ¶ÇÂØπ‰∫é‰∏âÁõ
 241:../BLDCMotor/motorctrl.c ****     float voltage_magnitude = sqrt(raw_uab.alpha * raw_uab.alpha + raw_uab.beta * raw_uab.beta); //
 242:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 243:../BLDCMotor/motorctrl.c ****     if (voltage_magnitude > max_voltage) {  
 244:../BLDCMotor/motorctrl.c ****         // Â¶ÇÊûúÁü¢ÈáèÈïøÂ∫¶Ë∂ÖËøáÊúÄÂ§ßÁîµÂéãÔºåÂàôÊåâÊØî‰æãÁº©ÊîæÁü¢Èáè‰ª•‰ΩøÂÖ∂ËêΩÂú®ÁîµÂéãÁü¢È
 245:../BLDCMotor/motorctrl.c ****         float scale_factor = max_voltage / voltage_magnitude;  
 246:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha * scale_factor;  
 247:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 248:../BLDCMotor/motorctrl.c ****     } else {  
 249:../BLDCMotor/motorctrl.c ****         // Â¶ÇÊûúÁü¢ÈáèÈïøÂ∫¶Âú®ÂÖÅËÆ∏ËåÉÂõ¥ÂÜÖÔºåÂàô‰∏çËøõË°å‰ªª‰ΩïÊîπÂèò  
 250:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha;  
 251:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta;  
 252:../BLDCMotor/motorctrl.c ****     }
 253:../BLDCMotor/motorctrl.c ****     return uab;
 254:../BLDCMotor/motorctrl.c **** }
 255:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 256:../BLDCMotor/motorctrl.c **** {
 257:../BLDCMotor/motorctrl.c **** #if 1
 258:../BLDCMotor/motorctrl.c ****     alpbet_t i_alphbeta;
 259:../BLDCMotor/motorctrl.c ****     float _tempa,_tempb,_tempc;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 6


 260:../BLDCMotor/motorctrl.c ****     dq_t i_dq;
 261:../BLDCMotor/motorctrl.c ****     _tempa = i_abc.a;
 262:../BLDCMotor/motorctrl.c ****     _tempb = i_abc.b;
 263:../BLDCMotor/motorctrl.c ****     _tempc = i_abc.c;
 264:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
 265:../BLDCMotor/motorctrl.c ****     /*bac  */
 266:../BLDCMotor/motorctrl.c ****     i_abc.a = -_tempa;
 267:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempc;
 268:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempb;
 269:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 270:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 271:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 272:../BLDCMotor/motorctrl.c **** #endif
 273:../BLDCMotor/motorctrl.c ****     _3s_2s(i_abc,&i_alphbeta);   
 274:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 275:../BLDCMotor/motorctrl.c ****     sg_motordebug.id = (i_dq.d);
 276:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 277:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 278:../BLDCMotor/motorctrl.c **** #if 1
 279:../BLDCMotor/motorctrl.c ****     float tar_id = 0.0f,tar_iq = 0.0f;
 280:../BLDCMotor/motorctrl.c ****     tar_id = sg_motordebug.id_targe;
 281:../BLDCMotor/motorctrl.c ****     tar_iq = sg_motordebug.iq_targe;
 282:../BLDCMotor/motorctrl.c ****     udq.d = pid_contrl(sgp_curloop_d_pid,tar_id,i_dq.d);
 283:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_real = i_dq.d;
 284:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_D_out = udq.d;
 285:../BLDCMotor/motorctrl.c ****     udq.q =pid_contrl(sgp_curloop_q_pid,tar_iq,i_dq.q);
 286:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_real = i_dq.q;
 287:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_Q_out = udq.q;
 288:../BLDCMotor/motorctrl.c **** #endif
 289:../BLDCMotor/motorctrl.c ****     return udq;
 290:../BLDCMotor/motorctrl.c **** #endif
 291:../BLDCMotor/motorctrl.c **** }
 292:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real)
 293:../BLDCMotor/motorctrl.c **** {
 294:../BLDCMotor/motorctrl.c ****    return pid_contrl(sgp_speed_pid,tar,real);
 295:../BLDCMotor/motorctrl.c **** }
 296:../BLDCMotor/motorctrl.c **** static void motor_enable(void)
 297:../BLDCMotor/motorctrl.c **** {
  28              		.loc 1 297 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32 0000 08B5     		push	{r3, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 3, -8
  36              		.cfi_offset 14, -4
 298:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 299:../BLDCMotor/motorctrl.c ****     gpio_setmotor_power();
 300:../BLDCMotor/motorctrl.c **** #endif
 301:../BLDCMotor/motorctrl.c ****     /*pwm ‰ΩøËÉΩ*/
 302:../BLDCMotor/motorctrl.c ****     tim_pwm_enable();
  37              		.loc 1 302 5 view .LVU1
  38 0002 FFF7FEFF 		bl	tim_pwm_enable
  39              	.LVL0:
 303:../BLDCMotor/motorctrl.c ****     tim_tigger_adc();
  40              		.loc 1 303 5 view .LVU2
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 7


  41 0006 FFF7FEFF 		bl	tim_tigger_adc
  42              	.LVL1:
 304:../BLDCMotor/motorctrl.c ****     adc_start();
  43              		.loc 1 304 5 view .LVU3
  44 000a FFF7FEFF 		bl	adc_start
  45              	.LVL2:
 305:../BLDCMotor/motorctrl.c **** }
  46              		.loc 1 305 1 is_stmt 0 view .LVU4
  47 000e 08BD     		pop	{r3, pc}
  48              		.cfi_endproc
  49              	.LFE340:
  51              		.section	.text.motor_disable,"ax",%progbits
  52              		.align	1
  53              		.syntax unified
  54              		.thumb
  55              		.thumb_func
  57              	motor_disable:
  58              	.LFB342:
 306:../BLDCMotor/motorctrl.c **** static void motor_enable_noirq(void)
 307:../BLDCMotor/motorctrl.c **** {
 308:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 309:../BLDCMotor/motorctrl.c ****     gpio_setmotor_power();
 310:../BLDCMotor/motorctrl.c **** #endif
 311:../BLDCMotor/motorctrl.c ****     /*pwm ‰ΩøËÉΩ*/
 312:../BLDCMotor/motorctrl.c ****     tim_pwm_enable();
 313:../BLDCMotor/motorctrl.c **** }
 314:../BLDCMotor/motorctrl.c **** static void motor_disable(void)
 315:../BLDCMotor/motorctrl.c **** {
  59              		.loc 1 315 1 is_stmt 1 view -0
  60              		.cfi_startproc
  61              		@ args = 0, pretend = 0, frame = 0
  62              		@ frame_needed = 0, uses_anonymous_args = 0
  63 0000 08B5     		push	{r3, lr}
  64              	.LCFI1:
  65              		.cfi_def_cfa_offset 8
  66              		.cfi_offset 3, -8
  67              		.cfi_offset 14, -4
 316:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 317:../BLDCMotor/motorctrl.c ****     gpio_setmotor_powerdown();
 318:../BLDCMotor/motorctrl.c **** #endif    
 319:../BLDCMotor/motorctrl.c ****     tim_pwm_disable();
  68              		.loc 1 319 5 view .LVU6
  69 0002 FFF7FEFF 		bl	tim_pwm_disable
  70              	.LVL3:
 320:../BLDCMotor/motorctrl.c ****     adc_stop();
  71              		.loc 1 320 5 view .LVU7
  72 0006 FFF7FEFF 		bl	adc_stop
  73              	.LVL4:
 321:../BLDCMotor/motorctrl.c **** }
  74              		.loc 1 321 1 is_stmt 0 view .LVU8
  75 000a 08BD     		pop	{r3, pc}
  76              		.cfi_endproc
  77              	.LFE342:
  79              		.section	.text.motor_speedcale,"ax",%progbits
  80              		.align	1
  81              		.syntax unified
  82              		.thumb
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 8


  83              		.thumb_func
  85              	motor_speedcale:
  86              	.LVL5:
  87              	.LFB344:
 322:../BLDCMotor/motorctrl.c **** static void motor_set_pwm(duty_t temp)
 323:../BLDCMotor/motorctrl.c **** {
 324:../BLDCMotor/motorctrl.c ****     tim_set_pwm(temp._a,temp._b,temp._c);
 325:../BLDCMotor/motorctrl.c **** }
 326:../BLDCMotor/motorctrl.c **** 
 327:../BLDCMotor/motorctrl.c **** static float motor_speedcale(float cur_theta)
 328:../BLDCMotor/motorctrl.c **** {
  88              		.loc 1 328 1 is_stmt 1 view -0
  89              		.cfi_startproc
  90              		@ args = 0, pretend = 0, frame = 0
  91              		@ frame_needed = 0, uses_anonymous_args = 0
  92              		.loc 1 328 1 is_stmt 0 view .LVU10
  93 0000 08B5     		push	{r3, lr}
  94              	.LCFI2:
  95              		.cfi_def_cfa_offset 8
  96              		.cfi_offset 3, -8
  97              		.cfi_offset 14, -4
  98 0002 2DED028B 		vpush.64	{d8}
  99              	.LCFI3:
 100              		.cfi_def_cfa_offset 16
 101              		.cfi_offset 80, -16
 102              		.cfi_offset 81, -12
 329:../BLDCMotor/motorctrl.c ****     float delta_theta = 0.0f;
 103              		.loc 1 329 5 is_stmt 1 view .LVU11
 104              	.LVL6:
 330:../BLDCMotor/motorctrl.c ****     static unsigned short cnt = 0;
 105              		.loc 1 330 5 view .LVU12
 331:../BLDCMotor/motorctrl.c ****     if (cnt++ > 20)
 106              		.loc 1 331 5 view .LVU13
 107              		.loc 1 331 12 is_stmt 0 view .LVU14
 108 0006 2D4A     		ldr	r2, .L15
 109 0008 1388     		ldrh	r3, [r2]
 110 000a 591C     		adds	r1, r3, #1
 111 000c 1180     		strh	r1, [r2]	@ movhi
 112              		.loc 1 331 8 view .LVU15
 113 000e 142B     		cmp	r3, #20
 114 0010 36D8     		bhi	.L5
 115 0012 B0EE408A 		vmov.f32	s16, s0
 332:../BLDCMotor/motorctrl.c ****     {
 333:../BLDCMotor/motorctrl.c ****         return;
 334:../BLDCMotor/motorctrl.c ****     }
 335:../BLDCMotor/motorctrl.c ****     cnt = 0;
 116              		.loc 1 335 5 is_stmt 1 view .LVU16
 117              		.loc 1 335 9 is_stmt 0 view .LVU17
 118 0016 294B     		ldr	r3, .L15
 119 0018 0022     		movs	r2, #0
 120 001a 1A80     		strh	r2, [r3]	@ movhi
 336:../BLDCMotor/motorctrl.c ****     static float pre_theta = 0.0f;
 121              		.loc 1 336 5 is_stmt 1 view .LVU18
 337:../BLDCMotor/motorctrl.c ****     delta_theta = (cur_theta -pre_theta)*100.0f;
 122              		.loc 1 337 5 view .LVU19
 123              		.loc 1 337 30 is_stmt 0 view .LVU20
 124 001c 284B     		ldr	r3, .L15+4
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 9


 125 001e D3ED007A 		vldr.32	s15, [r3]
 126 0022 70EE677A 		vsub.f32	s15, s0, s15
 127              		.loc 1 337 17 view .LVU21
 128 0026 9FED270A 		vldr.32	s0, .L15+8
 129              	.LVL7:
 130              		.loc 1 337 17 view .LVU22
 131 002a 27EE800A 		vmul.f32	s0, s15, s0
 132              	.LVL8:
 338:../BLDCMotor/motorctrl.c **** 
 339:../BLDCMotor/motorctrl.c ****     // Â§ÑÁêÜËßíÂ∫¶Ë∑®Ë∂ä2œÄËæπÁïåÁöÑÊÉÖÂÜµ  
 340:../BLDCMotor/motorctrl.c ****     if (delta_theta > _2PI) {  
 133              		.loc 1 340 5 is_stmt 1 view .LVU23
 134              		.loc 1 340 8 is_stmt 0 view .LVU24
 135 002e DFED267A 		vldr.32	s15, .L15+12
 136 0032 B4EEE70A 		vcmpe.f32	s0, s15
 137 0036 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 138 003a 24DD     		ble	.L13
 341:../BLDCMotor/motorctrl.c ****         delta_theta -= (int)(delta_theta / _2PI +1) * _2PI;  
 139              		.loc 1 341 9 is_stmt 1 view .LVU25
 140              		.loc 1 341 42 is_stmt 0 view .LVU26
 141 003c B0EE677A 		vmov.f32	s14, s15
 142 0040 C0EE077A 		vdiv.f32	s15, s0, s14
 143              		.loc 1 341 49 view .LVU27
 144 0044 F7EE006A 		vmov.f32	s13, #1.0e+0
 145 0048 77EEA67A 		vadd.f32	s15, s15, s13
 146              		.loc 1 341 24 view .LVU28
 147 004c FDEEE77A 		vcvt.s32.f32	s15, s15
 148              		.loc 1 341 53 view .LVU29
 149 0050 F8EEE77A 		vcvt.f32.s32	s15, s15
 150 0054 67EE877A 		vmul.f32	s15, s15, s14
 151              		.loc 1 341 21 view .LVU30
 152 0058 30EE670A 		vsub.f32	s0, s0, s15
 153              	.LVL9:
 154              	.L9:
 342:../BLDCMotor/motorctrl.c ****     } else if (delta_theta < -_2PI) {  
 343:../BLDCMotor/motorctrl.c ****         delta_theta += (int)(-delta_theta / _2PI + 1) * _2PI;  
 344:../BLDCMotor/motorctrl.c ****     }  
 345:../BLDCMotor/motorctrl.c **** 
 346:../BLDCMotor/motorctrl.c ****     delta_theta = lowfilter_cale(&sg_speedfilter,delta_theta);
 155              		.loc 1 346 5 is_stmt 1 view .LVU31
 156              		.loc 1 346 19 is_stmt 0 view .LVU32
 157 005c 1B48     		ldr	r0, .L15+16
 158 005e FFF7FEFF 		bl	lowfilter_cale
 159              	.LVL10:
 347:../BLDCMotor/motorctrl.c ****     float omeg_c = (delta_theta)/0.002f/100.0f;
 160              		.loc 1 347 5 is_stmt 1 view .LVU33
 161              		.loc 1 347 33 is_stmt 0 view .LVU34
 162 0062 DFED1B7A 		vldr.32	s15, .L15+20
 163 0066 80EE277A 		vdiv.f32	s14, s0, s15
 164              		.loc 1 347 11 view .LVU35
 165 006a DFED167A 		vldr.32	s15, .L15+8
 166 006e 87EE270A 		vdiv.f32	s0, s14, s15
 167              	.LVL11:
 348:../BLDCMotor/motorctrl.c ****     float N_rpm = omeg_c * 9.5492965855f;//60.0f/_2PI
 168              		.loc 1 348 5 is_stmt 1 view .LVU36
 169              		.loc 1 348 11 is_stmt 0 view .LVU37
 170 0072 DFED187A 		vldr.32	s15, .L15+24
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 10


 171 0076 20EE270A 		vmul.f32	s0, s0, s15
 172              	.LVL12:
 349:../BLDCMotor/motorctrl.c ****     pre_theta = cur_theta;
 173              		.loc 1 349 5 is_stmt 1 view .LVU38
 174              		.loc 1 349 15 is_stmt 0 view .LVU39
 175 007a 114B     		ldr	r3, .L15+4
 176 007c 83ED008A 		vstr.32	s16, [r3]
 350:../BLDCMotor/motorctrl.c ****     // N_rpm = lowfilter_cale(&sg_speedfilter,N_rpm);
 351:../BLDCMotor/motorctrl.c ****     return N_rpm;
 177              		.loc 1 351 5 is_stmt 1 view .LVU40
 178              	.LVL13:
 179              	.L5:
 352:../BLDCMotor/motorctrl.c **** }
 180              		.loc 1 352 1 is_stmt 0 view .LVU41
 181 0080 BDEC028B 		vldm	sp!, {d8}
 182              	.LCFI4:
 183              		.cfi_remember_state
 184              		.cfi_restore 80
 185              		.cfi_restore 81
 186              		.cfi_def_cfa_offset 8
 187 0084 08BD     		pop	{r3, pc}
 188              	.LVL14:
 189              	.L13:
 190              	.LCFI5:
 191              		.cfi_restore_state
 342:../BLDCMotor/motorctrl.c ****         delta_theta += (int)(-delta_theta / _2PI + 1) * _2PI;  
 192              		.loc 1 342 12 is_stmt 1 view .LVU42
 342:../BLDCMotor/motorctrl.c ****         delta_theta += (int)(-delta_theta / _2PI + 1) * _2PI;  
 193              		.loc 1 342 15 is_stmt 0 view .LVU43
 194 0086 DFED147A 		vldr.32	s15, .L15+28
 195 008a B4EEE70A 		vcmpe.f32	s0, s15
 196 008e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 197 0092 E3D5     		bpl	.L9
 343:../BLDCMotor/motorctrl.c ****     }  
 198              		.loc 1 343 9 is_stmt 1 view .LVU44
 343:../BLDCMotor/motorctrl.c ****     }  
 199              		.loc 1 343 30 is_stmt 0 view .LVU45
 200 0094 F1EE406A 		vneg.f32	s13, s0
 343:../BLDCMotor/motorctrl.c ****     }  
 201              		.loc 1 343 43 view .LVU46
 202 0098 9FED0B7A 		vldr.32	s14, .L15+12
 203 009c C6EE877A 		vdiv.f32	s15, s13, s14
 343:../BLDCMotor/motorctrl.c ****     }  
 204              		.loc 1 343 50 view .LVU47
 205 00a0 F7EE006A 		vmov.f32	s13, #1.0e+0
 206 00a4 77EEA67A 		vadd.f32	s15, s15, s13
 343:../BLDCMotor/motorctrl.c ****     }  
 207              		.loc 1 343 24 view .LVU48
 208 00a8 FDEEE77A 		vcvt.s32.f32	s15, s15
 343:../BLDCMotor/motorctrl.c ****     }  
 209              		.loc 1 343 55 view .LVU49
 210 00ac F8EEE77A 		vcvt.f32.s32	s15, s15
 211 00b0 67EE877A 		vmul.f32	s15, s15, s14
 343:../BLDCMotor/motorctrl.c ****     }  
 212              		.loc 1 343 21 view .LVU50
 213 00b4 30EE270A 		vadd.f32	s0, s0, s15
 214              	.LVL15:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 11


 343:../BLDCMotor/motorctrl.c ****     }  
 215              		.loc 1 343 21 view .LVU51
 216 00b8 D0E7     		b	.L9
 217              	.L16:
 218 00ba 00BF     		.align	2
 219              	.L15:
 220 00bc 00000000 		.word	.LANCHOR0
 221 00c0 00000000 		.word	.LANCHOR1
 222 00c4 0000C842 		.word	1120403456
 223 00c8 DA0FC940 		.word	1086918618
 224 00cc 00000000 		.word	.LANCHOR2
 225 00d0 6F12033B 		.word	990057071
 226 00d4 EBC91841 		.word	1092143595
 227 00d8 DA0FC9C0 		.word	-1060565030
 228              		.cfi_endproc
 229              	.LFE344:
 231              		.section	.text._currmentloop,"ax",%progbits
 232              		.align	1
 233              		.syntax unified
 234              		.thumb
 235              		.thumb_func
 237              	_currmentloop:
 238              	.LVL16:
 239              	.LFB338:
 256:../BLDCMotor/motorctrl.c **** #if 1
 240              		.loc 1 256 1 is_stmt 1 view -0
 241              		.cfi_startproc
 242              		@ args = 28, pretend = 16, frame = 32
 243              		@ frame_needed = 0, uses_anonymous_args = 0
 256:../BLDCMotor/motorctrl.c **** #if 1
 244              		.loc 1 256 1 is_stmt 0 view .LVU53
 245 0000 84B0     		sub	sp, sp, #16
 246              	.LCFI6:
 247              		.cfi_def_cfa_offset 16
 248 0002 70B5     		push	{r4, r5, r6, lr}
 249              	.LCFI7:
 250              		.cfi_def_cfa_offset 32
 251              		.cfi_offset 4, -32
 252              		.cfi_offset 5, -28
 253              		.cfi_offset 6, -24
 254              		.cfi_offset 14, -20
 255 0004 2DED028B 		vpush.64	{d8}
 256              	.LCFI8:
 257              		.cfi_def_cfa_offset 40
 258              		.cfi_offset 80, -40
 259              		.cfi_offset 81, -36
 260 0008 8CB0     		sub	sp, sp, #48
 261              	.LCFI9:
 262              		.cfi_def_cfa_offset 88
 263 000a 0546     		mov	r5, r0
 264 000c 0DF14C0C 		add	ip, sp, #76
 265 0010 8CE80E00 		stm	ip, {r1, r2, r3}
 266 0014 B0EE408A 		vmov.f32	s16, s0
 258:../BLDCMotor/motorctrl.c ****     float _tempa,_tempb,_tempc;
 267              		.loc 1 258 5 is_stmt 1 view .LVU54
 259:../BLDCMotor/motorctrl.c ****     dq_t i_dq;
 268              		.loc 1 259 5 view .LVU55
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 12


 260:../BLDCMotor/motorctrl.c ****     _tempa = i_abc.a;
 269              		.loc 1 260 5 view .LVU56
 261:../BLDCMotor/motorctrl.c ****     _tempb = i_abc.b;
 270              		.loc 1 261 5 view .LVU57
 271              	.LVL17:
 262:../BLDCMotor/motorctrl.c ****     _tempc = i_abc.c;
 272              		.loc 1 262 5 view .LVU58
 262:../BLDCMotor/motorctrl.c ****     _tempc = i_abc.c;
 273              		.loc 1 262 12 is_stmt 0 view .LVU59
 274 0018 DDED147A 		vldr.32	s15, [sp, #80]
 275              	.LVL18:
 263:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
 276              		.loc 1 263 5 is_stmt 1 view .LVU60
 266:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempc;
 277              		.loc 1 266 5 view .LVU61
 266:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempc;
 278              		.loc 1 266 15 is_stmt 0 view .LVU62
 279 001c DDED136A 		vldr.32	s13, [sp, #76]
 280 0020 F1EE666A 		vneg.f32	s13, s13
 266:../BLDCMotor/motorctrl.c ****     i_abc.b = -_tempc;
 281              		.loc 1 266 13 view .LVU63
 282 0024 CDED136A 		vstr.32	s13, [sp, #76]
 283              	.LVL19:
 267:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempb;
 284              		.loc 1 267 5 is_stmt 1 view .LVU64
 267:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempb;
 285              		.loc 1 267 15 is_stmt 0 view .LVU65
 286 0028 9DED157A 		vldr.32	s14, [sp, #84]
 287 002c B1EE477A 		vneg.f32	s14, s14
 267:../BLDCMotor/motorctrl.c ****     i_abc.c = -_tempb;
 288              		.loc 1 267 13 view .LVU66
 289 0030 8DED147A 		vstr.32	s14, [sp, #80]
 268:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 290              		.loc 1 268 5 is_stmt 1 view .LVU67
 268:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 291              		.loc 1 268 15 is_stmt 0 view .LVU68
 292 0034 F1EE677A 		vneg.f32	s15, s15
 293              	.LVL20:
 268:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 294              		.loc 1 268 13 view .LVU69
 295 0038 CDED157A 		vstr.32	s15, [sp, #84]
 296              	.LVL21:
 269:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 297              		.loc 1 269 5 is_stmt 1 view .LVU70
 269:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 298              		.loc 1 269 22 is_stmt 0 view .LVU71
 299 003c 244C     		ldr	r4, .L19
 300 003e C4ED006A 		vstr.32	s13, [r4]
 270:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 301              		.loc 1 270 5 is_stmt 1 view .LVU72
 270:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 302              		.loc 1 270 22 is_stmt 0 view .LVU73
 303 0042 84ED017A 		vstr.32	s14, [r4, #4]
 271:../BLDCMotor/motorctrl.c **** #endif
 304              		.loc 1 271 5 is_stmt 1 view .LVU74
 271:../BLDCMotor/motorctrl.c **** #endif
 305              		.loc 1 271 22 is_stmt 0 view .LVU75
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 13


 306 0046 C4ED027A 		vstr.32	s15, [r4, #8]
 273:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 307              		.loc 1 273 5 is_stmt 1 view .LVU76
 308 004a 08AE     		add	r6, sp, #32
 309 004c 0296     		str	r6, [sp, #8]
 310 004e 17AB     		add	r3, sp, #92
 311 0050 93E80300 		ldm	r3, {r0, r1}
 312              	.LVL22:
 273:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 313              		.loc 1 273 5 is_stmt 0 view .LVU77
 314 0054 8DE80300 		stm	sp, {r0, r1}
 315 0058 9CE80F00 		ldm	ip, {r0, r1, r2, r3}
 316 005c FFF7FEFF 		bl	_3s_2s
 317              	.LVL23:
 274:../BLDCMotor/motorctrl.c ****     sg_motordebug.id = (i_dq.d);
 318              		.loc 1 274 5 is_stmt 1 view .LVU78
 319 0060 04AB     		add	r3, sp, #16
 320 0062 0093     		str	r3, [sp]
 321 0064 B0EE480A 		vmov.f32	s0, s16
 322 0068 96E80F00 		ldm	r6, {r0, r1, r2, r3}
 323 006c FFF7FEFF 		bl	_2s_2r
 324              	.LVL24:
 275:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 325              		.loc 1 275 5 view .LVU79
 275:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 326              		.loc 1 275 29 is_stmt 0 view .LVU80
 327 0070 DDED040A 		vldr.32	s1, [sp, #16]
 275:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 328              		.loc 1 275 22 view .LVU81
 329 0074 C4ED050A 		vstr.32	s1, [r4, #20]
 276:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 330              		.loc 1 276 5 is_stmt 1 view .LVU82
 276:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 331              		.loc 1 276 29 is_stmt 0 view .LVU83
 332 0078 059B     		ldr	r3, [sp, #20]	@ float
 276:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.0f};
 333              		.loc 1 276 22 view .LVU84
 334 007a A361     		str	r3, [r4, #24]	@ float
 277:../BLDCMotor/motorctrl.c **** #if 1
 335              		.loc 1 277 5 is_stmt 1 view .LVU85
 277:../BLDCMotor/motorctrl.c **** #if 1
 336              		.loc 1 277 10 is_stmt 0 view .LVU86
 337 007c 0023     		movs	r3, #0
 338 007e 2B60     		str	r3, [r5]
 339 0080 6B60     		str	r3, [r5, #4]
 340 0082 AB60     		str	r3, [r5, #8]
 341 0084 EB60     		str	r3, [r5, #12]
 279:../BLDCMotor/motorctrl.c ****     tar_id = sg_motordebug.id_targe;
 342              		.loc 1 279 5 is_stmt 1 view .LVU87
 343              	.LVL25:
 280:../BLDCMotor/motorctrl.c ****     tar_iq = sg_motordebug.iq_targe;
 344              		.loc 1 280 5 view .LVU88
 281:../BLDCMotor/motorctrl.c ****     udq.d = pid_contrl(sgp_curloop_d_pid,tar_id,i_dq.d);
 345              		.loc 1 281 5 view .LVU89
 281:../BLDCMotor/motorctrl.c ****     udq.d = pid_contrl(sgp_curloop_d_pid,tar_id,i_dq.d);
 346              		.loc 1 281 12 is_stmt 0 view .LVU90
 347 0086 94ED128A 		vldr.32	s16, [r4, #72]
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 14


 348              	.LVL26:
 282:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_real = i_dq.d;
 349              		.loc 1 282 5 is_stmt 1 view .LVU91
 282:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_real = i_dq.d;
 350              		.loc 1 282 13 is_stmt 0 view .LVU92
 351 008a 94ED100A 		vldr.32	s0, [r4, #64]
 352 008e 114B     		ldr	r3, .L19+4
 353 0090 1868     		ldr	r0, [r3]
 354 0092 FFF7FEFF 		bl	pid_contrl
 355              	.LVL27:
 282:../BLDCMotor/motorctrl.c ****     sg_motordebug.id_real = i_dq.d;
 356              		.loc 1 282 11 view .LVU93
 357 0096 85ED000A 		vstr.32	s0, [r5]
 283:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_D_out = udq.d;
 358              		.loc 1 283 5 is_stmt 1 view .LVU94
 283:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_D_out = udq.d;
 359              		.loc 1 283 33 is_stmt 0 view .LVU95
 360 009a 049B     		ldr	r3, [sp, #16]	@ float
 283:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_D_out = udq.d;
 361              		.loc 1 283 27 view .LVU96
 362 009c A363     		str	r3, [r4, #56]	@ float
 284:../BLDCMotor/motorctrl.c ****     udq.q =pid_contrl(sgp_curloop_q_pid,tar_iq,i_dq.q);
 363              		.loc 1 284 5 is_stmt 1 view .LVU97
 284:../BLDCMotor/motorctrl.c ****     udq.q =pid_contrl(sgp_curloop_q_pid,tar_iq,i_dq.q);
 364              		.loc 1 284 29 is_stmt 0 view .LVU98
 365 009e 84ED190A 		vstr.32	s0, [r4, #100]
 285:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_real = i_dq.q;
 366              		.loc 1 285 5 is_stmt 1 view .LVU99
 285:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_real = i_dq.q;
 367              		.loc 1 285 12 is_stmt 0 view .LVU100
 368 00a2 DDED050A 		vldr.32	s1, [sp, #20]
 369 00a6 B0EE480A 		vmov.f32	s0, s16
 370 00aa 0B4B     		ldr	r3, .L19+8
 371 00ac 1868     		ldr	r0, [r3]
 372 00ae FFF7FEFF 		bl	pid_contrl
 373              	.LVL28:
 285:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq_real = i_dq.q;
 374              		.loc 1 285 11 view .LVU101
 375 00b2 85ED010A 		vstr.32	s0, [r5, #4]
 286:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_Q_out = udq.q;
 376              		.loc 1 286 5 is_stmt 1 view .LVU102
 286:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_Q_out = udq.q;
 377              		.loc 1 286 33 is_stmt 0 view .LVU103
 378 00b6 059B     		ldr	r3, [sp, #20]	@ float
 286:../BLDCMotor/motorctrl.c ****     sg_motordebug.pid_Q_out = udq.q;
 379              		.loc 1 286 27 view .LVU104
 380 00b8 2365     		str	r3, [r4, #80]	@ float
 287:../BLDCMotor/motorctrl.c **** #endif
 381              		.loc 1 287 5 is_stmt 1 view .LVU105
 287:../BLDCMotor/motorctrl.c **** #endif
 382              		.loc 1 287 29 is_stmt 0 view .LVU106
 383 00ba 84ED160A 		vstr.32	s0, [r4, #88]
 289:../BLDCMotor/motorctrl.c **** #endif
 384              		.loc 1 289 5 is_stmt 1 view .LVU107
 291:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real)
 385              		.loc 1 291 1 is_stmt 0 view .LVU108
 386 00be 2846     		mov	r0, r5
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 15


 387 00c0 0CB0     		add	sp, sp, #48
 388              	.LCFI10:
 389              		.cfi_def_cfa_offset 40
 390              		@ sp needed
 391 00c2 BDEC028B 		vldm	sp!, {d8}
 392              	.LCFI11:
 393              		.cfi_restore 80
 394              		.cfi_restore 81
 395              		.cfi_def_cfa_offset 32
 396              	.LVL29:
 291:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real)
 397              		.loc 1 291 1 view .LVU109
 398 00c6 BDE87040 		pop	{r4, r5, r6, lr}
 399              	.LCFI12:
 400              		.cfi_restore 14
 401              		.cfi_restore 6
 402              		.cfi_restore 5
 403              		.cfi_restore 4
 404              		.cfi_def_cfa_offset 16
 405              	.LVL30:
 291:../BLDCMotor/motorctrl.c **** static float _speedloop(float tar,float real)
 406              		.loc 1 291 1 view .LVU110
 407 00ca 04B0     		add	sp, sp, #16
 408              	.LCFI13:
 409              		.cfi_def_cfa_offset 0
 410 00cc 7047     		bx	lr
 411              	.L20:
 412 00ce 00BF     		.align	2
 413              	.L19:
 414 00d0 00000000 		.word	.LANCHOR3
 415 00d4 00000000 		.word	.LANCHOR4
 416 00d8 00000000 		.word	.LANCHOR5
 417              		.cfi_endproc
 418              	.LFE338:
 420              		.section	.text.motor_set_pwm,"ax",%progbits
 421              		.align	1
 422              		.syntax unified
 423              		.thumb
 424              		.thumb_func
 426              	motor_set_pwm:
 427              	.LFB343:
 323:../BLDCMotor/motorctrl.c ****     tim_set_pwm(temp._a,temp._b,temp._c);
 428              		.loc 1 323 1 is_stmt 1 view -0
 429              		.cfi_startproc
 430              		@ args = 0, pretend = 0, frame = 16
 431              		@ frame_needed = 0, uses_anonymous_args = 0
 432 0000 00B5     		push	{lr}
 433              	.LCFI14:
 434              		.cfi_def_cfa_offset 4
 435              		.cfi_offset 14, -4
 436 0002 85B0     		sub	sp, sp, #20
 437              	.LCFI15:
 438              		.cfi_def_cfa_offset 24
 439 0004 8DED010A 		vstr.32	s0, [sp, #4]
 440 0008 CDED020A 		vstr.32	s1, [sp, #8]
 441 000c 8DED031A 		vstr.32	s2, [sp, #12]
 324:../BLDCMotor/motorctrl.c **** }
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 16


 442              		.loc 1 324 5 view .LVU112
 443 0010 FFF7FEFF 		bl	tim_set_pwm
 444              	.LVL31:
 325:../BLDCMotor/motorctrl.c **** 
 445              		.loc 1 325 1 is_stmt 0 view .LVU113
 446 0014 05B0     		add	sp, sp, #20
 447              	.LCFI16:
 448              		.cfi_def_cfa_offset 4
 449              		@ sp needed
 450 0016 5DF804FB 		ldr	pc, [sp], #4
 451              		.cfi_endproc
 452              	.LFE343:
 454              		.section	.text._get_angleoffset,"ax",%progbits
 455              		.align	1
 456              		.syntax unified
 457              		.thumb
 458              		.thumb_func
 460              	_get_angleoffset:
 461              	.LFB345:
 353:../BLDCMotor/motorctrl.c **** 
 354:../BLDCMotor/motorctrl.c **** 
 355:../BLDCMotor/motorctrl.c **** 
 356:../BLDCMotor/motorctrl.c **** 
 357:../BLDCMotor/motorctrl.c **** 
 358:../BLDCMotor/motorctrl.c **** static short _get_angleoffset(void)
 359:../BLDCMotor/motorctrl.c **** {
 462              		.loc 1 359 1 is_stmt 1 view -0
 463              		.cfi_startproc
 464              		@ args = 0, pretend = 0, frame = 48
 465              		@ frame_needed = 0, uses_anonymous_args = 0
 466 0000 00B5     		push	{lr}
 467              	.LCFI17:
 468              		.cfi_def_cfa_offset 4
 469              		.cfi_offset 14, -4
 470 0002 8FB0     		sub	sp, sp, #60
 471              	.LCFI18:
 472              		.cfi_def_cfa_offset 64
 360:../BLDCMotor/motorctrl.c ****     static short state_ = 1;
 473              		.loc 1 360 5 view .LVU115
 361:../BLDCMotor/motorctrl.c **** 
 362:../BLDCMotor/motorctrl.c ****     /*-----------ËÆæÁΩÆalpha/betaÂùêÊ†áÁ≥ª------------------*/
 363:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 474              		.loc 1 363 5 view .LVU116
 364:../BLDCMotor/motorctrl.c ****     dq_t udq = {0.4f,0.0f};
 475              		.loc 1 364 5 view .LVU117
 476              		.loc 1 364 10 is_stmt 0 view .LVU118
 477 0004 0023     		movs	r3, #0
 478 0006 0693     		str	r3, [sp, #24]
 479 0008 0793     		str	r3, [sp, #28]
 480 000a 0893     		str	r3, [sp, #32]
 481 000c 0993     		str	r3, [sp, #36]
 482 000e 274B     		ldr	r3, .L31
 483 0010 0693     		str	r3, [sp, #24]	@ float
 365:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 484              		.loc 1 365 5 is_stmt 1 view .LVU119
 366:../BLDCMotor/motorctrl.c ****     float theta;
 485              		.loc 1 366 5 view .LVU120
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 17


 367:../BLDCMotor/motorctrl.c ****     static short cnt_ = 0;
 486              		.loc 1 367 5 view .LVU121
 368:../BLDCMotor/motorctrl.c ****     int32_t Q15_theta = 0;
 487              		.loc 1 368 5 view .LVU122
 488              	.LVL32:
 369:../BLDCMotor/motorctrl.c ****     int32_t Q_thetaSum = 0;
 489              		.loc 1 369 5 view .LVU123
 370:../BLDCMotor/motorctrl.c ****     switch (state_)
 490              		.loc 1 370 5 view .LVU124
 491 0012 274B     		ldr	r3, .L31+4
 492 0014 B3F90030 		ldrsh	r3, [r3]
 493 0018 022B     		cmp	r3, #2
 494 001a 27D0     		beq	.L24
 495 001c 032B     		cmp	r3, #3
 496 001e 35D0     		beq	.L25
 497 0020 012B     		cmp	r3, #1
 498 0022 08D0     		beq	.L30
 499              	.LVL33:
 500              	.L26:
 371:../BLDCMotor/motorctrl.c ****     {
 372:../BLDCMotor/motorctrl.c ****     case 1://ËØªÂèñÂÅèÁßªÂÄº
 373:../BLDCMotor/motorctrl.c ****         uab = _2r_2s(udq,0.0f);
 374:../BLDCMotor/motorctrl.c ****         dut01 = _svpwm(uab.alpha,uab.beta);
 375:../BLDCMotor/motorctrl.c ****         motor_set_pwm(dut01);
 376:../BLDCMotor/motorctrl.c ****         state_ = 2;
 377:../BLDCMotor/motorctrl.c ****         break;
 378:../BLDCMotor/motorctrl.c **** 
 379:../BLDCMotor/motorctrl.c ****     case 2:
 380:../BLDCMotor/motorctrl.c ****         if (cnt_++ > 15000)
 381:../BLDCMotor/motorctrl.c ****         {
 382:../BLDCMotor/motorctrl.c ****             cnt_ = 0;
 383:../BLDCMotor/motorctrl.c ****             state_ = 3;
 384:../BLDCMotor/motorctrl.c ****             // dut01 = _svpwm(0.0f,00.0f);
 385:../BLDCMotor/motorctrl.c ****             // motor_set_pwm(dut01);             
 386:../BLDCMotor/motorctrl.c ****         }
 387:../BLDCMotor/motorctrl.c ****         break;
 388:../BLDCMotor/motorctrl.c **** 
 389:../BLDCMotor/motorctrl.c ****     case 3:
 390:../BLDCMotor/motorctrl.c ****    
 391:../BLDCMotor/motorctrl.c ****         // for (uint8_t i = 0; i < 10; i++)
 392:../BLDCMotor/motorctrl.c ****         // {
 393:../BLDCMotor/motorctrl.c ****         //     Q_thetaSum += ((int32_t*)(sensor_user_read(SENSOR_01,EN_SENSORDATA_COV)))[0];
 394:../BLDCMotor/motorctrl.c ****         // }
 395:../BLDCMotor/motorctrl.c ****         // Q15_theta = Q_thetaSum/10;
 396:../BLDCMotor/motorctrl.c ****         Q15_theta = ((int32_t*)(sensor_user_read(SENSOR_01,EN_SENSORDATA_COV)))[0];
 397:../BLDCMotor/motorctrl.c ****         theta = _IQ20toF(Q15_theta);
 398:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = theta;
 399:../BLDCMotor/motorctrl.c ****         state_ = 4;
 400:../BLDCMotor/motorctrl.c ****         break;
 401:../BLDCMotor/motorctrl.c **** 
 402:../BLDCMotor/motorctrl.c ****     case 4:
 403:../BLDCMotor/motorctrl.c **** 
 404:../BLDCMotor/motorctrl.c ****         break;             
 405:../BLDCMotor/motorctrl.c ****     default:
 406:../BLDCMotor/motorctrl.c ****         break;
 407:../BLDCMotor/motorctrl.c ****     }
 408:../BLDCMotor/motorctrl.c ****     if (state_ == 4)
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 18


 501              		.loc 1 408 5 view .LVU125
 502              		.loc 1 408 16 is_stmt 0 view .LVU126
 503 0024 224B     		ldr	r3, .L31+4
 504 0026 B3F90030 		ldrsh	r3, [r3]
 505              		.loc 1 408 8 view .LVU127
 506 002a 042B     		cmp	r3, #4
 507 002c 3CD0     		beq	.L28
 409:../BLDCMotor/motorctrl.c ****     {
 410:../BLDCMotor/motorctrl.c ****         return 0;
 411:../BLDCMotor/motorctrl.c ****     }
 412:../BLDCMotor/motorctrl.c ****     return 1;
 508              		.loc 1 412 12 view .LVU128
 509 002e 0120     		movs	r0, #1
 510              	.L27:
 413:../BLDCMotor/motorctrl.c **** }
 511              		.loc 1 413 1 view .LVU129
 512 0030 0FB0     		add	sp, sp, #60
 513              	.LCFI19:
 514              		.cfi_remember_state
 515              		.cfi_def_cfa_offset 4
 516              		@ sp needed
 517 0032 5DF804FB 		ldr	pc, [sp], #4
 518              	.LVL34:
 519              	.L30:
 520              	.LCFI20:
 521              		.cfi_restore_state
 373:../BLDCMotor/motorctrl.c ****         dut01 = _svpwm(uab.alpha,uab.beta);
 522              		.loc 1 373 9 is_stmt 1 view .LVU130
 373:../BLDCMotor/motorctrl.c ****         dut01 = _svpwm(uab.alpha,uab.beta);
 523              		.loc 1 373 15 is_stmt 0 view .LVU131
 524 0036 0023     		movs	r3, #0
 525 0038 0093     		str	r3, [sp]
 526 003a 06AB     		add	r3, sp, #24
 527 003c 0ECB     		ldm	r3, {r1, r2, r3}
 528 003e 9FED1D0A 		vldr.32	s0, .L31+8
 529 0042 0AA8     		add	r0, sp, #40
 530 0044 FFF7FEFF 		bl	_2r_2s
 531              	.LVL35:
 374:../BLDCMotor/motorctrl.c ****         motor_set_pwm(dut01);
 532              		.loc 1 374 9 is_stmt 1 view .LVU132
 374:../BLDCMotor/motorctrl.c ****         motor_set_pwm(dut01);
 533              		.loc 1 374 17 is_stmt 0 view .LVU133
 534 0048 DDED0B0A 		vldr.32	s1, [sp, #44]
 535 004c 9DED0A0A 		vldr.32	s0, [sp, #40]
 536 0050 FFF7FEFF 		bl	_svpwm
 537              	.LVL36:
 538 0054 8DED030A 		vstr.32	s0, [sp, #12]
 539 0058 CDED040A 		vstr.32	s1, [sp, #16]
 540 005c 8DED051A 		vstr.32	s2, [sp, #20]
 375:../BLDCMotor/motorctrl.c ****         state_ = 2;
 541              		.loc 1 375 9 is_stmt 1 view .LVU134
 542 0060 FFF7FEFF 		bl	motor_set_pwm
 543              	.LVL37:
 376:../BLDCMotor/motorctrl.c ****         break;
 544              		.loc 1 376 9 view .LVU135
 376:../BLDCMotor/motorctrl.c ****         break;
 545              		.loc 1 376 16 is_stmt 0 view .LVU136
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 19


 546 0064 124B     		ldr	r3, .L31+4
 547 0066 0222     		movs	r2, #2
 548 0068 1A80     		strh	r2, [r3]	@ movhi
 377:../BLDCMotor/motorctrl.c **** 
 549              		.loc 1 377 9 is_stmt 1 view .LVU137
 550 006a DBE7     		b	.L26
 551              	.L24:
 380:../BLDCMotor/motorctrl.c ****         {
 552              		.loc 1 380 9 view .LVU138
 380:../BLDCMotor/motorctrl.c ****         {
 553              		.loc 1 380 17 is_stmt 0 view .LVU139
 554 006c 124A     		ldr	r2, .L31+12
 555 006e B2F90030 		ldrsh	r3, [r2]
 556 0072 591C     		adds	r1, r3, #1
 557 0074 1180     		strh	r1, [r2]	@ movhi
 380:../BLDCMotor/motorctrl.c ****         {
 558              		.loc 1 380 12 view .LVU140
 559 0076 43F69822 		movw	r2, #15000
 560 007a 9342     		cmp	r3, r2
 561 007c D2DD     		ble	.L26
 382:../BLDCMotor/motorctrl.c ****             state_ = 3;
 562              		.loc 1 382 13 is_stmt 1 view .LVU141
 382:../BLDCMotor/motorctrl.c ****             state_ = 3;
 563              		.loc 1 382 18 is_stmt 0 view .LVU142
 564 007e 0E4B     		ldr	r3, .L31+12
 565 0080 0022     		movs	r2, #0
 566 0082 1A80     		strh	r2, [r3]	@ movhi
 383:../BLDCMotor/motorctrl.c ****             // dut01 = _svpwm(0.0f,00.0f);
 567              		.loc 1 383 13 is_stmt 1 view .LVU143
 383:../BLDCMotor/motorctrl.c ****             // dut01 = _svpwm(0.0f,00.0f);
 568              		.loc 1 383 20 is_stmt 0 view .LVU144
 569 0084 0A4B     		ldr	r3, .L31+4
 570 0086 0322     		movs	r2, #3
 571 0088 1A80     		strh	r2, [r3]	@ movhi
 572 008a CBE7     		b	.L26
 573              	.L25:
 396:../BLDCMotor/motorctrl.c ****         theta = _IQ20toF(Q15_theta);
 574              		.loc 1 396 9 is_stmt 1 view .LVU145
 396:../BLDCMotor/motorctrl.c ****         theta = _IQ20toF(Q15_theta);
 575              		.loc 1 396 33 is_stmt 0 view .LVU146
 576 008c 0121     		movs	r1, #1
 577 008e 0020     		movs	r0, #0
 578 0090 FFF7FEFF 		bl	sensor_user_read
 579              	.LVL38:
 397:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = theta;
 580              		.loc 1 397 9 is_stmt 1 view .LVU147
 397:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = theta;
 581              		.loc 1 397 17 is_stmt 0 view .LVU148
 582 0094 0068     		ldr	r0, [r0]
 583              	.LVL39:
 397:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = theta;
 584              		.loc 1 397 17 view .LVU149
 585 0096 FFF7FEFF 		bl	_IQ20toF
 586              	.LVL40:
 398:../BLDCMotor/motorctrl.c ****         state_ = 4;
 587              		.loc 1 398 9 is_stmt 1 view .LVU150
 398:../BLDCMotor/motorctrl.c ****         state_ = 4;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 20


 588              		.loc 1 398 27 is_stmt 0 view .LVU151
 589 009a 084B     		ldr	r3, .L31+16
 590 009c 83ED000A 		vstr.32	s0, [r3]
 399:../BLDCMotor/motorctrl.c ****         break;
 591              		.loc 1 399 9 is_stmt 1 view .LVU152
 399:../BLDCMotor/motorctrl.c ****         break;
 592              		.loc 1 399 16 is_stmt 0 view .LVU153
 593 00a0 034B     		ldr	r3, .L31+4
 594 00a2 0422     		movs	r2, #4
 595 00a4 1A80     		strh	r2, [r3]	@ movhi
 400:../BLDCMotor/motorctrl.c **** 
 596              		.loc 1 400 9 is_stmt 1 view .LVU154
 597 00a6 BDE7     		b	.L26
 598              	.LVL41:
 599              	.L28:
 410:../BLDCMotor/motorctrl.c ****     }
 600              		.loc 1 410 16 is_stmt 0 view .LVU155
 601 00a8 0020     		movs	r0, #0
 602 00aa C1E7     		b	.L27
 603              	.L32:
 604              		.align	2
 605              	.L31:
 606 00ac CDCCCC3E 		.word	1053609165
 607 00b0 00000000 		.word	.LANCHOR6
 608 00b4 00000000 		.word	0
 609 00b8 00000000 		.word	.LANCHOR7
 610 00bc 00000000 		.word	.LANCHOR8
 611              		.cfi_endproc
 612              	.LFE345:
 614              		.global	__aeabi_f2d
 615              		.global	__aeabi_d2f
 616              		.section	.text._limit_voltagecircle,"ax",%progbits
 617              		.align	1
 618              		.global	_limit_voltagecircle
 619              		.syntax unified
 620              		.thumb
 621              		.thumb_func
 623              	_limit_voltagecircle:
 624              	.LVL42:
 625              	.LFB337:
 239:../BLDCMotor/motorctrl.c ****     float max_voltage = D_MAX_VAL;// ËøôÈáåÂ∫îËØ•ÊòØ‰Ω†ÁöÑÊúÄÂ§ßÂÖÅËÆ∏ÁîµÂéãÂÄºÔºå‰æãÂ¶ÇÂØπ‰∫é‰∏âÁõ
 626              		.loc 1 239 49 is_stmt 1 view -0
 627              		.cfi_startproc
 628              		@ args = 20, pretend = 16, frame = 0
 629              		@ frame_needed = 0, uses_anonymous_args = 0
 239:../BLDCMotor/motorctrl.c ****     float max_voltage = D_MAX_VAL;// ËøôÈáåÂ∫îËØ•ÊòØ‰Ω†ÁöÑÊúÄÂ§ßÂÖÅËÆ∏ÁîµÂéãÂÄºÔºå‰æãÂ¶ÇÂØπ‰∫é‰∏âÁõ
 630              		.loc 1 239 49 is_stmt 0 view .LVU157
 631 0000 84B0     		sub	sp, sp, #16
 632              	.LCFI21:
 633              		.cfi_def_cfa_offset 16
 634 0002 10B5     		push	{r4, lr}
 635              	.LCFI22:
 636              		.cfi_def_cfa_offset 24
 637              		.cfi_offset 4, -24
 638              		.cfi_offset 14, -20
 639 0004 2DED028B 		vpush.64	{d8}
 640              	.LCFI23:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 21


 641              		.cfi_def_cfa_offset 32
 642              		.cfi_offset 80, -32
 643              		.cfi_offset 81, -28
 644 0008 0446     		mov	r4, r0
 645 000a 05A8     		add	r0, sp, #20
 646 000c 80E80E00 		stm	r0, {r1, r2, r3}
 240:../BLDCMotor/motorctrl.c ****     float voltage_magnitude = sqrt(raw_uab.alpha * raw_uab.alpha + raw_uab.beta * raw_uab.beta); //
 647              		.loc 1 240 5 is_stmt 1 view .LVU158
 648              	.LVL43:
 241:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 649              		.loc 1 241 5 view .LVU159
 241:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 650              		.loc 1 241 43 is_stmt 0 view .LVU160
 651 0010 DDED058A 		vldr.32	s17, [sp, #20]
 241:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 652              		.loc 1 241 50 view .LVU161
 653 0014 28EEA87A 		vmul.f32	s14, s17, s17
 241:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 654              		.loc 1 241 75 view .LVU162
 655 0018 9DED068A 		vldr.32	s16, [sp, #24]
 241:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 656              		.loc 1 241 81 view .LVU163
 657 001c 68EE087A 		vmul.f32	s15, s16, s16
 241:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 658              		.loc 1 241 31 view .LVU164
 659 0020 77EE277A 		vadd.f32	s15, s14, s15
 660 0024 17EE900A 		vmov	r0, s15
 661              	.LVL44:
 241:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 662              		.loc 1 241 31 view .LVU165
 663 0028 FFF7FEFF 		bl	__aeabi_f2d
 664              	.LVL45:
 665 002c 41EC100B 		vmov	d0, r0, r1
 666 0030 FFF7FEFF 		bl	sqrt
 667              	.LVL46:
 668 0034 51EC100B 		vmov	r0, r1, d0
 241:../BLDCMotor/motorctrl.c ****     alpbet_t uab;
 669              		.loc 1 241 11 view .LVU166
 670 0038 FFF7FEFF 		bl	__aeabi_d2f
 671              	.LVL47:
 672 003c 07EE900A 		vmov	s15, r0
 673              	.LVL48:
 242:../BLDCMotor/motorctrl.c ****     if (voltage_magnitude > max_voltage) {  
 674              		.loc 1 242 5 is_stmt 1 view .LVU167
 243:../BLDCMotor/motorctrl.c ****         // Â¶ÇÊûúÁü¢ÈáèÈïøÂ∫¶Ë∂ÖËøáÊúÄÂ§ßÁîµÂéãÔºåÂàôÊåâÊØî‰æãÁº©ÊîæÁü¢Èáè‰ª•‰ΩøÂÖ∂ËêΩÂú®ÁîµÂéãÁü¢È
 675              		.loc 1 243 5 view .LVU168
 243:../BLDCMotor/motorctrl.c ****         // Â¶ÇÊûúÁü¢ÈáèÈïøÂ∫¶Ë∂ÖËøáÊúÄÂ§ßÁîµÂéãÔºåÂàôÊåâÊØî‰æãÁº©ÊîæÁü¢Èáè‰ª•‰ΩøÂÖ∂ËêΩÂú®ÁîµÂéãÁü¢È
 676              		.loc 1 243 8 is_stmt 0 view .LVU169
 677 0040 B1EE007A 		vmov.f32	s14, #4.0e+0
 678 0044 F4EEC77A 		vcmpe.f32	s15, s14
 679 0048 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 680 004c 12DD     		ble	.L38
 681              	.LBB2:
 245:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha * scale_factor;  
 682              		.loc 1 245 9 is_stmt 1 view .LVU170
 245:../BLDCMotor/motorctrl.c ****         uab.alpha = raw_uab.alpha * scale_factor;  
 683              		.loc 1 245 15 is_stmt 0 view .LVU171
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 22


 684 004e F0EE476A 		vmov.f32	s13, s14
 685 0052 86EEA77A 		vdiv.f32	s14, s13, s15
 686              	.LVL49:
 246:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 687              		.loc 1 246 9 is_stmt 1 view .LVU172
 246:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 688              		.loc 1 246 35 is_stmt 0 view .LVU173
 689 0056 68EE878A 		vmul.f32	s17, s17, s14
 246:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta * scale_factor;  
 690              		.loc 1 246 19 view .LVU174
 691 005a C4ED008A 		vstr.32	s17, [r4]
 247:../BLDCMotor/motorctrl.c ****     } else {  
 692              		.loc 1 247 9 is_stmt 1 view .LVU175
 247:../BLDCMotor/motorctrl.c ****     } else {  
 693              		.loc 1 247 33 is_stmt 0 view .LVU176
 694 005e 28EE078A 		vmul.f32	s16, s16, s14
 247:../BLDCMotor/motorctrl.c ****     } else {  
 695              		.loc 1 247 18 view .LVU177
 696 0062 84ED018A 		vstr.32	s16, [r4, #4]
 697              	.LVL50:
 698              	.L33:
 247:../BLDCMotor/motorctrl.c ****     } else {  
 699              		.loc 1 247 18 view .LVU178
 700              	.LBE2:
 254:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 701              		.loc 1 254 1 view .LVU179
 702 0066 2046     		mov	r0, r4
 703              	.LVL51:
 254:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 704              		.loc 1 254 1 view .LVU180
 705 0068 BDEC028B 		vldm	sp!, {d8}
 706              	.LCFI24:
 707              		.cfi_remember_state
 708              		.cfi_restore 80
 709              		.cfi_restore 81
 710              		.cfi_def_cfa_offset 24
 711 006c BDE81040 		pop	{r4, lr}
 712              	.LCFI25:
 713              		.cfi_restore 14
 714              		.cfi_restore 4
 715              		.cfi_def_cfa_offset 16
 716              	.LVL52:
 254:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 717              		.loc 1 254 1 view .LVU181
 718 0070 04B0     		add	sp, sp, #16
 719              	.LCFI26:
 720              		.cfi_def_cfa_offset 0
 721 0072 7047     		bx	lr
 722              	.LVL53:
 723              	.L38:
 724              	.LCFI27:
 725              		.cfi_restore_state
 250:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta;  
 726              		.loc 1 250 9 is_stmt 1 view .LVU182
 250:../BLDCMotor/motorctrl.c ****         uab.beta = raw_uab.beta;  
 727              		.loc 1 250 19 is_stmt 0 view .LVU183
 728 0074 C4ED008A 		vstr.32	s17, [r4]
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 23


 251:../BLDCMotor/motorctrl.c ****     }
 729              		.loc 1 251 9 is_stmt 1 view .LVU184
 251:../BLDCMotor/motorctrl.c ****     }
 730              		.loc 1 251 18 is_stmt 0 view .LVU185
 731 0078 84ED018A 		vstr.32	s16, [r4, #4]
 253:../BLDCMotor/motorctrl.c **** }
 732              		.loc 1 253 5 is_stmt 1 view .LVU186
 253:../BLDCMotor/motorctrl.c **** }
 733              		.loc 1 253 12 is_stmt 0 view .LVU187
 734 007c F3E7     		b	.L33
 735              		.cfi_endproc
 736              	.LFE337:
 738              		.section	.rodata._50uscycle_process.str1.4,"aMS",%progbits,1
 739              		.align	2
 740              	.LC0:
 741 0000 656E7465 		.ascii	"enter IDLE\015\012\000"
 741      72204944 
 741      4C450D0A 
 741      00
 742              		.section	.text._50uscycle_process,"ax",%progbits
 743              		.align	1
 744              		.global	_50uscycle_process
 745              		.syntax unified
 746              		.thumb
 747              		.thumb_func
 749              	_50uscycle_process:
 750              	.LVL54:
 751              	.LFB336:
 103:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 752              		.loc 1 103 1 is_stmt 1 view -0
 753              		.cfi_startproc
 754              		@ args = 0, pretend = 0, frame = 112
 755              		@ frame_needed = 0, uses_anonymous_args = 0
 103:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 756              		.loc 1 103 1 is_stmt 0 view .LVU189
 757 0000 30B5     		push	{r4, r5, lr}
 758              	.LCFI28:
 759              		.cfi_def_cfa_offset 12
 760              		.cfi_offset 4, -12
 761              		.cfi_offset 5, -8
 762              		.cfi_offset 14, -4
 763 0002 2DED028B 		vpush.64	{d8}
 764              	.LCFI29:
 765              		.cfi_def_cfa_offset 20
 766              		.cfi_offset 80, -20
 767              		.cfi_offset 81, -16
 768 0006 A1B0     		sub	sp, sp, #132
 769              	.LCFI30:
 770              		.cfi_def_cfa_offset 152
 104:../BLDCMotor/motorctrl.c ****     int32_t Q15_Mechtheta;    
 771              		.loc 1 104 5 is_stmt 1 view .LVU190
 105:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 772              		.loc 1 105 5 view .LVU191
 106:../BLDCMotor/motorctrl.c ****     abc_t i_abc;
 773              		.loc 1 106 5 view .LVU192
 107:../BLDCMotor/motorctrl.c ****     dq_t udq;
 774              		.loc 1 107 5 view .LVU193
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 24


 108:../BLDCMotor/motorctrl.c **** 
 775              		.loc 1 108 5 view .LVU194
 112:../BLDCMotor/motorctrl.c ****     int32_t a1,b1,c1;
 776              		.loc 1 112 5 view .LVU195
 113:../BLDCMotor/motorctrl.c ****     a1 = abc_vale[0] - A_ADCCHANNL_OFFSET;
 777              		.loc 1 113 5 view .LVU196
 114:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 778              		.loc 1 114 5 view .LVU197
 114:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 779              		.loc 1 114 18 is_stmt 0 view .LVU198
 780 0008 0368     		ldr	r3, [r0]
 114:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 781              		.loc 1 114 22 view .LVU199
 782 000a A3F64903 		subw	r3, r3, #2121
 783              	.LVL55:
 115:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 784              		.loc 1 115 5 is_stmt 1 view .LVU200
 115:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 785              		.loc 1 115 18 is_stmt 0 view .LVU201
 786 000e 4268     		ldr	r2, [r0, #4]
 115:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 787              		.loc 1 115 22 view .LVU202
 788 0010 A2F65A02 		subw	r2, r2, #2138
 789 0014 08EE102A 		vmov	s16, r2	@ int
 790              	.LVL56:
 116:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ia = a1;
 791              		.loc 1 116 5 is_stmt 1 view .LVU203
 117:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 792              		.loc 1 117 5 view .LVU204
 117:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 793              		.loc 1 117 24 is_stmt 0 view .LVU205
 794 0018 824A     		ldr	r2, .L52
 795              	.LVL57:
 117:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 796              		.loc 1 117 24 view .LVU206
 797 001a D361     		str	r3, [r2, #28]
 798              	.LVL58:
 118:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 799              		.loc 1 118 5 is_stmt 1 view .LVU207
 118:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 800              		.loc 1 118 10 is_stmt 0 view .LVU208
 801 001c 07EE903A 		vmov	s15, r3	@ int
 802 0020 B8EEE70A 		vcvt.f32.s32	s0, s15
 803              	.LVL59:
 118:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 804              		.loc 1 118 8 view .LVU209
 805 0024 DFED807A 		vldr.32	s15, .L52+4
 806 0028 20EE270A 		vmul.f32	s0, s0, s15
 807              	.LVL60:
 119:../BLDCMotor/motorctrl.c ****     // Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 808              		.loc 1 119 5 is_stmt 1 view .LVU210
 119:../BLDCMotor/motorctrl.c ****     // Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 809              		.loc 1 119 10 is_stmt 0 view .LVU211
 810 002c B8EEC88A 		vcvt.f32.s32	s16, s16
 811              	.LVL61:
 119:../BLDCMotor/motorctrl.c ****     // Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 812              		.loc 1 119 8 view .LVU212
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 25


 813 0030 DFED7E7A 		vldr.32	s15, .L52+8
 814 0034 28EE278A 		vmul.f32	s16, s16, s15
 815              	.LVL62:
 121:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 816              		.loc 1 121 5 is_stmt 1 view .LVU213
 121:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 817              		.loc 1 121 10 is_stmt 0 view .LVU214
 818 0038 F1EE408A 		vneg.f32	s17, s0
 121:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 819              		.loc 1 121 8 view .LVU215
 820 003c 78EEC88A 		vsub.f32	s17, s17, s16
 821              	.LVL63:
 122:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 822              		.loc 1 122 5 is_stmt 1 view .LVU216
 122:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 823              		.loc 1 122 15 is_stmt 0 view .LVU217
 824 0040 7B4C     		ldr	r4, .L52+12
 825 0042 2046     		mov	r0, r4
 826              	.LVL64:
 122:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 827              		.loc 1 122 15 view .LVU218
 828 0044 FFF7FEFF 		bl	lowfilter_cale
 829              	.LVL65:
 122:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 830              		.loc 1 122 13 view .LVU219
 831 0048 8DED140A 		vstr.32	s0, [sp, #80]
 123:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 832              		.loc 1 123 5 is_stmt 1 view .LVU220
 123:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 833              		.loc 1 123 15 is_stmt 0 view .LVU221
 834 004c B0EE480A 		vmov.f32	s0, s16
 835 0050 04F10800 		add	r0, r4, #8
 836 0054 FFF7FEFF 		bl	lowfilter_cale
 837              	.LVL66:
 123:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 838              		.loc 1 123 13 view .LVU222
 839 0058 8DED150A 		vstr.32	s0, [sp, #84]
 124:../BLDCMotor/motorctrl.c **** 
 840              		.loc 1 124 5 is_stmt 1 view .LVU223
 124:../BLDCMotor/motorctrl.c **** 
 841              		.loc 1 124 15 is_stmt 0 view .LVU224
 842 005c B0EE680A 		vmov.f32	s0, s17
 843 0060 04F11000 		add	r0, r4, #16
 844 0064 FFF7FEFF 		bl	lowfilter_cale
 845              	.LVL67:
 124:../BLDCMotor/motorctrl.c **** 
 846              		.loc 1 124 13 view .LVU225
 847 0068 8DED160A 		vstr.32	s0, [sp, #88]
 128:../BLDCMotor/motorctrl.c ****         OFFSET=0,
 848              		.loc 1 128 5 is_stmt 1 view .LVU226
 135:../BLDCMotor/motorctrl.c ****     switch (state0_)
 849              		.loc 1 135 5 view .LVU227
 136:../BLDCMotor/motorctrl.c ****     {
 850              		.loc 1 136 5 view .LVU228
 851 006c 714B     		ldr	r3, .L52+16
 852 006e B3F90030 		ldrsh	r3, [r3]
 853 0072 042B     		cmp	r3, #4
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 26


 854 0074 7CD8     		bhi	.L40
 855 0076 DFE803F0 		tbb	[pc, r3]
 856              	.L43:
 857 007a 03       		.byte	(.L46-.L43)/2
 858 007b 7B       		.byte	(.L40-.L43)/2
 859 007c 7F       		.byte	(.L45-.L43)/2
 860 007d 24       		.byte	(.L44-.L43)/2
 861 007e 0E       		.byte	(.L42-.L43)/2
 862 007f 00       		.p2align 1
 863              	.L46:
 864              	.LBB3:
 139:../BLDCMotor/motorctrl.c ****             {
 865              		.loc 1 139 13 view .LVU229
 139:../BLDCMotor/motorctrl.c ****             {
 866              		.loc 1 139 17 is_stmt 0 view .LVU230
 867 0080 FFF7FEFF 		bl	_get_angleoffset
 868              	.LVL68:
 139:../BLDCMotor/motorctrl.c ****             {
 869              		.loc 1 139 16 view .LVU231
 870 0084 0028     		cmp	r0, #0
 871 0086 73D1     		bne	.L40
 143:../BLDCMotor/motorctrl.c ****             state0_ = IDLE;
 872              		.loc 1 143 13 is_stmt 1 view .LVU232
 873 0088 6B49     		ldr	r1, .L52+20
 874 008a FFF7FEFF 		bl	SEGGER_RTT_printf
 875              	.LVL69:
 144:../BLDCMotor/motorctrl.c ****             break;
 876              		.loc 1 144 13 view .LVU233
 144:../BLDCMotor/motorctrl.c ****             break;
 877              		.loc 1 144 21 is_stmt 0 view .LVU234
 878 008e 694B     		ldr	r3, .L52+16
 879 0090 0422     		movs	r2, #4
 880 0092 1A80     		strh	r2, [r3]	@ movhi
 145:../BLDCMotor/motorctrl.c ****         case IDLE:
 881              		.loc 1 145 13 is_stmt 1 view .LVU235
 882 0094 6CE0     		b	.L40
 883              	.L42:
 147:../BLDCMotor/motorctrl.c ****             {
 884              		.loc 1 147 13 view .LVU236
 147:../BLDCMotor/motorctrl.c ****             {
 885              		.loc 1 147 30 is_stmt 0 view .LVU237
 886 0096 634B     		ldr	r3, .L52
 887 0098 D3ED107A 		vldr.32	s15, [r3, #64]
 147:../BLDCMotor/motorctrl.c ****             {
 888              		.loc 1 147 16 view .LVU238
 889 009c F5EE407A 		vcmp.f32	s15, #0
 890 00a0 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 891 00a4 06D1     		bne	.L47
 147:../BLDCMotor/motorctrl.c ****             {
 892              		.loc 1 147 64 discriminator 1 view .LVU239
 893 00a6 D3ED127A 		vldr.32	s15, [r3, #72]
 147:../BLDCMotor/motorctrl.c ****             {
 894              		.loc 1 147 48 discriminator 1 view .LVU240
 895 00aa F5EE407A 		vcmp.f32	s15, #0
 896 00ae F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 897 00b2 5DD0     		beq	.L40
 898              	.L47:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 27


 149:../BLDCMotor/motorctrl.c ****                 state0_ = SPEEDLOOP;
 899              		.loc 1 149 17 is_stmt 1 view .LVU241
 149:../BLDCMotor/motorctrl.c ****                 state0_ = SPEEDLOOP;
 900              		.loc 1 149 41 is_stmt 0 view .LVU242
 901 00b4 5B4B     		ldr	r3, .L52
 902 00b6 0022     		movs	r2, #0
 903 00b8 1A67     		str	r2, [r3, #112]	@ float
 150:../BLDCMotor/motorctrl.c ****             }
 904              		.loc 1 150 17 is_stmt 1 view .LVU243
 150:../BLDCMotor/motorctrl.c ****             }
 905              		.loc 1 150 25 is_stmt 0 view .LVU244
 906 00ba 5E4B     		ldr	r3, .L52+16
 907 00bc 0322     		movs	r2, #3
 908 00be 1A80     		strh	r2, [r3]	@ movhi
 909 00c0 56E0     		b	.L40
 910              	.L44:
 154:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(Q15_Mechtheta);
 911              		.loc 1 154 13 is_stmt 1 view .LVU245
 154:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(Q15_Mechtheta);
 912              		.loc 1 154 40 is_stmt 0 view .LVU246
 913 00c2 0121     		movs	r1, #1
 914 00c4 0020     		movs	r0, #0
 915 00c6 FFF7FEFF 		bl	sensor_user_read
 916              	.LVL70:
 155:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 917              		.loc 1 155 13 is_stmt 1 view .LVU247
 155:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 918              		.loc 1 155 26 is_stmt 0 view .LVU248
 919 00ca 0068     		ldr	r0, [r0]
 920              	.LVL71:
 155:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 921              		.loc 1 155 26 view .LVU249
 922 00cc FFF7FEFF 		bl	_IQ20toF
 923              	.LVL72:
 155:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 924              		.loc 1 155 26 view .LVU250
 925 00d0 B0EE408A 		vmov.f32	s16, s0
 926              	.LVL73:
 156:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 927              		.loc 1 156 13 is_stmt 1 view .LVU251
 156:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 928              		.loc 1 156 40 is_stmt 0 view .LVU252
 929 00d4 FFF7FEFF 		bl	motor_speedcale
 930              	.LVL74:
 156:../BLDCMotor/motorctrl.c ****             elec_theta = mech_theta * MOTOR_PAIR;
 931              		.loc 1 156 38 view .LVU253
 932 00d8 524C     		ldr	r4, .L52
 933 00da 84ED110A 		vstr.32	s0, [r4, #68]
 157:../BLDCMotor/motorctrl.c ****             elec_theta -= sg_MecThetaOffset;
 934              		.loc 1 157 13 is_stmt 1 view .LVU254
 157:../BLDCMotor/motorctrl.c ****             elec_theta -= sg_MecThetaOffset;
 935              		.loc 1 157 24 is_stmt 0 view .LVU255
 936 00de B1EE0C0A 		vmov.f32	s0, #7.0e+0
 937 00e2 28EE008A 		vmul.f32	s16, s16, s0
 938              	.LVL75:
 158:../BLDCMotor/motorctrl.c **** 
 939              		.loc 1 158 13 is_stmt 1 view .LVU256
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 28


 940 00e6 554B     		ldr	r3, .L52+24
 941 00e8 93ED000A 		vldr.32	s0, [r3]
 942              	.LVL76:
 160:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 943              		.loc 1 160 13 view .LVU257
 160:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 944              		.loc 1 160 26 is_stmt 0 view .LVU258
 945 00ec 38EE400A 		vsub.f32	s0, s16, s0
 946              	.LVL77:
 160:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 947              		.loc 1 160 26 view .LVU259
 948 00f0 FFF7FEFF 		bl	_normalize_angle
 949              	.LVL78:
 160:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,elec_theta);
 950              		.loc 1 160 26 view .LVU260
 951 00f4 B0EE408A 		vmov.f32	s16, s0
 952              	.LVL79:
 161:../BLDCMotor/motorctrl.c **** 
 953              		.loc 1 161 13 is_stmt 1 view .LVU261
 954 00f8 04AD     		add	r5, sp, #16
 955 00fa 17AB     		add	r3, sp, #92
 956 00fc 93E80700 		ldm	r3, {r0, r1, r2}
 957 0100 8DE80700 		stm	sp, {r0, r1, r2}
 958 0104 14AB     		add	r3, sp, #80
 959 0106 0ECB     		ldm	r3, {r1, r2, r3}
 960 0108 2846     		mov	r0, r5
 961 010a FFF7FEFF 		bl	_currmentloop
 962              	.LVL80:
 163:../BLDCMotor/motorctrl.c ****             static unsigned short cnt = 0;
 963              		.loc 1 163 13 view .LVU262
 163:../BLDCMotor/motorctrl.c ****             static unsigned short cnt = 0;
 964              		.loc 1 163 37 is_stmt 0 view .LVU263
 965 010e 84ED1C8A 		vstr.32	s16, [r4, #112]
 164:../BLDCMotor/motorctrl.c ****             if (cnt++ < 200)
 966              		.loc 1 164 13 is_stmt 1 view .LVU264
 165:../BLDCMotor/motorctrl.c ****             {
 967              		.loc 1 165 13 view .LVU265
 165:../BLDCMotor/motorctrl.c ****             {
 968              		.loc 1 165 20 is_stmt 0 view .LVU266
 969 0112 4B4B     		ldr	r3, .L52+28
 970 0114 1A88     		ldrh	r2, [r3]
 971 0116 0132     		adds	r2, r2, #1
 972 0118 1A80     		strh	r2, [r3]	@ movhi
 168:../BLDCMotor/motorctrl.c ****             cnt = 0;
 973              		.loc 1 168 13 is_stmt 1 view .LVU267
 169:../BLDCMotor/motorctrl.c ****             udq.q = 0.3f;//pid_contrl(sgp_speed_pid,300,sg_motordebug.real_speed);
 974              		.loc 1 169 13 view .LVU268
 169:../BLDCMotor/motorctrl.c ****             udq.q = 0.3f;//pid_contrl(sgp_speed_pid,300,sg_motordebug.real_speed);
 975              		.loc 1 169 17 is_stmt 0 view .LVU269
 976 011a 0022     		movs	r2, #0
 977 011c 1A80     		strh	r2, [r3]	@ movhi
 170:../BLDCMotor/motorctrl.c ****             udq.d = 0;
 978              		.loc 1 170 13 is_stmt 1 view .LVU270
 170:../BLDCMotor/motorctrl.c ****             udq.d = 0;
 979              		.loc 1 170 19 is_stmt 0 view .LVU271
 980 011e 494B     		ldr	r3, .L52+32
 981 0120 1193     		str	r3, [sp, #68]	@ float
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 29


 171:../BLDCMotor/motorctrl.c ****             alpbet_t uab;
 982              		.loc 1 171 13 is_stmt 1 view .LVU272
 171:../BLDCMotor/motorctrl.c ****             alpbet_t uab;
 983              		.loc 1 171 19 is_stmt 0 view .LVU273
 984 0122 0023     		movs	r3, #0
 985 0124 1093     		str	r3, [sp, #64]	@ float
 172:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, elec_theta - PI_2);  
 986              		.loc 1 172 13 is_stmt 1 view .LVU274
 173:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 987              		.loc 1 173 13 view .LVU275
 173:../BLDCMotor/motorctrl.c ****             uab = _limit_voltagecircle(uab);
 988              		.loc 1 173 19 is_stmt 0 view .LVU276
 989 0126 0CAC     		add	r4, sp, #48
 990 0128 139B     		ldr	r3, [sp, #76]
 991 012a 0093     		str	r3, [sp]
 992 012c 10AB     		add	r3, sp, #64
 993 012e 0ECB     		ldm	r3, {r1, r2, r3}
 994 0130 9FED450A 		vldr.32	s0, .L52+36
 995 0134 38EE400A 		vsub.f32	s0, s16, s0
 996 0138 2046     		mov	r0, r4
 997 013a FFF7FEFF 		bl	_2r_2s
 998              	.LVL81:
 174:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 999              		.loc 1 174 13 is_stmt 1 view .LVU277
 174:../BLDCMotor/motorctrl.c ****             motor_set_pwm(_svpwm(uab.alpha,uab.beta)); 
 1000              		.loc 1 174 19 is_stmt 0 view .LVU278
 1001 013e 0F9B     		ldr	r3, [sp, #60]
 1002 0140 0093     		str	r3, [sp]
 1003 0142 94E80E00 		ldm	r4, {r1, r2, r3}
 1004 0146 2846     		mov	r0, r5
 1005 0148 FFF7FEFF 		bl	_limit_voltagecircle
 1006              	.LVL82:
 1007 014c 95E80F00 		ldm	r5, {r0, r1, r2, r3}
 1008 0150 84E80F00 		stm	r4, {r0, r1, r2, r3}
 175:../BLDCMotor/motorctrl.c ****             break;
 1009              		.loc 1 175 13 is_stmt 1 view .LVU279
 1010 0154 DDED0D0A 		vldr.32	s1, [sp, #52]
 1011 0158 9DED0C0A 		vldr.32	s0, [sp, #48]
 1012 015c FFF7FEFF 		bl	_svpwm
 1013              	.LVL83:
 1014 0160 8DED1D0A 		vstr.32	s0, [sp, #116]
 1015 0164 CDED1E0A 		vstr.32	s1, [sp, #120]
 1016 0168 8DED1F1A 		vstr.32	s2, [sp, #124]
 1017 016c FFF7FEFF 		bl	motor_set_pwm
 1018              	.LVL84:
 176:../BLDCMotor/motorctrl.c ****         case CLOSELOOP:
 1019              		.loc 1 176 13 view .LVU280
 1020              	.L40:
 176:../BLDCMotor/motorctrl.c ****         case CLOSELOOP:
 1021              		.loc 1 176 13 is_stmt 0 view .LVU281
 1022              	.LBE3:
 235:../BLDCMotor/motorctrl.c **** 
 1023              		.loc 1 235 1 view .LVU282
 1024 0170 21B0     		add	sp, sp, #132
 1025              	.LCFI31:
 1026              		.cfi_remember_state
 1027              		.cfi_def_cfa_offset 20
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 30


 1028              		@ sp needed
 1029 0172 BDEC028B 		vldm	sp!, {d8}
 1030              	.LCFI32:
 1031              		.cfi_restore 80
 1032              		.cfi_restore 81
 1033              		.cfi_def_cfa_offset 12
 1034 0176 30BD     		pop	{r4, r5, pc}
 1035              	.LVL85:
 1036              	.L45:
 1037              	.LCFI33:
 1038              		.cfi_restore_state
 1039              	.LBB5:
 1040              	.LBB4:
 180:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(Q15_Mechtheta);
 1041              		.loc 1 180 13 is_stmt 1 view .LVU283
 180:../BLDCMotor/motorctrl.c ****             mech_theta = _IQ20toF(Q15_Mechtheta);
 1042              		.loc 1 180 40 is_stmt 0 view .LVU284
 1043 0178 0121     		movs	r1, #1
 1044 017a 0020     		movs	r0, #0
 1045 017c FFF7FEFF 		bl	sensor_user_read
 1046              	.LVL86:
 181:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 1047              		.loc 1 181 13 is_stmt 1 view .LVU285
 181:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 1048              		.loc 1 181 26 is_stmt 0 view .LVU286
 1049 0180 0068     		ldr	r0, [r0]
 1050              	.LVL87:
 181:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 1051              		.loc 1 181 26 view .LVU287
 1052 0182 FFF7FEFF 		bl	_IQ20toF
 1053              	.LVL88:
 181:../BLDCMotor/motorctrl.c ****             sg_motordebug.real_speed = motor_speedcale(mech_theta);//ÊØè2msÊõ¥Êñ∞‰∏ÄÊ¨°
 1054              		.loc 1 181 26 view .LVU288
 1055 0186 B0EE408A 		vmov.f32	s16, s0
 1056              	.LVL89:
 182:../BLDCMotor/motorctrl.c **** 
 1057              		.loc 1 182 13 is_stmt 1 view .LVU289
 182:../BLDCMotor/motorctrl.c **** 
 1058              		.loc 1 182 40 is_stmt 0 view .LVU290
 1059 018a FFF7FEFF 		bl	motor_speedcale
 1060              	.LVL90:
 182:../BLDCMotor/motorctrl.c **** 
 1061              		.loc 1 182 38 view .LVU291
 1062 018e 254C     		ldr	r4, .L52
 1063 0190 84ED110A 		vstr.32	s0, [r4, #68]
 184:../BLDCMotor/motorctrl.c ****             elec_theta -= sg_MecThetaOffset;
 1064              		.loc 1 184 13 is_stmt 1 view .LVU292
 184:../BLDCMotor/motorctrl.c ****             elec_theta -= sg_MecThetaOffset;
 1065              		.loc 1 184 24 is_stmt 0 view .LVU293
 1066 0194 B1EE0C0A 		vmov.f32	s0, #7.0e+0
 1067 0198 28EE008A 		vmul.f32	s16, s16, s0
 1068              	.LVL91:
 185:../BLDCMotor/motorctrl.c **** 
 1069              		.loc 1 185 13 is_stmt 1 view .LVU294
 1070 019c 274B     		ldr	r3, .L52+24
 1071 019e 93ED000A 		vldr.32	s0, [r3]
 1072              	.LVL92:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 31


 187:../BLDCMotor/motorctrl.c ****             sg_motordebug.ele_angle = elec_theta;
 1073              		.loc 1 187 13 view .LVU295
 187:../BLDCMotor/motorctrl.c ****             sg_motordebug.ele_angle = elec_theta;
 1074              		.loc 1 187 26 is_stmt 0 view .LVU296
 1075 01a2 38EE400A 		vsub.f32	s0, s16, s0
 1076              	.LVL93:
 187:../BLDCMotor/motorctrl.c ****             sg_motordebug.ele_angle = elec_theta;
 1077              		.loc 1 187 26 view .LVU297
 1078 01a6 FFF7FEFF 		bl	_normalize_angle
 1079              	.LVL94:
 188:../BLDCMotor/motorctrl.c **** 
 1080              		.loc 1 188 13 is_stmt 1 view .LVU298
 188:../BLDCMotor/motorctrl.c **** 
 1081              		.loc 1 188 37 is_stmt 0 view .LVU299
 1082 01aa 84ED1C0A 		vstr.32	s0, [r4, #112]
 191:../BLDCMotor/motorctrl.c ****             dq_t udq = {0.0f,-0.2f,_IQ15(0.0f),_IQ15(0.0f)};
 1083              		.loc 1 191 13 is_stmt 1 view .LVU300
 1084 01ae 17AB     		add	r3, sp, #92
 1085 01b0 93E80700 		ldm	r3, {r0, r1, r2}
 1086 01b4 8DE80700 		stm	sp, {r0, r1, r2}
 1087 01b8 14AB     		add	r3, sp, #80
 1088 01ba 0ECB     		ldm	r3, {r1, r2, r3}
 1089 01bc 04A8     		add	r0, sp, #16
 1090 01be FFF7FEFF 		bl	_currmentloop
 1091              	.LVL95:
 192:../BLDCMotor/motorctrl.c ****             alpbet_t uab,uab_q15;
 1092              		.loc 1 192 13 view .LVU301
 192:../BLDCMotor/motorctrl.c ****             alpbet_t uab,uab_q15;
 1093              		.loc 1 192 18 is_stmt 0 view .LVU302
 1094 01c2 0023     		movs	r3, #0
 1095 01c4 0893     		str	r3, [sp, #32]	@ float
 1096 01c6 214B     		ldr	r3, .L52+40
 1097 01c8 0993     		str	r3, [sp, #36]	@ float
 1098 01ca 0023     		movs	r3, #0
 1099 01cc 0A93     		str	r3, [sp, #40]
 1100 01ce 0B93     		str	r3, [sp, #44]
 193:../BLDCMotor/motorctrl.c ****             if(sg_motordebug.self_ele_theta>_2PI)
 1101              		.loc 1 193 13 is_stmt 1 view .LVU303
 194:../BLDCMotor/motorctrl.c ****             {
 1102              		.loc 1 194 13 view .LVU304
 194:../BLDCMotor/motorctrl.c ****             {
 1103              		.loc 1 194 29 is_stmt 0 view .LVU305
 1104 01d0 94ED1D7A 		vldr.32	s14, [r4, #116]
 194:../BLDCMotor/motorctrl.c ****             {
 1105              		.loc 1 194 15 view .LVU306
 1106 01d4 DFED1E7A 		vldr.32	s15, .L52+44
 1107 01d8 B4EEE77A 		vcmpe.f32	s14, s15
 1108 01dc F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1109 01e0 01DD     		ble	.L48
 196:../BLDCMotor/motorctrl.c ****             }
 1110              		.loc 1 196 17 is_stmt 1 view .LVU307
 196:../BLDCMotor/motorctrl.c ****             }
 1111              		.loc 1 196 46 is_stmt 0 view .LVU308
 1112 01e2 0022     		movs	r2, #0
 1113 01e4 6267     		str	r2, [r4, #116]	@ float
 1114              	.L48:
 198:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, sg_motordebug.self_ele_theta); 
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 32


 1115              		.loc 1 198 13 is_stmt 1 discriminator 2 view .LVU309
 198:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, sg_motordebug.self_ele_theta); 
 1116              		.loc 1 198 42 is_stmt 0 discriminator 2 view .LVU310
 1117 01e6 0F4B     		ldr	r3, .L52
 1118 01e8 93ED1D0A 		vldr.32	s0, [r3, #116]
 1119 01ec DFED197A 		vldr.32	s15, .L52+48
 1120 01f0 30EE270A 		vadd.f32	s0, s0, s15
 1121 01f4 83ED1D0A 		vstr.32	s0, [r3, #116]
 199:../BLDCMotor/motorctrl.c ****             dut01 = _svpwm(uab.alpha,uab.beta);
 1122              		.loc 1 199 13 is_stmt 1 discriminator 2 view .LVU311
 199:../BLDCMotor/motorctrl.c ****             dut01 = _svpwm(uab.alpha,uab.beta);
 1123              		.loc 1 199 19 is_stmt 0 discriminator 2 view .LVU312
 1124 01f8 0B9B     		ldr	r3, [sp, #44]
 1125 01fa 0093     		str	r3, [sp]
 1126 01fc 08AB     		add	r3, sp, #32
 1127 01fe 0ECB     		ldm	r3, {r1, r2, r3}
 1128 0200 0CA8     		add	r0, sp, #48
 1129 0202 FFF7FEFF 		bl	_2r_2s
 1130              	.LVL96:
 200:../BLDCMotor/motorctrl.c ****             motor_set_pwm(dut01);
 1131              		.loc 1 200 13 is_stmt 1 discriminator 2 view .LVU313
 200:../BLDCMotor/motorctrl.c ****             motor_set_pwm(dut01);
 1132              		.loc 1 200 21 is_stmt 0 discriminator 2 view .LVU314
 1133 0206 DDED0D0A 		vldr.32	s1, [sp, #52]
 1134 020a 9DED0C0A 		vldr.32	s0, [sp, #48]
 1135 020e FFF7FEFF 		bl	_svpwm
 1136              	.LVL97:
 1137 0212 8DED1A0A 		vstr.32	s0, [sp, #104]
 1138 0216 CDED1B0A 		vstr.32	s1, [sp, #108]
 1139 021a 8DED1C1A 		vstr.32	s2, [sp, #112]
 201:../BLDCMotor/motorctrl.c **** #else
 1140              		.loc 1 201 13 is_stmt 1 discriminator 2 view .LVU315
 1141 021e FFF7FEFF 		bl	motor_set_pwm
 1142              	.LVL98:
 1143              	.LBE4:
 231:../BLDCMotor/motorctrl.c ****         default:
 1144              		.loc 1 231 13 discriminator 2 view .LVU316
 1145              	.LBE5:
 235:../BLDCMotor/motorctrl.c **** 
 1146              		.loc 1 235 1 is_stmt 0 discriminator 2 view .LVU317
 1147 0222 A5E7     		b	.L40
 1148              	.L53:
 1149              		.align	2
 1150              	.L52:
 1151 0224 00000000 		.word	.LANCHOR3
 1152 0228 52B89E3E 		.word	1050589266
 1153 022c 3333B33E 		.word	1051931443
 1154 0230 00000000 		.word	.LANCHOR9
 1155 0234 00000000 		.word	.LANCHOR10
 1156 0238 00000000 		.word	.LC0
 1157 023c 00000000 		.word	.LANCHOR8
 1158 0240 00000000 		.word	.LANCHOR11
 1159 0244 9A99993E 		.word	1050253722
 1160 0248 D80FC93F 		.word	1070141400
 1161 024c CDCC4CBE 		.word	-1102263091
 1162 0250 DA0FC940 		.word	1086918618
 1163 0254 6F12833A 		.word	981668463
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 33


 1164              		.cfi_endproc
 1165              	.LFE336:
 1167              		.section	.text.foc_paraminit,"ax",%progbits
 1168              		.align	1
 1169              		.global	foc_paraminit
 1170              		.syntax unified
 1171              		.thumb
 1172              		.thumb_func
 1174              	foc_paraminit:
 1175              	.LFB346:
 414:../BLDCMotor/motorctrl.c **** 
 415:../BLDCMotor/motorctrl.c **** void foc_paraminit(void)
 416:../BLDCMotor/motorctrl.c **** {
 1176              		.loc 1 416 1 is_stmt 1 view -0
 1177              		.cfi_startproc
 1178              		@ args = 0, pretend = 0, frame = 0
 1179              		@ frame_needed = 0, uses_anonymous_args = 0
 1180 0000 70B5     		push	{r4, r5, r6, lr}
 1181              	.LCFI34:
 1182              		.cfi_def_cfa_offset 16
 1183              		.cfi_offset 4, -16
 1184              		.cfi_offset 5, -12
 1185              		.cfi_offset 6, -8
 1186              		.cfi_offset 14, -4
 1187 0002 2DED028B 		vpush.64	{d8}
 1188              	.LCFI35:
 1189              		.cfi_def_cfa_offset 24
 1190              		.cfi_offset 80, -24
 1191              		.cfi_offset 81, -20
 417:../BLDCMotor/motorctrl.c ****     sgp_curloop_d_pid = &sg_curloop_param.d_pid;
 1192              		.loc 1 417 5 view .LVU319
 1193              		.loc 1 417 23 is_stmt 0 view .LVU320
 1194 0006 2448     		ldr	r0, .L56
 1195 0008 244B     		ldr	r3, .L56+4
 1196 000a 1860     		str	r0, [r3]
 418:../BLDCMotor/motorctrl.c ****     sgp_curloop_q_pid = &sg_curloop_param.q_pid;
 1197              		.loc 1 418 5 is_stmt 1 view .LVU321
 1198              		.loc 1 418 23 is_stmt 0 view .LVU322
 1199 000c 244E     		ldr	r6, .L56+8
 1200 000e 00F11C03 		add	r3, r0, #28
 1201 0012 3360     		str	r3, [r6]
 419:../BLDCMotor/motorctrl.c ****     sgp_speed_pid = &sg_speed_pid;
 1202              		.loc 1 419 5 is_stmt 1 view .LVU323
 1203              		.loc 1 419 19 is_stmt 0 view .LVU324
 1204 0014 234D     		ldr	r5, .L56+12
 1205 0016 244B     		ldr	r3, .L56+16
 1206 0018 2B60     		str	r3, [r5]
 420:../BLDCMotor/motorctrl.c ****     pid_init(sgp_curloop_d_pid,sg_motordebug.pid_d_kp,sg_motordebug.pid_d_ki,1.0f,D_MAX_VAL,D_MIN_V
 1207              		.loc 1 420 5 is_stmt 1 view .LVU325
 1208 001a 244C     		ldr	r4, .L56+20
 1209 001c B9EE002A 		vmov.f32	s4, #-4.0e+0
 1210 0020 F1EE001A 		vmov.f32	s3, #4.0e+0
 1211 0024 B7EE001A 		vmov.f32	s2, #1.0e+0
 1212 0028 D4ED1B0A 		vldr.32	s1, [r4, #108]
 1213 002c 94ED1A0A 		vldr.32	s0, [r4, #104]
 1214 0030 FFF7FEFF 		bl	pid_init
 1215              	.LVL99:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 34


 421:../BLDCMotor/motorctrl.c ****     pid_init(sgp_curloop_q_pid,sg_motordebug.pid_d_kp,sg_motordebug.pid_d_ki,1.0f,D_MAX_VAL,D_MIN_V
 1216              		.loc 1 421 5 view .LVU326
 1217 0034 B9EE002A 		vmov.f32	s4, #-4.0e+0
 1218 0038 F1EE001A 		vmov.f32	s3, #4.0e+0
 1219 003c B7EE001A 		vmov.f32	s2, #1.0e+0
 1220 0040 D4ED1B0A 		vldr.32	s1, [r4, #108]
 1221 0044 94ED1A0A 		vldr.32	s0, [r4, #104]
 1222 0048 3068     		ldr	r0, [r6]
 1223 004a FFF7FEFF 		bl	pid_init
 1224              	.LVL100:
 422:../BLDCMotor/motorctrl.c ****     pid_init(sgp_speed_pid,sg_motordebug.pid_d_kp,sg_motordebug.pid_d_ki,1.0f,3.0,-3.0);
 1225              		.loc 1 422 5 view .LVU327
 1226 004e B8EE082A 		vmov.f32	s4, #-3.0e+0
 1227 0052 F0EE081A 		vmov.f32	s3, #3.0e+0
 1228 0056 B7EE001A 		vmov.f32	s2, #1.0e+0
 1229 005a D4ED1B0A 		vldr.32	s1, [r4, #108]
 1230 005e 94ED1A0A 		vldr.32	s0, [r4, #104]
 1231 0062 2868     		ldr	r0, [r5]
 1232 0064 FFF7FEFF 		bl	pid_init
 1233              	.LVL101:
 423:../BLDCMotor/motorctrl.c **** 
 424:../BLDCMotor/motorctrl.c ****     lowfilter_init(&sg_elefilter[0],80);
 1234              		.loc 1 424 5 view .LVU328
 1235 0068 9FED118A 		vldr.32	s16, .L56+24
 1236 006c 114C     		ldr	r4, .L56+28
 1237 006e B0EE480A 		vmov.f32	s0, s16
 1238 0072 2046     		mov	r0, r4
 1239 0074 FFF7FEFF 		bl	lowfilter_init
 1240              	.LVL102:
 425:../BLDCMotor/motorctrl.c ****     lowfilter_init(&sg_elefilter[1],80);
 1241              		.loc 1 425 5 view .LVU329
 1242 0078 B0EE480A 		vmov.f32	s0, s16
 1243 007c 04F10800 		add	r0, r4, #8
 1244 0080 FFF7FEFF 		bl	lowfilter_init
 1245              	.LVL103:
 426:../BLDCMotor/motorctrl.c ****     lowfilter_init(&sg_elefilter[2],80);
 1246              		.loc 1 426 5 view .LVU330
 1247 0084 B0EE480A 		vmov.f32	s0, s16
 1248 0088 04F11000 		add	r0, r4, #16
 1249 008c FFF7FEFF 		bl	lowfilter_init
 1250              	.LVL104:
 427:../BLDCMotor/motorctrl.c **** }
 1251              		.loc 1 427 1 is_stmt 0 view .LVU331
 1252 0090 BDEC028B 		vldm	sp!, {d8}
 1253              	.LCFI36:
 1254              		.cfi_restore 80
 1255              		.cfi_restore 81
 1256              		.cfi_def_cfa_offset 16
 1257 0094 70BD     		pop	{r4, r5, r6, pc}
 1258              	.L57:
 1259 0096 00BF     		.align	2
 1260              	.L56:
 1261 0098 00000000 		.word	.LANCHOR12
 1262 009c 00000000 		.word	.LANCHOR4
 1263 00a0 00000000 		.word	.LANCHOR5
 1264 00a4 00000000 		.word	.LANCHOR13
 1265 00a8 00000000 		.word	.LANCHOR14
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 35


 1266 00ac 00000000 		.word	.LANCHOR3
 1267 00b0 0000A042 		.word	1117782016
 1268 00b4 00000000 		.word	.LANCHOR9
 1269              		.cfi_endproc
 1270              	.LFE346:
 1272              		.section	.rodata.motortctrl_process.str1.4,"aMS",%progbits,1
 1273              		.align	2
 1274              	.LC1:
 1275 0000 6D6F746F 		.ascii	"motor stop\000"
 1275      72207374 
 1275      6F7000
 1276              		.section	.text.motortctrl_process,"ax",%progbits
 1277              		.align	1
 1278              		.global	motortctrl_process
 1279              		.syntax unified
 1280              		.thumb
 1281              		.thumb_func
 1283              	motortctrl_process:
 1284              	.LFB335:
  63:../BLDCMotor/motorctrl.c ****     char rec_buf[64];
 1285              		.loc 1 63 1 is_stmt 1 view -0
 1286              		.cfi_startproc
 1287              		@ args = 0, pretend = 0, frame = 0
 1288              		@ frame_needed = 0, uses_anonymous_args = 0
 1289 0000 08B5     		push	{r3, lr}
 1290              	.LCFI37:
 1291              		.cfi_def_cfa_offset 8
 1292              		.cfi_offset 3, -8
 1293              		.cfi_offset 14, -4
  64:../BLDCMotor/motorctrl.c ****     char cnt = 0;
 1294              		.loc 1 64 5 view .LVU333
  65:../BLDCMotor/motorctrl.c ****     // if (readline_fromPC(rec_buf,sizeof(rec_buf)))
 1295              		.loc 1 65 5 view .LVU334
 1296              	.LVL105:
  70:../BLDCMotor/motorctrl.c ****     switch (g_Motor1.state)
 1297              		.loc 1 70 5 view .LVU335
 1298 0002 FFF7FEFF 		bl	motorprotocol_process
 1299              	.LVL106:
  71:../BLDCMotor/motorctrl.c ****     {
 1300              		.loc 1 71 5 view .LVU336
  71:../BLDCMotor/motorctrl.c ****     {
 1301              		.loc 1 71 21 is_stmt 0 view .LVU337
 1302 0006 144B     		ldr	r3, .L64
 1303 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  71:../BLDCMotor/motorctrl.c ****     {
 1304              		.loc 1 71 5 view .LVU338
 1305 000a 042B     		cmp	r3, #4
 1306 000c 16D0     		beq	.L59
 1307 000e 052B     		cmp	r3, #5
 1308 0010 1ED0     		beq	.L60
 1309 0012 012B     		cmp	r3, #1
 1310 0014 00D0     		beq	.L63
 1311              	.L58:
 100:../BLDCMotor/motorctrl.c **** /*------------Âë®ÊúüÊÄßË¢´Ë∞ÉÁî®----------------*/
 1312              		.loc 1 100 1 view .LVU339
 1313 0016 08BD     		pop	{r3, pc}
 1314              	.L63:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 36


  74:../BLDCMotor/motorctrl.c ****         {
 1315              		.loc 1 74 9 is_stmt 1 view .LVU340
  74:../BLDCMotor/motorctrl.c ****         {
 1316              		.loc 1 74 26 is_stmt 0 view .LVU341
 1317 0018 104B     		ldr	r3, .L64+4
 1318 001a D3F88030 		ldr	r3, [r3, #128]
  74:../BLDCMotor/motorctrl.c ****         {
 1319              		.loc 1 74 12 view .LVU342
 1320 001e 042B     		cmp	r3, #4
 1321 0020 F9D1     		bne	.L58
  78:../BLDCMotor/motorctrl.c ****         lowfilter_init(&sg_speedfilter,80);
 1322              		.loc 1 78 9 is_stmt 1 view .LVU343
 1323 0022 FFF7FEFF 		bl	foc_paraminit
 1324              	.LVL107:
  79:../BLDCMotor/motorctrl.c **** 
 1325              		.loc 1 79 9 view .LVU344
 1326 0026 9FED0E0A 		vldr.32	s0, .L64+8
 1327 002a 0E48     		ldr	r0, .L64+12
 1328 002c FFF7FEFF 		bl	lowfilter_init
 1329              	.LVL108:
  81:../BLDCMotor/motorctrl.c ****         g_Motor1.state = MOTOR_RUNING;
 1330              		.loc 1 81 9 view .LVU345
 1331 0030 FFF7FEFF 		bl	motor_enable
 1332              	.LVL109:
  82:../BLDCMotor/motorctrl.c ****         break;
 1333              		.loc 1 82 9 view .LVU346
  82:../BLDCMotor/motorctrl.c ****         break;
 1334              		.loc 1 82 24 is_stmt 0 view .LVU347
 1335 0034 084B     		ldr	r3, .L64
 1336 0036 0422     		movs	r2, #4
 1337 0038 1A70     		strb	r2, [r3]
  83:../BLDCMotor/motorctrl.c **** 
 1338              		.loc 1 83 9 is_stmt 1 view .LVU348
 1339 003a ECE7     		b	.L58
 1340              	.L59:
  87:../BLDCMotor/motorctrl.c ****             {
 1341              		.loc 1 87 13 view .LVU349
  87:../BLDCMotor/motorctrl.c ****             {
 1342              		.loc 1 87 30 is_stmt 0 view .LVU350
 1343 003c 074B     		ldr	r3, .L64+4
 1344 003e D3F88420 		ldr	r2, [r3, #132]
  87:../BLDCMotor/motorctrl.c ****             {
 1345              		.loc 1 87 16 view .LVU351
 1346 0042 094B     		ldr	r3, .L64+16
 1347 0044 9A42     		cmp	r2, r3
 1348 0046 E6D1     		bne	.L58
  89:../BLDCMotor/motorctrl.c ****             }
 1349              		.loc 1 89 17 is_stmt 1 view .LVU352
  89:../BLDCMotor/motorctrl.c ****             }
 1350              		.loc 1 89 32 is_stmt 0 view .LVU353
 1351 0048 034B     		ldr	r3, .L64
 1352 004a 0522     		movs	r2, #5
 1353 004c 1A70     		strb	r2, [r3]
 1354 004e E2E7     		b	.L58
 1355              	.L60:
  95:../BLDCMotor/motorctrl.c ****         break;
 1356              		.loc 1 95 9 is_stmt 1 view .LVU354
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 37


 1357 0050 FFF7FEFF 		bl	motor_disable
 1358              	.LVL110:
  96:../BLDCMotor/motorctrl.c ****     default:
 1359              		.loc 1 96 9 view .LVU355
 100:../BLDCMotor/motorctrl.c **** /*------------Âë®ÊúüÊÄßË¢´Ë∞ÉÁî®----------------*/
 1360              		.loc 1 100 1 is_stmt 0 view .LVU356
 1361 0054 DFE7     		b	.L58
 1362              	.L65:
 1363 0056 00BF     		.align	2
 1364              	.L64:
 1365 0058 00000000 		.word	.LANCHOR15
 1366 005c 00000000 		.word	.LANCHOR3
 1367 0060 0000A042 		.word	1117782016
 1368 0064 00000000 		.word	.LANCHOR2
 1369 0068 00000000 		.word	.LC1
 1370              		.cfi_endproc
 1371              	.LFE335:
 1373              		.global	test_d_pid
 1374              		.global	sg_speedfilter
 1375              		.global	g_Motor1
 1376              		.global	sg_motordebug
 1377              		.section	.bss.cnt.1,"aw",%nobits
 1378              		.align	1
 1379              		.set	.LANCHOR0,. + 0
 1382              	cnt.1:
 1383 0000 0000     		.space	2
 1384              		.section	.bss.cnt.4,"aw",%nobits
 1385              		.align	1
 1386              		.set	.LANCHOR11,. + 0
 1389              	cnt.4:
 1390 0000 0000     		.space	2
 1391              		.section	.bss.cnt_.2,"aw",%nobits
 1392              		.align	1
 1393              		.set	.LANCHOR7,. + 0
 1396              	cnt_.2:
 1397 0000 0000     		.space	2
 1398              		.section	.bss.pre_theta.0,"aw",%nobits
 1399              		.align	2
 1400              		.set	.LANCHOR1,. + 0
 1403              	pre_theta.0:
 1404 0000 00000000 		.space	4
 1405              		.section	.bss.sg_MecThetaOffset,"aw",%nobits
 1406              		.align	2
 1407              		.set	.LANCHOR8,. + 0
 1410              	sg_MecThetaOffset:
 1411 0000 00000000 		.space	4
 1412              		.section	.bss.sg_curloop_param,"aw",%nobits
 1413              		.align	2
 1414              		.set	.LANCHOR12,. + 0
 1417              	sg_curloop_param:
 1418 0000 00000000 		.space	56
 1418      00000000 
 1418      00000000 
 1418      00000000 
 1418      00000000 
 1419              		.section	.bss.sg_elefilter,"aw",%nobits
 1420              		.align	2
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 38


 1421              		.set	.LANCHOR9,. + 0
 1424              	sg_elefilter:
 1425 0000 00000000 		.space	24
 1425      00000000 
 1425      00000000 
 1425      00000000 
 1425      00000000 
 1426              		.section	.bss.sg_motordebug,"aw",%nobits
 1427              		.align	2
 1428              		.set	.LANCHOR3,. + 0
 1431              	sg_motordebug:
 1432 0000 00000000 		.space	136
 1432      00000000 
 1432      00000000 
 1432      00000000 
 1432      00000000 
 1433              		.section	.bss.sg_speed_pid,"aw",%nobits
 1434              		.align	2
 1435              		.set	.LANCHOR14,. + 0
 1438              	sg_speed_pid:
 1439 0000 00000000 		.space	28
 1439      00000000 
 1439      00000000 
 1439      00000000 
 1439      00000000 
 1440              		.section	.bss.sg_speedfilter,"aw",%nobits
 1441              		.align	2
 1442              		.set	.LANCHOR2,. + 0
 1445              	sg_speedfilter:
 1446 0000 00000000 		.space	8
 1446      00000000 
 1447              		.section	.bss.sgp_curloop_d_pid,"aw",%nobits
 1448              		.align	2
 1449              		.set	.LANCHOR4,. + 0
 1452              	sgp_curloop_d_pid:
 1453 0000 00000000 		.space	4
 1454              		.section	.bss.sgp_curloop_q_pid,"aw",%nobits
 1455              		.align	2
 1456              		.set	.LANCHOR5,. + 0
 1459              	sgp_curloop_q_pid:
 1460 0000 00000000 		.space	4
 1461              		.section	.bss.sgp_speed_pid,"aw",%nobits
 1462              		.align	2
 1463              		.set	.LANCHOR13,. + 0
 1466              	sgp_speed_pid:
 1467 0000 00000000 		.space	4
 1468              		.section	.bss.state0_.5,"aw",%nobits
 1469              		.align	1
 1470              		.set	.LANCHOR10,. + 0
 1473              	state0_.5:
 1474 0000 0000     		.space	2
 1475              		.section	.bss.test_d_pid,"aw",%nobits
 1476              		.align	2
 1479              	test_d_pid:
 1480 0000 00000000 		.space	28
 1480      00000000 
 1480      00000000 
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 39


 1480      00000000 
 1480      00000000 
 1481              		.section	.data.g_Motor1,"aw"
 1482              		.align	2
 1483              		.set	.LANCHOR15,. + 0
 1486              	g_Motor1:
 1487 0000 01       		.byte	1
 1488 0001 00       		.space	1
 1489 0002 0000     		.short	0
 1490              		.section	.data.state_.3,"aw"
 1491              		.align	1
 1492              		.set	.LANCHOR6,. + 0
 1495              	state_.3:
 1496 0000 0100     		.short	1
 1497              		.text
 1498              	.Letext0:
 1499              		.file 2 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\machine\\_defa
 1500              		.file 3 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\sys\\_stdint.h
 1501              		.file 4 "../Common/method/pid.h"
 1502              		.file 5 "../Common/method/filter.h"
 1503              		.file 6 "../Common/IQMath/ti/IQmathLib.h"
 1504              		.file 7 "../BLDCMotor/motorctrl_common.h"
 1505              		.file 8 "./Board/board.h"
 1506              		.file 9 "../Sensor/sensor.h"
 1507              		.file 10 "Inc/tim.h"
 1508              		.file 11 "Inc/adc.h"
 1509              		.file 12 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\math.h"
 1510              		.file 13 "../Common/debuglog/SEGGER_RTT_V792h/RTT/SEGGER_RTT.h"
 1511              		.file 14 "../BLDCMotor/./motorctrl.h"
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 40


DEFINED SYMBOLS
                            *ABS*:00000000 motorctrl.c
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:20     .text.motor_enable:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:25     .text.motor_enable:00000000 motor_enable
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:52     .text.motor_disable:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:57     .text.motor_disable:00000000 motor_disable
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:80     .text.motor_speedcale:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:85     .text.motor_speedcale:00000000 motor_speedcale
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:220    .text.motor_speedcale:000000bc $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:232    .text._currmentloop:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:237    .text._currmentloop:00000000 _currmentloop
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:414    .text._currmentloop:000000d0 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:421    .text.motor_set_pwm:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:426    .text.motor_set_pwm:00000000 motor_set_pwm
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:455    .text._get_angleoffset:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:460    .text._get_angleoffset:00000000 _get_angleoffset
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:606    .text._get_angleoffset:000000ac $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:617    .text._limit_voltagecircle:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:623    .text._limit_voltagecircle:00000000 _limit_voltagecircle
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:739    .rodata._50uscycle_process.str1.4:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:743    .text._50uscycle_process:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:749    .text._50uscycle_process:00000000 _50uscycle_process
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:857    .text._50uscycle_process:0000007a $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1151   .text._50uscycle_process:00000224 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1168   .text.foc_paraminit:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1174   .text.foc_paraminit:00000000 foc_paraminit
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1261   .text.foc_paraminit:00000098 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1273   .rodata.motortctrl_process.str1.4:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1277   .text.motortctrl_process:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1283   .text.motortctrl_process:00000000 motortctrl_process
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1365   .text.motortctrl_process:00000058 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1479   .bss.test_d_pid:00000000 test_d_pid
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1445   .bss.sg_speedfilter:00000000 sg_speedfilter
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1486   .data.g_Motor1:00000000 g_Motor1
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1431   .bss.sg_motordebug:00000000 sg_motordebug
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1378   .bss.cnt.1:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1382   .bss.cnt.1:00000000 cnt.1
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1385   .bss.cnt.4:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1389   .bss.cnt.4:00000000 cnt.4
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1392   .bss.cnt_.2:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1396   .bss.cnt_.2:00000000 cnt_.2
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1399   .bss.pre_theta.0:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1403   .bss.pre_theta.0:00000000 pre_theta.0
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1406   .bss.sg_MecThetaOffset:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1410   .bss.sg_MecThetaOffset:00000000 sg_MecThetaOffset
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1413   .bss.sg_curloop_param:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1417   .bss.sg_curloop_param:00000000 sg_curloop_param
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1420   .bss.sg_elefilter:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1424   .bss.sg_elefilter:00000000 sg_elefilter
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1427   .bss.sg_motordebug:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1434   .bss.sg_speed_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1438   .bss.sg_speed_pid:00000000 sg_speed_pid
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1441   .bss.sg_speedfilter:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1448   .bss.sgp_curloop_d_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1452   .bss.sgp_curloop_d_pid:00000000 sgp_curloop_d_pid
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1455   .bss.sgp_curloop_q_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1459   .bss.sgp_curloop_q_pid:00000000 sgp_curloop_q_pid
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s 			page 41


C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1462   .bss.sgp_speed_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1466   .bss.sgp_speed_pid:00000000 sgp_speed_pid
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1469   .bss.state0_.5:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1473   .bss.state0_.5:00000000 state0_.5
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1476   .bss.test_d_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1482   .data.g_Motor1:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1491   .data.state_.3:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:1495   .data.state_.3:00000000 state_.3
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:862    .text._50uscycle_process:0000007f $d
C:\Users\57308\AppData\Local\Temp\ccAKSD1Q.s:862    .text._50uscycle_process:00000080 $t

UNDEFINED SYMBOLS
tim_pwm_enable
tim_tigger_adc
adc_start
tim_pwm_disable
adc_stop
lowfilter_cale
_3s_2s
_2s_2r
pid_contrl
tim_set_pwm
_2r_2s
_svpwm
sensor_user_read
_IQ20toF
__aeabi_f2d
__aeabi_d2f
sqrt
SEGGER_RTT_printf
_normalize_angle
pid_init
lowfilter_init
motorprotocol_process
