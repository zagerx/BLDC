ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"motorctrl.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.motor_enable_noirq,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	motor_enable_noirq:
  26              	.LFB334:
  27              		.file 1 "../BLDCMotor/motorctrl.c"
   1:../BLDCMotor/motorctrl.c **** #include "./motorctrl.h"
   2:../BLDCMotor/motorctrl.c **** #include "debuglog.h"
   3:../BLDCMotor/motorctrl.c **** #include "motorctrl_common.h"
   4:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
   5:../BLDCMotor/motorctrl.c **** #include "mt6816.h"
   6:../BLDCMotor/motorctrl.c **** #endif
   7:../BLDCMotor/motorctrl.c **** #define Q15_PI_2                   (51471)
   8:../BLDCMotor/motorctrl.c **** #define Q15_2PI                    (205884)
   9:../BLDCMotor/motorctrl.c **** #define PI_2                       (1.570796f)
  10:../BLDCMotor/motorctrl.c **** #define MOTORCTRL_PERCI            (1)
  11:../BLDCMotor/motorctrl.c **** 
  12:../BLDCMotor/motorctrl.c **** enum{
  13:../BLDCMotor/motorctrl.c ****     MOTOR_INIT,
  14:../BLDCMotor/motorctrl.c ****     MOTOR_IDLE,
  15:../BLDCMotor/motorctrl.c ****     MOTOR_START, 
  16:../BLDCMotor/motorctrl.c ****     MOTOR_RUNING,
  17:../BLDCMotor/motorctrl.c ****     MOTOR_STOP,
  18:../BLDCMotor/motorctrl.c **** };
  19:../BLDCMotor/motorctrl.c **** typedef struct
  20:../BLDCMotor/motorctrl.c **** {
  21:../BLDCMotor/motorctrl.c ****     float ia;
  22:../BLDCMotor/motorctrl.c ****     float ib;
  23:../BLDCMotor/motorctrl.c ****     float ic;
  24:../BLDCMotor/motorctrl.c ****     float ialpha;
  25:../BLDCMotor/motorctrl.c ****     float ibeta;
  26:../BLDCMotor/motorctrl.c ****     float id;
  27:../BLDCMotor/motorctrl.c ****     float iq;
  28:../BLDCMotor/motorctrl.c **** 
  29:../BLDCMotor/motorctrl.c ****     int32_t Q_ia;
  30:../BLDCMotor/motorctrl.c ****     int32_t Q_ib;
  31:../BLDCMotor/motorctrl.c ****     int32_t Q_ic;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 2


  32:../BLDCMotor/motorctrl.c ****     int32_t Q_ialpha;
  33:../BLDCMotor/motorctrl.c ****     int32_t Q_ibeta;
  34:../BLDCMotor/motorctrl.c ****     int32_t Q_id;
  35:../BLDCMotor/motorctrl.c ****     int32_t Q_iq;
  36:../BLDCMotor/motorctrl.c **** 
  37:../BLDCMotor/motorctrl.c ****     float id_real;
  38:../BLDCMotor/motorctrl.c ****     float iq_targe;
  39:../BLDCMotor/motorctrl.c ****     float iq_real;
  40:../BLDCMotor/motorctrl.c **** 
  41:../BLDCMotor/motorctrl.c ****     float pid_Q_out;
  42:../BLDCMotor/motorctrl.c ****     float pid_D_out;
  43:../BLDCMotor/motorctrl.c ****     float ele_angle;
  44:../BLDCMotor/motorctrl.c ****     float self_ele_theta;
  45:../BLDCMotor/motorctrl.c ****     int32_t Q_ele_angle;
  46:../BLDCMotor/motorctrl.c ****     int32_t Q15_mec_angle;
  47:../BLDCMotor/motorctrl.c **** }motordebug_t;
  48:../BLDCMotor/motorctrl.c **** motordebug_t sg_motordebug = {0};
  49:../BLDCMotor/motorctrl.c **** typedef struct
  50:../BLDCMotor/motorctrl.c **** {
  51:../BLDCMotor/motorctrl.c ****     unsigned char state;
  52:../BLDCMotor/motorctrl.c ****     unsigned short cnt;
  53:../BLDCMotor/motorctrl.c **** }motorctrl_t;
  54:../BLDCMotor/motorctrl.c **** 
  55:../BLDCMotor/motorctrl.c **** static dq_t _currmentloop(abc_t i_abc,float ele_theta);
  56:../BLDCMotor/motorctrl.c **** static float _get_angleoffset(void);
  57:../BLDCMotor/motorctrl.c **** static void motor_enable(void);
  58:../BLDCMotor/motorctrl.c **** static void motor_disable(void);
  59:../BLDCMotor/motorctrl.c **** static void motor_set_pwm(duty_t temp);
  60:../BLDCMotor/motorctrl.c **** 
  61:../BLDCMotor/motorctrl.c **** motorctrl_t g_Motor1 = {
  62:../BLDCMotor/motorctrl.c ****     .state = MOTOR_INIT,
  63:../BLDCMotor/motorctrl.c ****     .cnt = 0,
  64:../BLDCMotor/motorctrl.c **** };
  65:../BLDCMotor/motorctrl.c **** static volatile float sg_MecThetaOffset = 0.0f;
  66:../BLDCMotor/motorctrl.c **** static lowfilter_t sg_elefilter[3];
  67:../BLDCMotor/motorctrl.c **** static pid_cb_t *sgp_curloop_d_pid;
  68:../BLDCMotor/motorctrl.c **** static pid_cb_t *sgp_curloop_q_pid;
  69:../BLDCMotor/motorctrl.c **** static curloop_t sg_curloop_param;
  70:../BLDCMotor/motorctrl.c **** float pre_angle_test = 0.0f;
  71:../BLDCMotor/motorctrl.c **** float next_angle_test = 0.0f;
  72:../BLDCMotor/motorctrl.c **** float raw_angle = 0.0f;
  73:../BLDCMotor/motorctrl.c **** float test_ia = 0.0f;
  74:../BLDCMotor/motorctrl.c **** float test_ib = 0.0f;
  75:../BLDCMotor/motorctrl.c **** float test_ic = 0.0f;
  76:../BLDCMotor/motorctrl.c **** extern float RTT_test_Id;
  77:../BLDCMotor/motorctrl.c **** void motortctrl_process(void)
  78:../BLDCMotor/motorctrl.c **** {
  79:../BLDCMotor/motorctrl.c ****     switch (g_Motor1.state)
  80:../BLDCMotor/motorctrl.c ****     {
  81:../BLDCMotor/motorctrl.c ****     case MOTOR_INIT:
  82:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = _get_angleoffset() + ANGLE_COMPENSATA;
  83:../BLDCMotor/motorctrl.c ****         foc_paraminit();
  84:../BLDCMotor/motorctrl.c ****         USER_DEBUG_NORMAL("motor init\r\n");
  85:../BLDCMotor/motorctrl.c ****         motor_enable();
  86:../BLDCMotor/motorctrl.c ****         g_Motor1.state = MOTOR_RUNING;           
  87:../BLDCMotor/motorctrl.c ****         break;
  88:../BLDCMotor/motorctrl.c **** 
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 3


  89:../BLDCMotor/motorctrl.c ****     case MOTOR_RUNING:
  90:../BLDCMotor/motorctrl.c ****         {
  91:../BLDCMotor/motorctrl.c ****             if (!(++g_Motor1.cnt % 15000))
  92:../BLDCMotor/motorctrl.c ****             {
  93:../BLDCMotor/motorctrl.c ****                 // USER_DEBUG_NORMAL("motor 1s\r\n");
  94:../BLDCMotor/motorctrl.c ****                 g_Motor1.state = MOTOR_STOP;
  95:../BLDCMotor/motorctrl.c ****             }
  96:../BLDCMotor/motorctrl.c ****         }
  97:../BLDCMotor/motorctrl.c ****         break;
  98:../BLDCMotor/motorctrl.c **** 
  99:../BLDCMotor/motorctrl.c ****     case MOTOR_STOP:
 100:../BLDCMotor/motorctrl.c ****         motor_disable();
 101:../BLDCMotor/motorctrl.c ****         break;
 102:../BLDCMotor/motorctrl.c ****     default:
 103:../BLDCMotor/motorctrl.c ****         break;
 104:../BLDCMotor/motorctrl.c ****     }
 105:../BLDCMotor/motorctrl.c **** }
 106:../BLDCMotor/motorctrl.c **** /*------------周期性被调用----------------*/
 107:../BLDCMotor/motorctrl.c **** void _50uscycle_process(unsigned int *abc_vale,float _elec_theta)
 108:../BLDCMotor/motorctrl.c **** {
 109:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431    
 110:../BLDCMotor/motorctrl.c ****     static unsigned short cnt = 0;
 111:../BLDCMotor/motorctrl.c ****     if (cnt++%3000)
 112:../BLDCMotor/motorctrl.c ****     {
 113:../BLDCMotor/motorctrl.c ****         return;
 114:../BLDCMotor/motorctrl.c ****     }
 115:../BLDCMotor/motorctrl.c **** #endif
 116:../BLDCMotor/motorctrl.c ****     duty_t dut01,dut02;
 117:../BLDCMotor/motorctrl.c **** /*----------------三相电流处理------------------------------*/    
 118:../BLDCMotor/motorctrl.c ****     float Ia,Ib,Ic;
 119:../BLDCMotor/motorctrl.c ****     int32_t a1,b1,c1;
 120:../BLDCMotor/motorctrl.c ****     a1 = abc_vale[0] - A_ADCCHANNL_OFFSET;
 121:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 122:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 123:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ia = a1;
 124:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ib = b1;
 125:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ic = c1;    
 126:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 127:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 128:../BLDCMotor/motorctrl.c ****     Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 129:../BLDCMotor/motorctrl.c **** #if 1
 130:../BLDCMotor/motorctrl.c ****     abc_t i_abc;
 131:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 132:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 133:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 134:../BLDCMotor/motorctrl.c **** #else
 135:../BLDCMotor/motorctrl.c ****     abc_t i_abc;
 136:../BLDCMotor/motorctrl.c ****     i_abc.a = Ia;
 137:../BLDCMotor/motorctrl.c ****     i_abc.b = Ib;
 138:../BLDCMotor/motorctrl.c ****     i_abc.c = Ic;
 139:../BLDCMotor/motorctrl.c **** #endif
 140:../BLDCMotor/motorctrl.c **** 
 141:../BLDCMotor/motorctrl.c **** /*---------------------获取当前转子角度-------------------------*/
 142:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 143:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 144:../BLDCMotor/motorctrl.c ****     int32_t Q15_Mechtheta;
 145:../BLDCMotor/motorctrl.c ****     Q15_Mechtheta = ((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_COV))[0];
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 4


 146:../BLDCMotor/motorctrl.c ****     mech_theta = _IQ15toF(Q15_Mechtheta);
 147:../BLDCMotor/motorctrl.c ****     raw_angle = mech_theta;
 148:../BLDCMotor/motorctrl.c ****     mech_theta = (mech_theta - sg_MecThetaOffset);
 149:../BLDCMotor/motorctrl.c ****     elec_theta = mech_theta * MOTOR_PAIR;
 150:../BLDCMotor/motorctrl.c ****     elec_theta += ANGLE_COMPENSATA;
 151:../BLDCMotor/motorctrl.c ****     elec_theta = _normalize_angle(elec_theta);
 152:../BLDCMotor/motorctrl.c ****     sg_motordebug.ele_angle = elec_theta;
 153:../BLDCMotor/motorctrl.c ****     _currmentloop(i_abc,sg_motordebug.self_ele_theta);
 154:../BLDCMotor/motorctrl.c ****     // _currmentloop(i_abc,sg_motordebug.self_ele_theta);
 155:../BLDCMotor/motorctrl.c **** #endif
 156:../BLDCMotor/motorctrl.c **** 
 157:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
 158:../BLDCMotor/motorctrl.c ****     // float elec_theta,mech_theta;
 159:../BLDCMotor/motorctrl.c ****     // int32_t Q15_Mechtheta;
 160:../BLDCMotor/motorctrl.c ****     // Q15_Mechtheta = ((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_COV))[0];
 161:../BLDCMotor/motorctrl.c ****     // mech_theta = _IQ15toF(Q15_Mechtheta);
 162:../BLDCMotor/motorctrl.c ****     // // mech_theta = (mech_theta - sg_MecThetaOffset + 0.0f);
 163:../BLDCMotor/motorctrl.c ****     // elec_theta = mech_theta * MOTOR_PAIR;
 164:../BLDCMotor/motorctrl.c ****     // elec_theta += (ANGLE_COMPENSATA/1.0f);
 165:../BLDCMotor/motorctrl.c ****     // elec_theta = _IQ15toF(_IQ15(elec_theta) % (Q15_2PI));
 166:../BLDCMotor/motorctrl.c ****     // // elec_theta = elec_theta % _2PI;
 167:../BLDCMotor/motorctrl.c ****     // // elec_theta = _normalize_angle(elec_theta);
 168:../BLDCMotor/motorctrl.c ****     // sg_motordebug.ele_angle = elec_theta;
 169:../BLDCMotor/motorctrl.c ****     // _currmentloop(i_abc,sg_motordebug.self_ele_theta);
 170:../BLDCMotor/motorctrl.c **** #endif
 171:../BLDCMotor/motorctrl.c **** /*--------------------------------------------------------------
 172:../BLDCMotor/motorctrl.c **** 开环控制
 173:../BLDCMotor/motorctrl.c **** 100us调用匹配参数  
 174:../BLDCMotor/motorctrl.c ****     42BLDC  theta += 0.004f;  uq = 1.0f
 175:../BLDCMotor/motorctrl.c ****     yateng  theta += 0.004f;  uq = 1.0f
 176:../BLDCMotor/motorctrl.c ****     qita    theta += 0.004f;  uq = 1.0f
 177:../BLDCMotor/motorctrl.c **** --------------------------------------------------------------*/
 178:../BLDCMotor/motorctrl.c ****     #if 1//强拖
 179:../BLDCMotor/motorctrl.c ****         {            
 180:../BLDCMotor/motorctrl.c ****             #ifdef BOARD_STM32H723
 181:../BLDCMotor/motorctrl.c ****             dq_t udq = {0.0f,1.5f,_IQ15(0.0f),_IQ15(0.8f)};
 182:../BLDCMotor/motorctrl.c ****             alpbet_t uab,uab_q15;            
 183:../BLDCMotor/motorctrl.c ****             if (sg_motordebug.self_ele_theta > 6.28f)
 184:../BLDCMotor/motorctrl.c ****             {
 185:../BLDCMotor/motorctrl.c ****                 sg_motordebug.self_ele_theta = 0.0f;
 186:../BLDCMotor/motorctrl.c ****             }
 187:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, sg_motordebug.self_ele_theta);
 188:../BLDCMotor/motorctrl.c ****             dut01 = _svpwm(uab.alpha,uab.beta);
 189:../BLDCMotor/motorctrl.c ****             motor_set_pwm(dut01);            
 190:../BLDCMotor/motorctrl.c ****                 sg_motordebug.self_ele_theta += 0.001f;
 191:../BLDCMotor/motorctrl.c ****             #endif
 192:../BLDCMotor/motorctrl.c ****             #ifdef BOARD_STM32G431
 193:../BLDCMotor/motorctrl.c ****                 float elec_theta,mech_theta;
 194:../BLDCMotor/motorctrl.c ****                 int32_t Q15_Mechtheta;
 195:../BLDCMotor/motorctrl.c ****                 Q15_Mechtheta = ((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_COV))[0];
 196:../BLDCMotor/motorctrl.c ****                 mech_theta = _IQ15toF(Q15_Mechtheta);
 197:../BLDCMotor/motorctrl.c ****                 // mech_theta = (mech_theta - sg_MecThetaOffset + _2PI);
 198:../BLDCMotor/motorctrl.c ****                 elec_theta = mech_theta * MOTOR_PAIR;
 199:../BLDCMotor/motorctrl.c ****                 // elec_theta += (ANGLE_COMPENSATA/1.0f);
 200:../BLDCMotor/motorctrl.c ****                 elec_theta = _IQ15toF(_IQ15(elec_theta) % (Q15_2PI));
 201:../BLDCMotor/motorctrl.c ****                 sg_motordebug.ele_angle = elec_theta;
 202:../BLDCMotor/motorctrl.c ****                 _currmentloop(i_abc,sg_motordebug.self_ele_theta);
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 5


 203:../BLDCMotor/motorctrl.c **** 
 204:../BLDCMotor/motorctrl.c ****                 dq_t udq = {0.0f,1.0f,_IQ15(0.0f),_IQ15(0.8f)};
 205:../BLDCMotor/motorctrl.c ****                 alpbet_t uab,uab_q15;            
 206:../BLDCMotor/motorctrl.c ****                 if (sg_motordebug.self_ele_theta > 6.28f)
 207:../BLDCMotor/motorctrl.c ****                 {
 208:../BLDCMotor/motorctrl.c ****                     sg_motordebug.self_ele_theta = 0.0f;
 209:../BLDCMotor/motorctrl.c ****                 }
 210:../BLDCMotor/motorctrl.c ****                 uab = _2r_2s(udq, sg_motordebug.self_ele_theta);
 211:../BLDCMotor/motorctrl.c ****                 dut01 = _svpwm(uab.alpha,uab.beta);
 212:../BLDCMotor/motorctrl.c ****                 motor_set_pwm(dut01);
 213:../BLDCMotor/motorctrl.c **** 
 214:../BLDCMotor/motorctrl.c ****                 sg_motordebug.self_ele_theta += 0.31415926f;
 215:../BLDCMotor/motorctrl.c **** 
 216:../BLDCMotor/motorctrl.c **** 
 217:../BLDCMotor/motorctrl.c ****             #endif
 218:../BLDCMotor/motorctrl.c **** 
 219:../BLDCMotor/motorctrl.c ****             
 220:../BLDCMotor/motorctrl.c ****         }
 221:../BLDCMotor/motorctrl.c ****     #else //使用传感器
 222:../BLDCMotor/motorctrl.c ****     {
 223:../BLDCMotor/motorctrl.c ****         dq_t udq = {0.0f,-1.0f,_IQ15(0.0f),_IQ15(0.8f)};
 224:../BLDCMotor/motorctrl.c ****         alpbet_t uab,uab_q15;
 225:../BLDCMotor/motorctrl.c ****         #if 1/*闭环控制*/
 226:../BLDCMotor/motorctrl.c ****             // udq = _currmentloop(i_abc,elec_theta);
 227:../BLDCMotor/motorctrl.c ****         #endif
 228:../BLDCMotor/motorctrl.c ****         uab = _2r_2s(udq, elec_theta - PI_2);
 229:../BLDCMotor/motorctrl.c ****         dut01 = _svpwm(uab.alpha,uab.beta);
 230:../BLDCMotor/motorctrl.c ****         motor_set_pwm(dut01);
 231:../BLDCMotor/motorctrl.c ****     }
 232:../BLDCMotor/motorctrl.c ****     #endif
 233:../BLDCMotor/motorctrl.c **** 
 234:../BLDCMotor/motorctrl.c ****     return;
 235:../BLDCMotor/motorctrl.c **** }
 236:../BLDCMotor/motorctrl.c **** void _limit_voltagecircle(uint32_t u_ref,uint32_t elec_theta)
 237:../BLDCMotor/motorctrl.c **** {
 238:../BLDCMotor/motorctrl.c ****     uint32_t u_alpha,u_beta;
 239:../BLDCMotor/motorctrl.c ****     u_alpha = u_ref * cosf(elec_theta);
 240:../BLDCMotor/motorctrl.c ****     u_beta = u_ref * sinf(elec_theta);
 241:../BLDCMotor/motorctrl.c **** }
 242:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 243:../BLDCMotor/motorctrl.c **** {
 244:../BLDCMotor/motorctrl.c **** #if 0
 245:../BLDCMotor/motorctrl.c ****     /*--------------对电流进行反Clark变化-----------------------*/
 246:../BLDCMotor/motorctrl.c ****     alpbet_t i_alphbeta;
 247:../BLDCMotor/motorctrl.c ****     dq_t i_dq;
 248:../BLDCMotor/motorctrl.c ****     // i_abc.a = cosf(ele_theta);
 249:../BLDCMotor/motorctrl.c ****     // i_abc.b = cosf(ele_theta - _2PI/3.0f);
 250:../BLDCMotor/motorctrl.c ****     // i_abc.c = cosf(ele_theta + _2PI/3.0f);
 251:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 252:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 253:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 254:../BLDCMotor/motorctrl.c ****     i_abc.Q_a = _IQ15(i_abc.a);
 255:../BLDCMotor/motorctrl.c ****     i_abc.Q_b = _IQ15(i_abc.b);
 256:../BLDCMotor/motorctrl.c ****     i_abc.Q_c = _IQ15(i_abc.c);
 257:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ia = i_abc.Q_a;
 258:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ib = i_abc.Q_b;
 259:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ic = i_abc.Q_c;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 6


 260:../BLDCMotor/motorctrl.c **** 
 261:../BLDCMotor/motorctrl.c ****     _3s_2s_Q(i_abc,&i_alphbeta);
 262:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ialpha = i_alphbeta.Q_alpha;
 263:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ibeta = i_alphbeta.Q_beta;
 264:../BLDCMotor/motorctrl.c **** 
 265:../BLDCMotor/motorctrl.c ****     /*-------------对电流进行反Park变换------------------------*/
 266:../BLDCMotor/motorctrl.c ****     _2s_2r_Q(i_alphbeta,(uint32_t)_IQ15((ele_theta - PI/2.0f)),&i_dq);
 267:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_id = (i_dq.Q_d);
 268:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_iq = (i_dq.Q_q);
 269:../BLDCMotor/motorctrl.c **** #else
 270:../BLDCMotor/motorctrl.c ****     alpbet_t i_alphbeta;
 271:../BLDCMotor/motorctrl.c ****     dq_t i_dq;
 272:../BLDCMotor/motorctrl.c ****     test_ia = cosf(ele_theta);
 273:../BLDCMotor/motorctrl.c ****     test_ib = cosf(ele_theta - _2PI/3.0f);
 274:../BLDCMotor/motorctrl.c ****     test_ic = cosf(ele_theta + _2PI/3.0f);
 275:../BLDCMotor/motorctrl.c **** 
 276:../BLDCMotor/motorctrl.c ****     // i_abc.a = test_ib;
 277:../BLDCMotor/motorctrl.c ****     // i_abc.b = test_ic;
 278:../BLDCMotor/motorctrl.c ****     // i_abc.c = test_ia;
 279:../BLDCMotor/motorctrl.c **** 
 280:../BLDCMotor/motorctrl.c ****     // i_abc.a = test_ia;
 281:../BLDCMotor/motorctrl.c ****     // i_abc.b = test_ib;
 282:../BLDCMotor/motorctrl.c ****     // i_abc.c = test_ic;
 283:../BLDCMotor/motorctrl.c **** 
 284:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 285:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 286:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 287:../BLDCMotor/motorctrl.c ****     _3s_2s(i_abc,&i_alphbeta);
 288:../BLDCMotor/motorctrl.c ****     sg_motordebug.ialpha = i_alphbeta.alpha;
 289:../BLDCMotor/motorctrl.c ****     sg_motordebug.ibeta = i_alphbeta.beta;    
 290:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)-PI_2),&i_dq);
 291:../BLDCMotor/motorctrl.c ****     sg_motordebug.id = (i_dq.d);
 292:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 293:../BLDCMotor/motorctrl.c **** 
 294:../BLDCMotor/motorctrl.c **** #if 1
 295:../BLDCMotor/motorctrl.c ****     dq_t udq;
 296:../BLDCMotor/motorctrl.c ****     udq.d =pid_contrl(sgp_curloop_d_pid,RTT_test_Id,i_dq.d);
 297:../BLDCMotor/motorctrl.c ****     udq.q = 0.9f;
 298:../BLDCMotor/motorctrl.c **** #endif
 299:../BLDCMotor/motorctrl.c ****     return udq;
 300:../BLDCMotor/motorctrl.c **** #endif
 301:../BLDCMotor/motorctrl.c **** }
 302:../BLDCMotor/motorctrl.c **** 
 303:../BLDCMotor/motorctrl.c **** static void motor_enable(void)
 304:../BLDCMotor/motorctrl.c **** {
 305:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 306:../BLDCMotor/motorctrl.c ****     gpio_setmotor_power();
 307:../BLDCMotor/motorctrl.c **** #endif
 308:../BLDCMotor/motorctrl.c ****     /*pwm 使能*/
 309:../BLDCMotor/motorctrl.c ****     tim_pwm_enable();
 310:../BLDCMotor/motorctrl.c ****     tim_tigger_adc();
 311:../BLDCMotor/motorctrl.c ****     adc_start();
 312:../BLDCMotor/motorctrl.c **** }
 313:../BLDCMotor/motorctrl.c **** static void motor_enable_noirq(void)
 314:../BLDCMotor/motorctrl.c **** {
  28              		.loc 1 314 1 view -0
  29              		.cfi_startproc
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 7


  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32 0000 08B5     		push	{r3, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 3, -8
  36              		.cfi_offset 14, -4
 315:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 316:../BLDCMotor/motorctrl.c ****     gpio_setmotor_power();
 317:../BLDCMotor/motorctrl.c **** #endif    
 318:../BLDCMotor/motorctrl.c ****     /*pwm 使能*/
 319:../BLDCMotor/motorctrl.c ****     tim_pwm_enable();
  37              		.loc 1 319 5 view .LVU1
  38 0002 FFF7FEFF 		bl	tim_pwm_enable
  39              	.LVL0:
 320:../BLDCMotor/motorctrl.c **** }
  40              		.loc 1 320 1 is_stmt 0 view .LVU2
  41 0006 08BD     		pop	{r3, pc}
  42              		.cfi_endproc
  43              	.LFE334:
  45              		.section	.text.motor_set_pwm,"ax",%progbits
  46              		.align	1
  47              		.syntax unified
  48              		.thumb
  49              		.thumb_func
  51              	motor_set_pwm:
  52              	.LFB336:
 321:../BLDCMotor/motorctrl.c **** static void motor_disable(void)
 322:../BLDCMotor/motorctrl.c **** {
 323:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 324:../BLDCMotor/motorctrl.c ****     gpio_setmotor_powerdown();
 325:../BLDCMotor/motorctrl.c **** #endif    
 326:../BLDCMotor/motorctrl.c ****     tim_pwm_disable();
 327:../BLDCMotor/motorctrl.c ****     adc_stop();
 328:../BLDCMotor/motorctrl.c **** }
 329:../BLDCMotor/motorctrl.c **** static void motor_set_pwm(duty_t temp)
 330:../BLDCMotor/motorctrl.c **** {
  53              		.loc 1 330 1 is_stmt 1 view -0
  54              		.cfi_startproc
  55              		@ args = 0, pretend = 0, frame = 16
  56              		@ frame_needed = 0, uses_anonymous_args = 0
  57 0000 00B5     		push	{lr}
  58              	.LCFI1:
  59              		.cfi_def_cfa_offset 4
  60              		.cfi_offset 14, -4
  61 0002 85B0     		sub	sp, sp, #20
  62              	.LCFI2:
  63              		.cfi_def_cfa_offset 24
  64 0004 8DED010A 		vstr.32	s0, [sp, #4]
  65 0008 CDED020A 		vstr.32	s1, [sp, #8]
  66 000c 8DED031A 		vstr.32	s2, [sp, #12]
 331:../BLDCMotor/motorctrl.c ****     tim_set_pwm(temp._a,temp._b,temp._c);
  67              		.loc 1 331 5 view .LVU4
  68 0010 FFF7FEFF 		bl	tim_set_pwm
  69              	.LVL1:
 332:../BLDCMotor/motorctrl.c **** }
  70              		.loc 1 332 1 is_stmt 0 view .LVU5
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 8


  71 0014 05B0     		add	sp, sp, #20
  72              	.LCFI3:
  73              		.cfi_def_cfa_offset 4
  74              		@ sp needed
  75 0016 5DF804FB 		ldr	pc, [sp], #4
  76              		.cfi_endproc
  77              	.LFE336:
  79              		.section	.text.motor_enable,"ax",%progbits
  80              		.align	1
  81              		.syntax unified
  82              		.thumb
  83              		.thumb_func
  85              	motor_enable:
  86              	.LFB333:
 304:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
  87              		.loc 1 304 1 is_stmt 1 view -0
  88              		.cfi_startproc
  89              		@ args = 0, pretend = 0, frame = 0
  90              		@ frame_needed = 0, uses_anonymous_args = 0
  91 0000 08B5     		push	{r3, lr}
  92              	.LCFI4:
  93              		.cfi_def_cfa_offset 8
  94              		.cfi_offset 3, -8
  95              		.cfi_offset 14, -4
 309:../BLDCMotor/motorctrl.c ****     tim_tigger_adc();
  96              		.loc 1 309 5 view .LVU7
  97 0002 FFF7FEFF 		bl	tim_pwm_enable
  98              	.LVL2:
 310:../BLDCMotor/motorctrl.c ****     adc_start();
  99              		.loc 1 310 5 view .LVU8
 100 0006 FFF7FEFF 		bl	tim_tigger_adc
 101              	.LVL3:
 311:../BLDCMotor/motorctrl.c **** }
 102              		.loc 1 311 5 view .LVU9
 103 000a FFF7FEFF 		bl	adc_start
 104              	.LVL4:
 312:../BLDCMotor/motorctrl.c **** static void motor_enable_noirq(void)
 105              		.loc 1 312 1 is_stmt 0 view .LVU10
 106 000e 08BD     		pop	{r3, pc}
 107              		.cfi_endproc
 108              	.LFE333:
 110              		.section	.text.motor_disable,"ax",%progbits
 111              		.align	1
 112              		.syntax unified
 113              		.thumb
 114              		.thumb_func
 116              	motor_disable:
 117              	.LFB335:
 322:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 118              		.loc 1 322 1 is_stmt 1 view -0
 119              		.cfi_startproc
 120              		@ args = 0, pretend = 0, frame = 0
 121              		@ frame_needed = 0, uses_anonymous_args = 0
 122 0000 08B5     		push	{r3, lr}
 123              	.LCFI5:
 124              		.cfi_def_cfa_offset 8
 125              		.cfi_offset 3, -8
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 9


 126              		.cfi_offset 14, -4
 326:../BLDCMotor/motorctrl.c ****     adc_stop();
 127              		.loc 1 326 5 view .LVU12
 128 0002 FFF7FEFF 		bl	tim_pwm_disable
 129              	.LVL5:
 327:../BLDCMotor/motorctrl.c **** }
 130              		.loc 1 327 5 view .LVU13
 131 0006 FFF7FEFF 		bl	adc_stop
 132              	.LVL6:
 328:../BLDCMotor/motorctrl.c **** static void motor_set_pwm(duty_t temp)
 133              		.loc 1 328 1 is_stmt 0 view .LVU14
 134 000a 08BD     		pop	{r3, pc}
 135              		.cfi_endproc
 136              	.LFE335:
 138              		.section	.text._get_angleoffset,"ax",%progbits
 139              		.align	1
 140              		.syntax unified
 141              		.thumb
 142              		.thumb_func
 144              	_get_angleoffset:
 145              	.LFB337:
 333:../BLDCMotor/motorctrl.c **** static float _get_angleoffset(void)
 334:../BLDCMotor/motorctrl.c **** {
 146              		.loc 1 334 1 is_stmt 1 view -0
 147              		.cfi_startproc
 148              		@ args = 0, pretend = 0, frame = 32
 149              		@ frame_needed = 0, uses_anonymous_args = 0
 150 0000 30B5     		push	{r4, r5, lr}
 151              	.LCFI6:
 152              		.cfi_def_cfa_offset 12
 153              		.cfi_offset 4, -12
 154              		.cfi_offset 5, -8
 155              		.cfi_offset 14, -4
 156 0002 89B0     		sub	sp, sp, #36
 157              	.LCFI7:
 158              		.cfi_def_cfa_offset 48
 335:../BLDCMotor/motorctrl.c ****     motor_enable_noirq();
 159              		.loc 1 335 5 view .LVU16
 160 0004 FFF7FEFF 		bl	motor_enable_noirq
 161              	.LVL7:
 336:../BLDCMotor/motorctrl.c ****     /*-----------设置alpha/beta坐标系------------------*/
 337:../BLDCMotor/motorctrl.c ****     alpbet_t uab = {1.0f,0.0f};
 162              		.loc 1 337 5 view .LVU17
 163              		.loc 1 337 14 is_stmt 0 view .LVU18
 164 0008 0025     		movs	r5, #0
 165 000a 0495     		str	r5, [sp, #16]
 166 000c 0595     		str	r5, [sp, #20]
 167 000e 0695     		str	r5, [sp, #24]
 168 0010 0795     		str	r5, [sp, #28]
 169 0012 B7EE000A 		vmov.f32	s0, #1.0e+0
 170 0016 8DED040A 		vstr.32	s0, [sp, #16]
 338:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 171              		.loc 1 338 5 is_stmt 1 view .LVU19
 339:../BLDCMotor/motorctrl.c ****     float theta;
 172              		.loc 1 339 5 view .LVU20
 340:../BLDCMotor/motorctrl.c ****     dut01 = _svpwm(uab.alpha,uab.beta);
 173              		.loc 1 340 5 view .LVU21
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 10


 174              		.loc 1 340 13 is_stmt 0 view .LVU22
 175 001a DFED140A 		vldr.32	s1, .L13
 176 001e FFF7FEFF 		bl	_svpwm
 177              	.LVL8:
 178 0022 8DED010A 		vstr.32	s0, [sp, #4]
 179 0026 CDED020A 		vstr.32	s1, [sp, #8]
 180 002a 8DED031A 		vstr.32	s2, [sp, #12]
 341:../BLDCMotor/motorctrl.c ****     motor_set_pwm(dut01);
 181              		.loc 1 341 5 is_stmt 1 view .LVU23
 182 002e FFF7FEFF 		bl	motor_set_pwm
 183              	.LVL9:
 342:../BLDCMotor/motorctrl.c ****     HAL_Delay(500);
 184              		.loc 1 342 5 view .LVU24
 185 0032 4FF4FA70 		mov	r0, #500
 186 0036 FFF7FEFF 		bl	HAL_Delay
 187              	.LVL10:
 343:../BLDCMotor/motorctrl.c ****     #ifdef BOARD_STM32H723
 344:../BLDCMotor/motorctrl.c ****         tim_encode_writecnt(0);
 345:../BLDCMotor/motorctrl.c ****         theta = 0.0f;
 346:../BLDCMotor/motorctrl.c ****         motor_disable();
 347:../BLDCMotor/motorctrl.c ****         return theta;
 348:../BLDCMotor/motorctrl.c ****     #endif
 349:../BLDCMotor/motorctrl.c **** 
 350:../BLDCMotor/motorctrl.c ****     #ifdef BOARD_STM32G431
 351:../BLDCMotor/motorctrl.c ****         motor_disable();
 188              		.loc 1 351 9 view .LVU25
 189 003a FFF7FEFF 		bl	motor_disable
 190              	.LVL11:
 352:../BLDCMotor/motorctrl.c ****         int32_t Q15_theta;
 191              		.loc 1 352 9 view .LVU26
 353:../BLDCMotor/motorctrl.c ****         int32_t Q_thetaSum = 0;
 192              		.loc 1 353 9 view .LVU27
 354:../BLDCMotor/motorctrl.c ****         for (uint8_t i = 0; i < 10; i++)
 193              		.loc 1 354 9 view .LVU28
 194              	.LBB2:
 195              		.loc 1 354 14 view .LVU29
 196              		.loc 1 354 22 is_stmt 0 view .LVU30
 197 003e 2C46     		mov	r4, r5
 198              		.loc 1 354 9 view .LVU31
 199 0040 07E0     		b	.L10
 200              	.LVL12:
 201              	.L11:
 355:../BLDCMotor/motorctrl.c ****         {
 356:../BLDCMotor/motorctrl.c ****             Q_thetaSum += ((int32_t*)(sensor_user_read(SENSOR_01,EN_SENSORDATA_COV)))[0];
 202              		.loc 1 356 13 is_stmt 1 discriminator 3 view .LVU32
 203              		.loc 1 356 39 is_stmt 0 discriminator 3 view .LVU33
 204 0042 0121     		movs	r1, #1
 205 0044 0020     		movs	r0, #0
 206 0046 FFF7FEFF 		bl	sensor_user_read
 207              	.LVL13:
 208              		.loc 1 356 86 discriminator 3 view .LVU34
 209 004a 0368     		ldr	r3, [r0]
 210              		.loc 1 356 24 discriminator 3 view .LVU35
 211 004c 1D44     		add	r5, r5, r3
 212              	.LVL14:
 354:../BLDCMotor/motorctrl.c ****         for (uint8_t i = 0; i < 10; i++)
 213              		.loc 1 354 37 is_stmt 1 discriminator 3 view .LVU36
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 11


 354:../BLDCMotor/motorctrl.c ****         for (uint8_t i = 0; i < 10; i++)
 214              		.loc 1 354 38 is_stmt 0 discriminator 3 view .LVU37
 215 004e 0134     		adds	r4, r4, #1
 216              	.LVL15:
 354:../BLDCMotor/motorctrl.c ****         for (uint8_t i = 0; i < 10; i++)
 217              		.loc 1 354 38 discriminator 3 view .LVU38
 218 0050 E4B2     		uxtb	r4, r4
 219              	.LVL16:
 220              	.L10:
 354:../BLDCMotor/motorctrl.c ****         for (uint8_t i = 0; i < 10; i++)
 221              		.loc 1 354 29 is_stmt 1 discriminator 1 view .LVU39
 354:../BLDCMotor/motorctrl.c ****         for (uint8_t i = 0; i < 10; i++)
 222              		.loc 1 354 9 is_stmt 0 discriminator 1 view .LVU40
 223 0052 092C     		cmp	r4, #9
 224 0054 F5D9     		bls	.L11
 225              	.LBE2:
 357:../BLDCMotor/motorctrl.c ****         }
 358:../BLDCMotor/motorctrl.c ****         Q15_theta = Q_thetaSum/10;        
 226              		.loc 1 358 9 is_stmt 1 view .LVU41
 227              		.loc 1 358 19 is_stmt 0 view .LVU42
 228 0056 0648     		ldr	r0, .L13+4
 229 0058 80FB0530 		smull	r3, r0, r0, r5
 230 005c ED17     		asrs	r5, r5, #31
 231              	.LVL17:
 359:../BLDCMotor/motorctrl.c ****         theta = _IQ15toF(Q15_theta);
 232              		.loc 1 359 9 is_stmt 1 view .LVU43
 233              		.loc 1 359 17 is_stmt 0 view .LVU44
 234 005e C5EBA000 		rsb	r0, r5, r0, asr #2
 235              	.LVL18:
 236              		.loc 1 359 17 view .LVU45
 237 0062 FFF7FEFF 		bl	_IQ15toF
 238              	.LVL19:
 360:../BLDCMotor/motorctrl.c ****         return theta;
 239              		.loc 1 360 9 is_stmt 1 view .LVU46
 361:../BLDCMotor/motorctrl.c ****     #endif
 362:../BLDCMotor/motorctrl.c **** }
 240              		.loc 1 362 1 is_stmt 0 view .LVU47
 241 0066 09B0     		add	sp, sp, #36
 242              	.LCFI8:
 243              		.cfi_def_cfa_offset 12
 244              		@ sp needed
 245 0068 30BD     		pop	{r4, r5, pc}
 246              	.LVL20:
 247              	.L14:
 248              		.loc 1 362 1 view .LVU48
 249 006a 00BF     		.align	2
 250              	.L13:
 251 006c 00000000 		.word	0
 252 0070 67666666 		.word	1717986919
 253              		.cfi_endproc
 254              	.LFE337:
 256              		.section	.text._currmentloop,"ax",%progbits
 257              		.align	1
 258              		.syntax unified
 259              		.thumb
 260              		.thumb_func
 262              	_currmentloop:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 12


 263              	.LVL21:
 264              	.LFB332:
 243:../BLDCMotor/motorctrl.c **** #if 0
 265              		.loc 1 243 1 is_stmt 1 view -0
 266              		.cfi_startproc
 267              		@ args = 28, pretend = 16, frame = 32
 268              		@ frame_needed = 0, uses_anonymous_args = 0
 243:../BLDCMotor/motorctrl.c **** #if 0
 269              		.loc 1 243 1 is_stmt 0 view .LVU50
 270 0000 84B0     		sub	sp, sp, #16
 271              	.LCFI9:
 272              		.cfi_def_cfa_offset 16
 273 0002 F0B5     		push	{r4, r5, r6, r7, lr}
 274              	.LCFI10:
 275              		.cfi_def_cfa_offset 36
 276              		.cfi_offset 4, -36
 277              		.cfi_offset 5, -32
 278              		.cfi_offset 6, -28
 279              		.cfi_offset 7, -24
 280              		.cfi_offset 14, -20
 281 0004 2DED028B 		vpush.64	{d8}
 282              	.LCFI11:
 283              		.cfi_def_cfa_offset 44
 284              		.cfi_offset 80, -44
 285              		.cfi_offset 81, -40
 286 0008 8DB0     		sub	sp, sp, #52
 287              	.LCFI12:
 288              		.cfi_def_cfa_offset 96
 289 000a 0646     		mov	r6, r0
 290 000c 15AD     		add	r5, sp, #84
 291 000e 85E80E00 		stm	r5, {r1, r2, r3}
 292 0012 B0EE408A 		vmov.f32	s16, s0
 270:../BLDCMotor/motorctrl.c ****     dq_t i_dq;
 293              		.loc 1 270 5 is_stmt 1 view .LVU51
 271:../BLDCMotor/motorctrl.c ****     test_ia = cosf(ele_theta);
 294              		.loc 1 271 5 view .LVU52
 272:../BLDCMotor/motorctrl.c ****     test_ib = cosf(ele_theta - _2PI/3.0f);
 295              		.loc 1 272 5 view .LVU53
 272:../BLDCMotor/motorctrl.c ****     test_ib = cosf(ele_theta - _2PI/3.0f);
 296              		.loc 1 272 15 is_stmt 0 view .LVU54
 297 0016 FFF7FEFF 		bl	cosf
 298              	.LVL22:
 272:../BLDCMotor/motorctrl.c ****     test_ib = cosf(ele_theta - _2PI/3.0f);
 299              		.loc 1 272 13 view .LVU55
 300 001a 264B     		ldr	r3, .L17
 301 001c 83ED000A 		vstr.32	s0, [r3]
 273:../BLDCMotor/motorctrl.c ****     test_ic = cosf(ele_theta + _2PI/3.0f);
 302              		.loc 1 273 5 is_stmt 1 view .LVU56
 273:../BLDCMotor/motorctrl.c ****     test_ic = cosf(ele_theta + _2PI/3.0f);
 303              		.loc 1 273 15 is_stmt 0 view .LVU57
 304 0020 DFED258A 		vldr.32	s17, .L17+4
 305 0024 38EE680A 		vsub.f32	s0, s16, s17
 306 0028 FFF7FEFF 		bl	cosf
 307              	.LVL23:
 273:../BLDCMotor/motorctrl.c ****     test_ic = cosf(ele_theta + _2PI/3.0f);
 308              		.loc 1 273 13 view .LVU58
 309 002c 234B     		ldr	r3, .L17+8
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 13


 310 002e 83ED000A 		vstr.32	s0, [r3]
 274:../BLDCMotor/motorctrl.c **** 
 311              		.loc 1 274 5 is_stmt 1 view .LVU59
 274:../BLDCMotor/motorctrl.c **** 
 312              		.loc 1 274 15 is_stmt 0 view .LVU60
 313 0032 38EE280A 		vadd.f32	s0, s16, s17
 314 0036 FFF7FEFF 		bl	cosf
 315              	.LVL24:
 274:../BLDCMotor/motorctrl.c **** 
 316              		.loc 1 274 13 view .LVU61
 317 003a 214B     		ldr	r3, .L17+12
 318 003c 83ED000A 		vstr.32	s0, [r3]
 284:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 319              		.loc 1 284 5 is_stmt 1 view .LVU62
 284:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 320              		.loc 1 284 22 is_stmt 0 view .LVU63
 321 0040 204C     		ldr	r4, .L17+16
 322 0042 159B     		ldr	r3, [sp, #84]	@ float
 323 0044 2360     		str	r3, [r4]	@ float
 285:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 324              		.loc 1 285 5 is_stmt 1 view .LVU64
 285:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 325              		.loc 1 285 29 is_stmt 0 view .LVU65
 326 0046 169B     		ldr	r3, [sp, #88]	@ float
 285:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 327              		.loc 1 285 22 view .LVU66
 328 0048 6360     		str	r3, [r4, #4]	@ float
 286:../BLDCMotor/motorctrl.c ****     _3s_2s(i_abc,&i_alphbeta);
 329              		.loc 1 286 5 is_stmt 1 view .LVU67
 286:../BLDCMotor/motorctrl.c ****     _3s_2s(i_abc,&i_alphbeta);
 330              		.loc 1 286 29 is_stmt 0 view .LVU68
 331 004a 179B     		ldr	r3, [sp, #92]	@ float
 286:../BLDCMotor/motorctrl.c ****     _3s_2s(i_abc,&i_alphbeta);
 332              		.loc 1 286 22 view .LVU69
 333 004c A360     		str	r3, [r4, #8]	@ float
 287:../BLDCMotor/motorctrl.c ****     sg_motordebug.ialpha = i_alphbeta.alpha;
 334              		.loc 1 287 5 is_stmt 1 view .LVU70
 335 004e 08AF     		add	r7, sp, #32
 336 0050 0297     		str	r7, [sp, #8]
 337 0052 19AB     		add	r3, sp, #100
 338 0054 93E80300 		ldm	r3, {r0, r1}
 339 0058 8DE80300 		stm	sp, {r0, r1}
 340 005c 95E80F00 		ldm	r5, {r0, r1, r2, r3}
 341 0060 FFF7FEFF 		bl	_3s_2s
 342              	.LVL25:
 288:../BLDCMotor/motorctrl.c ****     sg_motordebug.ibeta = i_alphbeta.beta;    
 343              		.loc 1 288 5 view .LVU71
 288:../BLDCMotor/motorctrl.c ****     sg_motordebug.ibeta = i_alphbeta.beta;    
 344              		.loc 1 288 38 is_stmt 0 view .LVU72
 345 0064 089B     		ldr	r3, [sp, #32]	@ float
 288:../BLDCMotor/motorctrl.c ****     sg_motordebug.ibeta = i_alphbeta.beta;    
 346              		.loc 1 288 26 view .LVU73
 347 0066 E360     		str	r3, [r4, #12]	@ float
 289:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)-PI_2),&i_dq);
 348              		.loc 1 289 5 is_stmt 1 view .LVU74
 289:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)-PI_2),&i_dq);
 349              		.loc 1 289 37 is_stmt 0 view .LVU75
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 14


 350 0068 099B     		ldr	r3, [sp, #36]	@ float
 289:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)-PI_2),&i_dq);
 351              		.loc 1 289 25 view .LVU76
 352 006a 2361     		str	r3, [r4, #16]	@ float
 290:../BLDCMotor/motorctrl.c ****     sg_motordebug.id = (i_dq.d);
 353              		.loc 1 290 5 is_stmt 1 view .LVU77
 354 006c 04AB     		add	r3, sp, #16
 355 006e 0093     		str	r3, [sp]
 356 0070 9FED150A 		vldr.32	s0, .L17+20
 357 0074 38EE400A 		vsub.f32	s0, s16, s0
 358 0078 97E80F00 		ldm	r7, {r0, r1, r2, r3}
 359 007c FFF7FEFF 		bl	_2s_2r
 360              	.LVL26:
 291:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 361              		.loc 1 291 5 view .LVU78
 291:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 362              		.loc 1 291 29 is_stmt 0 view .LVU79
 363 0080 DDED040A 		vldr.32	s1, [sp, #16]
 291:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 364              		.loc 1 291 22 view .LVU80
 365 0084 C4ED050A 		vstr.32	s1, [r4, #20]
 292:../BLDCMotor/motorctrl.c **** 
 366              		.loc 1 292 5 is_stmt 1 view .LVU81
 292:../BLDCMotor/motorctrl.c **** 
 367              		.loc 1 292 29 is_stmt 0 view .LVU82
 368 0088 059B     		ldr	r3, [sp, #20]	@ float
 292:../BLDCMotor/motorctrl.c **** 
 369              		.loc 1 292 22 view .LVU83
 370 008a A361     		str	r3, [r4, #24]	@ float
 295:../BLDCMotor/motorctrl.c ****     udq.d =pid_contrl(sgp_curloop_d_pid,RTT_test_Id,i_dq.d);
 371              		.loc 1 295 5 is_stmt 1 view .LVU84
 296:../BLDCMotor/motorctrl.c ****     udq.q = 0.9f;
 372              		.loc 1 296 5 view .LVU85
 296:../BLDCMotor/motorctrl.c ****     udq.q = 0.9f;
 373              		.loc 1 296 12 is_stmt 0 view .LVU86
 374 008c 0F4B     		ldr	r3, .L17+24
 375 008e 93ED000A 		vldr.32	s0, [r3]
 376 0092 0F4B     		ldr	r3, .L17+28
 377 0094 1868     		ldr	r0, [r3]
 378 0096 FFF7FEFF 		bl	pid_contrl
 379              	.LVL27:
 296:../BLDCMotor/motorctrl.c ****     udq.q = 0.9f;
 380              		.loc 1 296 11 view .LVU87
 381 009a 86ED000A 		vstr.32	s0, [r6]
 297:../BLDCMotor/motorctrl.c **** #endif
 382              		.loc 1 297 5 is_stmt 1 view .LVU88
 297:../BLDCMotor/motorctrl.c **** #endif
 383              		.loc 1 297 11 is_stmt 0 view .LVU89
 384 009e 0D4B     		ldr	r3, .L17+32
 385 00a0 7360     		str	r3, [r6, #4]	@ float
 299:../BLDCMotor/motorctrl.c **** #endif
 386              		.loc 1 299 5 is_stmt 1 view .LVU90
 301:../BLDCMotor/motorctrl.c **** 
 387              		.loc 1 301 1 is_stmt 0 view .LVU91
 388 00a2 3046     		mov	r0, r6
 389 00a4 0DB0     		add	sp, sp, #52
 390              	.LCFI13:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 15


 391              		.cfi_def_cfa_offset 44
 392              		@ sp needed
 393 00a6 BDEC028B 		vldm	sp!, {d8}
 394              	.LCFI14:
 395              		.cfi_restore 80
 396              		.cfi_restore 81
 397              		.cfi_def_cfa_offset 36
 398              	.LVL28:
 301:../BLDCMotor/motorctrl.c **** 
 399              		.loc 1 301 1 view .LVU92
 400 00aa BDE8F040 		pop	{r4, r5, r6, r7, lr}
 401              	.LCFI15:
 402              		.cfi_restore 14
 403              		.cfi_restore 7
 404              		.cfi_restore 6
 405              		.cfi_restore 5
 406              		.cfi_restore 4
 407              		.cfi_def_cfa_offset 16
 408              	.LVL29:
 301:../BLDCMotor/motorctrl.c **** 
 409              		.loc 1 301 1 view .LVU93
 410 00ae 04B0     		add	sp, sp, #16
 411              	.LCFI16:
 412              		.cfi_def_cfa_offset 0
 413 00b0 7047     		bx	lr
 414              	.L18:
 415 00b2 00BF     		.align	2
 416              	.L17:
 417 00b4 00000000 		.word	.LANCHOR0
 418 00b8 910A0640 		.word	1074137745
 419 00bc 00000000 		.word	.LANCHOR1
 420 00c0 00000000 		.word	.LANCHOR2
 421 00c4 00000000 		.word	.LANCHOR3
 422 00c8 D80FC93F 		.word	1070141400
 423 00cc 00000000 		.word	RTT_test_Id
 424 00d0 00000000 		.word	.LANCHOR4
 425 00d4 6666663F 		.word	1063675494
 426              		.cfi_endproc
 427              	.LFE332:
 429              		.section	.text._50uscycle_process,"ax",%progbits
 430              		.align	1
 431              		.global	_50uscycle_process
 432              		.syntax unified
 433              		.thumb
 434              		.thumb_func
 436              	_50uscycle_process:
 437              	.LVL30:
 438              	.LFB330:
 108:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431    
 439              		.loc 1 108 1 is_stmt 1 view -0
 440              		.cfi_startproc
 441              		@ args = 0, pretend = 0, frame = 88
 442              		@ frame_needed = 0, uses_anonymous_args = 0
 110:../BLDCMotor/motorctrl.c ****     if (cnt++%3000)
 443              		.loc 1 110 5 view .LVU95
 111:../BLDCMotor/motorctrl.c ****     {
 444              		.loc 1 111 5 view .LVU96
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 16


 111:../BLDCMotor/motorctrl.c ****     {
 445              		.loc 1 111 12 is_stmt 0 view .LVU97
 446 0000 554A     		ldr	r2, .L29
 447 0002 1388     		ldrh	r3, [r2]
 448 0004 591C     		adds	r1, r3, #1
 449 0006 1180     		strh	r1, [r2]	@ movhi
 111:../BLDCMotor/motorctrl.c ****     {
 450              		.loc 1 111 9 view .LVU98
 451 0008 544A     		ldr	r2, .L29+4
 452 000a A2FB0312 		umull	r1, r2, r2, r3
 453 000e 9209     		lsrs	r2, r2, #6
 454 0010 40F6B831 		movw	r1, #3000
 455 0014 01FB1233 		mls	r3, r1, r2, r3
 456 0018 9BB2     		uxth	r3, r3
 111:../BLDCMotor/motorctrl.c ****     {
 457              		.loc 1 111 8 view .LVU99
 458 001a 03B1     		cbz	r3, .L28
 459 001c 7047     		bx	lr
 460              	.L28:
 108:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431    
 461              		.loc 1 108 1 view .LVU100
 462 001e 30B5     		push	{r4, r5, lr}
 463              	.LCFI17:
 464              		.cfi_def_cfa_offset 12
 465              		.cfi_offset 4, -12
 466              		.cfi_offset 5, -8
 467              		.cfi_offset 14, -4
 468 0020 2DED028B 		vpush.64	{d8}
 469              	.LCFI18:
 470              		.cfi_def_cfa_offset 20
 471              		.cfi_offset 80, -20
 472              		.cfi_offset 81, -16
 473 0024 9BB0     		sub	sp, sp, #108
 474              	.LCFI19:
 475              		.cfi_def_cfa_offset 128
 116:../BLDCMotor/motorctrl.c **** /*----------------三相电流处理------------------------------*/    
 476              		.loc 1 116 5 is_stmt 1 view .LVU101
 118:../BLDCMotor/motorctrl.c ****     int32_t a1,b1,c1;
 477              		.loc 1 118 5 view .LVU102
 119:../BLDCMotor/motorctrl.c ****     a1 = abc_vale[0] - A_ADCCHANNL_OFFSET;
 478              		.loc 1 119 5 view .LVU103
 120:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 479              		.loc 1 120 5 view .LVU104
 120:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 480              		.loc 1 120 18 is_stmt 0 view .LVU105
 481 0026 0168     		ldr	r1, [r0]
 120:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 482              		.loc 1 120 22 view .LVU106
 483 0028 A1F63401 		subw	r1, r1, #2100
 484              	.LVL31:
 121:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 485              		.loc 1 121 5 is_stmt 1 view .LVU107
 121:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 486              		.loc 1 121 18 is_stmt 0 view .LVU108
 487 002c 4268     		ldr	r2, [r0, #4]
 121:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 488              		.loc 1 121 22 view .LVU109
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 17


 489 002e A2F66602 		subw	r2, r2, #2150
 490              	.LVL32:
 122:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ia = a1;
 491              		.loc 1 122 5 is_stmt 1 view .LVU110
 122:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ia = a1;
 492              		.loc 1 122 18 is_stmt 0 view .LVU111
 493 0032 8368     		ldr	r3, [r0, #8]
 122:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ia = a1;
 494              		.loc 1 122 22 view .LVU112
 495 0034 A3F66603 		subw	r3, r3, #2150
 496              	.LVL33:
 123:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ib = b1;
 497              		.loc 1 123 5 is_stmt 1 view .LVU113
 123:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ib = b1;
 498              		.loc 1 123 24 is_stmt 0 view .LVU114
 499 0038 494C     		ldr	r4, .L29+8
 500 003a E161     		str	r1, [r4, #28]
 124:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ic = c1;    
 501              		.loc 1 124 5 is_stmt 1 view .LVU115
 124:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ic = c1;    
 502              		.loc 1 124 24 is_stmt 0 view .LVU116
 503 003c 2262     		str	r2, [r4, #32]
 125:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 504              		.loc 1 125 5 is_stmt 1 view .LVU117
 125:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 505              		.loc 1 125 24 is_stmt 0 view .LVU118
 506 003e 6362     		str	r3, [r4, #36]
 126:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 507              		.loc 1 126 5 is_stmt 1 view .LVU119
 126:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 508              		.loc 1 126 10 is_stmt 0 view .LVU120
 509 0040 07EE901A 		vmov	s15, r1	@ int
 510 0044 B8EEE70A 		vcvt.f32.s32	s0, s15
 511              	.LVL34:
 127:../BLDCMotor/motorctrl.c ****     Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 512              		.loc 1 127 5 is_stmt 1 view .LVU121
 127:../BLDCMotor/motorctrl.c ****     Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 513              		.loc 1 127 10 is_stmt 0 view .LVU122
 514 0048 07EE902A 		vmov	s15, r2	@ int
 515 004c F8EEE78A 		vcvt.f32.s32	s17, s15
 127:../BLDCMotor/motorctrl.c ****     Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 516              		.loc 1 127 8 view .LVU123
 517 0050 DFED447A 		vldr.32	s15, .L29+12
 518 0054 68EEA78A 		vmul.f32	s17, s17, s15
 519              	.LVL35:
 128:../BLDCMotor/motorctrl.c **** #if 1
 520              		.loc 1 128 5 is_stmt 1 view .LVU124
 128:../BLDCMotor/motorctrl.c **** #if 1
 521              		.loc 1 128 10 is_stmt 0 view .LVU125
 522 0058 07EE903A 		vmov	s15, r3	@ int
 523 005c B8EEE78A 		vcvt.f32.s32	s16, s15
 128:../BLDCMotor/motorctrl.c **** #if 1
 524              		.loc 1 128 8 view .LVU126
 525 0060 DFED417A 		vldr.32	s15, .L29+16
 526 0064 28EE278A 		vmul.f32	s16, s16, s15
 527              	.LVL36:
 130:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 18


 528              		.loc 1 130 5 is_stmt 1 view .LVU127
 131:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 529              		.loc 1 131 5 view .LVU128
 131:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 530              		.loc 1 131 15 is_stmt 0 view .LVU129
 531 0068 404D     		ldr	r5, .L29+20
 532 006a DFED417A 		vldr.32	s15, .L29+24
 533 006e 20EE270A 		vmul.f32	s0, s0, s15
 534              	.LVL37:
 131:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 535              		.loc 1 131 15 view .LVU130
 536 0072 2846     		mov	r0, r5
 537              	.LVL38:
 131:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 538              		.loc 1 131 15 view .LVU131
 539 0074 FFF7FEFF 		bl	lowfilter_cale
 540              	.LVL39:
 131:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 541              		.loc 1 131 13 view .LVU132
 542 0078 8DED110A 		vstr.32	s0, [sp, #68]
 132:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 543              		.loc 1 132 5 is_stmt 1 view .LVU133
 132:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 544              		.loc 1 132 15 is_stmt 0 view .LVU134
 545 007c B0EE680A 		vmov.f32	s0, s17
 546 0080 05F10800 		add	r0, r5, #8
 547 0084 FFF7FEFF 		bl	lowfilter_cale
 548              	.LVL40:
 132:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 549              		.loc 1 132 13 view .LVU135
 550 0088 8DED120A 		vstr.32	s0, [sp, #72]
 133:../BLDCMotor/motorctrl.c **** #else
 551              		.loc 1 133 5 is_stmt 1 view .LVU136
 133:../BLDCMotor/motorctrl.c **** #else
 552              		.loc 1 133 15 is_stmt 0 view .LVU137
 553 008c B0EE480A 		vmov.f32	s0, s16
 554 0090 05F11000 		add	r0, r5, #16
 555 0094 FFF7FEFF 		bl	lowfilter_cale
 556              	.LVL41:
 133:../BLDCMotor/motorctrl.c **** #else
 557              		.loc 1 133 13 view .LVU138
 558 0098 8DED130A 		vstr.32	s0, [sp, #76]
 559              	.LBB3:
 193:../BLDCMotor/motorctrl.c ****                 int32_t Q15_Mechtheta;
 560              		.loc 1 193 17 is_stmt 1 view .LVU139
 194:../BLDCMotor/motorctrl.c ****                 Q15_Mechtheta = ((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_COV))[0];
 561              		.loc 1 194 17 view .LVU140
 195:../BLDCMotor/motorctrl.c ****                 mech_theta = _IQ15toF(Q15_Mechtheta);
 562              		.loc 1 195 17 view .LVU141
 195:../BLDCMotor/motorctrl.c ****                 mech_theta = _IQ15toF(Q15_Mechtheta);
 563              		.loc 1 195 44 is_stmt 0 view .LVU142
 564 009c 0121     		movs	r1, #1
 565 009e 0020     		movs	r0, #0
 566 00a0 FFF7FEFF 		bl	sensor_user_read
 567              	.LVL42:
 196:../BLDCMotor/motorctrl.c ****                 // mech_theta = (mech_theta - sg_MecThetaOffset + _2PI);
 568              		.loc 1 196 17 is_stmt 1 view .LVU143
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 19


 196:../BLDCMotor/motorctrl.c ****                 // mech_theta = (mech_theta - sg_MecThetaOffset + _2PI);
 569              		.loc 1 196 30 is_stmt 0 view .LVU144
 570 00a4 0068     		ldr	r0, [r0]
 571              	.LVL43:
 196:../BLDCMotor/motorctrl.c ****                 // mech_theta = (mech_theta - sg_MecThetaOffset + _2PI);
 572              		.loc 1 196 30 view .LVU145
 573 00a6 FFF7FEFF 		bl	_IQ15toF
 574              	.LVL44:
 198:../BLDCMotor/motorctrl.c ****                 // elec_theta += (ANGLE_COMPENSATA/1.0f);
 575              		.loc 1 198 17 is_stmt 1 view .LVU146
 198:../BLDCMotor/motorctrl.c ****                 // elec_theta += (ANGLE_COMPENSATA/1.0f);
 576              		.loc 1 198 28 is_stmt 0 view .LVU147
 577 00aa 30EE000A 		vadd.f32	s0, s0, s0
 578              	.LVL45:
 200:../BLDCMotor/motorctrl.c ****                 sg_motordebug.ele_angle = elec_theta;
 579              		.loc 1 200 17 is_stmt 1 view .LVU148
 200:../BLDCMotor/motorctrl.c ****                 sg_motordebug.ele_angle = elec_theta;
 580              		.loc 1 200 39 is_stmt 0 view .LVU149
 581 00ae F0EE407A 		vmov.f32	s15, s0
 582 00b2 FEEEE87A 		vcvt.s32.f32	s15, s15, #15
 583 00b6 17EE903A 		vmov	r3, s15	@ int
 200:../BLDCMotor/motorctrl.c ****                 sg_motordebug.ele_angle = elec_theta;
 584              		.loc 1 200 30 view .LVU150
 585 00ba 2E48     		ldr	r0, .L29+28
 586 00bc 80FB0320 		smull	r2, r0, r0, r3
 587 00c0 DA17     		asrs	r2, r3, #31
 588 00c2 C2EBA032 		rsb	r2, r2, r0, asr #14
 589 00c6 2C48     		ldr	r0, .L29+32
 590 00c8 00FB1230 		mls	r0, r0, r2, r3
 591 00cc FFF7FEFF 		bl	_IQ15toF
 592              	.LVL46:
 201:../BLDCMotor/motorctrl.c ****                 _currmentloop(i_abc,sg_motordebug.self_ele_theta);
 593              		.loc 1 201 17 is_stmt 1 view .LVU151
 201:../BLDCMotor/motorctrl.c ****                 _currmentloop(i_abc,sg_motordebug.self_ele_theta);
 594              		.loc 1 201 41 is_stmt 0 view .LVU152
 595 00d0 84ED130A 		vstr.32	s0, [r4, #76]
 202:../BLDCMotor/motorctrl.c **** 
 596              		.loc 1 202 17 is_stmt 1 view .LVU153
 597 00d4 14AB     		add	r3, sp, #80
 598 00d6 93E80700 		ldm	r3, {r0, r1, r2}
 599 00da 8DE80700 		stm	sp, {r0, r1, r2}
 600 00de 11AB     		add	r3, sp, #68
 601 00e0 0ECB     		ldm	r3, {r1, r2, r3}
 602 00e2 94ED140A 		vldr.32	s0, [r4, #80]
 603              	.LVL47:
 202:../BLDCMotor/motorctrl.c **** 
 604              		.loc 1 202 17 is_stmt 0 view .LVU154
 605 00e6 04A8     		add	r0, sp, #16
 606 00e8 FFF7FEFF 		bl	_currmentloop
 607              	.LVL48:
 204:../BLDCMotor/motorctrl.c ****                 alpbet_t uab,uab_q15;            
 608              		.loc 1 204 17 is_stmt 1 view .LVU155
 204:../BLDCMotor/motorctrl.c ****                 alpbet_t uab,uab_q15;            
 609              		.loc 1 204 22 is_stmt 0 view .LVU156
 610 00ec 234B     		ldr	r3, .L29+36
 611 00ee 0DF1240C 		add	ip, sp, #36
 612 00f2 0FCB     		ldm	r3, {r0, r1, r2, r3}
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 20


 613 00f4 8CE80F00 		stm	ip, {r0, r1, r2, r3}
 205:../BLDCMotor/motorctrl.c ****                 if (sg_motordebug.self_ele_theta > 6.28f)
 614              		.loc 1 205 17 is_stmt 1 view .LVU157
 206:../BLDCMotor/motorctrl.c ****                 {
 615              		.loc 1 206 17 view .LVU158
 206:../BLDCMotor/motorctrl.c ****                 {
 616              		.loc 1 206 34 is_stmt 0 view .LVU159
 617 00f8 94ED147A 		vldr.32	s14, [r4, #80]
 206:../BLDCMotor/motorctrl.c ****                 {
 618              		.loc 1 206 20 view .LVU160
 619 00fc DFED207A 		vldr.32	s15, .L29+40
 620 0100 B4EEE77A 		vcmpe.f32	s14, s15
 621 0104 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 622 0108 01DD     		ble	.L21
 208:../BLDCMotor/motorctrl.c ****                 }
 623              		.loc 1 208 21 is_stmt 1 view .LVU161
 208:../BLDCMotor/motorctrl.c ****                 }
 624              		.loc 1 208 50 is_stmt 0 view .LVU162
 625 010a 0022     		movs	r2, #0
 626 010c 2265     		str	r2, [r4, #80]	@ float
 627              	.L21:
 210:../BLDCMotor/motorctrl.c ****                 dut01 = _svpwm(uab.alpha,uab.beta);
 628              		.loc 1 210 17 is_stmt 1 view .LVU163
 210:../BLDCMotor/motorctrl.c ****                 dut01 = _svpwm(uab.alpha,uab.beta);
 629              		.loc 1 210 23 is_stmt 0 view .LVU164
 630 010e 144C     		ldr	r4, .L29+8
 631 0110 0C9B     		ldr	r3, [sp, #48]
 632 0112 0093     		str	r3, [sp]
 633 0114 09AB     		add	r3, sp, #36
 634 0116 0ECB     		ldm	r3, {r1, r2, r3}
 635 0118 94ED140A 		vldr.32	s0, [r4, #80]
 636 011c 0DA8     		add	r0, sp, #52
 637 011e FFF7FEFF 		bl	_2r_2s
 638              	.LVL49:
 211:../BLDCMotor/motorctrl.c ****                 motor_set_pwm(dut01);
 639              		.loc 1 211 17 is_stmt 1 view .LVU165
 211:../BLDCMotor/motorctrl.c ****                 motor_set_pwm(dut01);
 640              		.loc 1 211 25 is_stmt 0 view .LVU166
 641 0122 DDED0E0A 		vldr.32	s1, [sp, #56]
 642 0126 9DED0D0A 		vldr.32	s0, [sp, #52]
 643 012a FFF7FEFF 		bl	_svpwm
 644              	.LVL50:
 645 012e 8DED170A 		vstr.32	s0, [sp, #92]
 646 0132 CDED180A 		vstr.32	s1, [sp, #96]
 647 0136 8DED191A 		vstr.32	s2, [sp, #100]
 212:../BLDCMotor/motorctrl.c **** 
 648              		.loc 1 212 17 is_stmt 1 view .LVU167
 649 013a FFF7FEFF 		bl	motor_set_pwm
 650              	.LVL51:
 214:../BLDCMotor/motorctrl.c **** 
 651              		.loc 1 214 17 view .LVU168
 214:../BLDCMotor/motorctrl.c **** 
 652              		.loc 1 214 46 is_stmt 0 view .LVU169
 653 013e D4ED147A 		vldr.32	s15, [r4, #80]
 654 0142 9FED107A 		vldr.32	s14, .L29+44
 655 0146 77EE877A 		vadd.f32	s15, s15, s14
 656 014a C4ED147A 		vstr.32	s15, [r4, #80]
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 21


 657              	.LBE3:
 234:../BLDCMotor/motorctrl.c **** }
 658              		.loc 1 234 5 is_stmt 1 view .LVU170
 235:../BLDCMotor/motorctrl.c **** void _limit_voltagecircle(uint32_t u_ref,uint32_t elec_theta)
 659              		.loc 1 235 1 is_stmt 0 view .LVU171
 660 014e 1BB0     		add	sp, sp, #108
 661              	.LCFI20:
 662              		.cfi_def_cfa_offset 20
 663              		@ sp needed
 664 0150 BDEC028B 		vldm	sp!, {d8}
 665              	.LCFI21:
 666              		.cfi_restore 80
 667              		.cfi_restore 81
 668              		.cfi_def_cfa_offset 12
 669              	.LVL52:
 235:../BLDCMotor/motorctrl.c **** void _limit_voltagecircle(uint32_t u_ref,uint32_t elec_theta)
 670              		.loc 1 235 1 view .LVU172
 671 0154 30BD     		pop	{r4, r5, pc}
 672              	.L30:
 673 0156 00BF     		.align	2
 674              	.L29:
 675 0158 00000000 		.word	.LANCHOR5
 676 015c F1197605 		.word	91625969
 677 0160 00000000 		.word	.LANCHOR3
 678 0164 4260653B 		.word	996499522
 679 0168 6F12033B 		.word	990057071
 680 016c 00000000 		.word	.LANCHOR6
 681 0170 A69BC43A 		.word	985963430
 682 0174 95465F14 		.word	341788309
 683 0178 3C240300 		.word	205884
 684 017c 00000000 		.word	.LANCHOR7
 685 0180 C3F5C840 		.word	1086911939
 686 0184 7CD9A03E 		.word	1050728828
 687              		.cfi_endproc
 688              	.LFE330:
 690              		.section	.text._limit_voltagecircle,"ax",%progbits
 691              		.align	1
 692              		.global	_limit_voltagecircle
 693              		.syntax unified
 694              		.thumb
 695              		.thumb_func
 697              	_limit_voltagecircle:
 698              	.LVL53:
 699              	.LFB331:
 237:../BLDCMotor/motorctrl.c ****     uint32_t u_alpha,u_beta;
 700              		.loc 1 237 1 is_stmt 1 view -0
 701              		.cfi_startproc
 702              		@ args = 0, pretend = 0, frame = 0
 703              		@ frame_needed = 0, uses_anonymous_args = 0
 704              		@ link register save eliminated.
 238:../BLDCMotor/motorctrl.c ****     u_alpha = u_ref * cosf(elec_theta);
 705              		.loc 1 238 5 view .LVU174
 239:../BLDCMotor/motorctrl.c ****     u_beta = u_ref * sinf(elec_theta);
 706              		.loc 1 239 5 view .LVU175
 240:../BLDCMotor/motorctrl.c **** }
 707              		.loc 1 240 5 view .LVU176
 241:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 22


 708              		.loc 1 241 1 is_stmt 0 view .LVU177
 709 0000 7047     		bx	lr
 710              		.cfi_endproc
 711              	.LFE331:
 713              		.section	.text.foc_paraminit,"ax",%progbits
 714              		.align	1
 715              		.global	foc_paraminit
 716              		.syntax unified
 717              		.thumb
 718              		.thumb_func
 720              	foc_paraminit:
 721              	.LFB338:
 363:../BLDCMotor/motorctrl.c **** 
 364:../BLDCMotor/motorctrl.c **** void foc_paraminit(void)
 365:../BLDCMotor/motorctrl.c **** {
 722              		.loc 1 365 1 is_stmt 1 view -0
 723              		.cfi_startproc
 724              		@ args = 0, pretend = 0, frame = 0
 725              		@ frame_needed = 0, uses_anonymous_args = 0
 726 0000 10B5     		push	{r4, lr}
 727              	.LCFI22:
 728              		.cfi_def_cfa_offset 8
 729              		.cfi_offset 4, -8
 730              		.cfi_offset 14, -4
 731 0002 2DED028B 		vpush.64	{d8}
 732              	.LCFI23:
 733              		.cfi_def_cfa_offset 16
 734              		.cfi_offset 80, -16
 735              		.cfi_offset 81, -12
 366:../BLDCMotor/motorctrl.c ****     sgp_curloop_d_pid = &sg_curloop_param.d_pid;
 736              		.loc 1 366 5 view .LVU179
 737              		.loc 1 366 23 is_stmt 0 view .LVU180
 738 0006 1D48     		ldr	r0, .L34
 739 0008 1D4B     		ldr	r3, .L34+4
 740 000a 1860     		str	r0, [r3]
 367:../BLDCMotor/motorctrl.c ****     sgp_curloop_q_pid = &sg_curloop_param.q_pid;
 741              		.loc 1 367 5 is_stmt 1 view .LVU181
 742              		.loc 1 367 23 is_stmt 0 view .LVU182
 743 000c 1D4C     		ldr	r4, .L34+8
 744 000e 00F11C03 		add	r3, r0, #28
 745 0012 2360     		str	r3, [r4]
 368:../BLDCMotor/motorctrl.c ****     pid_init(sgp_curloop_d_pid,0.4f,0.000f,1.0f,D_MAX_VAL,D_MIN_VAL);
 746              		.loc 1 368 5 is_stmt 1 view .LVU183
 747 0014 DFED1C8A 		vldr.32	s17, .L34+12
 748 0018 9FED1C8A 		vldr.32	s16, .L34+16
 749 001c B0EE682A 		vmov.f32	s4, s17
 750 0020 F0EE481A 		vmov.f32	s3, s16
 751 0024 B7EE001A 		vmov.f32	s2, #1.0e+0
 752 0028 DFED190A 		vldr.32	s1, .L34+20
 753 002c 9FED190A 		vldr.32	s0, .L34+24
 754 0030 FFF7FEFF 		bl	pid_init
 755              	.LVL54:
 369:../BLDCMotor/motorctrl.c ****     pid_init(sgp_curloop_q_pid,0.020f,0.001f,1.0f,D_MAX_VAL,D_MIN_VAL);
 756              		.loc 1 369 5 view .LVU184
 757 0034 B0EE682A 		vmov.f32	s4, s17
 758 0038 F0EE481A 		vmov.f32	s3, s16
 759 003c B7EE001A 		vmov.f32	s2, #1.0e+0
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 23


 760 0040 DFED150A 		vldr.32	s1, .L34+28
 761 0044 9FED150A 		vldr.32	s0, .L34+32
 762 0048 2068     		ldr	r0, [r4]
 763 004a FFF7FEFF 		bl	pid_init
 764              	.LVL55:
 370:../BLDCMotor/motorctrl.c ****     lowfilter_init(&sg_elefilter[0],80);
 765              		.loc 1 370 5 view .LVU185
 766 004e 9FED148A 		vldr.32	s16, .L34+36
 767 0052 144C     		ldr	r4, .L34+40
 768 0054 B0EE480A 		vmov.f32	s0, s16
 769 0058 2046     		mov	r0, r4
 770 005a FFF7FEFF 		bl	lowfilter_init
 771              	.LVL56:
 371:../BLDCMotor/motorctrl.c ****     lowfilter_init(&sg_elefilter[1],80);
 772              		.loc 1 371 5 view .LVU186
 773 005e B0EE480A 		vmov.f32	s0, s16
 774 0062 04F10800 		add	r0, r4, #8
 775 0066 FFF7FEFF 		bl	lowfilter_init
 776              	.LVL57:
 372:../BLDCMotor/motorctrl.c ****     lowfilter_init(&sg_elefilter[2],80);
 777              		.loc 1 372 5 view .LVU187
 778 006a B0EE480A 		vmov.f32	s0, s16
 779 006e 04F11000 		add	r0, r4, #16
 780 0072 FFF7FEFF 		bl	lowfilter_init
 781              	.LVL58:
 373:../BLDCMotor/motorctrl.c **** }...
 782              		.loc 1 373 1 is_stmt 0 view .LVU188
 783 0076 BDEC028B 		vldm	sp!, {d8}
 784              	.LCFI24:
 785              		.cfi_restore 80
 786              		.cfi_restore 81
 787              		.cfi_def_cfa_offset 8
 788 007a 10BD     		pop	{r4, pc}
 789              	.L35:
 790              		.align	2
 791              	.L34:
 792 007c 00000000 		.word	.LANCHOR8
 793 0080 00000000 		.word	.LANCHOR4
 794 0084 00000000 		.word	.LANCHOR9
 795 0088 333373C1 		.word	-1049414861
 796 008c 33337341 		.word	1098068787
 797 0090 00000000 		.word	0
 798 0094 CDCCCC3E 		.word	1053609165
 799 0098 6F12833A 		.word	981668463
 800 009c 0AD7A33C 		.word	1017370378
 801 00a0 0000A042 		.word	1117782016
 802 00a4 00000000 		.word	.LANCHOR6
 803              		.cfi_endproc
 804              	.LFE338:
 806              		.section	.rodata.motortctrl_process.str1.4,"aMS",%progbits,1
 807              		.align	2
 808              	.LC1:
 809 0000 6D6F746F 		.ascii	"motor init\015\012\000"
 809      7220696E 
 809      69740D0A 
 809      00
 810              		.section	.text.motortctrl_process,"ax",%progbits
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 24


 811              		.align	1
 812              		.global	motortctrl_process
 813              		.syntax unified
 814              		.thumb
 815              		.thumb_func
 817              	motortctrl_process:
 818              	.LFB329:
  78:../BLDCMotor/motorctrl.c **** {
 819              		.loc 1 78 1 is_stmt 1 view -0
 820              		.cfi_startproc
 821              		@ args = 0, pretend = 0, frame = 0
 822              		@ frame_needed = 0, uses_anonymous_args = 0
 823 0000 08B5     		push	{r3, lr}
 824              	.LCFI25:
 825              		.cfi_def_cfa_offset 8
 826              		.cfi_offset 3, -8
 827              		.cfi_offset 14, -4
  79:../BLDCMotor/motorctrl.c ****     switch (g_Motor1.state)
 828              		.loc 1 79 5 view .LVU190
  79:../BLDCMotor/motorctrl.c ****     switch (g_Motor1.state)
 829              		.loc 1 79 21 is_stmt 0 view .LVU191
 830 0002 1A4B     		ldr	r3, .L42
 831 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  79:../BLDCMotor/motorctrl.c ****     switch (g_Motor1.state)
 832              		.loc 1 79 5 view .LVU192
 833 0006 032B     		cmp	r3, #3
 834 0008 18D0     		beq	.L37
 835 000a 042B     		cmp	r3, #4
 836 000c 2AD0     		beq	.L38
 837 000e 03B1     		cbz	r3, .L41
 838              	.L36:
 105:../BLDCMotor/motorctrl.c **** }
 839              		.loc 1 105 1 view .LVU193
 840 0010 08BD     		pop	{r3, pc}
 841              	.L41:
  82:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = _get_angleoffset() + ANGLE_COMPENSATA;
 842              		.loc 1 82 9 is_stmt 1 view .LVU194
  82:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = _get_angleoffset() + ANGLE_COMPENSATA;
 843              		.loc 1 82 29 is_stmt 0 view .LVU195
 844 0012 FFF7FEFF 		bl	_get_angleoffset
 845              	.LVL59:
  82:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = _get_angleoffset() + ANGLE_COMPENSATA;
 846              		.loc 1 82 48 view .LVU196
 847 0016 DFED167A 		vldr.32	s15, .L42+4
 848 001a 30EE270A 		vadd.f32	s0, s0, s15
  82:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = _get_angleoffset() + ANGLE_COMPENSATA;
 849              		.loc 1 82 27 view .LVU197
 850 001e 154B     		ldr	r3, .L42+8
 851 0020 83ED000A 		vstr.32	s0, [r3]
  83:../BLDCMotor/motorctrl.c ****         foc_paraminit();
 852              		.loc 1 83 9 is_stmt 1 view .LVU198
 853 0024 FFF7FEFF 		bl	foc_paraminit
 854              	.LVL60:
  84:../BLDCMotor/motorctrl.c ****         USER_DEBUG_NORMAL("motor init\r\n");
 855              		.loc 1 84 9 view .LVU199
 856 0028 1349     		ldr	r1, .L42+12
 857 002a 0020     		movs	r0, #0
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 25


 858 002c FFF7FEFF 		bl	SEGGER_RTT_printf
 859              	.LVL61:
  85:../BLDCMotor/motorctrl.c ****         motor_enable();
 860              		.loc 1 85 9 view .LVU200
 861 0030 FFF7FEFF 		bl	motor_enable
 862              	.LVL62:
  86:../BLDCMotor/motorctrl.c ****         g_Motor1.state = MOTOR_RUNING;           
 863              		.loc 1 86 9 view .LVU201
  86:../BLDCMotor/motorctrl.c ****         g_Motor1.state = MOTOR_RUNING;           
 864              		.loc 1 86 24 is_stmt 0 view .LVU202
 865 0034 0D4B     		ldr	r3, .L42
 866 0036 0322     		movs	r2, #3
 867 0038 1A70     		strb	r2, [r3]
  87:../BLDCMotor/motorctrl.c ****         break;
 868              		.loc 1 87 9 is_stmt 1 view .LVU203
 869 003a E9E7     		b	.L36
 870              	.L37:
  91:../BLDCMotor/motorctrl.c ****             if (!(++g_Motor1.cnt % 15000))
 871              		.loc 1 91 13 view .LVU204
  91:../BLDCMotor/motorctrl.c ****             if (!(++g_Motor1.cnt % 15000))
 872              		.loc 1 91 29 is_stmt 0 view .LVU205
 873 003c 0B4A     		ldr	r2, .L42
 874 003e 5388     		ldrh	r3, [r2, #2]
  91:../BLDCMotor/motorctrl.c ****             if (!(++g_Motor1.cnt % 15000))
 875              		.loc 1 91 19 view .LVU206
 876 0040 0133     		adds	r3, r3, #1
 877 0042 9BB2     		uxth	r3, r3
  91:../BLDCMotor/motorctrl.c ****             if (!(++g_Motor1.cnt % 15000))
 878              		.loc 1 91 16 view .LVU207
 879 0044 5380     		strh	r3, [r2, #2]	@ movhi
  91:../BLDCMotor/motorctrl.c ****             if (!(++g_Motor1.cnt % 15000))
 880              		.loc 1 91 17 view .LVU208
 881 0046 0D4A     		ldr	r2, .L42+16
 882 0048 A2FB0312 		umull	r1, r2, r2, r3
 883 004c 120B     		lsrs	r2, r2, #12
 884 004e 43F69821 		movw	r1, #15000
 885 0052 01FB1233 		mls	r3, r1, r2, r3
 886 0056 9BB2     		uxth	r3, r3
  91:../BLDCMotor/motorctrl.c ****             if (!(++g_Motor1.cnt % 15000))
 887              		.loc 1 91 16 view .LVU209
 888 0058 002B     		cmp	r3, #0
 889 005a D9D1     		bne	.L36
  94:../BLDCMotor/motorctrl.c ****                 g_Motor1.state = MOTOR_STOP;
 890              		.loc 1 94 17 is_stmt 1 view .LVU210
  94:../BLDCMotor/motorctrl.c ****                 g_Motor1.state = MOTOR_STOP;
 891              		.loc 1 94 32 is_stmt 0 view .LVU211
 892 005c 034B     		ldr	r3, .L42
 893 005e 0422     		movs	r2, #4
 894 0060 1A70     		strb	r2, [r3]
 895 0062 D5E7     		b	.L36
 896              	.L38:
 100:../BLDCMotor/motorctrl.c ****         motor_disable();
 897              		.loc 1 100 9 is_stmt 1 view .LVU212
 898 0064 FFF7FEFF 		bl	motor_disable
 899              	.LVL63:
 101:../BLDCMotor/motorctrl.c ****         break;
 900              		.loc 1 101 9 view .LVU213
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 26


 105:../BLDCMotor/motorctrl.c **** }
 901              		.loc 1 105 1 is_stmt 0 view .LVU214
 902 0068 D2E7     		b	.L36
 903              	.L43:
 904 006a 00BF     		.align	2
 905              	.L42:
 906 006c 00000000 		.word	.LANCHOR10
 907 0070 DB0FC93F 		.word	1070141403
 908 0074 00000000 		.word	.LANCHOR11
 909 0078 00000000 		.word	.LC1
 910 007c 73B2E745 		.word	1172812403
 911              		.cfi_endproc
 912              	.LFE329:
 914              		.global	test_ic
 915              		.global	test_ib
 916              		.global	test_ia
 917              		.global	raw_angle
 918              		.global	next_angle_test
 919              		.global	pre_angle_test
 920              		.global	g_Motor1
 921              		.global	sg_motordebug
 922              		.section	.rodata
 923              		.align	2
 924              		.set	.LANCHOR7,. + 0
 925              	.LC0:
 926 0000 00000000 		.word	0
 927 0004 0000803F 		.word	1065353216
 928 0008 00000000 		.word	0
 929 000c 66660000 		.word	26214
 930              		.section	.bss.cnt.0,"aw",%nobits
 931              		.align	1
 932              		.set	.LANCHOR5,. + 0
 935              	cnt.0:
 936 0000 0000     		.space	2
 937              		.section	.bss.g_Motor1,"aw",%nobits
 938              		.align	2
 939              		.set	.LANCHOR10,. + 0
 942              	g_Motor1:
 943 0000 00000000 		.space	4
 944              		.section	.bss.next_angle_test,"aw",%nobits
 945              		.align	2
 948              	next_angle_test:
 949 0000 00000000 		.space	4
 950              		.section	.bss.pre_angle_test,"aw",%nobits
 951              		.align	2
 954              	pre_angle_test:
 955 0000 00000000 		.space	4
 956              		.section	.bss.raw_angle,"aw",%nobits
 957              		.align	2
 960              	raw_angle:
 961 0000 00000000 		.space	4
 962              		.section	.bss.sg_MecThetaOffset,"aw",%nobits
 963              		.align	2
 964              		.set	.LANCHOR11,. + 0
 967              	sg_MecThetaOffset:
 968 0000 00000000 		.space	4
 969              		.section	.bss.sg_curloop_param,"aw",%nobits
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 27


 970              		.align	2
 971              		.set	.LANCHOR8,. + 0
 974              	sg_curloop_param:
 975 0000 00000000 		.space	56
 975      00000000 
 975      00000000 
 975      00000000 
 975      00000000 
 976              		.section	.bss.sg_elefilter,"aw",%nobits
 977              		.align	2
 978              		.set	.LANCHOR6,. + 0
 981              	sg_elefilter:
 982 0000 00000000 		.space	24
 982      00000000 
 982      00000000 
 982      00000000 
 982      00000000 
 983              		.section	.bss.sg_motordebug,"aw",%nobits
 984              		.align	2
 985              		.set	.LANCHOR3,. + 0
 988              	sg_motordebug:
 989 0000 00000000 		.space	92
 989      00000000 
 989      00000000 
 989      00000000 
 989      00000000 
 990              		.section	.bss.sgp_curloop_d_pid,"aw",%nobits
 991              		.align	2
 992              		.set	.LANCHOR4,. + 0
 995              	sgp_curloop_d_pid:
 996 0000 00000000 		.space	4
 997              		.section	.bss.sgp_curloop_q_pid,"aw",%nobits
 998              		.align	2
 999              		.set	.LANCHOR9,. + 0
 1002              	sgp_curloop_q_pid:
 1003 0000 00000000 		.space	4
 1004              		.section	.bss.test_ia,"aw",%nobits
 1005              		.align	2
 1006              		.set	.LANCHOR0,. + 0
 1009              	test_ia:
 1010 0000 00000000 		.space	4
 1011              		.section	.bss.test_ib,"aw",%nobits
 1012              		.align	2
 1013              		.set	.LANCHOR1,. + 0
 1016              	test_ib:
 1017 0000 00000000 		.space	4
 1018              		.section	.bss.test_ic,"aw",%nobits
 1019              		.align	2
 1020              		.set	.LANCHOR2,. + 0
 1023              	test_ic:
 1024 0000 00000000 		.space	4
 1025              		.text
 1026              	.Letext0:
 1027              		.file 2 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\machine\\_defa
 1028              		.file 3 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\sys\\_stdint.h
 1029              		.file 4 "../Common/IQMath/ti/IQmathLib.h"
 1030              		.file 5 "../Common/method/filter.h"
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 28


 1031              		.file 6 "../Common/method/pid.h"
 1032              		.file 7 "../BLDCMotor/motorctrl_common.h"
 1033              		.file 8 "./Board/board.h"
 1034              		.file 9 "../Sensor/sensor.h"
 1035              		.file 10 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal.h"
 1036              		.file 11 "Inc/tim.h"
 1037              		.file 12 "Inc/adc.h"
 1038              		.file 13 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\math.h"
 1039              		.file 14 "../Common/debuglog/SEGGER_RTT_V792h/RTT/SEGGER_RTT.h"
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 29


DEFINED SYMBOLS
                            *ABS*:00000000 motorctrl.c
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:20     .text.motor_enable_noirq:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:25     .text.motor_enable_noirq:00000000 motor_enable_noirq
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:46     .text.motor_set_pwm:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:51     .text.motor_set_pwm:00000000 motor_set_pwm
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:80     .text.motor_enable:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:85     .text.motor_enable:00000000 motor_enable
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:111    .text.motor_disable:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:116    .text.motor_disable:00000000 motor_disable
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:139    .text._get_angleoffset:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:144    .text._get_angleoffset:00000000 _get_angleoffset
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:251    .text._get_angleoffset:0000006c $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:257    .text._currmentloop:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:262    .text._currmentloop:00000000 _currmentloop
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:417    .text._currmentloop:000000b4 $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:430    .text._50uscycle_process:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:436    .text._50uscycle_process:00000000 _50uscycle_process
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:675    .text._50uscycle_process:00000158 $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:691    .text._limit_voltagecircle:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:697    .text._limit_voltagecircle:00000000 _limit_voltagecircle
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:714    .text.foc_paraminit:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:720    .text.foc_paraminit:00000000 foc_paraminit
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:792    .text.foc_paraminit:0000007c $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:807    .rodata.motortctrl_process.str1.4:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:811    .text.motortctrl_process:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:817    .text.motortctrl_process:00000000 motortctrl_process
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:906    .text.motortctrl_process:0000006c $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:1023   .bss.test_ic:00000000 test_ic
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:1016   .bss.test_ib:00000000 test_ib
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:1009   .bss.test_ia:00000000 test_ia
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:960    .bss.raw_angle:00000000 raw_angle
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:948    .bss.next_angle_test:00000000 next_angle_test
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:954    .bss.pre_angle_test:00000000 pre_angle_test
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:942    .bss.g_Motor1:00000000 g_Motor1
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:988    .bss.sg_motordebug:00000000 sg_motordebug
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:923    .rodata:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:931    .bss.cnt.0:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:935    .bss.cnt.0:00000000 cnt.0
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:938    .bss.g_Motor1:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:945    .bss.next_angle_test:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:951    .bss.pre_angle_test:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:957    .bss.raw_angle:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:963    .bss.sg_MecThetaOffset:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:967    .bss.sg_MecThetaOffset:00000000 sg_MecThetaOffset
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:970    .bss.sg_curloop_param:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:974    .bss.sg_curloop_param:00000000 sg_curloop_param
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:977    .bss.sg_elefilter:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:981    .bss.sg_elefilter:00000000 sg_elefilter
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:984    .bss.sg_motordebug:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:991    .bss.sgp_curloop_d_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:995    .bss.sgp_curloop_d_pid:00000000 sgp_curloop_d_pid
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:998    .bss.sgp_curloop_q_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:1002   .bss.sgp_curloop_q_pid:00000000 sgp_curloop_q_pid
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:1005   .bss.test_ia:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:1012   .bss.test_ib:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccPeTexy.s:1019   .bss.test_ic:00000000 $d
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccPeTexy.s 			page 30



UNDEFINED SYMBOLS
tim_pwm_enable
tim_set_pwm
tim_tigger_adc
adc_start
tim_pwm_disable
adc_stop
_svpwm
HAL_Delay
sensor_user_read
_IQ15toF
cosf
_3s_2s
_2s_2r
pid_contrl
RTT_test_Id
lowfilter_cale
_2r_2s
pid_init
lowfilter_init
SEGGER_RTT_printf
