ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"motorctrl.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.motor_enable_noirq,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	motor_enable_noirq:
  26              	.LFB334:
  27              		.file 1 "../BLDCMotor/motorctrl.c"
   1:../BLDCMotor/motorctrl.c **** #include "./motorctrl.h"
   2:../BLDCMotor/motorctrl.c **** #include "debuglog.h"
   3:../BLDCMotor/motorctrl.c **** #include "motorctrl_common.h"
   4:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
   5:../BLDCMotor/motorctrl.c **** #include "mt6816.h"
   6:../BLDCMotor/motorctrl.c **** #endif
   7:../BLDCMotor/motorctrl.c **** #define Q15_PI_2                   (51471)
   8:../BLDCMotor/motorctrl.c **** #define Q15_2PI                    (205884)
   9:../BLDCMotor/motorctrl.c **** #define PI_2                       (1.570796f)
  10:../BLDCMotor/motorctrl.c **** #define MOTORCTRL_PERCI            (1)
  11:../BLDCMotor/motorctrl.c **** 
  12:../BLDCMotor/motorctrl.c **** enum{
  13:../BLDCMotor/motorctrl.c ****     MOTOR_INIT,
  14:../BLDCMotor/motorctrl.c ****     MOTOR_IDLE,
  15:../BLDCMotor/motorctrl.c ****     MOTOR_START, 
  16:../BLDCMotor/motorctrl.c ****     MOTOR_RUNING,
  17:../BLDCMotor/motorctrl.c ****     MOTOR_STOP,
  18:../BLDCMotor/motorctrl.c **** };
  19:../BLDCMotor/motorctrl.c **** typedef struct
  20:../BLDCMotor/motorctrl.c **** {
  21:../BLDCMotor/motorctrl.c ****     float ia;
  22:../BLDCMotor/motorctrl.c ****     float ib;
  23:../BLDCMotor/motorctrl.c ****     float ic;
  24:../BLDCMotor/motorctrl.c ****     float ialpha;
  25:../BLDCMotor/motorctrl.c ****     float ibeta;
  26:../BLDCMotor/motorctrl.c ****     float id;
  27:../BLDCMotor/motorctrl.c ****     float iq;
  28:../BLDCMotor/motorctrl.c **** 
  29:../BLDCMotor/motorctrl.c ****     int32_t Q_ia;
  30:../BLDCMotor/motorctrl.c ****     int32_t Q_ib;
  31:../BLDCMotor/motorctrl.c ****     int32_t Q_ic;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 2


  32:../BLDCMotor/motorctrl.c ****     int32_t Q_ialpha;
  33:../BLDCMotor/motorctrl.c ****     int32_t Q_ibeta;
  34:../BLDCMotor/motorctrl.c ****     int32_t Q_id;
  35:../BLDCMotor/motorctrl.c ****     int32_t Q_iq;
  36:../BLDCMotor/motorctrl.c **** 
  37:../BLDCMotor/motorctrl.c ****     float id_real;
  38:../BLDCMotor/motorctrl.c ****     float iq_targe;
  39:../BLDCMotor/motorctrl.c ****     float iq_real;
  40:../BLDCMotor/motorctrl.c **** 
  41:../BLDCMotor/motorctrl.c ****     float pid_Q_out;
  42:../BLDCMotor/motorctrl.c ****     float pid_D_out;
  43:../BLDCMotor/motorctrl.c ****     float ele_angle;
  44:../BLDCMotor/motorctrl.c ****     float self_ele_theta;
  45:../BLDCMotor/motorctrl.c ****     int32_t Q15_ele_angle;
  46:../BLDCMotor/motorctrl.c ****     int32_t Q15_mec_angle;
  47:../BLDCMotor/motorctrl.c **** }motordebug_t;
  48:../BLDCMotor/motorctrl.c **** motordebug_t sg_motordebug = {0};
  49:../BLDCMotor/motorctrl.c **** typedef struct
  50:../BLDCMotor/motorctrl.c **** {
  51:../BLDCMotor/motorctrl.c ****     unsigned char state;
  52:../BLDCMotor/motorctrl.c ****     unsigned short cnt;
  53:../BLDCMotor/motorctrl.c **** }motorctrl_t;
  54:../BLDCMotor/motorctrl.c **** 
  55:../BLDCMotor/motorctrl.c **** static dq_t _currmentloop(abc_t i_abc,float ele_theta);
  56:../BLDCMotor/motorctrl.c **** static float _get_angleoffset(void);
  57:../BLDCMotor/motorctrl.c **** static void motor_enable(void);
  58:../BLDCMotor/motorctrl.c **** static void motor_disable(void);
  59:../BLDCMotor/motorctrl.c **** static void motor_set_pwm(duty_t temp);
  60:../BLDCMotor/motorctrl.c **** 
  61:../BLDCMotor/motorctrl.c **** motorctrl_t g_Motor1 = {
  62:../BLDCMotor/motorctrl.c ****     .state = MOTOR_INIT,
  63:../BLDCMotor/motorctrl.c ****     .cnt = 0,
  64:../BLDCMotor/motorctrl.c **** };
  65:../BLDCMotor/motorctrl.c **** static volatile float sg_MecThetaOffset = 0.0f;
  66:../BLDCMotor/motorctrl.c **** static lowfilter_t sg_elefilter[3];
  67:../BLDCMotor/motorctrl.c **** static pid_cb_t *sgp_curloop_d_pid;
  68:../BLDCMotor/motorctrl.c **** static pid_cb_t *sgp_curloop_q_pid;
  69:../BLDCMotor/motorctrl.c **** static curloop_t sg_curloop_param;
  70:../BLDCMotor/motorctrl.c **** float pre_angle_test = 0.0f;
  71:../BLDCMotor/motorctrl.c **** float next_angle_test = 0.0f;
  72:../BLDCMotor/motorctrl.c **** float raw_angle = 0.0f;
  73:../BLDCMotor/motorctrl.c **** float test_ia = 0.0f;
  74:../BLDCMotor/motorctrl.c **** float test_ib = 0.0f;
  75:../BLDCMotor/motorctrl.c **** float test_ic = 0.0f;
  76:../BLDCMotor/motorctrl.c **** extern float RTT_test_Id;
  77:../BLDCMotor/motorctrl.c **** void motortctrl_process(void)
  78:../BLDCMotor/motorctrl.c **** {
  79:../BLDCMotor/motorctrl.c ****     switch (g_Motor1.state)
  80:../BLDCMotor/motorctrl.c ****     {
  81:../BLDCMotor/motorctrl.c ****     case MOTOR_INIT:
  82:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = _get_angleoffset();
  83:../BLDCMotor/motorctrl.c ****         foc_paraminit();
  84:../BLDCMotor/motorctrl.c ****         USER_DEBUG_NORMAL("motor init\r\n");
  85:../BLDCMotor/motorctrl.c ****         HAL_Delay(20);
  86:../BLDCMotor/motorctrl.c ****         motor_enable();
  87:../BLDCMotor/motorctrl.c ****         g_Motor1.state = MOTOR_RUNING;           
  88:../BLDCMotor/motorctrl.c ****         break;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 3


  89:../BLDCMotor/motorctrl.c **** 
  90:../BLDCMotor/motorctrl.c ****     case MOTOR_RUNING:
  91:../BLDCMotor/motorctrl.c ****         {
  92:../BLDCMotor/motorctrl.c ****             if (!(++g_Motor1.cnt % 15000))
  93:../BLDCMotor/motorctrl.c ****             {
  94:../BLDCMotor/motorctrl.c ****                 // g_Motor1.state = MOTOR_STOP;
  95:../BLDCMotor/motorctrl.c ****             }
  96:../BLDCMotor/motorctrl.c ****         }
  97:../BLDCMotor/motorctrl.c ****         break;
  98:../BLDCMotor/motorctrl.c **** 
  99:../BLDCMotor/motorctrl.c ****     case MOTOR_STOP:
 100:../BLDCMotor/motorctrl.c ****         motor_disable();
 101:../BLDCMotor/motorctrl.c ****         break;
 102:../BLDCMotor/motorctrl.c ****     default:
 103:../BLDCMotor/motorctrl.c ****         break;
 104:../BLDCMotor/motorctrl.c ****     }
 105:../BLDCMotor/motorctrl.c **** }
 106:../BLDCMotor/motorctrl.c **** /*------------周期性被调用----------------*/
 107:../BLDCMotor/motorctrl.c **** void _50uscycle_process(unsigned int *abc_vale,float _elec_theta)
 108:../BLDCMotor/motorctrl.c **** {
 109:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 110:../BLDCMotor/motorctrl.c ****     int32_t Q15_Mechtheta;    
 111:../BLDCMotor/motorctrl.c **** 
 112:../BLDCMotor/motorctrl.c ****     duty_t dut01,dut02;
 113:../BLDCMotor/motorctrl.c **** /*----------------三相电流处理------------------------------*/    
 114:../BLDCMotor/motorctrl.c ****     float Ia,Ib,Ic;
 115:../BLDCMotor/motorctrl.c ****     int32_t a1,b1,c1;
 116:../BLDCMotor/motorctrl.c ****     a1 = abc_vale[0] - A_ADCCHANNL_OFFSET;
 117:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 118:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 119:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ia = a1;
 120:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ib = b1;
 121:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ic = c1;    
 122:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 123:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 124:../BLDCMotor/motorctrl.c ****     Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 125:../BLDCMotor/motorctrl.c **** #if 1
 126:../BLDCMotor/motorctrl.c ****     abc_t i_abc;
 127:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 128:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 129:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 130:../BLDCMotor/motorctrl.c **** #endif
 131:../BLDCMotor/motorctrl.c **** 
 132:../BLDCMotor/motorctrl.c **** /*---------------------获取当前转子角度-------------------------*/
 133:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 134:../BLDCMotor/motorctrl.c ****     Q15_Mechtheta = ((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_COV))[0];
 135:../BLDCMotor/motorctrl.c ****     mech_theta = _IQ15toF(Q15_Mechtheta);
 136:../BLDCMotor/motorctrl.c ****     raw_angle = mech_theta;
 137:../BLDCMotor/motorctrl.c ****     mech_theta = (mech_theta - sg_MecThetaOffset);
 138:../BLDCMotor/motorctrl.c ****     elec_theta = mech_theta * MOTOR_PAIR;
 139:../BLDCMotor/motorctrl.c ****     elec_theta += ANGLE_COMPENSATA;
 140:../BLDCMotor/motorctrl.c ****     elec_theta = _normalize_angle(elec_theta);
 141:../BLDCMotor/motorctrl.c ****     sg_motordebug.ele_angle = elec_theta;
 142:../BLDCMotor/motorctrl.c **** 
 143:../BLDCMotor/motorctrl.c ****     #if 0//强拖       
 144:../BLDCMotor/motorctrl.c ****         #if 1
 145:../BLDCMotor/motorctrl.c ****             dq_t udq = {0.0f,0.8f,_IQ15(0.0f),_IQ15(0.8f)};
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 4


 146:../BLDCMotor/motorctrl.c ****             alpbet_t uab,uab_q15;            
 147:../BLDCMotor/motorctrl.c ****             if (sg_motordebug.self_ele_theta > 6.28f)
 148:../BLDCMotor/motorctrl.c ****             {
 149:../BLDCMotor/motorctrl.c ****                 sg_motordebug.self_ele_theta = 0.0f;
 150:../BLDCMotor/motorctrl.c ****             }
 151:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,sg_motordebug.self_ele_theta);
 152:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, sg_motordebug.self_ele_theta);
 153:../BLDCMotor/motorctrl.c ****             dut01 = _svpwm(uab.alpha,uab.beta);
 154:../BLDCMotor/motorctrl.c ****             motor_set_pwm(dut01);
 155:../BLDCMotor/motorctrl.c ****             sg_motordebug.self_ele_theta += 0.001f;                
 156:../BLDCMotor/motorctrl.c ****         #else
 157:../BLDCMotor/motorctrl.c ****             dq_t udq = {0.0f,-0.8f,_IQ15(0.0f),_IQ15(0.8f)};
 158:../BLDCMotor/motorctrl.c ****             alpbet_t uab,uab_q15;            
 159:../BLDCMotor/motorctrl.c ****             if (sg_motordebug.self_ele_theta < 0.0f)
 160:../BLDCMotor/motorctrl.c ****             {
 161:../BLDCMotor/motorctrl.c ****                 sg_motordebug.self_ele_theta += _2PI;
 162:../BLDCMotor/motorctrl.c ****             }
 163:../BLDCMotor/motorctrl.c ****             _currmentloop(i_abc,sg_motordebug.self_ele_theta);
 164:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, sg_motordebug.self_ele_theta);
 165:../BLDCMotor/motorctrl.c ****             dut01 = _svpwm(uab.alpha,uab.beta);
 166:../BLDCMotor/motorctrl.c ****             motor_set_pwm(dut01);
 167:../BLDCMotor/motorctrl.c ****             sg_motordebug.self_ele_theta -= 0.001f;               
 168:../BLDCMotor/motorctrl.c ****         #endif
 169:../BLDCMotor/motorctrl.c ****     #else //使用传感器
 170:../BLDCMotor/motorctrl.c ****     {
 171:../BLDCMotor/motorctrl.c ****         dq_t udq = {0.0f,-1.0f,_IQ15(0.0f),_IQ15(0.8f)};
 172:../BLDCMotor/motorctrl.c ****         alpbet_t uab,uab_q15;
 173:../BLDCMotor/motorctrl.c ****         #if 1/*闭环控制*/
 174:../BLDCMotor/motorctrl.c ****             udq = _currmentloop(i_abc,elec_theta - PI/2.0F);
 175:../BLDCMotor/motorctrl.c ****         #endif
 176:../BLDCMotor/motorctrl.c ****         uab = _2r_2s(udq, elec_theta);
 177:../BLDCMotor/motorctrl.c ****         dut01 = _svpwm(uab.alpha,uab.beta);
 178:../BLDCMotor/motorctrl.c ****         motor_set_pwm(dut01);
 179:../BLDCMotor/motorctrl.c ****     }
 180:../BLDCMotor/motorctrl.c ****     #endif
 181:../BLDCMotor/motorctrl.c **** 
 182:../BLDCMotor/motorctrl.c **** 
 183:../BLDCMotor/motorctrl.c **** 
 184:../BLDCMotor/motorctrl.c **** 
 185:../BLDCMotor/motorctrl.c **** #endif
 186:../BLDCMotor/motorctrl.c **** 
 187:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
 188:../BLDCMotor/motorctrl.c ****         Q15_Mechtheta = ((int32_t*)sensor_user_read(SENSOR_01,EN_SENSORDATA_COV))[0];
 189:../BLDCMotor/motorctrl.c ****         mech_theta = _IQ20toF(Q15_Mechtheta);
 190:../BLDCMotor/motorctrl.c ****         mech_theta -= sg_MecThetaOffset;
 191:../BLDCMotor/motorctrl.c ****         elec_theta = mech_theta * MOTOR_PAIR;
 192:../BLDCMotor/motorctrl.c ****         elec_theta += ANGLE_COMPENSATA;
 193:../BLDCMotor/motorctrl.c ****         elec_theta = _normalize_angle(elec_theta);
 194:../BLDCMotor/motorctrl.c ****         sg_motordebug.ele_angle = elec_theta;
 195:../BLDCMotor/motorctrl.c **** 
 196:../BLDCMotor/motorctrl.c ****         #if 0//强拖
 197:../BLDCMotor/motorctrl.c ****             {            
 198:../BLDCMotor/motorctrl.c ****                 dq_t udq = {0.0f,1.0f,_IQ15(0.0f),_IQ15(0.8f)};
 199:../BLDCMotor/motorctrl.c ****                 alpbet_t uab,uab_q15;
 200:../BLDCMotor/motorctrl.c ****                 if (sg_motordebug.self_ele_theta >= _2PI)
 201:../BLDCMotor/motorctrl.c ****                 {
 202:../BLDCMotor/motorctrl.c ****                     sg_motordebug.self_ele_theta -= _2PI;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 5


 203:../BLDCMotor/motorctrl.c ****                 }
 204:../BLDCMotor/motorctrl.c ****                 uab = _2r_2s(udq, sg_motordebug.self_ele_theta);
 205:../BLDCMotor/motorctrl.c ****                 dut01 = _svpwm(uab.alpha,uab.beta);
 206:../BLDCMotor/motorctrl.c ****                 motor_set_pwm(dut01);
 207:../BLDCMotor/motorctrl.c ****                 sg_motordebug.self_ele_theta += 0.001570796326f;
 208:../BLDCMotor/motorctrl.c ****             }
 209:../BLDCMotor/motorctrl.c ****         #else //使用传感器
 210:../BLDCMotor/motorctrl.c ****         {
 211:../BLDCMotor/motorctrl.c ****             dq_t udq = {0.0f,1.0f,_IQ15(0.0f),_IQ15(0.8f)};
 212:../BLDCMotor/motorctrl.c ****             alpbet_t uab,uab_q15;
 213:../BLDCMotor/motorctrl.c ****             #if 1/*闭环控制*/
 214:../BLDCMotor/motorctrl.c ****                 udq = _currmentloop(i_abc,elec_theta - PI_2);
 215:../BLDCMotor/motorctrl.c ****             #endif
 216:../BLDCMotor/motorctrl.c ****             uab = _2r_2s(udq, elec_theta);
 217:../BLDCMotor/motorctrl.c ****             dut01 = _svpwm(uab.alpha,uab.beta);
 218:../BLDCMotor/motorctrl.c ****             motor_set_pwm(dut01);
 219:../BLDCMotor/motorctrl.c ****         }
 220:../BLDCMotor/motorctrl.c ****         #endif        
 221:../BLDCMotor/motorctrl.c **** #endif
 222:../BLDCMotor/motorctrl.c **** /*--------------------------------------------------------------
 223:../BLDCMotor/motorctrl.c **** 开环控制
 224:../BLDCMotor/motorctrl.c **** 100us调用匹配参数  
 225:../BLDCMotor/motorctrl.c ****     42BLDC  theta += 0.004f;  uq = 1.0f
 226:../BLDCMotor/motorctrl.c ****     yateng  theta += 0.004f;  uq = 1.0f
 227:../BLDCMotor/motorctrl.c ****     qita    theta += 0.004f;  uq = 1.0f
 228:../BLDCMotor/motorctrl.c **** --------------------------------------------------------------*/
 229:../BLDCMotor/motorctrl.c **** 
 230:../BLDCMotor/motorctrl.c **** 
 231:../BLDCMotor/motorctrl.c ****     return;
 232:../BLDCMotor/motorctrl.c **** }
 233:../BLDCMotor/motorctrl.c **** void _limit_voltagecircle(uint32_t u_ref,uint32_t elec_theta)
 234:../BLDCMotor/motorctrl.c **** {
 235:../BLDCMotor/motorctrl.c ****     uint32_t u_alpha,u_beta;
 236:../BLDCMotor/motorctrl.c ****     u_alpha = u_ref * cosf(elec_theta);
 237:../BLDCMotor/motorctrl.c ****     u_beta = u_ref * sinf(elec_theta);
 238:../BLDCMotor/motorctrl.c **** }
 239:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 240:../BLDCMotor/motorctrl.c **** {
 241:../BLDCMotor/motorctrl.c **** #if 1
 242:../BLDCMotor/motorctrl.c ****     alpbet_t i_alphbeta;
 243:../BLDCMotor/motorctrl.c ****     dq_t i_dq;
 244:../BLDCMotor/motorctrl.c ****     test_ia = cosf(ele_theta);
 245:../BLDCMotor/motorctrl.c ****     test_ib = cosf(ele_theta - _2PI/3.0f);
 246:../BLDCMotor/motorctrl.c ****     test_ic = cosf(ele_theta + _2PI/3.0f);
 247:../BLDCMotor/motorctrl.c **** 
 248:../BLDCMotor/motorctrl.c ****     // i_abc.a = test_ib;
 249:../BLDCMotor/motorctrl.c ****     // i_abc.b = test_ic;
 250:../BLDCMotor/motorctrl.c ****     // i_abc.c = test_ia;
 251:../BLDCMotor/motorctrl.c **** 
 252:../BLDCMotor/motorctrl.c ****     // i_abc.a = test_ia;
 253:../BLDCMotor/motorctrl.c ****     // i_abc.b = test_ib;
 254:../BLDCMotor/motorctrl.c ****     // i_abc.c = test_ic;
 255:../BLDCMotor/motorctrl.c **** 
 256:../BLDCMotor/motorctrl.c ****     sg_motordebug.ia = i_abc.a;
 257:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 258:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 259:../BLDCMotor/motorctrl.c **** 
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 6


 260:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32G431
 261:../BLDCMotor/motorctrl.c ****     // i_abc.a = sg_motordebug.ia;
 262:../BLDCMotor/motorctrl.c ****     // i_abc.b = sg_motordebug.ic;
 263:../BLDCMotor/motorctrl.c ****     // i_abc.c = sg_motordebug.ib;
 264:../BLDCMotor/motorctrl.c **** 
 265:../BLDCMotor/motorctrl.c ****     // i_abc.a = sg_motordebug.ib;
 266:../BLDCMotor/motorctrl.c ****     // i_abc.b = sg_motordebug.ia;
 267:../BLDCMotor/motorctrl.c ****     // i_abc.c = sg_motordebug.ic;//可以再试
 268:../BLDCMotor/motorctrl.c **** 
 269:../BLDCMotor/motorctrl.c ****     // i_abc.a = sg_motordebug.ib;
 270:../BLDCMotor/motorctrl.c ****     // i_abc.b = sg_motordebug.ic;
 271:../BLDCMotor/motorctrl.c ****     // i_abc.c = sg_motordebug.ia;    //无法使用
 272:../BLDCMotor/motorctrl.c **** 
 273:../BLDCMotor/motorctrl.c ****     // i_abc.a = sg_motordebug.ic;
 274:../BLDCMotor/motorctrl.c ****     // i_abc.b = sg_motordebug.ia;
 275:../BLDCMotor/motorctrl.c ****     // i_abc.c = sg_motordebug.ib;//无法使用
 276:../BLDCMotor/motorctrl.c **** 
 277:../BLDCMotor/motorctrl.c ****     i_abc.a = sg_motordebug.ic;
 278:../BLDCMotor/motorctrl.c ****     i_abc.b = sg_motordebug.ib;
 279:../BLDCMotor/motorctrl.c ****     i_abc.c = sg_motordebug.ia;//可以再试 id,iq方向正确  可以试着调试
 280:../BLDCMotor/motorctrl.c **** #endif
 281:../BLDCMotor/motorctrl.c ****     _3s_2s(i_abc,&i_alphbeta);
 282:../BLDCMotor/motorctrl.c ****     sg_motordebug.ialpha = i_alphbeta.alpha;
 283:../BLDCMotor/motorctrl.c ****     sg_motordebug.ibeta = i_alphbeta.beta;    
 284:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 285:../BLDCMotor/motorctrl.c ****     sg_motordebug.id = (i_dq.d);
 286:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 287:../BLDCMotor/motorctrl.c **** 
 288:../BLDCMotor/motorctrl.c ****     dq_t udq;
 289:../BLDCMotor/motorctrl.c **** #if 0
 290:../BLDCMotor/motorctrl.c ****     // udq.d =pid_contrl(sgp_curloop_d_pid,RTT_test_Id,i_dq.d);
 291:../BLDCMotor/motorctrl.c ****     udq.d =pid_contrl(sgp_curloop_d_pid,RTT_test_Id,i_dq.d);
 292:../BLDCMotor/motorctrl.c **** 
 293:../BLDCMotor/motorctrl.c ****     // udq.q = 0.0f;
 294:../BLDCMotor/motorctrl.c **** #endif
 295:../BLDCMotor/motorctrl.c ****     return udq;
 296:../BLDCMotor/motorctrl.c **** #endif
 297:../BLDCMotor/motorctrl.c **** }
 298:../BLDCMotor/motorctrl.c **** 
 299:../BLDCMotor/motorctrl.c **** static void motor_enable(void)
 300:../BLDCMotor/motorctrl.c **** {
 301:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 302:../BLDCMotor/motorctrl.c ****     gpio_setmotor_power();
 303:../BLDCMotor/motorctrl.c **** #endif
 304:../BLDCMotor/motorctrl.c ****     /*pwm 使能*/
 305:../BLDCMotor/motorctrl.c ****     tim_pwm_enable();
 306:../BLDCMotor/motorctrl.c ****     tim_tigger_adc();
 307:../BLDCMotor/motorctrl.c ****     adc_start();
 308:../BLDCMotor/motorctrl.c **** }
 309:../BLDCMotor/motorctrl.c **** static void motor_enable_noirq(void)
 310:../BLDCMotor/motorctrl.c **** {
  28              		.loc 1 310 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32 0000 08B5     		push	{r3, lr}
  33              	.LCFI0:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 7


  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 3, -8
  36              		.cfi_offset 14, -4
 311:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 312:../BLDCMotor/motorctrl.c ****     gpio_setmotor_power();
 313:../BLDCMotor/motorctrl.c **** #endif    
 314:../BLDCMotor/motorctrl.c ****     /*pwm 使能*/
 315:../BLDCMotor/motorctrl.c ****     tim_pwm_enable();
  37              		.loc 1 315 5 view .LVU1
  38 0002 FFF7FEFF 		bl	tim_pwm_enable
  39              	.LVL0:
 316:../BLDCMotor/motorctrl.c **** }
  40              		.loc 1 316 1 is_stmt 0 view .LVU2
  41 0006 08BD     		pop	{r3, pc}
  42              		.cfi_endproc
  43              	.LFE334:
  45              		.section	.text.motor_set_pwm,"ax",%progbits
  46              		.align	1
  47              		.syntax unified
  48              		.thumb
  49              		.thumb_func
  51              	motor_set_pwm:
  52              	.LFB336:
 317:../BLDCMotor/motorctrl.c **** static void motor_disable(void)
 318:../BLDCMotor/motorctrl.c **** {
 319:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 320:../BLDCMotor/motorctrl.c ****     gpio_setmotor_powerdown();
 321:../BLDCMotor/motorctrl.c **** #endif    
 322:../BLDCMotor/motorctrl.c ****     tim_pwm_disable();
 323:../BLDCMotor/motorctrl.c ****     adc_stop();
 324:../BLDCMotor/motorctrl.c **** }
 325:../BLDCMotor/motorctrl.c **** static void motor_set_pwm(duty_t temp)
 326:../BLDCMotor/motorctrl.c **** {
  53              		.loc 1 326 1 is_stmt 1 view -0
  54              		.cfi_startproc
  55              		@ args = 0, pretend = 0, frame = 16
  56              		@ frame_needed = 0, uses_anonymous_args = 0
  57 0000 00B5     		push	{lr}
  58              	.LCFI1:
  59              		.cfi_def_cfa_offset 4
  60              		.cfi_offset 14, -4
  61 0002 85B0     		sub	sp, sp, #20
  62              	.LCFI2:
  63              		.cfi_def_cfa_offset 24
  64 0004 8DED010A 		vstr.32	s0, [sp, #4]
  65 0008 CDED020A 		vstr.32	s1, [sp, #8]
  66 000c 8DED031A 		vstr.32	s2, [sp, #12]
 327:../BLDCMotor/motorctrl.c ****     tim_set_pwm(temp._a,temp._b,temp._c);
  67              		.loc 1 327 5 view .LVU4
  68 0010 FFF7FEFF 		bl	tim_set_pwm
  69              	.LVL1:
 328:../BLDCMotor/motorctrl.c **** }
  70              		.loc 1 328 1 is_stmt 0 view .LVU5
  71 0014 05B0     		add	sp, sp, #20
  72              	.LCFI3:
  73              		.cfi_def_cfa_offset 4
  74              		@ sp needed
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 8


  75 0016 5DF804FB 		ldr	pc, [sp], #4
  76              		.cfi_endproc
  77              	.LFE336:
  79              		.section	.text.motor_enable,"ax",%progbits
  80              		.align	1
  81              		.syntax unified
  82              		.thumb
  83              		.thumb_func
  85              	motor_enable:
  86              	.LFB333:
 300:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
  87              		.loc 1 300 1 is_stmt 1 view -0
  88              		.cfi_startproc
  89              		@ args = 0, pretend = 0, frame = 0
  90              		@ frame_needed = 0, uses_anonymous_args = 0
  91 0000 08B5     		push	{r3, lr}
  92              	.LCFI4:
  93              		.cfi_def_cfa_offset 8
  94              		.cfi_offset 3, -8
  95              		.cfi_offset 14, -4
 305:../BLDCMotor/motorctrl.c ****     tim_tigger_adc();
  96              		.loc 1 305 5 view .LVU7
  97 0002 FFF7FEFF 		bl	tim_pwm_enable
  98              	.LVL2:
 306:../BLDCMotor/motorctrl.c ****     adc_start();
  99              		.loc 1 306 5 view .LVU8
 100 0006 FFF7FEFF 		bl	tim_tigger_adc
 101              	.LVL3:
 307:../BLDCMotor/motorctrl.c **** }
 102              		.loc 1 307 5 view .LVU9
 103 000a FFF7FEFF 		bl	adc_start
 104              	.LVL4:
 308:../BLDCMotor/motorctrl.c **** static void motor_enable_noirq(void)
 105              		.loc 1 308 1 is_stmt 0 view .LVU10
 106 000e 08BD     		pop	{r3, pc}
 107              		.cfi_endproc
 108              	.LFE333:
 110              		.section	.text.motor_disable,"ax",%progbits
 111              		.align	1
 112              		.syntax unified
 113              		.thumb
 114              		.thumb_func
 116              	motor_disable:
 117              	.LFB335:
 318:../BLDCMotor/motorctrl.c **** #ifdef BOARD_STM32H723
 118              		.loc 1 318 1 is_stmt 1 view -0
 119              		.cfi_startproc
 120              		@ args = 0, pretend = 0, frame = 0
 121              		@ frame_needed = 0, uses_anonymous_args = 0
 122 0000 08B5     		push	{r3, lr}
 123              	.LCFI5:
 124              		.cfi_def_cfa_offset 8
 125              		.cfi_offset 3, -8
 126              		.cfi_offset 14, -4
 322:../BLDCMotor/motorctrl.c ****     adc_stop();
 127              		.loc 1 322 5 view .LVU12
 128 0002 FFF7FEFF 		bl	tim_pwm_disable
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 9


 129              	.LVL5:
 323:../BLDCMotor/motorctrl.c **** }
 130              		.loc 1 323 5 view .LVU13
 131 0006 FFF7FEFF 		bl	adc_stop
 132              	.LVL6:
 324:../BLDCMotor/motorctrl.c **** static void motor_set_pwm(duty_t temp)
 133              		.loc 1 324 1 is_stmt 0 view .LVU14
 134 000a 08BD     		pop	{r3, pc}
 135              		.cfi_endproc
 136              	.LFE335:
 138              		.section	.text._get_angleoffset,"ax",%progbits
 139              		.align	1
 140              		.syntax unified
 141              		.thumb
 142              		.thumb_func
 144              	_get_angleoffset:
 145              	.LFB337:
 329:../BLDCMotor/motorctrl.c **** static float _get_angleoffset(void)
 330:../BLDCMotor/motorctrl.c **** {
 146              		.loc 1 330 1 is_stmt 1 view -0
 147              		.cfi_startproc
 148              		@ args = 0, pretend = 0, frame = 48
 149              		@ frame_needed = 0, uses_anonymous_args = 0
 150 0000 30B5     		push	{r4, r5, lr}
 151              	.LCFI6:
 152              		.cfi_def_cfa_offset 12
 153              		.cfi_offset 4, -12
 154              		.cfi_offset 5, -8
 155              		.cfi_offset 14, -4
 156 0002 8FB0     		sub	sp, sp, #60
 157              	.LCFI7:
 158              		.cfi_def_cfa_offset 72
 331:../BLDCMotor/motorctrl.c ****     motor_enable_noirq();
 159              		.loc 1 331 5 view .LVU16
 160 0004 FFF7FEFF 		bl	motor_enable_noirq
 161              	.LVL7:
 332:../BLDCMotor/motorctrl.c ****     /*-----------设置alpha/beta坐标系------------------*/
 333:../BLDCMotor/motorctrl.c ****     alpbet_t uab = {1.0f,0.0f};
 162              		.loc 1 333 5 view .LVU17
 163              		.loc 1 333 14 is_stmt 0 view .LVU18
 164 0008 0025     		movs	r5, #0
 165 000a 0A95     		str	r5, [sp, #40]
 166 000c 0B95     		str	r5, [sp, #44]
 167 000e 0C95     		str	r5, [sp, #48]
 168 0010 0D95     		str	r5, [sp, #52]
 169 0012 4FF07E52 		mov	r2, #1065353216
 170 0016 0A92     		str	r2, [sp, #40]	@ float
 334:../BLDCMotor/motorctrl.c ****     duty_t dut01;
 171              		.loc 1 334 5 is_stmt 1 view .LVU19
 335:../BLDCMotor/motorctrl.c ****     float theta;
 172              		.loc 1 335 5 view .LVU20
 336:../BLDCMotor/motorctrl.c **** 
 337:../BLDCMotor/motorctrl.c ****     #ifdef BOARD_STM32H723
 338:../BLDCMotor/motorctrl.c ****         dut01 = _svpwm(uab.alpha,uab.beta);
 339:../BLDCMotor/motorctrl.c ****         motor_set_pwm(dut01);
 340:../BLDCMotor/motorctrl.c ****         HAL_Delay(500);    
 341:../BLDCMotor/motorctrl.c ****         tim_encode_writecnt(0);
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 10


 342:../BLDCMotor/motorctrl.c ****         theta = 0.0f;
 343:../BLDCMotor/motorctrl.c ****         motor_disable();
 344:../BLDCMotor/motorctrl.c ****         return theta;
 345:../BLDCMotor/motorctrl.c ****     #endif
 346:../BLDCMotor/motorctrl.c **** 
 347:../BLDCMotor/motorctrl.c ****     #ifdef BOARD_STM32G431
 348:../BLDCMotor/motorctrl.c ****         dq_t udq = {0.0f,1.0f};
 173              		.loc 1 348 9 view .LVU21
 174              		.loc 1 348 14 is_stmt 0 view .LVU22
 175 0018 03AB     		add	r3, sp, #12
 176 001a 0395     		str	r5, [sp, #12]
 177 001c 0495     		str	r5, [sp, #16]
 178 001e 0595     		str	r5, [sp, #20]
 179 0020 0695     		str	r5, [sp, #24]
 180 0022 0492     		str	r2, [sp, #16]	@ float
 349:../BLDCMotor/motorctrl.c ****         uab = _2r_2s(udq,0.0f);
 181              		.loc 1 349 9 is_stmt 1 view .LVU23
 182              		.loc 1 349 15 is_stmt 0 view .LVU24
 183 0024 0095     		str	r5, [sp]
 184 0026 0ECB     		ldm	r3, {r1, r2, r3}
 185 0028 9FED190A 		vldr.32	s0, .L13
 186 002c 0AA8     		add	r0, sp, #40
 187 002e FFF7FEFF 		bl	_2r_2s
 188              	.LVL8:
 350:../BLDCMotor/motorctrl.c ****         dut01 = _svpwm(uab.alpha,uab.beta);
 189              		.loc 1 350 9 is_stmt 1 view .LVU25
 190              		.loc 1 350 17 is_stmt 0 view .LVU26
 191 0032 DDED0B0A 		vldr.32	s1, [sp, #44]
 192 0036 9DED0A0A 		vldr.32	s0, [sp, #40]
 193 003a FFF7FEFF 		bl	_svpwm
 194              	.LVL9:
 195 003e 8DED070A 		vstr.32	s0, [sp, #28]
 196 0042 CDED080A 		vstr.32	s1, [sp, #32]
 197 0046 8DED091A 		vstr.32	s2, [sp, #36]
 351:../BLDCMotor/motorctrl.c ****         motor_set_pwm(dut01);
 198              		.loc 1 351 9 is_stmt 1 view .LVU27
 199 004a FFF7FEFF 		bl	motor_set_pwm
 200              	.LVL10:
 352:../BLDCMotor/motorctrl.c ****         HAL_Delay(500);    
 201              		.loc 1 352 9 view .LVU28
 202 004e 4FF4FA70 		mov	r0, #500
 203 0052 FFF7FEFF 		bl	HAL_Delay
 204              	.LVL11:
 353:../BLDCMotor/motorctrl.c ****         motor_disable();
 205              		.loc 1 353 9 view .LVU29
 206 0056 FFF7FEFF 		bl	motor_disable
 207              	.LVL12:
 354:../BLDCMotor/motorctrl.c ****         HAL_Delay(500);
 208              		.loc 1 354 9 view .LVU30
 209 005a 4FF4FA70 		mov	r0, #500
 210 005e FFF7FEFF 		bl	HAL_Delay
 211              	.LVL13:
 355:../BLDCMotor/motorctrl.c ****         int32_t Q15_theta;
 212              		.loc 1 355 9 view .LVU31
 356:../BLDCMotor/motorctrl.c ****         int32_t Q_thetaSum = 0;
 213              		.loc 1 356 9 view .LVU32
 357:../BLDCMotor/motorctrl.c ****         for (uint8_t i = 0; i < 10; i++)
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 11


 214              		.loc 1 357 9 view .LVU33
 215              	.LBB2:
 216              		.loc 1 357 14 view .LVU34
 217              		.loc 1 357 22 is_stmt 0 view .LVU35
 218 0062 2C46     		mov	r4, r5
 219              		.loc 1 357 9 view .LVU36
 220 0064 07E0     		b	.L10
 221              	.LVL14:
 222              	.L11:
 358:../BLDCMotor/motorctrl.c ****         {
 359:../BLDCMotor/motorctrl.c ****             Q_thetaSum += ((int32_t*)(sensor_user_read(SENSOR_01,EN_SENSORDATA_COV)))[0];
 223              		.loc 1 359 13 is_stmt 1 discriminator 3 view .LVU37
 224              		.loc 1 359 39 is_stmt 0 discriminator 3 view .LVU38
 225 0066 0121     		movs	r1, #1
 226 0068 0020     		movs	r0, #0
 227 006a FFF7FEFF 		bl	sensor_user_read
 228              	.LVL15:
 229              		.loc 1 359 86 discriminator 3 view .LVU39
 230 006e 0368     		ldr	r3, [r0]
 231              		.loc 1 359 24 discriminator 3 view .LVU40
 232 0070 1D44     		add	r5, r5, r3
 233              	.LVL16:
 357:../BLDCMotor/motorctrl.c ****         for (uint8_t i = 0; i < 10; i++)
 234              		.loc 1 357 37 is_stmt 1 discriminator 3 view .LVU41
 357:../BLDCMotor/motorctrl.c ****         for (uint8_t i = 0; i < 10; i++)
 235              		.loc 1 357 38 is_stmt 0 discriminator 3 view .LVU42
 236 0072 0134     		adds	r4, r4, #1
 237              	.LVL17:
 357:../BLDCMotor/motorctrl.c ****         for (uint8_t i = 0; i < 10; i++)
 238              		.loc 1 357 38 discriminator 3 view .LVU43
 239 0074 E4B2     		uxtb	r4, r4
 240              	.LVL18:
 241              	.L10:
 357:../BLDCMotor/motorctrl.c ****         for (uint8_t i = 0; i < 10; i++)
 242              		.loc 1 357 29 is_stmt 1 discriminator 1 view .LVU44
 357:../BLDCMotor/motorctrl.c ****         for (uint8_t i = 0; i < 10; i++)
 243              		.loc 1 357 9 is_stmt 0 discriminator 1 view .LVU45
 244 0076 092C     		cmp	r4, #9
 245 0078 F5D9     		bls	.L11
 246              	.LBE2:
 360:../BLDCMotor/motorctrl.c ****         }
 361:../BLDCMotor/motorctrl.c ****         Q15_theta = Q_thetaSum/10;        
 247              		.loc 1 361 9 is_stmt 1 view .LVU46
 248              		.loc 1 361 19 is_stmt 0 view .LVU47
 249 007a 0648     		ldr	r0, .L13+4
 250 007c 80FB0530 		smull	r3, r0, r0, r5
 251 0080 ED17     		asrs	r5, r5, #31
 252              	.LVL19:
 362:../BLDCMotor/motorctrl.c ****         theta = _IQ20toF(Q15_theta);
 253              		.loc 1 362 9 is_stmt 1 view .LVU48
 254              		.loc 1 362 17 is_stmt 0 view .LVU49
 255 0082 C5EBA000 		rsb	r0, r5, r0, asr #2
 256              	.LVL20:
 257              		.loc 1 362 17 view .LVU50
 258 0086 FFF7FEFF 		bl	_IQ20toF
 259              	.LVL21:
 363:../BLDCMotor/motorctrl.c ****         return theta;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 12


 260              		.loc 1 363 9 is_stmt 1 view .LVU51
 364:../BLDCMotor/motorctrl.c ****     #endif
 365:../BLDCMotor/motorctrl.c **** }
 261              		.loc 1 365 1 is_stmt 0 view .LVU52
 262 008a 0FB0     		add	sp, sp, #60
 263              	.LCFI8:
 264              		.cfi_def_cfa_offset 12
 265              		@ sp needed
 266 008c 30BD     		pop	{r4, r5, pc}
 267              	.LVL22:
 268              	.L14:
 269              		.loc 1 365 1 view .LVU53
 270 008e 00BF     		.align	2
 271              	.L13:
 272 0090 00000000 		.word	0
 273 0094 67666666 		.word	1717986919
 274              		.cfi_endproc
 275              	.LFE337:
 277              		.section	.text._currmentloop,"ax",%progbits
 278              		.align	1
 279              		.syntax unified
 280              		.thumb
 281              		.thumb_func
 283              	_currmentloop:
 284              	.LVL23:
 285              	.LFB332:
 240:../BLDCMotor/motorctrl.c **** #if 1
 286              		.loc 1 240 1 is_stmt 1 view -0
 287              		.cfi_startproc
 288              		@ args = 28, pretend = 16, frame = 32
 289              		@ frame_needed = 0, uses_anonymous_args = 0
 240:../BLDCMotor/motorctrl.c **** #if 1
 290              		.loc 1 240 1 is_stmt 0 view .LVU55
 291 0000 84B0     		sub	sp, sp, #16
 292              	.LCFI9:
 293              		.cfi_def_cfa_offset 16
 294 0002 F0B5     		push	{r4, r5, r6, r7, lr}
 295              	.LCFI10:
 296              		.cfi_def_cfa_offset 36
 297              		.cfi_offset 4, -36
 298              		.cfi_offset 5, -32
 299              		.cfi_offset 6, -28
 300              		.cfi_offset 7, -24
 301              		.cfi_offset 14, -20
 302 0004 2DED028B 		vpush.64	{d8}
 303              	.LCFI11:
 304              		.cfi_def_cfa_offset 44
 305              		.cfi_offset 80, -44
 306              		.cfi_offset 81, -40
 307 0008 8DB0     		sub	sp, sp, #52
 308              	.LCFI12:
 309              		.cfi_def_cfa_offset 96
 310 000a 0746     		mov	r7, r0
 311 000c 15AD     		add	r5, sp, #84
 312 000e 85E80E00 		stm	r5, {r1, r2, r3}
 313 0012 B0EE408A 		vmov.f32	s16, s0
 242:../BLDCMotor/motorctrl.c ****     dq_t i_dq;
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 13


 314              		.loc 1 242 5 is_stmt 1 view .LVU56
 243:../BLDCMotor/motorctrl.c ****     test_ia = cosf(ele_theta);
 315              		.loc 1 243 5 view .LVU57
 244:../BLDCMotor/motorctrl.c ****     test_ib = cosf(ele_theta - _2PI/3.0f);
 316              		.loc 1 244 5 view .LVU58
 244:../BLDCMotor/motorctrl.c ****     test_ib = cosf(ele_theta - _2PI/3.0f);
 317              		.loc 1 244 15 is_stmt 0 view .LVU59
 318 0016 FFF7FEFF 		bl	cosf
 319              	.LVL24:
 244:../BLDCMotor/motorctrl.c ****     test_ib = cosf(ele_theta - _2PI/3.0f);
 320              		.loc 1 244 13 view .LVU60
 321 001a 1F4B     		ldr	r3, .L17
 322 001c 83ED000A 		vstr.32	s0, [r3]
 245:../BLDCMotor/motorctrl.c ****     test_ic = cosf(ele_theta + _2PI/3.0f);
 323              		.loc 1 245 5 is_stmt 1 view .LVU61
 245:../BLDCMotor/motorctrl.c ****     test_ic = cosf(ele_theta + _2PI/3.0f);
 324              		.loc 1 245 15 is_stmt 0 view .LVU62
 325 0020 DFED1E8A 		vldr.32	s17, .L17+4
 326 0024 38EE680A 		vsub.f32	s0, s16, s17
 327 0028 FFF7FEFF 		bl	cosf
 328              	.LVL25:
 245:../BLDCMotor/motorctrl.c ****     test_ic = cosf(ele_theta + _2PI/3.0f);
 329              		.loc 1 245 13 view .LVU63
 330 002c 1C4B     		ldr	r3, .L17+8
 331 002e 83ED000A 		vstr.32	s0, [r3]
 246:../BLDCMotor/motorctrl.c **** 
 332              		.loc 1 246 5 is_stmt 1 view .LVU64
 246:../BLDCMotor/motorctrl.c **** 
 333              		.loc 1 246 15 is_stmt 0 view .LVU65
 334 0032 38EE280A 		vadd.f32	s0, s16, s17
 335 0036 FFF7FEFF 		bl	cosf
 336              	.LVL26:
 246:../BLDCMotor/motorctrl.c **** 
 337              		.loc 1 246 13 view .LVU66
 338 003a 1A4B     		ldr	r3, .L17+12
 339 003c 83ED000A 		vstr.32	s0, [r3]
 256:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 340              		.loc 1 256 5 is_stmt 1 view .LVU67
 256:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 341              		.loc 1 256 29 is_stmt 0 view .LVU68
 342 0040 159B     		ldr	r3, [sp, #84]	@ float
 256:../BLDCMotor/motorctrl.c ****     sg_motordebug.ib = i_abc.b;
 343              		.loc 1 256 22 view .LVU69
 344 0042 194C     		ldr	r4, .L17+16
 345 0044 2360     		str	r3, [r4]	@ float
 257:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 346              		.loc 1 257 5 is_stmt 1 view .LVU70
 257:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 347              		.loc 1 257 29 is_stmt 0 view .LVU71
 348 0046 169A     		ldr	r2, [sp, #88]	@ float
 257:../BLDCMotor/motorctrl.c ****     sg_motordebug.ic = i_abc.c;
 349              		.loc 1 257 22 view .LVU72
 350 0048 6260     		str	r2, [r4, #4]	@ float
 258:../BLDCMotor/motorctrl.c **** 
 351              		.loc 1 258 5 is_stmt 1 view .LVU73
 258:../BLDCMotor/motorctrl.c **** 
 352              		.loc 1 258 29 is_stmt 0 view .LVU74
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 14


 353 004a 179A     		ldr	r2, [sp, #92]	@ float
 258:../BLDCMotor/motorctrl.c **** 
 354              		.loc 1 258 22 view .LVU75
 355 004c A260     		str	r2, [r4, #8]	@ float
 277:../BLDCMotor/motorctrl.c ****     i_abc.b = sg_motordebug.ib;
 356              		.loc 1 277 5 is_stmt 1 view .LVU76
 277:../BLDCMotor/motorctrl.c ****     i_abc.b = sg_motordebug.ib;
 357              		.loc 1 277 13 is_stmt 0 view .LVU77
 358 004e 1592     		str	r2, [sp, #84]	@ float
 278:../BLDCMotor/motorctrl.c ****     i_abc.c = sg_motordebug.ia;//可以再试 id,iq方向正确  可以试着调试
 359              		.loc 1 278 5 is_stmt 1 view .LVU78
 279:../BLDCMotor/motorctrl.c **** #endif
 360              		.loc 1 279 5 view .LVU79
 279:../BLDCMotor/motorctrl.c **** #endif
 361              		.loc 1 279 13 is_stmt 0 view .LVU80
 362 0050 1793     		str	r3, [sp, #92]	@ float
 281:../BLDCMotor/motorctrl.c ****     sg_motordebug.ialpha = i_alphbeta.alpha;
 363              		.loc 1 281 5 is_stmt 1 view .LVU81
 364 0052 08AE     		add	r6, sp, #32
 365 0054 0296     		str	r6, [sp, #8]
 366 0056 19AB     		add	r3, sp, #100
 367 0058 93E80300 		ldm	r3, {r0, r1}
 368 005c 8DE80300 		stm	sp, {r0, r1}
 369 0060 95E80F00 		ldm	r5, {r0, r1, r2, r3}
 370 0064 FFF7FEFF 		bl	_3s_2s
 371              	.LVL27:
 282:../BLDCMotor/motorctrl.c ****     sg_motordebug.ibeta = i_alphbeta.beta;    
 372              		.loc 1 282 5 view .LVU82
 282:../BLDCMotor/motorctrl.c ****     sg_motordebug.ibeta = i_alphbeta.beta;    
 373              		.loc 1 282 38 is_stmt 0 view .LVU83
 374 0068 089B     		ldr	r3, [sp, #32]	@ float
 282:../BLDCMotor/motorctrl.c ****     sg_motordebug.ibeta = i_alphbeta.beta;    
 375              		.loc 1 282 26 view .LVU84
 376 006a E360     		str	r3, [r4, #12]	@ float
 283:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 377              		.loc 1 283 5 is_stmt 1 view .LVU85
 283:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 378              		.loc 1 283 37 is_stmt 0 view .LVU86
 379 006c 099B     		ldr	r3, [sp, #36]	@ float
 283:../BLDCMotor/motorctrl.c ****     _2s_2r(i_alphbeta,((ele_theta)),&i_dq);
 380              		.loc 1 283 25 view .LVU87
 381 006e 2361     		str	r3, [r4, #16]	@ float
 284:../BLDCMotor/motorctrl.c ****     sg_motordebug.id = (i_dq.d);
 382              		.loc 1 284 5 is_stmt 1 view .LVU88
 383 0070 04AB     		add	r3, sp, #16
 384 0072 0093     		str	r3, [sp]
 385 0074 B0EE480A 		vmov.f32	s0, s16
 386 0078 96E80F00 		ldm	r6, {r0, r1, r2, r3}
 387 007c FFF7FEFF 		bl	_2s_2r
 388              	.LVL28:
 285:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 389              		.loc 1 285 5 view .LVU89
 285:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 390              		.loc 1 285 29 is_stmt 0 view .LVU90
 391 0080 049B     		ldr	r3, [sp, #16]	@ float
 285:../BLDCMotor/motorctrl.c ****     sg_motordebug.iq = (i_dq.q);
 392              		.loc 1 285 22 view .LVU91
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 15


 393 0082 6361     		str	r3, [r4, #20]	@ float
 286:../BLDCMotor/motorctrl.c **** 
 394              		.loc 1 286 5 is_stmt 1 view .LVU92
 286:../BLDCMotor/motorctrl.c **** 
 395              		.loc 1 286 29 is_stmt 0 view .LVU93
 396 0084 059B     		ldr	r3, [sp, #20]	@ float
 286:../BLDCMotor/motorctrl.c **** 
 397              		.loc 1 286 22 view .LVU94
 398 0086 A361     		str	r3, [r4, #24]	@ float
 288:../BLDCMotor/motorctrl.c **** #if 0
 399              		.loc 1 288 5 is_stmt 1 view .LVU95
 295:../BLDCMotor/motorctrl.c **** #endif
 400              		.loc 1 295 5 view .LVU96
 297:../BLDCMotor/motorctrl.c **** 
 401              		.loc 1 297 1 is_stmt 0 view .LVU97
 402 0088 3846     		mov	r0, r7
 403 008a 0DB0     		add	sp, sp, #52
 404              	.LCFI13:
 405              		.cfi_def_cfa_offset 44
 406              		@ sp needed
 407 008c BDEC028B 		vldm	sp!, {d8}
 408              	.LCFI14:
 409              		.cfi_restore 80
 410              		.cfi_restore 81
 411              		.cfi_def_cfa_offset 36
 412              	.LVL29:
 297:../BLDCMotor/motorctrl.c **** 
 413              		.loc 1 297 1 view .LVU98
 414 0090 BDE8F040 		pop	{r4, r5, r6, r7, lr}
 415              	.LCFI15:
 416              		.cfi_restore 14
 417              		.cfi_restore 7
 418              		.cfi_restore 6
 419              		.cfi_restore 5
 420              		.cfi_restore 4
 421              		.cfi_def_cfa_offset 16
 422              	.LVL30:
 297:../BLDCMotor/motorctrl.c **** 
 423              		.loc 1 297 1 view .LVU99
 424 0094 04B0     		add	sp, sp, #16
 425              	.LCFI16:
 426              		.cfi_def_cfa_offset 0
 427 0096 7047     		bx	lr
 428              	.L18:
 429              		.align	2
 430              	.L17:
 431 0098 00000000 		.word	.LANCHOR0
 432 009c 910A0640 		.word	1074137745
 433 00a0 00000000 		.word	.LANCHOR1
 434 00a4 00000000 		.word	.LANCHOR2
 435 00a8 00000000 		.word	.LANCHOR3
 436              		.cfi_endproc
 437              	.LFE332:
 439              		.global	__aeabi_f2d
 440              		.global	__aeabi_dadd
 441              		.global	__aeabi_d2f
 442              		.section	.text._50uscycle_process,"ax",%progbits
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 16


 443              		.align	1
 444              		.global	_50uscycle_process
 445              		.syntax unified
 446              		.thumb
 447              		.thumb_func
 449              	_50uscycle_process:
 450              	.LVL31:
 451              	.LFB330:
 108:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 452              		.loc 1 108 1 is_stmt 1 view -0
 453              		.cfi_startproc
 454              		@ args = 0, pretend = 0, frame = 72
 455              		@ frame_needed = 0, uses_anonymous_args = 0
 108:../BLDCMotor/motorctrl.c ****     float elec_theta,mech_theta;
 456              		.loc 1 108 1 is_stmt 0 view .LVU101
 457 0000 30B5     		push	{r4, r5, lr}
 458              	.LCFI17:
 459              		.cfi_def_cfa_offset 12
 460              		.cfi_offset 4, -12
 461              		.cfi_offset 5, -8
 462              		.cfi_offset 14, -4
 463 0002 2DED028B 		vpush.64	{d8}
 464              	.LCFI18:
 465              		.cfi_def_cfa_offset 20
 466              		.cfi_offset 80, -20
 467              		.cfi_offset 81, -16
 468 0006 97B0     		sub	sp, sp, #92
 469              	.LCFI19:
 470              		.cfi_def_cfa_offset 112
 109:../BLDCMotor/motorctrl.c ****     int32_t Q15_Mechtheta;    
 471              		.loc 1 109 5 is_stmt 1 view .LVU102
 110:../BLDCMotor/motorctrl.c **** 
 472              		.loc 1 110 5 view .LVU103
 112:../BLDCMotor/motorctrl.c **** /*----------------三相电流处理------------------------------*/    
 473              		.loc 1 112 5 view .LVU104
 114:../BLDCMotor/motorctrl.c ****     int32_t a1,b1,c1;
 474              		.loc 1 114 5 view .LVU105
 115:../BLDCMotor/motorctrl.c ****     a1 = abc_vale[0] - A_ADCCHANNL_OFFSET;
 475              		.loc 1 115 5 view .LVU106
 116:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 476              		.loc 1 116 5 view .LVU107
 116:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 477              		.loc 1 116 18 is_stmt 0 view .LVU108
 478 0008 0168     		ldr	r1, [r0]
 116:../BLDCMotor/motorctrl.c ****     b1 = abc_vale[1] - B_ADCCHANNL_OFFSET;
 479              		.loc 1 116 22 view .LVU109
 480 000a A1F63401 		subw	r1, r1, #2100
 481              	.LVL32:
 117:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 482              		.loc 1 117 5 is_stmt 1 view .LVU110
 117:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 483              		.loc 1 117 18 is_stmt 0 view .LVU111
 484 000e 4268     		ldr	r2, [r0, #4]
 117:../BLDCMotor/motorctrl.c ****     c1 = abc_vale[2] - C_ADCCHANNL_OFFSET;
 485              		.loc 1 117 22 view .LVU112
 486 0010 A2F66602 		subw	r2, r2, #2150
 487              	.LVL33:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 17


 118:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ia = a1;
 488              		.loc 1 118 5 is_stmt 1 view .LVU113
 118:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ia = a1;
 489              		.loc 1 118 18 is_stmt 0 view .LVU114
 490 0014 8368     		ldr	r3, [r0, #8]
 118:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ia = a1;
 491              		.loc 1 118 22 view .LVU115
 492 0016 A3F66603 		subw	r3, r3, #2150
 493              	.LVL34:
 119:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ib = b1;
 494              		.loc 1 119 5 is_stmt 1 view .LVU116
 119:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ib = b1;
 495              		.loc 1 119 24 is_stmt 0 view .LVU117
 496 001a 434C     		ldr	r4, .L21+8
 497 001c E161     		str	r1, [r4, #28]
 120:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ic = c1;    
 498              		.loc 1 120 5 is_stmt 1 view .LVU118
 120:../BLDCMotor/motorctrl.c ****     sg_motordebug.Q_ic = c1;    
 499              		.loc 1 120 24 is_stmt 0 view .LVU119
 500 001e 2262     		str	r2, [r4, #32]
 121:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 501              		.loc 1 121 5 is_stmt 1 view .LVU120
 121:../BLDCMotor/motorctrl.c ****     Ia = (float)a1*(float)A_VOLITETOCURRENT_FACTOR;
 502              		.loc 1 121 24 is_stmt 0 view .LVU121
 503 0020 6362     		str	r3, [r4, #36]
 122:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 504              		.loc 1 122 5 is_stmt 1 view .LVU122
 122:../BLDCMotor/motorctrl.c ****     Ib = (float)b1*(float)B_VOLITETOCURRENT_FACTOR;
 505              		.loc 1 122 10 is_stmt 0 view .LVU123
 506 0022 07EE901A 		vmov	s15, r1	@ int
 507 0026 B8EEE70A 		vcvt.f32.s32	s0, s15
 508              	.LVL35:
 123:../BLDCMotor/motorctrl.c ****     Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 509              		.loc 1 123 5 is_stmt 1 view .LVU124
 123:../BLDCMotor/motorctrl.c ****     Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 510              		.loc 1 123 10 is_stmt 0 view .LVU125
 511 002a 07EE902A 		vmov	s15, r2	@ int
 512 002e F8EEE78A 		vcvt.f32.s32	s17, s15
 123:../BLDCMotor/motorctrl.c ****     Ic = (float)c1*(float)C_VOLITETOCURRENT_FACTOR;
 513              		.loc 1 123 8 view .LVU126
 514 0032 DFED3E7A 		vldr.32	s15, .L21+12
 515 0036 68EEA78A 		vmul.f32	s17, s17, s15
 516              	.LVL36:
 124:../BLDCMotor/motorctrl.c **** #if 1
 517              		.loc 1 124 5 is_stmt 1 view .LVU127
 124:../BLDCMotor/motorctrl.c **** #if 1
 518              		.loc 1 124 10 is_stmt 0 view .LVU128
 519 003a 07EE903A 		vmov	s15, r3	@ int
 520 003e B8EEE78A 		vcvt.f32.s32	s16, s15
 124:../BLDCMotor/motorctrl.c **** #if 1
 521              		.loc 1 124 8 view .LVU129
 522 0042 DFED3B7A 		vldr.32	s15, .L21+16
 523 0046 28EE278A 		vmul.f32	s16, s16, s15
 524              	.LVL37:
 126:../BLDCMotor/motorctrl.c ****     i_abc.a = lowfilter_cale(&sg_elefilter[0],Ia);
 525              		.loc 1 126 5 is_stmt 1 view .LVU130
 127:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 18


 526              		.loc 1 127 5 view .LVU131
 127:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 527              		.loc 1 127 15 is_stmt 0 view .LVU132
 528 004a 3A4D     		ldr	r5, .L21+20
 529 004c DFED3A7A 		vldr.32	s15, .L21+24
 530 0050 20EE270A 		vmul.f32	s0, s0, s15
 531              	.LVL38:
 127:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 532              		.loc 1 127 15 view .LVU133
 533 0054 2846     		mov	r0, r5
 534              	.LVL39:
 127:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 535              		.loc 1 127 15 view .LVU134
 536 0056 FFF7FEFF 		bl	lowfilter_cale
 537              	.LVL40:
 127:../BLDCMotor/motorctrl.c ****     i_abc.b = lowfilter_cale(&sg_elefilter[1],Ib);
 538              		.loc 1 127 13 view .LVU135
 539 005a 8DED0D0A 		vstr.32	s0, [sp, #52]
 128:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 540              		.loc 1 128 5 is_stmt 1 view .LVU136
 128:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 541              		.loc 1 128 15 is_stmt 0 view .LVU137
 542 005e B0EE680A 		vmov.f32	s0, s17
 543 0062 05F10800 		add	r0, r5, #8
 544 0066 FFF7FEFF 		bl	lowfilter_cale
 545              	.LVL41:
 128:../BLDCMotor/motorctrl.c ****     i_abc.c = lowfilter_cale(&sg_elefilter[2],Ic);
 546              		.loc 1 128 13 view .LVU138
 547 006a 8DED0E0A 		vstr.32	s0, [sp, #56]
 129:../BLDCMotor/motorctrl.c **** #endif
 548              		.loc 1 129 5 is_stmt 1 view .LVU139
 129:../BLDCMotor/motorctrl.c **** #endif
 549              		.loc 1 129 15 is_stmt 0 view .LVU140
 550 006e B0EE480A 		vmov.f32	s0, s16
 551 0072 05F11000 		add	r0, r5, #16
 552 0076 FFF7FEFF 		bl	lowfilter_cale
 553              	.LVL42:
 129:../BLDCMotor/motorctrl.c **** #endif
 554              		.loc 1 129 13 view .LVU141
 555 007a 8DED0F0A 		vstr.32	s0, [sp, #60]
 188:../BLDCMotor/motorctrl.c ****         mech_theta = _IQ20toF(Q15_Mechtheta);
 556              		.loc 1 188 9 is_stmt 1 view .LVU142
 188:../BLDCMotor/motorctrl.c ****         mech_theta = _IQ20toF(Q15_Mechtheta);
 557              		.loc 1 188 36 is_stmt 0 view .LVU143
 558 007e 0121     		movs	r1, #1
 559 0080 0020     		movs	r0, #0
 560 0082 FFF7FEFF 		bl	sensor_user_read
 561              	.LVL43:
 189:../BLDCMotor/motorctrl.c ****         mech_theta -= sg_MecThetaOffset;
 562              		.loc 1 189 9 is_stmt 1 view .LVU144
 189:../BLDCMotor/motorctrl.c ****         mech_theta -= sg_MecThetaOffset;
 563              		.loc 1 189 22 is_stmt 0 view .LVU145
 564 0086 0068     		ldr	r0, [r0]
 565              	.LVL44:
 189:../BLDCMotor/motorctrl.c ****         mech_theta -= sg_MecThetaOffset;
 566              		.loc 1 189 22 view .LVU146
 567 0088 FFF7FEFF 		bl	_IQ20toF
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 19


 568              	.LVL45:
 190:../BLDCMotor/motorctrl.c ****         elec_theta = mech_theta * MOTOR_PAIR;
 569              		.loc 1 190 9 is_stmt 1 view .LVU147
 570 008c 2B4B     		ldr	r3, .L21+28
 571 008e D3ED007A 		vldr.32	s15, [r3]
 190:../BLDCMotor/motorctrl.c ****         elec_theta = mech_theta * MOTOR_PAIR;
 572              		.loc 1 190 20 is_stmt 0 view .LVU148
 573 0092 30EE670A 		vsub.f32	s0, s0, s15
 574              	.LVL46:
 191:../BLDCMotor/motorctrl.c ****         elec_theta += ANGLE_COMPENSATA;
 575              		.loc 1 191 9 is_stmt 1 view .LVU149
 192:../BLDCMotor/motorctrl.c ****         elec_theta = _normalize_angle(elec_theta);
 576              		.loc 1 192 9 view .LVU150
 192:../BLDCMotor/motorctrl.c ****         elec_theta = _normalize_angle(elec_theta);
 577              		.loc 1 192 20 is_stmt 0 view .LVU151
 578 0096 70EE007A 		vadd.f32	s15, s0, s0
 579              	.LVL47:
 192:../BLDCMotor/motorctrl.c ****         elec_theta = _normalize_angle(elec_theta);
 580              		.loc 1 192 20 view .LVU152
 581 009a 17EE900A 		vmov	r0, s15
 582 009e FFF7FEFF 		bl	__aeabi_f2d
 583              	.LVL48:
 192:../BLDCMotor/motorctrl.c ****         elec_theta = _normalize_angle(elec_theta);
 584              		.loc 1 192 20 view .LVU153
 585 00a2 1FA3     		adr	r3, .L21
 586 00a4 D3E90023 		ldrd	r2, [r3]
 587 00a8 FFF7FEFF 		bl	__aeabi_dadd
 588              	.LVL49:
 589 00ac FFF7FEFF 		bl	__aeabi_d2f
 590              	.LVL50:
 193:../BLDCMotor/motorctrl.c ****         sg_motordebug.ele_angle = elec_theta;
 591              		.loc 1 193 9 is_stmt 1 view .LVU154
 193:../BLDCMotor/motorctrl.c ****         sg_motordebug.ele_angle = elec_theta;
 592              		.loc 1 193 22 is_stmt 0 view .LVU155
 593 00b0 00EE100A 		vmov	s0, r0
 594 00b4 FFF7FEFF 		bl	_normalize_angle
 595              	.LVL51:
 193:../BLDCMotor/motorctrl.c ****         sg_motordebug.ele_angle = elec_theta;
 596              		.loc 1 193 22 view .LVU156
 597 00b8 B0EE408A 		vmov.f32	s16, s0
 598              	.LVL52:
 194:../BLDCMotor/motorctrl.c **** 
 599              		.loc 1 194 9 is_stmt 1 view .LVU157
 194:../BLDCMotor/motorctrl.c **** 
 600              		.loc 1 194 33 is_stmt 0 view .LVU158
 601 00bc 84ED130A 		vstr.32	s0, [r4, #76]
 602              	.LBB3:
 211:../BLDCMotor/motorctrl.c ****             alpbet_t uab,uab_q15;
 603              		.loc 1 211 13 is_stmt 1 view .LVU159
 211:../BLDCMotor/motorctrl.c ****             alpbet_t uab,uab_q15;
 604              		.loc 1 211 18 is_stmt 0 view .LVU160
 605 00c0 1F4B     		ldr	r3, .L21+32
 606 00c2 05AC     		add	r4, sp, #20
 607 00c4 0FCB     		ldm	r3, {r0, r1, r2, r3}
 608 00c6 84E80F00 		stm	r4, {r0, r1, r2, r3}
 212:../BLDCMotor/motorctrl.c ****             #if 1/*闭环控制*/
 609              		.loc 1 212 13 is_stmt 1 view .LVU161
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 20


 214:../BLDCMotor/motorctrl.c ****             #endif
 610              		.loc 1 214 17 view .LVU162
 214:../BLDCMotor/motorctrl.c ****             #endif
 611              		.loc 1 214 23 is_stmt 0 view .LVU163
 612 00ca 10AB     		add	r3, sp, #64
 613 00cc 93E80700 		ldm	r3, {r0, r1, r2}
 614 00d0 8DE80700 		stm	sp, {r0, r1, r2}
 615 00d4 0DAB     		add	r3, sp, #52
 616 00d6 0ECB     		ldm	r3, {r1, r2, r3}
 617 00d8 9FED1A0A 		vldr.32	s0, .L21+36
 618              	.LVL53:
 214:../BLDCMotor/motorctrl.c ****             #endif
 619              		.loc 1 214 23 view .LVU164
 620 00dc 38EE400A 		vsub.f32	s0, s16, s0
 621 00e0 2046     		mov	r0, r4
 622 00e2 FFF7FEFF 		bl	_currmentloop
 623              	.LVL54:
 216:../BLDCMotor/motorctrl.c ****             dut01 = _svpwm(uab.alpha,uab.beta);
 624              		.loc 1 216 13 is_stmt 1 view .LVU165
 216:../BLDCMotor/motorctrl.c ****             dut01 = _svpwm(uab.alpha,uab.beta);
 625              		.loc 1 216 19 is_stmt 0 view .LVU166
 626 00e6 089B     		ldr	r3, [sp, #32]
 627 00e8 0093     		str	r3, [sp]
 628 00ea 94E80E00 		ldm	r4, {r1, r2, r3}
 629 00ee B0EE480A 		vmov.f32	s0, s16
 630 00f2 09A8     		add	r0, sp, #36
 631 00f4 FFF7FEFF 		bl	_2r_2s
 632              	.LVL55:
 217:../BLDCMotor/motorctrl.c ****             motor_set_pwm(dut01);
 633              		.loc 1 217 13 is_stmt 1 view .LVU167
 217:../BLDCMotor/motorctrl.c ****             motor_set_pwm(dut01);
 634              		.loc 1 217 21 is_stmt 0 view .LVU168
 635 00f8 DDED0A0A 		vldr.32	s1, [sp, #40]
 636 00fc 9DED090A 		vldr.32	s0, [sp, #36]
 637 0100 FFF7FEFF 		bl	_svpwm
 638              	.LVL56:
 639 0104 8DED130A 		vstr.32	s0, [sp, #76]
 640 0108 CDED140A 		vstr.32	s1, [sp, #80]
 641 010c 8DED151A 		vstr.32	s2, [sp, #84]
 218:../BLDCMotor/motorctrl.c ****         }
 642              		.loc 1 218 13 is_stmt 1 view .LVU169
 643 0110 FFF7FEFF 		bl	motor_set_pwm
 644              	.LVL57:
 645              	.LBE3:
 231:../BLDCMotor/motorctrl.c **** }
 646              		.loc 1 231 5 view .LVU170
 232:../BLDCMotor/motorctrl.c **** void _limit_voltagecircle(uint32_t u_ref,uint32_t elec_theta)
 647              		.loc 1 232 1 is_stmt 0 view .LVU171
 648 0114 17B0     		add	sp, sp, #92
 649              	.LCFI20:
 650              		.cfi_def_cfa_offset 20
 651              		@ sp needed
 652 0116 BDEC028B 		vldm	sp!, {d8}
 653              	.LCFI21:
 654              		.cfi_restore 80
 655              		.cfi_restore 81
 656              		.cfi_def_cfa_offset 12
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 21


 657              	.LVL58:
 232:../BLDCMotor/motorctrl.c **** void _limit_voltagecircle(uint32_t u_ref,uint32_t elec_theta)
 658              		.loc 1 232 1 view .LVU172
 659 011a 30BD     		pop	{r4, r5, pc}
 660              	.L22:
 661 011c AFF30080 		.align	3
 662              	.L21:
 663 0120 000000A8 		.word	-1476395008
 664 0124 6188FF3F 		.word	1073711201
 665 0128 00000000 		.word	.LANCHOR3
 666 012c 4260653B 		.word	996499522
 667 0130 6F12033B 		.word	990057071
 668 0134 00000000 		.word	.LANCHOR4
 669 0138 A69BC43A 		.word	985963430
 670 013c 00000000 		.word	.LANCHOR5
 671 0140 00000000 		.word	.LANCHOR6
 672 0144 D80FC93F 		.word	1070141400
 673              		.cfi_endproc
 674              	.LFE330:
 676              		.section	.text._limit_voltagecircle,"ax",%progbits
 677              		.align	1
 678              		.global	_limit_voltagecircle
 679              		.syntax unified
 680              		.thumb
 681              		.thumb_func
 683              	_limit_voltagecircle:
 684              	.LVL59:
 685              	.LFB331:
 234:../BLDCMotor/motorctrl.c ****     uint32_t u_alpha,u_beta;
 686              		.loc 1 234 1 is_stmt 1 view -0
 687              		.cfi_startproc
 688              		@ args = 0, pretend = 0, frame = 0
 689              		@ frame_needed = 0, uses_anonymous_args = 0
 690              		@ link register save eliminated.
 235:../BLDCMotor/motorctrl.c ****     u_alpha = u_ref * cosf(elec_theta);
 691              		.loc 1 235 5 view .LVU174
 236:../BLDCMotor/motorctrl.c ****     u_beta = u_ref * sinf(elec_theta);
 692              		.loc 1 236 5 view .LVU175
 237:../BLDCMotor/motorctrl.c **** }
 693              		.loc 1 237 5 view .LVU176
 238:../BLDCMotor/motorctrl.c **** dq_t _currmentloop(abc_t i_abc,float ele_theta)
 694              		.loc 1 238 1 is_stmt 0 view .LVU177
 695 0000 7047     		bx	lr
 696              		.cfi_endproc
 697              	.LFE331:
 699              		.section	.text.foc_paraminit,"ax",%progbits
 700              		.align	1
 701              		.global	foc_paraminit
 702              		.syntax unified
 703              		.thumb
 704              		.thumb_func
 706              	foc_paraminit:
 707              	.LFB338:
 366:../BLDCMotor/motorctrl.c **** 
 367:../BLDCMotor/motorctrl.c **** void foc_paraminit(void)
 368:../BLDCMotor/motorctrl.c **** {
 708              		.loc 1 368 1 is_stmt 1 view -0
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 22


 709              		.cfi_startproc
 710              		@ args = 0, pretend = 0, frame = 0
 711              		@ frame_needed = 0, uses_anonymous_args = 0
 712 0000 10B5     		push	{r4, lr}
 713              	.LCFI22:
 714              		.cfi_def_cfa_offset 8
 715              		.cfi_offset 4, -8
 716              		.cfi_offset 14, -4
 717 0002 2DED028B 		vpush.64	{d8}
 718              	.LCFI23:
 719              		.cfi_def_cfa_offset 16
 720              		.cfi_offset 80, -16
 721              		.cfi_offset 81, -12
 369:../BLDCMotor/motorctrl.c ****     sgp_curloop_d_pid = &sg_curloop_param.d_pid;
 722              		.loc 1 369 5 view .LVU179
 723              		.loc 1 369 23 is_stmt 0 view .LVU180
 724 0006 1D48     		ldr	r0, .L26
 725 0008 1D4B     		ldr	r3, .L26+4
 726 000a 1860     		str	r0, [r3]
 370:../BLDCMotor/motorctrl.c ****     sgp_curloop_q_pid = &sg_curloop_param.q_pid;
 727              		.loc 1 370 5 is_stmt 1 view .LVU181
 728              		.loc 1 370 23 is_stmt 0 view .LVU182
 729 000c 1D4C     		ldr	r4, .L26+8
 730 000e 00F11C03 		add	r3, r0, #28
 731 0012 2360     		str	r3, [r4]
 371:../BLDCMotor/motorctrl.c ****     pid_init(sgp_curloop_d_pid,2.4f,0.000f,1.0f,D_MAX_VAL,D_MIN_VAL);
 732              		.loc 1 371 5 is_stmt 1 view .LVU183
 733 0014 DFED1C8A 		vldr.32	s17, .L26+12
 734 0018 9FED1C8A 		vldr.32	s16, .L26+16
 735 001c B0EE682A 		vmov.f32	s4, s17
 736 0020 F0EE481A 		vmov.f32	s3, s16
 737 0024 B7EE001A 		vmov.f32	s2, #1.0e+0
 738 0028 DFED190A 		vldr.32	s1, .L26+20
 739 002c 9FED190A 		vldr.32	s0, .L26+24
 740 0030 FFF7FEFF 		bl	pid_init
 741              	.LVL60:
 372:../BLDCMotor/motorctrl.c ****     pid_init(sgp_curloop_q_pid,0.020f,0.001f,1.0f,D_MAX_VAL,D_MIN_VAL);
 742              		.loc 1 372 5 view .LVU184
 743 0034 B0EE682A 		vmov.f32	s4, s17
 744 0038 F0EE481A 		vmov.f32	s3, s16
 745 003c B7EE001A 		vmov.f32	s2, #1.0e+0
 746 0040 DFED150A 		vldr.32	s1, .L26+28
 747 0044 9FED150A 		vldr.32	s0, .L26+32
 748 0048 2068     		ldr	r0, [r4]
 749 004a FFF7FEFF 		bl	pid_init
 750              	.LVL61:
 373:../BLDCMotor/motorctrl.c ****     lowfilter_init(&sg_elefilter[0],80);
 751              		.loc 1 373 5 view .LVU185
 752 004e 9FED148A 		vldr.32	s16, .L26+36
 753 0052 144C     		ldr	r4, .L26+40
 754 0054 B0EE480A 		vmov.f32	s0, s16
 755 0058 2046     		mov	r0, r4
 756 005a FFF7FEFF 		bl	lowfilter_init
 757              	.LVL62:
 374:../BLDCMotor/motorctrl.c ****     lowfilter_init(&sg_elefilter[1],80);
 758              		.loc 1 374 5 view .LVU186
 759 005e B0EE480A 		vmov.f32	s0, s16
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 23


 760 0062 04F10800 		add	r0, r4, #8
 761 0066 FFF7FEFF 		bl	lowfilter_init
 762              	.LVL63:
 375:../BLDCMotor/motorctrl.c ****     lowfilter_init(&sg_elefilter[2],80);
 763              		.loc 1 375 5 view .LVU187
 764 006a B0EE480A 		vmov.f32	s0, s16
 765 006e 04F11000 		add	r0, r4, #16
 766 0072 FFF7FEFF 		bl	lowfilter_init
 767              	.LVL64:
 376:../BLDCMotor/motorctrl.c **** }...
 768              		.loc 1 376 1 is_stmt 0 view .LVU188
 769 0076 BDEC028B 		vldm	sp!, {d8}
 770              	.LCFI24:
 771              		.cfi_restore 80
 772              		.cfi_restore 81
 773              		.cfi_def_cfa_offset 8
 774 007a 10BD     		pop	{r4, pc}
 775              	.L27:
 776              		.align	2
 777              	.L26:
 778 007c 00000000 		.word	.LANCHOR8
 779 0080 00000000 		.word	.LANCHOR7
 780 0084 00000000 		.word	.LANCHOR9
 781 0088 333373C1 		.word	-1049414861
 782 008c 33337341 		.word	1098068787
 783 0090 00000000 		.word	0
 784 0094 9A991940 		.word	1075419546
 785 0098 6F12833A 		.word	981668463
 786 009c 0AD7A33C 		.word	1017370378
 787 00a0 0000A042 		.word	1117782016
 788 00a4 00000000 		.word	.LANCHOR4
 789              		.cfi_endproc
 790              	.LFE338:
 792              		.section	.rodata.motortctrl_process.str1.4,"aMS",%progbits,1
 793              		.align	2
 794              	.LC1:
 795 0000 6D6F746F 		.ascii	"motor init\015\012\000"
 795      7220696E 
 795      69740D0A 
 795      00
 796              		.section	.text.motortctrl_process,"ax",%progbits
 797              		.align	1
 798              		.global	motortctrl_process
 799              		.syntax unified
 800              		.thumb
 801              		.thumb_func
 803              	motortctrl_process:
 804              	.LFB329:
  78:../BLDCMotor/motorctrl.c **** {
 805              		.loc 1 78 1 is_stmt 1 view -0
 806              		.cfi_startproc
 807              		@ args = 0, pretend = 0, frame = 0
 808              		@ frame_needed = 0, uses_anonymous_args = 0
 809 0000 08B5     		push	{r3, lr}
 810              	.LCFI25:
 811              		.cfi_def_cfa_offset 8
 812              		.cfi_offset 3, -8
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 24


 813              		.cfi_offset 14, -4
  79:../BLDCMotor/motorctrl.c ****     switch (g_Motor1.state)
 814              		.loc 1 79 5 view .LVU190
  79:../BLDCMotor/motorctrl.c ****     switch (g_Motor1.state)
 815              		.loc 1 79 21 is_stmt 0 view .LVU191
 816 0002 124B     		ldr	r3, .L34
 817 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  79:../BLDCMotor/motorctrl.c ****     switch (g_Motor1.state)
 818              		.loc 1 79 5 view .LVU192
 819 0006 032B     		cmp	r3, #3
 820 0008 17D0     		beq	.L29
 821 000a 042B     		cmp	r3, #4
 822 000c 1AD0     		beq	.L30
 823 000e 03B1     		cbz	r3, .L33
 824              	.L28:
 105:../BLDCMotor/motorctrl.c **** }
 825              		.loc 1 105 1 view .LVU193
 826 0010 08BD     		pop	{r3, pc}
 827              	.L33:
  82:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = _get_angleoffset();
 828              		.loc 1 82 9 is_stmt 1 view .LVU194
  82:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = _get_angleoffset();
 829              		.loc 1 82 29 is_stmt 0 view .LVU195
 830 0012 FFF7FEFF 		bl	_get_angleoffset
 831              	.LVL65:
  82:../BLDCMotor/motorctrl.c ****         sg_MecThetaOffset = _get_angleoffset();
 832              		.loc 1 82 27 view .LVU196
 833 0016 0E4B     		ldr	r3, .L34+4
 834 0018 83ED000A 		vstr.32	s0, [r3]
  83:../BLDCMotor/motorctrl.c ****         foc_paraminit();
 835              		.loc 1 83 9 is_stmt 1 view .LVU197
 836 001c FFF7FEFF 		bl	foc_paraminit
 837              	.LVL66:
  84:../BLDCMotor/motorctrl.c ****         USER_DEBUG_NORMAL("motor init\r\n");
 838              		.loc 1 84 9 view .LVU198
 839 0020 0C49     		ldr	r1, .L34+8
 840 0022 0020     		movs	r0, #0
 841 0024 FFF7FEFF 		bl	SEGGER_RTT_printf
 842              	.LVL67:
  85:../BLDCMotor/motorctrl.c ****         HAL_Delay(20);
 843              		.loc 1 85 9 view .LVU199
 844 0028 1420     		movs	r0, #20
 845 002a FFF7FEFF 		bl	HAL_Delay
 846              	.LVL68:
  86:../BLDCMotor/motorctrl.c ****         motor_enable();
 847              		.loc 1 86 9 view .LVU200
 848 002e FFF7FEFF 		bl	motor_enable
 849              	.LVL69:
  87:../BLDCMotor/motorctrl.c ****         g_Motor1.state = MOTOR_RUNING;           
 850              		.loc 1 87 9 view .LVU201
  87:../BLDCMotor/motorctrl.c ****         g_Motor1.state = MOTOR_RUNING;           
 851              		.loc 1 87 24 is_stmt 0 view .LVU202
 852 0032 064B     		ldr	r3, .L34
 853 0034 0322     		movs	r2, #3
 854 0036 1A70     		strb	r2, [r3]
  88:../BLDCMotor/motorctrl.c ****         break;
 855              		.loc 1 88 9 is_stmt 1 view .LVU203
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 25


 856 0038 EAE7     		b	.L28
 857              	.L29:
  92:../BLDCMotor/motorctrl.c ****             if (!(++g_Motor1.cnt % 15000))
 858              		.loc 1 92 13 view .LVU204
  92:../BLDCMotor/motorctrl.c ****             if (!(++g_Motor1.cnt % 15000))
 859              		.loc 1 92 29 is_stmt 0 view .LVU205
 860 003a 044A     		ldr	r2, .L34
 861 003c 5388     		ldrh	r3, [r2, #2]
  92:../BLDCMotor/motorctrl.c ****             if (!(++g_Motor1.cnt % 15000))
 862              		.loc 1 92 19 view .LVU206
 863 003e 0133     		adds	r3, r3, #1
  92:../BLDCMotor/motorctrl.c ****             if (!(++g_Motor1.cnt % 15000))
 864              		.loc 1 92 16 view .LVU207
 865 0040 5380     		strh	r3, [r2, #2]	@ movhi
  95:../BLDCMotor/motorctrl.c ****             }
 866              		.loc 1 95 13 is_stmt 1 view .LVU208
  97:../BLDCMotor/motorctrl.c ****         break;
 867              		.loc 1 97 9 view .LVU209
 868 0042 E5E7     		b	.L28
 869              	.L30:
 100:../BLDCMotor/motorctrl.c ****         motor_disable();
 870              		.loc 1 100 9 view .LVU210
 871 0044 FFF7FEFF 		bl	motor_disable
 872              	.LVL70:
 101:../BLDCMotor/motorctrl.c ****         break;
 873              		.loc 1 101 9 view .LVU211
 105:../BLDCMotor/motorctrl.c **** }
 874              		.loc 1 105 1 is_stmt 0 view .LVU212
 875 0048 E2E7     		b	.L28
 876              	.L35:
 877 004a 00BF     		.align	2
 878              	.L34:
 879 004c 00000000 		.word	.LANCHOR10
 880 0050 00000000 		.word	.LANCHOR5
 881 0054 00000000 		.word	.LC1
 882              		.cfi_endproc
 883              	.LFE329:
 885              		.global	test_ic
 886              		.global	test_ib
 887              		.global	test_ia
 888              		.global	raw_angle
 889              		.global	next_angle_test
 890              		.global	pre_angle_test
 891              		.global	g_Motor1
 892              		.global	sg_motordebug
 893              		.section	.rodata
 894              		.align	2
 895              		.set	.LANCHOR6,. + 0
 896              	.LC0:
 897 0000 00000000 		.word	0
 898 0004 0000803F 		.word	1065353216
 899 0008 00000000 		.word	0
 900 000c 66660000 		.word	26214
 901              		.section	.bss.g_Motor1,"aw",%nobits
 902              		.align	2
 903              		.set	.LANCHOR10,. + 0
 906              	g_Motor1:
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 26


 907 0000 00000000 		.space	4
 908              		.section	.bss.next_angle_test,"aw",%nobits
 909              		.align	2
 912              	next_angle_test:
 913 0000 00000000 		.space	4
 914              		.section	.bss.pre_angle_test,"aw",%nobits
 915              		.align	2
 918              	pre_angle_test:
 919 0000 00000000 		.space	4
 920              		.section	.bss.raw_angle,"aw",%nobits
 921              		.align	2
 924              	raw_angle:
 925 0000 00000000 		.space	4
 926              		.section	.bss.sg_MecThetaOffset,"aw",%nobits
 927              		.align	2
 928              		.set	.LANCHOR5,. + 0
 931              	sg_MecThetaOffset:
 932 0000 00000000 		.space	4
 933              		.section	.bss.sg_curloop_param,"aw",%nobits
 934              		.align	2
 935              		.set	.LANCHOR8,. + 0
 938              	sg_curloop_param:
 939 0000 00000000 		.space	56
 939      00000000 
 939      00000000 
 939      00000000 
 939      00000000 
 940              		.section	.bss.sg_elefilter,"aw",%nobits
 941              		.align	2
 942              		.set	.LANCHOR4,. + 0
 945              	sg_elefilter:
 946 0000 00000000 		.space	24
 946      00000000 
 946      00000000 
 946      00000000 
 946      00000000 
 947              		.section	.bss.sg_motordebug,"aw",%nobits
 948              		.align	2
 949              		.set	.LANCHOR3,. + 0
 952              	sg_motordebug:
 953 0000 00000000 		.space	92
 953      00000000 
 953      00000000 
 953      00000000 
 953      00000000 
 954              		.section	.bss.sgp_curloop_d_pid,"aw",%nobits
 955              		.align	2
 956              		.set	.LANCHOR7,. + 0
 959              	sgp_curloop_d_pid:
 960 0000 00000000 		.space	4
 961              		.section	.bss.sgp_curloop_q_pid,"aw",%nobits
 962              		.align	2
 963              		.set	.LANCHOR9,. + 0
 966              	sgp_curloop_q_pid:
 967 0000 00000000 		.space	4
 968              		.section	.bss.test_ia,"aw",%nobits
 969              		.align	2
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 27


 970              		.set	.LANCHOR0,. + 0
 973              	test_ia:
 974 0000 00000000 		.space	4
 975              		.section	.bss.test_ib,"aw",%nobits
 976              		.align	2
 977              		.set	.LANCHOR1,. + 0
 980              	test_ib:
 981 0000 00000000 		.space	4
 982              		.section	.bss.test_ic,"aw",%nobits
 983              		.align	2
 984              		.set	.LANCHOR2,. + 0
 987              	test_ic:
 988 0000 00000000 		.space	4
 989              		.text
 990              	.Letext0:
 991              		.file 2 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\machine\\_defa
 992              		.file 3 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\sys\\_stdint.h
 993              		.file 4 "../Common/IQMath/ti/IQmathLib.h"
 994              		.file 5 "../Common/method/filter.h"
 995              		.file 6 "../Common/method/pid.h"
 996              		.file 7 "../BLDCMotor/motorctrl_common.h"
 997              		.file 8 "./Board/board.h"
 998              		.file 9 "../Sensor/sensor.h"
 999              		.file 10 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal.h"
 1000              		.file 11 "Inc/tim.h"
 1001              		.file 12 "Inc/adc.h"
 1002              		.file 13 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\math.h"
 1003              		.file 14 "../Common/debuglog/SEGGER_RTT_V792h/RTT/SEGGER_RTT.h"
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 28


DEFINED SYMBOLS
                            *ABS*:00000000 motorctrl.c
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:20     .text.motor_enable_noirq:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:25     .text.motor_enable_noirq:00000000 motor_enable_noirq
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:46     .text.motor_set_pwm:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:51     .text.motor_set_pwm:00000000 motor_set_pwm
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:80     .text.motor_enable:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:85     .text.motor_enable:00000000 motor_enable
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:111    .text.motor_disable:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:116    .text.motor_disable:00000000 motor_disable
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:139    .text._get_angleoffset:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:144    .text._get_angleoffset:00000000 _get_angleoffset
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:272    .text._get_angleoffset:00000090 $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:278    .text._currmentloop:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:283    .text._currmentloop:00000000 _currmentloop
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:431    .text._currmentloop:00000098 $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:443    .text._50uscycle_process:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:449    .text._50uscycle_process:00000000 _50uscycle_process
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:663    .text._50uscycle_process:00000120 $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:677    .text._limit_voltagecircle:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:683    .text._limit_voltagecircle:00000000 _limit_voltagecircle
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:700    .text.foc_paraminit:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:706    .text.foc_paraminit:00000000 foc_paraminit
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:778    .text.foc_paraminit:0000007c $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:793    .rodata.motortctrl_process.str1.4:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:797    .text.motortctrl_process:00000000 $t
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:803    .text.motortctrl_process:00000000 motortctrl_process
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:879    .text.motortctrl_process:0000004c $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:987    .bss.test_ic:00000000 test_ic
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:980    .bss.test_ib:00000000 test_ib
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:973    .bss.test_ia:00000000 test_ia
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:924    .bss.raw_angle:00000000 raw_angle
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:912    .bss.next_angle_test:00000000 next_angle_test
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:918    .bss.pre_angle_test:00000000 pre_angle_test
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:906    .bss.g_Motor1:00000000 g_Motor1
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:952    .bss.sg_motordebug:00000000 sg_motordebug
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:894    .rodata:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:902    .bss.g_Motor1:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:909    .bss.next_angle_test:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:915    .bss.pre_angle_test:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:921    .bss.raw_angle:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:927    .bss.sg_MecThetaOffset:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:931    .bss.sg_MecThetaOffset:00000000 sg_MecThetaOffset
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:934    .bss.sg_curloop_param:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:938    .bss.sg_curloop_param:00000000 sg_curloop_param
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:941    .bss.sg_elefilter:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:945    .bss.sg_elefilter:00000000 sg_elefilter
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:948    .bss.sg_motordebug:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:955    .bss.sgp_curloop_d_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:959    .bss.sgp_curloop_d_pid:00000000 sgp_curloop_d_pid
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:962    .bss.sgp_curloop_q_pid:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:966    .bss.sgp_curloop_q_pid:00000000 sgp_curloop_q_pid
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:969    .bss.test_ia:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:976    .bss.test_ib:00000000 $d
C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s:983    .bss.test_ic:00000000 $d

UNDEFINED SYMBOLS
ARM GAS  C:\Users\57308\AppData\Local\Temp\ccH7NqVZ.s 			page 29


tim_pwm_enable
tim_set_pwm
tim_tigger_adc
adc_start
tim_pwm_disable
adc_stop
_2r_2s
_svpwm
HAL_Delay
sensor_user_read
_IQ20toF
cosf
_3s_2s
_2s_2r
__aeabi_f2d
__aeabi_dadd
__aeabi_d2f
lowfilter_cale
_normalize_angle
pid_init
lowfilter_init
SEGGER_RTT_printf
