ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"focmethod.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.foc_paraminit,"ax",%progbits
  18              		.align	1
  19              		.global	foc_paraminit
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	foc_paraminit:
  27              	.LFB329:
  28              		.file 1 "../BLDCMotor/focmethod.c"
   1:../BLDCMotor/focmethod.c **** #include "./focmethod.h"
   2:../BLDCMotor/focmethod.c **** #include "debuglog.h"
   3:../BLDCMotor/focmethod.c **** alpbet_t _2r_2s(dq_t i_dq,float theta);
   4:../BLDCMotor/focmethod.c ****  void _2s_2r(alpbet_t i_alphabeta,float theta,dq_t *dq);
   5:../BLDCMotor/focmethod.c ****  void _3s_2s(abc_t i_abc,alpbet_t *alp_bet);
   6:../BLDCMotor/focmethod.c **** static dq_t circle_limit(dq_t dq);
   7:../BLDCMotor/focmethod.c **** 
   8:../BLDCMotor/focmethod.c **** static curloop_t sg_curloop_param;
   9:../BLDCMotor/focmethod.c ****  pid_cb_t *sgp_curloop_d_pid;
  10:../BLDCMotor/focmethod.c ****  pid_cb_t *sgp_curloop_q_pid;
  11:../BLDCMotor/focmethod.c **** void foc_paraminit(void)
  12:../BLDCMotor/focmethod.c **** {
  29              		.loc 1 12 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 10B5     		push	{r4, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 4, -8
  37              		.cfi_offset 14, -4
  38 0002 2DED028B 		vpush.64	{d8}
  39              	.LCFI1:
  40              		.cfi_def_cfa_offset 16
  41              		.cfi_offset 80, -16
  42              		.cfi_offset 81, -12
  13:../BLDCMotor/focmethod.c ****     sgp_curloop_d_pid = &sg_curloop_param.d_pid;
  43              		.loc 1 13 5 view .LVU1
  44              		.loc 1 13 23 is_stmt 0 view .LVU2
  45 0006 1248     		ldr	r0, .L3
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 2


  46 0008 124B     		ldr	r3, .L3+4
  47 000a 1860     		str	r0, [r3]
  14:../BLDCMotor/focmethod.c ****     sgp_curloop_q_pid = &sg_curloop_param.q_pid;
  48              		.loc 1 14 5 is_stmt 1 view .LVU3
  49              		.loc 1 14 23 is_stmt 0 view .LVU4
  50 000c 124C     		ldr	r4, .L3+8
  51 000e 00F11C03 		add	r3, r0, #28
  52 0012 2360     		str	r3, [r4]
  15:../BLDCMotor/focmethod.c ****     pid_init(sgp_curloop_d_pid,3.00f,0.001f,1.0f,D_MAX_VAL,D_MIN_VAL);
  53              		.loc 1 15 5 is_stmt 1 view .LVU5
  54 0014 9FED118A 		vldr.32	s16, .L3+12
  55 0018 9FED112A 		vldr.32	s4, .L3+16
  56 001c DFED111A 		vldr.32	s3, .L3+20
  57 0020 B7EE001A 		vmov.f32	s2, #1.0e+0
  58 0024 F0EE480A 		vmov.f32	s1, s16
  59 0028 B0EE080A 		vmov.f32	s0, #3.0e+0
  60 002c FFF7FEFF 		bl	pid_init
  61              	.LVL0:
  16:../BLDCMotor/focmethod.c ****     pid_init(sgp_curloop_q_pid,0.010f,0.001f,1.0f,4,-4);
  62              		.loc 1 16 5 view .LVU6
  63 0030 B9EE002A 		vmov.f32	s4, #-4.0e+0
  64 0034 F1EE001A 		vmov.f32	s3, #4.0e+0
  65 0038 B7EE001A 		vmov.f32	s2, #1.0e+0
  66 003c F0EE480A 		vmov.f32	s1, s16
  67 0040 9FED090A 		vldr.32	s0, .L3+24
  68 0044 2068     		ldr	r0, [r4]
  69 0046 FFF7FEFF 		bl	pid_init
  70              	.LVL1:
  17:../BLDCMotor/focmethod.c **** }
  71              		.loc 1 17 1 is_stmt 0 view .LVU7
  72 004a BDEC028B 		vldm	sp!, {d8}
  73              	.LCFI2:
  74              		.cfi_restore 80
  75              		.cfi_restore 81
  76              		.cfi_def_cfa_offset 8
  77 004e 10BD     		pop	{r4, pc}
  78              	.L4:
  79              		.align	2
  80              	.L3:
  81 0050 00000000 		.word	.LANCHOR1
  82 0054 00000000 		.word	.LANCHOR0
  83 0058 00000000 		.word	.LANCHOR2
  84 005c 6F12833A 		.word	981668463
  85 0060 333373C1 		.word	-1049414861
  86 0064 33337341 		.word	1098068787
  87 0068 0AD7233C 		.word	1008981770
  88              		.cfi_endproc
  89              	.LFE329:
  91              		.section	.text._svpwm,"ax",%progbits
  92              		.align	1
  93              		.global	_svpwm
  94              		.syntax unified
  95              		.thumb
  96              		.thumb_func
  97              		.fpu fpv4-sp-d16
  99              	_svpwm:
 100              	.LVL2:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 3


 101              	.LFB331:
  18:../BLDCMotor/focmethod.c **** 
  19:../BLDCMotor/focmethod.c **** /*-----------------------------------------
  20:../BLDCMotor/focmethod.c **** */
  21:../BLDCMotor/focmethod.c **** duty_t foc_curloopcale(abc_t i_abc,float theta)
  22:../BLDCMotor/focmethod.c **** {    
  23:../BLDCMotor/focmethod.c ****     dq_t i_dq;
  24:../BLDCMotor/focmethod.c ****     dq_t udq_limt;
  25:../BLDCMotor/focmethod.c ****     alpbet_t i_alphbeta;
  26:../BLDCMotor/focmethod.c ****     float real_id,real_iq;
  27:../BLDCMotor/focmethod.c **** #if 1
  28:../BLDCMotor/focmethod.c ****     // i_abc.a = cosf(theta);
  29:../BLDCMotor/focmethod.c ****     // i_abc.b = cosf(theta - _2PI/3.0f);
  30:../BLDCMotor/focmethod.c ****     // i_abc.c = cosf(theta + _2PI/3.0f);
  31:../BLDCMotor/focmethod.c ****     _3s_2s(i_abc,&i_alphbeta);
  32:../BLDCMotor/focmethod.c ****     _2s_2r(i_alphbeta,_normalize_angle(theta - PI/2.0f),&i_dq);
  33:../BLDCMotor/focmethod.c ****     // udq_limt = circle_limit(i_dq);
  34:../BLDCMotor/focmethod.c ****     // real_id = udq_limt.d;
  35:../BLDCMotor/focmethod.c ****     // real_iq = udq_limt.q;
  36:../BLDCMotor/focmethod.c ****     real_id = i_dq.d;
  37:../BLDCMotor/focmethod.c ****     real_iq = i_dq.q;
  38:../BLDCMotor/focmethod.c ****     /*---------------------------*/
  39:../BLDCMotor/focmethod.c ****     
  40:../BLDCMotor/focmethod.c ****     float target_uq = 8.0f;  
  41:../BLDCMotor/focmethod.c ****     dq_t u_dq;  
  42:../BLDCMotor/focmethod.c ****     u_dq.d = 0.0f;
  43:../BLDCMotor/focmethod.c ****     u_dq.q = 1.0f;
  44:../BLDCMotor/focmethod.c ****     // u_dq.d = pid_contrl(sgp_curloop_d_pid,0.0f,real_id);
  45:../BLDCMotor/focmethod.c ****     // u_dq.q = pid_contrl(sgp_curloop_q_pid,target_uq,real_iq);
  46:../BLDCMotor/focmethod.c ****     /*------------IPC DATA--------------*/
  47:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IA,i_abc.a);
  48:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IB,i_abc.b);
  49:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IC,i_abc.c);
  50:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IALPHA,i_alphbeta.alpha);
  51:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IBETA,i_alphbeta.beta);
  52:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_ID,real_id);
  53:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IQ,real_iq);
  54:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_TEMP0,theta);
  55:../BLDCMotor/focmethod.c **** #else
  56:../BLDCMotor/focmethod.c ****     dq_t u_dq;  
  57:../BLDCMotor/focmethod.c ****     u_dq.d = 0.0f;
  58:../BLDCMotor/focmethod.c ****     u_dq.q = 1.0f;    
  59:../BLDCMotor/focmethod.c **** #endif
  60:../BLDCMotor/focmethod.c **** 
  61:../BLDCMotor/focmethod.c ****     alpbet_t u_alphabeta;
  62:../BLDCMotor/focmethod.c ****     u_alphabeta = _2r_2s(u_dq,(theta));// + PI/2.0f); 
  63:../BLDCMotor/focmethod.c ****     duty_t duty;
  64:../BLDCMotor/focmethod.c ****     duty = _svpwm(u_alphabeta.alpha,u_alphabeta.beta);
  65:../BLDCMotor/focmethod.c ****     return duty;
  66:../BLDCMotor/focmethod.c **** }
  67:../BLDCMotor/focmethod.c **** unsigned char test_sector_f;
  68:../BLDCMotor/focmethod.c **** duty_t _svpwm(float ualpha,float ubeta)
  69:../BLDCMotor/focmethod.c **** {
 102              		.loc 1 69 1 is_stmt 1 view -0
 103              		.cfi_startproc
 104              		@ args = 0, pretend = 0, frame = 40
 105              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 4


 106              		@ link register save eliminated.
 107              		.loc 1 69 1 is_stmt 0 view .LVU9
 108 0000 8AB0     		sub	sp, sp, #40
 109              	.LCFI3:
 110              		.cfi_def_cfa_offset 40
  70:../BLDCMotor/focmethod.c ****     unsigned char sector;    
 111              		.loc 1 70 5 is_stmt 1 view .LVU10
  71:../BLDCMotor/focmethod.c ****     sector = 0;
 112              		.loc 1 71 5 view .LVU11
 113              	.LVL3:
  72:../BLDCMotor/focmethod.c ****     /*-------------------------------*/
  73:../BLDCMotor/focmethod.c ****     if(ubeta > 0.0F) {
 114              		.loc 1 73 5 view .LVU12
 115              		.loc 1 73 7 is_stmt 0 view .LVU13
 116 0002 F5EEC00A 		vcmpe.f32	s1, #0
 117 0006 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 118 000a 2DDD     		ble	.L34
  74:../BLDCMotor/focmethod.c ****         sector = 1;
 119              		.loc 1 74 16 view .LVU14
 120 000c 0123     		movs	r3, #1
 121              	.L6:
 122              	.LVL4:
  75:../BLDCMotor/focmethod.c ****     }
  76:../BLDCMotor/focmethod.c ****     if((sqrt3 * ualpha - ubeta) / 2.0F > 0.0F) {
 123              		.loc 1 76 5 is_stmt 1 view .LVU15
 124              		.loc 1 76 15 is_stmt 0 view .LVU16
 125 000e DFED977A 		vldr.32	s15, .L35
 126 0012 60EE277A 		vmul.f32	s15, s0, s15
 127              		.loc 1 76 24 view .LVU17
 128 0016 77EEE07A 		vsub.f32	s15, s15, s1
 129              		.loc 1 76 33 view .LVU18
 130 001a F6EE006A 		vmov.f32	s13, #5.0e-1
 131 001e 67EEA67A 		vmul.f32	s15, s15, s13
 132              		.loc 1 76 7 view .LVU19
 133 0022 F5EEC07A 		vcmpe.f32	s15, #0
 134 0026 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 135 002a 01DD     		ble	.L7
  77:../BLDCMotor/focmethod.c ****         sector += 2;
 136              		.loc 1 77 9 is_stmt 1 view .LVU20
 137              		.loc 1 77 16 is_stmt 0 view .LVU21
 138 002c 0233     		adds	r3, r3, #2
 139              	.LVL5:
 140              		.loc 1 77 16 view .LVU22
 141 002e DBB2     		uxtb	r3, r3
 142              	.LVL6:
 143              	.L7:
  78:../BLDCMotor/focmethod.c ****     }
  79:../BLDCMotor/focmethod.c ****     if((-sqrt3 * ualpha - ubeta) / 2.0F > 0.0F) {
 144              		.loc 1 79 5 is_stmt 1 view .LVU23
 145              		.loc 1 79 16 is_stmt 0 view .LVU24
 146 0030 DFED8F7A 		vldr.32	s15, .L35+4
 147 0034 60EE277A 		vmul.f32	s15, s0, s15
 148              		.loc 1 79 25 view .LVU25
 149 0038 77EEE07A 		vsub.f32	s15, s15, s1
 150              		.loc 1 79 34 view .LVU26
 151 003c F6EE006A 		vmov.f32	s13, #5.0e-1
 152 0040 67EEA67A 		vmul.f32	s15, s15, s13
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 5


 153              		.loc 1 79 7 view .LVU27
 154 0044 F5EEC07A 		vcmpe.f32	s15, #0
 155 0048 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 156 004c 01DD     		ble	.L9
  80:../BLDCMotor/focmethod.c ****         sector += 4;
 157              		.loc 1 80 9 is_stmt 1 view .LVU28
 158              		.loc 1 80 16 is_stmt 0 view .LVU29
 159 004e 0433     		adds	r3, r3, #4
 160              	.LVL7:
 161              		.loc 1 80 16 view .LVU30
 162 0050 DBB2     		uxtb	r3, r3
 163              	.LVL8:
 164              	.L9:
  81:../BLDCMotor/focmethod.c ****     }
  82:../BLDCMotor/focmethod.c ****     test_sector_f = sector;
 165              		.loc 1 82 5 is_stmt 1 view .LVU31
 166              		.loc 1 82 19 is_stmt 0 view .LVU32
 167 0052 884A     		ldr	r2, .L35+8
 168 0054 1370     		strb	r3, [r2]
  83:../BLDCMotor/focmethod.c ****     /*----------------------------------------------------*/
  84:../BLDCMotor/focmethod.c ****     float s_vector = 0.0f,m_vector = 0.0f;
 169              		.loc 1 84 5 is_stmt 1 view .LVU33
 170              	.LVL9:
  85:../BLDCMotor/focmethod.c ****     switch (sector) {
 171              		.loc 1 85 5 view .LVU34
 172 0056 5A1E     		subs	r2, r3, #1
 173 0058 042A     		cmp	r2, #4
 174 005a 00F29C80 		bhi	.L11
 175 005e DFE802F0 		tbb	[pc, r2]
 176              	.L13:
 177 0062 05       		.byte	(.L17-.L13)/2
 178 0063 46       		.byte	(.L16-.L13)/2
 179 0064 5B       		.byte	(.L15-.L13)/2
 180 0065 70       		.byte	(.L14-.L13)/2
 181 0066 85       		.byte	(.L12-.L13)/2
 182              	.LVL10:
 183 0067 00       		.p2align 1
 184              	.L34:
  71:../BLDCMotor/focmethod.c ****     /*-------------------------------*/
 185              		.loc 1 71 12 is_stmt 0 view .LVU35
 186 0068 0023     		movs	r3, #0
 187 006a D0E7     		b	.L6
 188              	.LVL11:
 189              	.L17:
  86:../BLDCMotor/focmethod.c ****         case 1:
  87:../BLDCMotor/focmethod.c ****             m_vector = (-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC;
 190              		.loc 1 87 13 is_stmt 1 view .LVU36
 191              		.loc 1 87 31 is_stmt 0 view .LVU37
 192 006c FFEE087A 		vmov.f32	s15, #-1.5e+0
 193 0070 60EE277A 		vmul.f32	s15, s0, s15
 194              		.loc 1 87 53 view .LVU38
 195 0074 DFED806A 		vldr.32	s13, .L35+12
 196 0078 60EEA60A 		vmul.f32	s1, s1, s13
 197              	.LVL12:
 198              		.loc 1 87 40 view .LVU39
 199 007c 77EEA07A 		vadd.f32	s15, s15, s1
 200              		.loc 1 87 22 view .LVU40
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 6


 201 0080 DFED7E6A 		vldr.32	s13, .L35+16
 202 0084 67EEA67A 		vmul.f32	s15, s15, s13
 203              	.LVL13:
  88:../BLDCMotor/focmethod.c ****             s_vector = (1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC;
 204              		.loc 1 88 13 is_stmt 1 view .LVU41
 205              		.loc 1 88 30 is_stmt 0 view .LVU42
 206 0088 B7EE087A 		vmov.f32	s14, #1.5e+0
 207 008c 20EE077A 		vmul.f32	s14, s0, s14
 208              		.loc 1 88 39 view .LVU43
 209 0090 30EE877A 		vadd.f32	s14, s1, s14
 210              		.loc 1 88 22 view .LVU44
 211 0094 27EE267A 		vmul.f32	s14, s14, s13
 212              	.LVL14:
  89:../BLDCMotor/focmethod.c ****         break;
 213              		.loc 1 89 9 is_stmt 1 view .LVU45
 214              	.L18:
  90:../BLDCMotor/focmethod.c **** 
  91:../BLDCMotor/focmethod.c ****         case 2:
  92:../BLDCMotor/focmethod.c ****             m_vector = (1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC;
  93:../BLDCMotor/focmethod.c ****             s_vector = -(sqrt3 * ubeta * T_UDC);
  94:../BLDCMotor/focmethod.c ****         break;
  95:../BLDCMotor/focmethod.c **** 
  96:../BLDCMotor/focmethod.c ****         case 3:
  97:../BLDCMotor/focmethod.c ****             m_vector = -((-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
  98:../BLDCMotor/focmethod.c ****             s_vector = sqrt3 * ubeta * T_UDC;
  99:../BLDCMotor/focmethod.c ****         break;
 100:../BLDCMotor/focmethod.c **** 
 101:../BLDCMotor/focmethod.c ****         case 4:
 102:../BLDCMotor/focmethod.c ****             m_vector = -(sqrt3 * ubeta * T_UDC);
 103:../BLDCMotor/focmethod.c ****             s_vector = (-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC;
 104:../BLDCMotor/focmethod.c ****         break;
 105:../BLDCMotor/focmethod.c **** 
 106:../BLDCMotor/focmethod.c ****         case 5:
 107:../BLDCMotor/focmethod.c ****             m_vector = sqrt3 * ubeta * T_UDC;
 108:../BLDCMotor/focmethod.c ****             s_vector = -((1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 109:../BLDCMotor/focmethod.c ****         break;
 110:../BLDCMotor/focmethod.c **** 
 111:../BLDCMotor/focmethod.c ****         default:
 112:../BLDCMotor/focmethod.c ****             m_vector = -((1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 113:../BLDCMotor/focmethod.c ****             s_vector = -((-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 114:../BLDCMotor/focmethod.c ****         break;
 115:../BLDCMotor/focmethod.c ****     }
 116:../BLDCMotor/focmethod.c **** 
 117:../BLDCMotor/focmethod.c ****     /*------------------------------------------------------------*/
 118:../BLDCMotor/focmethod.c ****     if (m_vector + s_vector > T_PWM) 
 215              		.loc 1 118 5 view .LVU46
 216              		.loc 1 118 18 is_stmt 0 view .LVU47
 217 0098 77EE276A 		vadd.f32	s13, s14, s15
 218              		.loc 1 118 8 view .LVU48
 219 009c 9FED786A 		vldr.32	s12, .L35+20
 220 00a0 F4EEC66A 		vcmpe.f32	s13, s12
 221 00a4 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 222 00a8 05DD     		ble	.L19
 119:../BLDCMotor/focmethod.c ****     {
 120:../BLDCMotor/focmethod.c ****         m_vector /= (m_vector + s_vector);
 223              		.loc 1 120 9 is_stmt 1 view .LVU49
 224              		.loc 1 120 18 is_stmt 0 view .LVU50
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 7


 225 00aa C7EEA67A 		vdiv.f32	s15, s15, s13
 226              	.LVL15:
 121:../BLDCMotor/focmethod.c ****         s_vector /= m_vector + s_vector;
 227              		.loc 1 121 9 is_stmt 1 view .LVU51
 228              		.loc 1 121 30 is_stmt 0 view .LVU52
 229 00ae 77EE276A 		vadd.f32	s13, s14, s15
 230              		.loc 1 121 18 view .LVU53
 231 00b2 87EE267A 		vdiv.f32	s14, s14, s13
 232              	.LVL16:
 233              	.L19:
 122:../BLDCMotor/focmethod.c ****     }
 123:../BLDCMotor/focmethod.c **** 
 124:../BLDCMotor/focmethod.c ****     /*---------------------------------------------------*/
 125:../BLDCMotor/focmethod.c ****     float Ta,Tb,Tc;
 234              		.loc 1 125 5 is_stmt 1 view .LVU54
 126:../BLDCMotor/focmethod.c ****     Ta = (T_PWM - (m_vector + s_vector)) / 4.0F;  
 235              		.loc 1 126 5 view .LVU55
 236              		.loc 1 126 29 is_stmt 0 view .LVU56
 237 00b6 37EE276A 		vadd.f32	s12, s14, s15
 238              		.loc 1 126 17 view .LVU57
 239 00ba DFED716A 		vldr.32	s13, .L35+20
 240 00be 76EEC66A 		vsub.f32	s13, s13, s12
 241              		.loc 1 126 8 view .LVU58
 242 00c2 B5EE006A 		vmov.f32	s12, #2.5e-1
 243 00c6 66EE866A 		vmul.f32	s13, s13, s12
 244              	.LVL17:
 127:../BLDCMotor/focmethod.c ****     Tb = Ta + m_vector/2.0f;
 245              		.loc 1 127 5 is_stmt 1 view .LVU59
 246              		.loc 1 127 23 is_stmt 0 view .LVU60
 247 00ca B6EE006A 		vmov.f32	s12, #5.0e-1
 248 00ce 67EE867A 		vmul.f32	s15, s15, s12
 249              	.LVL18:
 250              		.loc 1 127 8 view .LVU61
 251 00d2 77EEA67A 		vadd.f32	s15, s15, s13
 252              	.LVL19:
 128:../BLDCMotor/focmethod.c ****     Tc = Tb + s_vector/2.0f;
 253              		.loc 1 128 5 is_stmt 1 view .LVU62
 254              		.loc 1 128 23 is_stmt 0 view .LVU63
 255 00d6 27EE067A 		vmul.f32	s14, s14, s12
 256              	.LVL20:
 257              		.loc 1 128 8 view .LVU64
 258 00da 37EE277A 		vadd.f32	s14, s14, s15
 259              	.LVL21:
 129:../BLDCMotor/focmethod.c **** 
 130:../BLDCMotor/focmethod.c ****     /*------------------------换相点-------------------------------------*/
 131:../BLDCMotor/focmethod.c ****     float Tcmp1 = 0.0f;
 260              		.loc 1 131 5 is_stmt 1 view .LVU65
 132:../BLDCMotor/focmethod.c ****     float Tcmp2 = 0.0f;
 261              		.loc 1 132 5 view .LVU66
 133:../BLDCMotor/focmethod.c ****     float Tcmp3 = 0.0f;
 262              		.loc 1 133 5 view .LVU67
 134:../BLDCMotor/focmethod.c ****     switch (sector) {
 263              		.loc 1 134 5 view .LVU68
 264 00de 013B     		subs	r3, r3, #1
 265              	.LVL22:
 266              		.loc 1 134 5 is_stmt 0 view .LVU69
 267 00e0 052B     		cmp	r3, #5
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 8


 268 00e2 6DD8     		bhi	.L21
 269 00e4 DFE803F0 		tbb	[pc, r3]
 270              	.L23:
 271 00e8 7B       		.byte	(.L28-.L23)/2
 272 00e9 73       		.byte	(.L27-.L23)/2
 273 00ea A3       		.byte	(.L26-.L23)/2
 274 00eb AA       		.byte	(.L25-.L23)/2
 275 00ec B3       		.byte	(.L24-.L23)/2
 276 00ed BA       		.byte	(.L22-.L23)/2
 277              	.LVL23:
 278              		.p2align 1
 279              	.L16:
  92:../BLDCMotor/focmethod.c ****             s_vector = -(sqrt3 * ubeta * T_UDC);
 280              		.loc 1 92 13 is_stmt 1 view .LVU70
  92:../BLDCMotor/focmethod.c ****             s_vector = -(sqrt3 * ubeta * T_UDC);
 281              		.loc 1 92 30 is_stmt 0 view .LVU71
 282 00ee F7EE087A 		vmov.f32	s15, #1.5e+0
 283 00f2 20EE270A 		vmul.f32	s0, s0, s15
 284              	.LVL24:
  92:../BLDCMotor/focmethod.c ****             s_vector = -(sqrt3 * ubeta * T_UDC);
 285              		.loc 1 92 52 view .LVU72
 286 00f6 DFED607A 		vldr.32	s15, .L35+12
 287 00fa 60EEA77A 		vmul.f32	s15, s1, s15
  92:../BLDCMotor/focmethod.c ****             s_vector = -(sqrt3 * ubeta * T_UDC);
 288              		.loc 1 92 39 view .LVU73
 289 00fe 70EE277A 		vadd.f32	s15, s0, s15
  92:../BLDCMotor/focmethod.c ****             s_vector = -(sqrt3 * ubeta * T_UDC);
 290              		.loc 1 92 22 view .LVU74
 291 0102 9FED5E7A 		vldr.32	s14, .L35+16
 292 0106 67EE877A 		vmul.f32	s15, s15, s14
 293              	.LVL25:
  93:../BLDCMotor/focmethod.c ****         break;
 294              		.loc 1 93 13 is_stmt 1 view .LVU75
  93:../BLDCMotor/focmethod.c ****         break;
 295              		.loc 1 93 32 is_stmt 0 view .LVU76
 296 010a DFED586A 		vldr.32	s13, .L35
 297 010e 60EEA60A 		vmul.f32	s1, s1, s13
 298              	.LVL26:
  93:../BLDCMotor/focmethod.c ****         break;
 299              		.loc 1 93 22 view .LVU77
 300 0112 27EE607A 		vnmul.f32	s14, s14, s1
 301              	.LVL27:
  94:../BLDCMotor/focmethod.c **** 
 302              		.loc 1 94 9 is_stmt 1 view .LVU78
 303 0116 BFE7     		b	.L18
 304              	.LVL28:
 305              	.L15:
  97:../BLDCMotor/focmethod.c ****             s_vector = sqrt3 * ubeta * T_UDC;
 306              		.loc 1 97 13 view .LVU79
  97:../BLDCMotor/focmethod.c ****             s_vector = sqrt3 * ubeta * T_UDC;
 307              		.loc 1 97 33 is_stmt 0 view .LVU80
 308 0118 FFEE087A 		vmov.f32	s15, #-1.5e+0
 309 011c 20EE270A 		vmul.f32	s0, s0, s15
 310              	.LVL29:
  97:../BLDCMotor/focmethod.c ****             s_vector = sqrt3 * ubeta * T_UDC;
 311              		.loc 1 97 55 view .LVU81
 312 0120 DFED557A 		vldr.32	s15, .L35+12
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 9


 313 0124 60EEA77A 		vmul.f32	s15, s1, s15
  97:../BLDCMotor/focmethod.c ****             s_vector = sqrt3 * ubeta * T_UDC;
 314              		.loc 1 97 42 view .LVU82
 315 0128 70EE277A 		vadd.f32	s15, s0, s15
  97:../BLDCMotor/focmethod.c ****             s_vector = sqrt3 * ubeta * T_UDC;
 316              		.loc 1 97 66 view .LVU83
 317 012c 9FED536A 		vldr.32	s12, .L35+16
  97:../BLDCMotor/focmethod.c ****             s_vector = sqrt3 * ubeta * T_UDC;
 318              		.loc 1 97 22 view .LVU84
 319 0130 66EE677A 		vnmul.f32	s15, s12, s15
 320              	.LVL30:
  98:../BLDCMotor/focmethod.c ****         break;
 321              		.loc 1 98 13 is_stmt 1 view .LVU85
  98:../BLDCMotor/focmethod.c ****         break;
 322              		.loc 1 98 30 is_stmt 0 view .LVU86
 323 0134 DFED4D6A 		vldr.32	s13, .L35
 324 0138 20EEA67A 		vmul.f32	s14, s1, s13
  98:../BLDCMotor/focmethod.c ****         break;
 325              		.loc 1 98 22 view .LVU87
 326 013c 27EE067A 		vmul.f32	s14, s14, s12
 327              	.LVL31:
  99:../BLDCMotor/focmethod.c **** 
 328              		.loc 1 99 9 is_stmt 1 view .LVU88
 329 0140 AAE7     		b	.L18
 330              	.LVL32:
 331              	.L14:
 102:../BLDCMotor/focmethod.c ****             s_vector = (-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC;
 332              		.loc 1 102 13 view .LVU89
 102:../BLDCMotor/focmethod.c ****             s_vector = (-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC;
 333              		.loc 1 102 32 is_stmt 0 view .LVU90
 334 0142 DFED4A7A 		vldr.32	s15, .L35
 335 0146 60EEA77A 		vmul.f32	s15, s1, s15
 102:../BLDCMotor/focmethod.c ****             s_vector = (-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC;
 336              		.loc 1 102 42 view .LVU91
 337 014a 9FED4C6A 		vldr.32	s12, .L35+16
 102:../BLDCMotor/focmethod.c ****             s_vector = (-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC;
 338              		.loc 1 102 22 view .LVU92
 339 014e 66EE677A 		vnmul.f32	s15, s12, s15
 340              	.LVL33:
 103:../BLDCMotor/focmethod.c ****         break;
 341              		.loc 1 103 13 is_stmt 1 view .LVU93
 103:../BLDCMotor/focmethod.c ****         break;
 342              		.loc 1 103 31 is_stmt 0 view .LVU94
 343 0152 FFEE086A 		vmov.f32	s13, #-1.5e+0
 344 0156 20EE267A 		vmul.f32	s14, s0, s13
 103:../BLDCMotor/focmethod.c ****         break;
 345              		.loc 1 103 53 view .LVU95
 346 015a DFED476A 		vldr.32	s13, .L35+12
 347 015e 60EEA60A 		vmul.f32	s1, s1, s13
 348              	.LVL34:
 103:../BLDCMotor/focmethod.c ****         break;
 349              		.loc 1 103 40 view .LVU96
 350 0162 37EE207A 		vadd.f32	s14, s14, s1
 103:../BLDCMotor/focmethod.c ****         break;
 351              		.loc 1 103 22 view .LVU97
 352 0166 27EE067A 		vmul.f32	s14, s14, s12
 353              	.LVL35:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 10


 104:../BLDCMotor/focmethod.c **** 
 354              		.loc 1 104 9 is_stmt 1 view .LVU98
 355 016a 95E7     		b	.L18
 356              	.LVL36:
 357              	.L12:
 107:../BLDCMotor/focmethod.c ****             s_vector = -((1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 358              		.loc 1 107 13 view .LVU99
 107:../BLDCMotor/focmethod.c ****             s_vector = -((1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 359              		.loc 1 107 30 is_stmt 0 view .LVU100
 360 016c DFED3F7A 		vldr.32	s15, .L35
 361 0170 60EEA77A 		vmul.f32	s15, s1, s15
 107:../BLDCMotor/focmethod.c ****             s_vector = -((1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 362              		.loc 1 107 22 view .LVU101
 363 0174 DFED416A 		vldr.32	s13, .L35+16
 364 0178 67EEA67A 		vmul.f32	s15, s15, s13
 365              	.LVL37:
 108:../BLDCMotor/focmethod.c ****         break;
 366              		.loc 1 108 13 is_stmt 1 view .LVU102
 108:../BLDCMotor/focmethod.c ****         break;
 367              		.loc 1 108 32 is_stmt 0 view .LVU103
 368 017c B7EE086A 		vmov.f32	s12, #1.5e+0
 369 0180 20EE060A 		vmul.f32	s0, s0, s12
 370              	.LVL38:
 108:../BLDCMotor/focmethod.c ****         break;
 371              		.loc 1 108 54 view .LVU104
 372 0184 9FED3C6A 		vldr.32	s12, .L35+12
 373 0188 20EE867A 		vmul.f32	s14, s1, s12
 108:../BLDCMotor/focmethod.c ****         break;
 374              		.loc 1 108 41 view .LVU105
 375 018c 30EE077A 		vadd.f32	s14, s0, s14
 108:../BLDCMotor/focmethod.c ****         break;
 376              		.loc 1 108 22 view .LVU106
 377 0190 26EEC77A 		vnmul.f32	s14, s13, s14
 378              	.LVL39:
 109:../BLDCMotor/focmethod.c **** 
 379              		.loc 1 109 9 is_stmt 1 view .LVU107
 380 0194 80E7     		b	.L18
 381              	.LVL40:
 382              	.L11:
 112:../BLDCMotor/focmethod.c ****             s_vector = -((-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 383              		.loc 1 112 13 view .LVU108
 112:../BLDCMotor/focmethod.c ****             s_vector = -((-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 384              		.loc 1 112 54 is_stmt 0 view .LVU109
 385 0196 9FED387A 		vldr.32	s14, .L35+12
 386 019a 20EE877A 		vmul.f32	s14, s1, s14
 112:../BLDCMotor/focmethod.c ****             s_vector = -((-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 387              		.loc 1 112 41 view .LVU110
 388 019e F7EE086A 		vmov.f32	s13, #1.5e+0
 389 01a2 F0EE477A 		vmov.f32	s15, s14
 390 01a6 40EE267A 		vmla.f32	s15, s0, s13
 112:../BLDCMotor/focmethod.c ****             s_vector = -((-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 391              		.loc 1 112 65 view .LVU111
 392 01aa DFED346A 		vldr.32	s13, .L35+16
 112:../BLDCMotor/focmethod.c ****             s_vector = -((-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 393              		.loc 1 112 22 view .LVU112
 394 01ae 66EEE77A 		vnmul.f32	s15, s13, s15
 395              	.LVL41:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 11


 113:../BLDCMotor/focmethod.c ****         break;
 396              		.loc 1 113 13 is_stmt 1 view .LVU113
 113:../BLDCMotor/focmethod.c ****         break;
 397              		.loc 1 113 42 is_stmt 0 view .LVU114
 398 01b2 BFEE086A 		vmov.f32	s12, #-1.5e+0
 399 01b6 00EE067A 		vmla.f32	s14, s0, s12
 113:../BLDCMotor/focmethod.c ****         break;
 400              		.loc 1 113 22 view .LVU115
 401 01ba 26EEC77A 		vnmul.f32	s14, s13, s14
 402              	.LVL42:
 114:../BLDCMotor/focmethod.c ****     }
 403              		.loc 1 114 9 is_stmt 1 view .LVU116
 404 01be 6BE7     		b	.L18
 405              	.LVL43:
 406              	.L21:
 128:../BLDCMotor/focmethod.c **** 
 407              		.loc 1 128 8 is_stmt 0 view .LVU117
 408 01c0 9FED307A 		vldr.32	s14, .L35+24
 409              	.LVL44:
 128:../BLDCMotor/focmethod.c **** 
 410              		.loc 1 128 8 view .LVU118
 411 01c4 F0EE476A 		vmov.f32	s13, s14
 412              	.LVL45:
 128:../BLDCMotor/focmethod.c **** 
 413              		.loc 1 128 8 view .LVU119
 414 01c8 F0EE477A 		vmov.f32	s15, s14
 415              	.LVL46:
 128:../BLDCMotor/focmethod.c **** 
 416              		.loc 1 128 8 view .LVU120
 417 01cc 07E0     		b	.L28
 418              	.LVL47:
 419              	.L27:
 135:../BLDCMotor/focmethod.c ****         case 1:Tcmp1 = Tb;Tcmp2 = Ta;Tcmp3 = Tc;break;
 136:../BLDCMotor/focmethod.c ****         case 2:Tcmp1 = Ta;Tcmp2 = Tc;Tcmp3 = Tb;break;
 420              		.loc 1 136 16 is_stmt 1 view .LVU121
 421              		.loc 1 136 27 view .LVU122
 422              		.loc 1 136 38 view .LVU123
 423              		.loc 1 136 49 view .LVU124
 424              		.loc 1 136 9 is_stmt 0 view .LVU125
 425 01ce 17EE903A 		vmov	r3, s15
 426              		.loc 1 136 22 view .LVU126
 427 01d2 F0EE667A 		vmov.f32	s15, s13
 428              	.LVL48:
 429              		.loc 1 136 33 view .LVU127
 430 01d6 F0EE476A 		vmov.f32	s13, s14
 431              	.LVL49:
 432              		.loc 1 136 44 view .LVU128
 433 01da 07EE103A 		vmov	s14, r3
 434              	.LVL50:
 435              	.L28:
 137:../BLDCMotor/focmethod.c ****         case 3:Tcmp1 = Ta;Tcmp2 = Tb;Tcmp3 = Tc;break;
 138:../BLDCMotor/focmethod.c ****         case 4:Tcmp1 = Tc;Tcmp2 = Tb;Tcmp3 = Ta;break;
 139:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 140:../BLDCMotor/focmethod.c ****         case 6:Tcmp1 = Tb;Tcmp2 = Tc;Tcmp3 = Ta;break;
 141:../BLDCMotor/focmethod.c ****     }
 142:../BLDCMotor/focmethod.c ****     /*-------------------------占空比---------------------------*/
 143:../BLDCMotor/focmethod.c ****     float duty_a,duty_b,duty_c;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 12


 436              		.loc 1 143 5 is_stmt 1 view .LVU129
 144:../BLDCMotor/focmethod.c ****     duty_a =(T_PWM - Tcmp1*2.0f )/T_PWM;
 437              		.loc 1 144 5 view .LVU130
 438              		.loc 1 144 27 is_stmt 0 view .LVU131
 439 01de 77EEA77A 		vadd.f32	s15, s15, s15
 440              	.LVL51:
 441              		.loc 1 144 20 view .LVU132
 442 01e2 9FED276A 		vldr.32	s12, .L35+20
 443              		.loc 1 144 20 view .LVU133
 444 01e6 76EE677A 		vsub.f32	s15, s12, s15
 445              		.loc 1 144 12 view .LVU134
 446 01ea 87EE865A 		vdiv.f32	s10, s15, s12
 447              	.LVL52:
 145:../BLDCMotor/focmethod.c ****     duty_b =(T_PWM - Tcmp2*2.0f )/T_PWM;
 448              		.loc 1 145 5 is_stmt 1 view .LVU135
 449              		.loc 1 145 27 is_stmt 0 view .LVU136
 450 01ee 76EEA66A 		vadd.f32	s13, s13, s13
 451              	.LVL53:
 452              		.loc 1 145 20 view .LVU137
 453 01f2 76EE666A 		vsub.f32	s13, s12, s13
 454              		.loc 1 145 12 view .LVU138
 455 01f6 C6EE865A 		vdiv.f32	s11, s13, s12
 456              	.LVL54:
 146:../BLDCMotor/focmethod.c ****     duty_c =(T_PWM - Tcmp3*2.0f )/T_PWM;
 457              		.loc 1 146 5 is_stmt 1 view .LVU139
 458              		.loc 1 146 27 is_stmt 0 view .LVU140
 459 01fa 37EE077A 		vadd.f32	s14, s14, s14
 460              	.LVL55:
 461              		.loc 1 146 20 view .LVU141
 462 01fe 36EE477A 		vsub.f32	s14, s12, s14
 463              		.loc 1 146 12 view .LVU142
 464 0202 C7EE067A 		vdiv.f32	s15, s14, s12
 465              	.LVL56:
 147:../BLDCMotor/focmethod.c **** 
 148:../BLDCMotor/focmethod.c ****     duty_t sg_duty;
 466              		.loc 1 148 5 is_stmt 1 view .LVU143
 149:../BLDCMotor/focmethod.c ****     sg_duty._a = duty_a;
 467              		.loc 1 149 5 view .LVU144
 468              		.loc 1 149 16 is_stmt 0 view .LVU145
 469 0206 8DED045A 		vstr.32	s10, [sp, #16]
 150:../BLDCMotor/focmethod.c ****     sg_duty._b = duty_b;
 470              		.loc 1 150 5 is_stmt 1 view .LVU146
 471              		.loc 1 150 16 is_stmt 0 view .LVU147
 472 020a CDED055A 		vstr.32	s11, [sp, #20]
 151:../BLDCMotor/focmethod.c ****     sg_duty._c = duty_c;
 473              		.loc 1 151 5 is_stmt 1 view .LVU148
 474              		.loc 1 151 16 is_stmt 0 view .LVU149
 475 020e CDED067A 		vstr.32	s15, [sp, #24]
 152:../BLDCMotor/focmethod.c **** 
 153:../BLDCMotor/focmethod.c ****     return sg_duty;
 476              		.loc 1 153 5 is_stmt 1 view .LVU150
 477              		.loc 1 153 12 is_stmt 0 view .LVU151
 478 0212 04AB     		add	r3, sp, #16
 479 0214 93E80700 		ldm	r3, {r0, r1, r2}
 480 0218 0AAB     		add	r3, sp, #40
 481 021a 03E90700 		stmdb	r3, {r0, r1, r2}
 154:../BLDCMotor/focmethod.c **** }
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 13


 482              		.loc 1 154 1 view .LVU152
 483 021e 9DED070A 		vldr.32	s0, [sp, #28]
 484 0222 DDED080A 		vldr.32	s1, [sp, #32]
 485 0226 9DED091A 		vldr.32	s2, [sp, #36]
 486 022a 0AB0     		add	sp, sp, #40
 487              	.LCFI4:
 488              		.cfi_remember_state
 489              		.cfi_def_cfa_offset 0
 490              		@ sp needed
 491 022c 7047     		bx	lr
 492              	.LVL57:
 493              	.L26:
 494              	.LCFI5:
 495              		.cfi_restore_state
 137:../BLDCMotor/focmethod.c ****         case 4:Tcmp1 = Tc;Tcmp2 = Tb;Tcmp3 = Ta;break;
 496              		.loc 1 137 16 is_stmt 1 view .LVU153
 137:../BLDCMotor/focmethod.c ****         case 4:Tcmp1 = Tc;Tcmp2 = Tb;Tcmp3 = Ta;break;
 497              		.loc 1 137 27 view .LVU154
 137:../BLDCMotor/focmethod.c ****         case 4:Tcmp1 = Tc;Tcmp2 = Tb;Tcmp3 = Ta;break;
 498              		.loc 1 137 38 view .LVU155
 137:../BLDCMotor/focmethod.c ****         case 4:Tcmp1 = Tc;Tcmp2 = Tb;Tcmp3 = Ta;break;
 499              		.loc 1 137 49 view .LVU156
 137:../BLDCMotor/focmethod.c ****         case 4:Tcmp1 = Tc;Tcmp2 = Tb;Tcmp3 = Ta;break;
 500              		.loc 1 137 9 is_stmt 0 view .LVU157
 501 022e 17EE903A 		vmov	r3, s15
 137:../BLDCMotor/focmethod.c ****         case 4:Tcmp1 = Tc;Tcmp2 = Tb;Tcmp3 = Ta;break;
 502              		.loc 1 137 22 view .LVU158
 503 0232 F0EE667A 		vmov.f32	s15, s13
 504              	.LVL58:
 137:../BLDCMotor/focmethod.c ****         case 4:Tcmp1 = Tc;Tcmp2 = Tb;Tcmp3 = Ta;break;
 505              		.loc 1 137 33 view .LVU159
 506 0236 06EE903A 		vmov	s13, r3
 507              	.LVL59:
 137:../BLDCMotor/focmethod.c ****         case 4:Tcmp1 = Tc;Tcmp2 = Tb;Tcmp3 = Ta;break;
 508              		.loc 1 137 9 view .LVU160
 509 023a D0E7     		b	.L28
 510              	.LVL60:
 511              	.L25:
 138:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 512              		.loc 1 138 16 is_stmt 1 view .LVU161
 138:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 513              		.loc 1 138 27 view .LVU162
 138:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 514              		.loc 1 138 38 view .LVU163
 138:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 515              		.loc 1 138 49 view .LVU164
 138:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 516              		.loc 1 138 9 is_stmt 0 view .LVU165
 517 023c 17EE903A 		vmov	r3, s15
 138:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 518              		.loc 1 138 22 view .LVU166
 519 0240 F0EE477A 		vmov.f32	s15, s14
 520              	.LVL61:
 138:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 521              		.loc 1 138 44 view .LVU167
 522 0244 B0EE667A 		vmov.f32	s14, s13
 523              	.LVL62:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 14


 138:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 524              		.loc 1 138 33 view .LVU168
 525 0248 06EE903A 		vmov	s13, r3
 526              	.LVL63:
 138:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 527              		.loc 1 138 9 view .LVU169
 528 024c C7E7     		b	.L28
 529              	.LVL64:
 530              	.L24:
 139:../BLDCMotor/focmethod.c ****         case 6:Tcmp1 = Tb;Tcmp2 = Tc;Tcmp3 = Ta;break;
 531              		.loc 1 139 16 is_stmt 1 view .LVU170
 139:../BLDCMotor/focmethod.c ****         case 6:Tcmp1 = Tb;Tcmp2 = Tc;Tcmp3 = Ta;break;
 532              		.loc 1 139 27 view .LVU171
 139:../BLDCMotor/focmethod.c ****         case 6:Tcmp1 = Tb;Tcmp2 = Tc;Tcmp3 = Ta;break;
 533              		.loc 1 139 38 view .LVU172
 139:../BLDCMotor/focmethod.c ****         case 6:Tcmp1 = Tb;Tcmp2 = Tc;Tcmp3 = Ta;break;
 534              		.loc 1 139 49 view .LVU173
 139:../BLDCMotor/focmethod.c ****         case 6:Tcmp1 = Tb;Tcmp2 = Tc;Tcmp3 = Ta;break;
 535              		.loc 1 139 9 is_stmt 0 view .LVU174
 536 024e 17EE903A 		vmov	r3, s15
 139:../BLDCMotor/focmethod.c ****         case 6:Tcmp1 = Tb;Tcmp2 = Tc;Tcmp3 = Ta;break;
 537              		.loc 1 139 22 view .LVU175
 538 0252 F0EE477A 		vmov.f32	s15, s14
 539              	.LVL65:
 139:../BLDCMotor/focmethod.c ****         case 6:Tcmp1 = Tb;Tcmp2 = Tc;Tcmp3 = Ta;break;
 540              		.loc 1 139 44 view .LVU176
 541 0256 07EE103A 		vmov	s14, r3
 542              	.LVL66:
 139:../BLDCMotor/focmethod.c ****         case 6:Tcmp1 = Tb;Tcmp2 = Tc;Tcmp3 = Ta;break;
 543              		.loc 1 139 9 view .LVU177
 544 025a C0E7     		b	.L28
 545              	.LVL67:
 546              	.L22:
 140:../BLDCMotor/focmethod.c ****     }
 547              		.loc 1 140 16 is_stmt 1 view .LVU178
 140:../BLDCMotor/focmethod.c ****     }
 548              		.loc 1 140 27 view .LVU179
 140:../BLDCMotor/focmethod.c ****     }
 549              		.loc 1 140 38 view .LVU180
 140:../BLDCMotor/focmethod.c ****     }
 550              		.loc 1 140 49 view .LVU181
 140:../BLDCMotor/focmethod.c ****     }
 551              		.loc 1 140 9 is_stmt 0 view .LVU182
 552 025c 16EE903A 		vmov	r3, s13
 140:../BLDCMotor/focmethod.c ****     }
 553              		.loc 1 140 33 view .LVU183
 554 0260 F0EE476A 		vmov.f32	s13, s14
 555              	.LVL68:
 140:../BLDCMotor/focmethod.c ****     }
 556              		.loc 1 140 44 view .LVU184
 557 0264 07EE103A 		vmov	s14, r3
 558              	.LVL69:
 140:../BLDCMotor/focmethod.c ****     }
 559              		.loc 1 140 9 view .LVU185
 560 0268 B9E7     		b	.L28
 561              	.L36:
 562 026a 00BF     		.align	2
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 15


 563              	.L35:
 564 026c D0B3DD3F 		.word	1071494096
 565 0270 D0B3DDBF 		.word	-1075989552
 566 0274 00000000 		.word	.LANCHOR3
 567 0278 D0B35D3F 		.word	1063105488
 568 027c 55558540 		.word	1082479957
 569 0280 0000C842 		.word	1120403456
 570 0284 00000000 		.word	0
 571              		.cfi_endproc
 572              	.LFE331:
 574              		.section	.text._3s_2s,"ax",%progbits
 575              		.align	1
 576              		.global	_3s_2s
 577              		.syntax unified
 578              		.thumb
 579              		.thumb_func
 580              		.fpu fpv4-sp-d16
 582              	_3s_2s:
 583              	.LVL70:
 584              	.LFB332:
 155:../BLDCMotor/focmethod.c **** 
 156:../BLDCMotor/focmethod.c **** 
 157:../BLDCMotor/focmethod.c **** /*---------------Clark�任------------------------*/
 158:../BLDCMotor/focmethod.c ****  void _3s_2s(abc_t i_abc,alpbet_t *alp_bet)
 159:../BLDCMotor/focmethod.c **** {
 585              		.loc 1 159 1 is_stmt 1 view -0
 586              		.cfi_startproc
 587              		@ args = 0, pretend = 0, frame = 16
 588              		@ frame_needed = 0, uses_anonymous_args = 0
 589              		@ link register save eliminated.
 590              		.loc 1 159 1 is_stmt 0 view .LVU187
 591 0000 84B0     		sub	sp, sp, #16
 592              	.LCFI6:
 593              		.cfi_def_cfa_offset 16
 594 0002 8DED010A 		vstr.32	s0, [sp, #4]
 595 0006 CDED020A 		vstr.32	s1, [sp, #8]
 596 000a 8DED031A 		vstr.32	s2, [sp, #12]
 160:../BLDCMotor/focmethod.c ****     // alpbet_t i_alphabeta;
 161:../BLDCMotor/focmethod.c ****     // alp_bet->alpha = 2.0f/3.0f*(i_abc.a - 1.0f/2.0f*i_abc.b - 1.0f/2.0f*i_abc.c);
 162:../BLDCMotor/focmethod.c ****     // alp_bet->beta =  2.0f/3.0f*(sqrt3_2*i_abc.b - sqrt3_2*i_abc.c);
 163:../BLDCMotor/focmethod.c ****     alp_bet->alpha = i_abc.a;
 597              		.loc 1 163 5 is_stmt 1 view .LVU188
 598              		.loc 1 163 20 is_stmt 0 view .LVU189
 599 000e 80ED000A 		vstr.32	s0, [r0]
 164:../BLDCMotor/focmethod.c ****     alp_bet->beta = sqrt3/3.0f * (i_abc.b - i_abc.c);
 600              		.loc 1 164 5 is_stmt 1 view .LVU190
 601              		.loc 1 164 43 is_stmt 0 view .LVU191
 602 0012 70EEC10A 		vsub.f32	s1, s1, s2
 603              		.loc 1 164 32 view .LVU192
 604 0016 9FED041A 		vldr.32	s2, .L39
 605 001a 60EE810A 		vmul.f32	s1, s1, s2
 606              		.loc 1 164 19 view .LVU193
 607 001e C0ED010A 		vstr.32	s1, [r0, #4]
 165:../BLDCMotor/focmethod.c **** }
 608              		.loc 1 165 1 view .LVU194
 609 0022 04B0     		add	sp, sp, #16
 610              	.LCFI7:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 16


 611              		.cfi_def_cfa_offset 0
 612              		@ sp needed
 613 0024 7047     		bx	lr
 614              	.L40:
 615 0026 00BF     		.align	2
 616              	.L39:
 617 0028 35CD133F 		.word	1058262325
 618              		.cfi_endproc
 619              	.LFE332:
 621              		.section	.text._2s_2r,"ax",%progbits
 622              		.align	1
 623              		.global	_2s_2r
 624              		.syntax unified
 625              		.thumb
 626              		.thumb_func
 627              		.fpu fpv4-sp-d16
 629              	_2s_2r:
 630              	.LVL71:
 631              	.LFB333:
 166:../BLDCMotor/focmethod.c **** /*-------------------Park�任--------------------------------*/
 167:../BLDCMotor/focmethod.c ****  void _2s_2r(alpbet_t i_alphabeta,float theta,dq_t *dq)
 168:../BLDCMotor/focmethod.c **** {
 632              		.loc 1 168 1 is_stmt 1 view -0
 633              		.cfi_startproc
 634              		@ args = 0, pretend = 0, frame = 16
 635              		@ frame_needed = 0, uses_anonymous_args = 0
 636              		.loc 1 168 1 is_stmt 0 view .LVU196
 637 0000 10B5     		push	{r4, lr}
 638              	.LCFI8:
 639              		.cfi_def_cfa_offset 8
 640              		.cfi_offset 4, -8
 641              		.cfi_offset 14, -4
 642 0002 2DED068B 		vpush.64	{d8, d9, d10}
 643              	.LCFI9:
 644              		.cfi_def_cfa_offset 32
 645              		.cfi_offset 80, -32
 646              		.cfi_offset 81, -28
 647              		.cfi_offset 82, -24
 648              		.cfi_offset 83, -20
 649              		.cfi_offset 84, -16
 650              		.cfi_offset 85, -12
 651 0006 84B0     		sub	sp, sp, #16
 652              	.LCFI10:
 653              		.cfi_def_cfa_offset 48
 654 0008 B0EE409A 		vmov.f32	s18, s0
 655 000c F0EE608A 		vmov.f32	s17, s1
 656 0010 F0EE619A 		vmov.f32	s19, s3
 657 0014 0446     		mov	r4, r0
 658 0016 8DED010A 		vstr.32	s0, [sp, #4]
 659 001a CDED020A 		vstr.32	s1, [sp, #8]
 660 001e 8DED031A 		vstr.32	s2, [sp, #12]
 169:../BLDCMotor/focmethod.c ****     dq->d =  cosf(theta)*i_alphabeta.alpha + sinf(theta)*i_alphabeta.beta;
 661              		.loc 1 169 5 is_stmt 1 view .LVU197
 662              		.loc 1 169 14 is_stmt 0 view .LVU198
 663 0022 B0EE610A 		vmov.f32	s0, s3
 664 0026 FFF7FEFF 		bl	cosf
 665              	.LVL72:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 17


 666              		.loc 1 169 14 view .LVU199
 667 002a B0EE408A 		vmov.f32	s16, s0
 668              		.loc 1 169 25 view .LVU200
 669 002e 20EE09AA 		vmul.f32	s20, s0, s18
 670              		.loc 1 169 46 view .LVU201
 671 0032 B0EE690A 		vmov.f32	s0, s19
 672 0036 FFF7FEFF 		bl	sinf
 673              	.LVL73:
 674              		.loc 1 169 57 view .LVU202
 675 003a 60EE287A 		vmul.f32	s15, s0, s17
 676              		.loc 1 169 44 view .LVU203
 677 003e 3AEE27AA 		vadd.f32	s20, s20, s15
 678              		.loc 1 169 11 view .LVU204
 679 0042 84ED00AA 		vstr.32	s20, [r4]
 170:../BLDCMotor/focmethod.c ****     dq->q = -sinf(theta)*i_alphabeta.alpha + cosf(theta)*i_alphabeta.beta;    
 680              		.loc 1 170 5 is_stmt 1 view .LVU205
 681              		.loc 1 170 25 is_stmt 0 view .LVU206
 682 0046 20EE490A 		vnmul.f32	s0, s0, s18
 683              		.loc 1 170 57 view .LVU207
 684 004a 28EE288A 		vmul.f32	s16, s16, s17
 685              		.loc 1 170 44 view .LVU208
 686 004e 30EE080A 		vadd.f32	s0, s0, s16
 687              		.loc 1 170 11 view .LVU209
 688 0052 84ED010A 		vstr.32	s0, [r4, #4]
 171:../BLDCMotor/focmethod.c **** }
 689              		.loc 1 171 1 view .LVU210
 690 0056 04B0     		add	sp, sp, #16
 691              	.LCFI11:
 692              		.cfi_def_cfa_offset 32
 693              		@ sp needed
 694 0058 BDEC068B 		vldm	sp!, {d8-d10}
 695              	.LCFI12:
 696              		.cfi_restore 84
 697              		.cfi_restore 85
 698              		.cfi_restore 82
 699              		.cfi_restore 83
 700              		.cfi_restore 80
 701              		.cfi_restore 81
 702              		.cfi_def_cfa_offset 8
 703 005c 10BD     		pop	{r4, pc}
 704              		.loc 1 171 1 view .LVU211
 705              		.cfi_endproc
 706              	.LFE333:
 708              		.section	.text._2r_2s,"ax",%progbits
 709              		.align	1
 710              		.global	_2r_2s
 711              		.syntax unified
 712              		.thumb
 713              		.thumb_func
 714              		.fpu fpv4-sp-d16
 716              	_2r_2s:
 717              	.LVL74:
 718              	.LFB334:
 172:../BLDCMotor/focmethod.c **** /*--------------��PARK�任------------------*/
 173:../BLDCMotor/focmethod.c ****  alpbet_t _2r_2s(dq_t i_dq,float theta)
 174:../BLDCMotor/focmethod.c **** {
 719              		.loc 1 174 1 is_stmt 1 view -0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 18


 720              		.cfi_startproc
 721              		@ args = 0, pretend = 0, frame = 56
 722              		@ frame_needed = 0, uses_anonymous_args = 0
 723              		.loc 1 174 1 is_stmt 0 view .LVU213
 724 0000 00B5     		push	{lr}
 725              	.LCFI13:
 726              		.cfi_def_cfa_offset 4
 727              		.cfi_offset 14, -4
 728 0002 2DED068B 		vpush.64	{d8, d9, d10}
 729              	.LCFI14:
 730              		.cfi_def_cfa_offset 28
 731              		.cfi_offset 80, -28
 732              		.cfi_offset 81, -24
 733              		.cfi_offset 82, -20
 734              		.cfi_offset 83, -16
 735              		.cfi_offset 84, -12
 736              		.cfi_offset 85, -8
 737 0006 8FB0     		sub	sp, sp, #60
 738              	.LCFI15:
 739              		.cfi_def_cfa_offset 88
 740 0008 B0EE408A 		vmov.f32	s16, s0
 741 000c B0EE609A 		vmov.f32	s18, s1
 742 0010 F0EE619A 		vmov.f32	s19, s3
 743 0014 8DED050A 		vstr.32	s0, [sp, #20]
 744 0018 CDED060A 		vstr.32	s1, [sp, #24]
 745 001c 8DED071A 		vstr.32	s2, [sp, #28]
 175:../BLDCMotor/focmethod.c ****     alpbet_t i_alphabeta;
 746              		.loc 1 175 5 is_stmt 1 view .LVU214
 176:../BLDCMotor/focmethod.c ****     i_alphabeta.alpha = i_dq.d * cosf(theta) -  i_dq.q * sinf(theta);
 747              		.loc 1 176 5 view .LVU215
 748              		.loc 1 176 34 is_stmt 0 view .LVU216
 749 0020 B0EE610A 		vmov.f32	s0, s3
 750 0024 FFF7FEFF 		bl	cosf
 751              	.LVL75:
 752              		.loc 1 176 34 view .LVU217
 753 0028 F0EE408A 		vmov.f32	s17, s0
 754              		.loc 1 176 32 view .LVU218
 755 002c 28EE00AA 		vmul.f32	s20, s16, s0
 756              		.loc 1 176 58 view .LVU219
 757 0030 B0EE690A 		vmov.f32	s0, s19
 758 0034 FFF7FEFF 		bl	sinf
 759              	.LVL76:
 760              		.loc 1 176 56 view .LVU220
 761 0038 69EE007A 		vmul.f32	s15, s18, s0
 762              		.loc 1 176 46 view .LVU221
 763 003c 3AEE67AA 		vsub.f32	s20, s20, s15
 764              		.loc 1 176 23 view .LVU222
 765 0040 8DED08AA 		vstr.32	s20, [sp, #32]
 177:../BLDCMotor/focmethod.c ****     i_alphabeta.beta = i_dq.d * sinf(theta) +  i_dq.q * cosf(theta);
 766              		.loc 1 177 5 is_stmt 1 view .LVU223
 767              		.loc 1 177 31 is_stmt 0 view .LVU224
 768 0044 28EE008A 		vmul.f32	s16, s16, s0
 769              		.loc 1 177 55 view .LVU225
 770 0048 68EE898A 		vmul.f32	s17, s17, s18
 771              		.loc 1 177 45 view .LVU226
 772 004c 38EE288A 		vadd.f32	s16, s16, s17
 773              		.loc 1 177 22 view .LVU227
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 19


 774 0050 8DED098A 		vstr.32	s16, [sp, #36]
 178:../BLDCMotor/focmethod.c ****     return i_alphabeta;
 775              		.loc 1 178 5 is_stmt 1 view .LVU228
 776              		.loc 1 178 12 is_stmt 0 view .LVU229
 777 0054 08AB     		add	r3, sp, #32
 778 0056 93E80700 		ldm	r3, {r0, r1, r2}
 779 005a 0EAB     		add	r3, sp, #56
 780 005c 03E90700 		stmdb	r3, {r0, r1, r2}
 179:../BLDCMotor/focmethod.c **** }
 781              		.loc 1 179 1 view .LVU230
 782 0060 9DED0B0A 		vldr.32	s0, [sp, #44]
 783 0064 DDED0C0A 		vldr.32	s1, [sp, #48]
 784 0068 9DED0D1A 		vldr.32	s2, [sp, #52]
 785 006c 0FB0     		add	sp, sp, #60
 786              	.LCFI16:
 787              		.cfi_def_cfa_offset 28
 788              		@ sp needed
 789 006e BDEC068B 		vldm	sp!, {d8-d10}
 790              	.LCFI17:
 791              		.cfi_restore 84
 792              		.cfi_restore 85
 793              		.cfi_restore 82
 794              		.cfi_restore 83
 795              		.cfi_restore 80
 796              		.cfi_restore 81
 797              		.cfi_def_cfa_offset 4
 798 0072 5DF804FB 		ldr	pc, [sp], #4
 799              		.cfi_endproc
 800              	.LFE334:
 802              		.global	__aeabi_f2d
 803              		.global	__aeabi_d2f
 804              		.section	.text._normalize_angle,"ax",%progbits
 805              		.align	1
 806              		.global	_normalize_angle
 807              		.syntax unified
 808              		.thumb
 809              		.thumb_func
 810              		.fpu fpv4-sp-d16
 812              	_normalize_angle:
 813              	.LVL77:
 814              	.LFB335:
 180:../BLDCMotor/focmethod.c **** 
 181:../BLDCMotor/focmethod.c **** /*-----------------------------------------*/
 182:../BLDCMotor/focmethod.c **** #if 0
 183:../BLDCMotor/focmethod.c **** static dq_t _3s_2r(abc_t i_abc, float theta)
 184:../BLDCMotor/focmethod.c **** {
 185:../BLDCMotor/focmethod.c ****     dq_t i_dq;
 186:../BLDCMotor/focmethod.c ****     float alpha,beta,rotor_theta;
 187:../BLDCMotor/focmethod.c ****     float ia, ib;
 188:../BLDCMotor/focmethod.c ****     ia = i_abc.a;
 189:../BLDCMotor/focmethod.c ****     ib = i_abc.b;
 190:../BLDCMotor/focmethod.c ****     rotor_theta =  theta;
 191:../BLDCMotor/focmethod.c ****     alpha = ia;
 192:../BLDCMotor/focmethod.c ****     beta = (2.0f*ib + ia)*0.577350269F;
 193:../BLDCMotor/focmethod.c ****     i_dq.d = alpha*cosf(rotor_theta) + beta*sinf(rotor_theta);
 194:../BLDCMotor/focmethod.c ****     i_dq.q = beta*cosf(rotor_theta) - alpha*sinf(rotor_theta);
 195:../BLDCMotor/focmethod.c ****     i_dq.theta = rotor_theta;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 20


 196:../BLDCMotor/focmethod.c ****     return i_dq;
 197:../BLDCMotor/focmethod.c **** }
 198:../BLDCMotor/focmethod.c **** #endif
 199:../BLDCMotor/focmethod.c **** 
 200:../BLDCMotor/focmethod.c **** float _normalize_angle(float angle)
 201:../BLDCMotor/focmethod.c **** {
 815              		.loc 1 201 1 is_stmt 1 view -0
 816              		.cfi_startproc
 817              		@ args = 0, pretend = 0, frame = 0
 818              		@ frame_needed = 0, uses_anonymous_args = 0
 819              		.loc 1 201 1 is_stmt 0 view .LVU232
 820 0000 08B5     		push	{r3, lr}
 821              	.LCFI18:
 822              		.cfi_def_cfa_offset 8
 823              		.cfi_offset 3, -8
 824              		.cfi_offset 14, -4
 825 0002 10EE100A 		vmov	r0, s0
 202:../BLDCMotor/focmethod.c ****   float a = fmod(angle, 2.0f*PI);   
 826              		.loc 1 202 3 is_stmt 1 view .LVU233
 827              		.loc 1 202 13 is_stmt 0 view .LVU234
 828 0006 FFF7FEFF 		bl	__aeabi_f2d
 829              	.LVL78:
 830              		.loc 1 202 13 view .LVU235
 831 000a 9FED0B1B 		vldr.64	d1, .L49
 832 000e 41EC100B 		vmov	d0, r0, r1
 833 0012 FFF7FEFF 		bl	fmod
 834              	.LVL79:
 835 0016 51EC100B 		vmov	r0, r1, d0
 836              		.loc 1 202 9 view .LVU236
 837 001a FFF7FEFF 		bl	__aeabi_d2f
 838              	.LVL80:
 839 001e 00EE100A 		vmov	s0, r0
 840              	.LVL81:
 203:../BLDCMotor/focmethod.c ****   return a >= 0 ? a : (a + 2.0f*PI);  
 841              		.loc 1 203 3 is_stmt 1 view .LVU237
 842              		.loc 1 203 21 is_stmt 0 view .LVU238
 843 0022 B5EEC00A 		vcmpe.f32	s0, #0
 844 0026 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 845 002a 00DB     		blt	.L48
 846              	.L45:
 204:../BLDCMotor/focmethod.c **** }
 847              		.loc 1 204 1 view .LVU239
 848 002c 08BD     		pop	{r3, pc}
 849              	.L48:
 203:../BLDCMotor/focmethod.c ****   return a >= 0 ? a : (a + 2.0f*PI);  
 850              		.loc 1 203 21 discriminator 2 view .LVU240
 851 002e DFED047A 		vldr.32	s15, .L49+8
 852 0032 30EE270A 		vadd.f32	s0, s0, s15
 853 0036 F9E7     		b	.L45
 854              	.L50:
 855              		.align	3
 856              	.L49:
 857 0038 00000040 		.word	1073741824
 858 003c FB211940 		.word	1075388923
 859 0040 DA0FC940 		.word	1086918618
 860              		.cfi_endproc
 861              	.LFE335:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 21


 863              		.section	.text.foc_curloopcale,"ax",%progbits
 864              		.align	1
 865              		.global	foc_curloopcale
 866              		.syntax unified
 867              		.thumb
 868              		.thumb_func
 869              		.fpu fpv4-sp-d16
 871              	foc_curloopcale:
 872              	.LVL82:
 873              	.LFB330:
  22:../BLDCMotor/focmethod.c ****     dq_t i_dq;
 874              		.loc 1 22 1 is_stmt 1 view -0
 875              		.cfi_startproc
 876              		@ args = 0, pretend = 0, frame = 104
 877              		@ frame_needed = 0, uses_anonymous_args = 0
  22:../BLDCMotor/focmethod.c ****     dq_t i_dq;
 878              		.loc 1 22 1 is_stmt 0 view .LVU242
 879 0000 00B5     		push	{lr}
 880              	.LCFI19:
 881              		.cfi_def_cfa_offset 4
 882              		.cfi_offset 14, -4
 883 0002 2DED048B 		vpush.64	{d8, d9}
 884              	.LCFI20:
 885              		.cfi_def_cfa_offset 20
 886              		.cfi_offset 80, -20
 887              		.cfi_offset 81, -16
 888              		.cfi_offset 82, -12
 889              		.cfi_offset 83, -8
 890 0006 9BB0     		sub	sp, sp, #108
 891              	.LCFI21:
 892              		.cfi_def_cfa_offset 128
 893 0008 B0EE618A 		vmov.f32	s16, s3
 894 000c 8DED050A 		vstr.32	s0, [sp, #20]
 895 0010 CDED060A 		vstr.32	s1, [sp, #24]
 896 0014 8DED071A 		vstr.32	s2, [sp, #28]
  23:../BLDCMotor/focmethod.c ****     dq_t udq_limt;
 897              		.loc 1 23 5 is_stmt 1 view .LVU243
  24:../BLDCMotor/focmethod.c ****     alpbet_t i_alphbeta;
 898              		.loc 1 24 5 view .LVU244
  25:../BLDCMotor/focmethod.c ****     float real_id,real_iq;
 899              		.loc 1 25 5 view .LVU245
  26:../BLDCMotor/focmethod.c **** #if 1
 900              		.loc 1 26 5 view .LVU246
  31:../BLDCMotor/focmethod.c ****     _2s_2r(i_alphbeta,_normalize_angle(theta - PI/2.0f),&i_dq);
 901              		.loc 1 31 5 view .LVU247
 902 0018 11A8     		add	r0, sp, #68
 903 001a FFF7FEFF 		bl	_3s_2s
 904              	.LVL83:
  32:../BLDCMotor/focmethod.c ****     // udq_limt = circle_limit(i_dq);
 905              		.loc 1 32 5 view .LVU248
 906 001e 9FED350A 		vldr.32	s0, .L53
 907 0022 38EE400A 		vsub.f32	s0, s16, s0
 908 0026 FFF7FEFF 		bl	_normalize_angle
 909              	.LVL84:
 910 002a F0EE401A 		vmov.f32	s3, s0
 911 002e 14A8     		add	r0, sp, #80
 912 0030 9DED110A 		vldr.32	s0, [sp, #68]
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 22


 913 0034 DDED120A 		vldr.32	s1, [sp, #72]
 914 0038 9DED131A 		vldr.32	s2, [sp, #76]
 915 003c FFF7FEFF 		bl	_2s_2r
 916              	.LVL85:
  36:../BLDCMotor/focmethod.c ****     real_iq = i_dq.q;
 917              		.loc 1 36 5 view .LVU249
  36:../BLDCMotor/focmethod.c ****     real_iq = i_dq.q;
 918              		.loc 1 36 13 is_stmt 0 view .LVU250
 919 0040 9DED149A 		vldr.32	s18, [sp, #80]
 920              	.LVL86:
  37:../BLDCMotor/focmethod.c ****     /*---------------------------*/
 921              		.loc 1 37 5 is_stmt 1 view .LVU251
  37:../BLDCMotor/focmethod.c ****     /*---------------------------*/
 922              		.loc 1 37 13 is_stmt 0 view .LVU252
 923 0044 DDED158A 		vldr.32	s17, [sp, #84]
 924              	.LVL87:
  40:../BLDCMotor/focmethod.c ****     dq_t u_dq;  
 925              		.loc 1 40 5 is_stmt 1 view .LVU253
  41:../BLDCMotor/focmethod.c ****     u_dq.d = 0.0f;
 926              		.loc 1 41 5 view .LVU254
  42:../BLDCMotor/focmethod.c ****     u_dq.q = 1.0f;
 927              		.loc 1 42 5 view .LVU255
  42:../BLDCMotor/focmethod.c ****     u_dq.q = 1.0f;
 928              		.loc 1 42 12 is_stmt 0 view .LVU256
 929 0048 0023     		movs	r3, #0
 930 004a 0E93     		str	r3, [sp, #56]	@ float
  43:../BLDCMotor/focmethod.c ****     // u_dq.d = pid_contrl(sgp_curloop_d_pid,0.0f,real_id);
 931              		.loc 1 43 5 is_stmt 1 view .LVU257
  43:../BLDCMotor/focmethod.c ****     // u_dq.d = pid_contrl(sgp_curloop_d_pid,0.0f,real_id);
 932              		.loc 1 43 12 is_stmt 0 view .LVU258
 933 004c 4FF07E53 		mov	r3, #1065353216
 934 0050 0F93     		str	r3, [sp, #60]	@ float
  47:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IB,i_abc.b);
 935              		.loc 1 47 5 is_stmt 1 view .LVU259
 936 0052 9DED050A 		vldr.32	s0, [sp, #20]
 937 0056 0220     		movs	r0, #2
 938 0058 FFF7FEFF 		bl	ipc_write_data
 939              	.LVL88:
  48:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IC,i_abc.c);
 940              		.loc 1 48 5 view .LVU260
 941 005c 9DED060A 		vldr.32	s0, [sp, #24]
 942 0060 0320     		movs	r0, #3
 943 0062 FFF7FEFF 		bl	ipc_write_data
 944              	.LVL89:
  49:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IALPHA,i_alphbeta.alpha);
 945              		.loc 1 49 5 view .LVU261
 946 0066 9DED070A 		vldr.32	s0, [sp, #28]
 947 006a 0420     		movs	r0, #4
 948 006c FFF7FEFF 		bl	ipc_write_data
 949              	.LVL90:
  50:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IBETA,i_alphbeta.beta);
 950              		.loc 1 50 5 view .LVU262
 951 0070 9DED110A 		vldr.32	s0, [sp, #68]
 952 0074 0520     		movs	r0, #5
 953 0076 FFF7FEFF 		bl	ipc_write_data
 954              	.LVL91:
  51:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_ID,real_id);
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 23


 955              		.loc 1 51 5 view .LVU263
 956 007a 9DED120A 		vldr.32	s0, [sp, #72]
 957 007e 0620     		movs	r0, #6
 958 0080 FFF7FEFF 		bl	ipc_write_data
 959              	.LVL92:
  52:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IQ,real_iq);
 960              		.loc 1 52 5 view .LVU264
 961 0084 B0EE490A 		vmov.f32	s0, s18
 962 0088 0720     		movs	r0, #7
 963 008a FFF7FEFF 		bl	ipc_write_data
 964              	.LVL93:
  53:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_TEMP0,theta);
 965              		.loc 1 53 5 view .LVU265
 966 008e B0EE680A 		vmov.f32	s0, s17
 967 0092 0820     		movs	r0, #8
 968 0094 FFF7FEFF 		bl	ipc_write_data
 969              	.LVL94:
  54:../BLDCMotor/focmethod.c **** #else
 970              		.loc 1 54 5 view .LVU266
 971 0098 B0EE480A 		vmov.f32	s0, s16
 972 009c 0C20     		movs	r0, #12
 973 009e FFF7FEFF 		bl	ipc_write_data
 974              	.LVL95:
  61:../BLDCMotor/focmethod.c ****     u_alphabeta = _2r_2s(u_dq,(theta));// + PI/2.0f); 
 975              		.loc 1 61 5 view .LVU267
  62:../BLDCMotor/focmethod.c ****     duty_t duty;
 976              		.loc 1 62 5 view .LVU268
  62:../BLDCMotor/focmethod.c ****     duty_t duty;
 977              		.loc 1 62 19 is_stmt 0 view .LVU269
 978 00a2 F0EE481A 		vmov.f32	s3, s16
 979 00a6 9DED0E0A 		vldr.32	s0, [sp, #56]
 980 00aa DDED0F0A 		vldr.32	s1, [sp, #60]
 981 00ae 9DED101A 		vldr.32	s2, [sp, #64]
 982 00b2 FFF7FEFF 		bl	_2r_2s
 983              	.LVL96:
 984 00b6 8DED0B0A 		vstr.32	s0, [sp, #44]
 985 00ba CDED0C0A 		vstr.32	s1, [sp, #48]
 986 00be 8DED0D1A 		vstr.32	s2, [sp, #52]
  63:../BLDCMotor/focmethod.c ****     duty = _svpwm(u_alphabeta.alpha,u_alphabeta.beta);
 987              		.loc 1 63 5 is_stmt 1 view .LVU270
  64:../BLDCMotor/focmethod.c ****     return duty;
 988              		.loc 1 64 5 view .LVU271
  64:../BLDCMotor/focmethod.c ****     return duty;
 989              		.loc 1 64 12 is_stmt 0 view .LVU272
 990 00c2 FFF7FEFF 		bl	_svpwm
 991              	.LVL97:
 992 00c6 8DED080A 		vstr.32	s0, [sp, #32]
 993 00ca CDED090A 		vstr.32	s1, [sp, #36]
 994 00ce 8DED0A1A 		vstr.32	s2, [sp, #40]
  65:../BLDCMotor/focmethod.c **** }
 995              		.loc 1 65 5 is_stmt 1 view .LVU273
  65:../BLDCMotor/focmethod.c **** }
 996              		.loc 1 65 12 is_stmt 0 view .LVU274
 997 00d2 08AB     		add	r3, sp, #32
 998 00d4 93E80700 		ldm	r3, {r0, r1, r2}
 999 00d8 1AAB     		add	r3, sp, #104
 1000 00da 03E90700 		stmdb	r3, {r0, r1, r2}
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 24


  66:../BLDCMotor/focmethod.c **** unsigned char test_sector_f;
 1001              		.loc 1 66 1 view .LVU275
 1002 00de 9DED170A 		vldr.32	s0, [sp, #92]
 1003 00e2 DDED180A 		vldr.32	s1, [sp, #96]
 1004 00e6 9DED191A 		vldr.32	s2, [sp, #100]
 1005 00ea 1BB0     		add	sp, sp, #108
 1006              	.LCFI22:
 1007              		.cfi_def_cfa_offset 20
 1008              		@ sp needed
 1009 00ec BDEC048B 		vldm	sp!, {d8-d9}
 1010              	.LCFI23:
 1011              		.cfi_restore 82
 1012              		.cfi_restore 83
 1013              		.cfi_restore 80
 1014              		.cfi_restore 81
 1015              		.cfi_def_cfa_offset 4
 1016              	.LVL98:
  66:../BLDCMotor/focmethod.c **** unsigned char test_sector_f;
 1017              		.loc 1 66 1 view .LVU276
 1018 00f0 5DF804FB 		ldr	pc, [sp], #4
 1019              	.L54:
 1020              		.align	2
 1021              	.L53:
 1022 00f4 DA0FC93F 		.word	1070141402
 1023              		.cfi_endproc
 1024              	.LFE330:
 1026              		.global	test_sector_f
 1027              		.global	sgp_curloop_q_pid
 1028              		.global	sgp_curloop_d_pid
 1029              		.section	.bss.sg_curloop_param,"aw",%nobits
 1030              		.align	2
 1031              		.set	.LANCHOR1,. + 0
 1034              	sg_curloop_param:
 1035 0000 00000000 		.space	56
 1035      00000000 
 1035      00000000 
 1035      00000000 
 1035      00000000 
 1036              		.section	.bss.sgp_curloop_d_pid,"aw",%nobits
 1037              		.align	2
 1038              		.set	.LANCHOR0,. + 0
 1041              	sgp_curloop_d_pid:
 1042 0000 00000000 		.space	4
 1043              		.section	.bss.sgp_curloop_q_pid,"aw",%nobits
 1044              		.align	2
 1045              		.set	.LANCHOR2,. + 0
 1048              	sgp_curloop_q_pid:
 1049 0000 00000000 		.space	4
 1050              		.section	.bss.test_sector_f,"aw",%nobits
 1051              		.set	.LANCHOR3,. + 0
 1054              	test_sector_f:
 1055 0000 00       		.space	1
 1056              		.text
 1057              	.Letext0:
 1058              		.file 2 "../Common/method/pid.h"
 1059              		.file 3 "../BLDCMotor/./focmethod.h"
 1060              		.file 4 "d:\\program files (x86)\\gcc-arm-none-eabi-10-2020-q4-major-win32\\tool\\arm-none-eabi\\i
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 25


 1061              		.file 5 "../Common/IPC/ipc.h"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s 			page 26


DEFINED SYMBOLS
                            *ABS*:00000000 focmethod.c
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:18     .text.foc_paraminit:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:26     .text.foc_paraminit:00000000 foc_paraminit
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:81     .text.foc_paraminit:00000050 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:92     .text._svpwm:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:99     .text._svpwm:00000000 _svpwm
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:177    .text._svpwm:00000062 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:271    .text._svpwm:000000e8 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:278    .text._svpwm:000000ee $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:564    .text._svpwm:0000026c $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:575    .text._3s_2s:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:582    .text._3s_2s:00000000 _3s_2s
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:617    .text._3s_2s:00000028 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:622    .text._2s_2r:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:629    .text._2s_2r:00000000 _2s_2r
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:709    .text._2r_2s:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:716    .text._2r_2s:00000000 _2r_2s
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:805    .text._normalize_angle:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:812    .text._normalize_angle:00000000 _normalize_angle
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:857    .text._normalize_angle:00000038 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:864    .text.foc_curloopcale:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:871    .text.foc_curloopcale:00000000 foc_curloopcale
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:1022   .text.foc_curloopcale:000000f4 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:1054   .bss.test_sector_f:00000000 test_sector_f
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:1048   .bss.sgp_curloop_q_pid:00000000 sgp_curloop_q_pid
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:1041   .bss.sgp_curloop_d_pid:00000000 sgp_curloop_d_pid
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:1030   .bss.sg_curloop_param:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:1034   .bss.sg_curloop_param:00000000 sg_curloop_param
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:1037   .bss.sgp_curloop_d_pid:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:1044   .bss.sgp_curloop_q_pid:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:1055   .bss.test_sector_f:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:183    .text._svpwm:00000067 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccyg1Amc.s:183    .text._svpwm:00000068 $t

UNDEFINED SYMBOLS
pid_init
cosf
sinf
__aeabi_f2d
__aeabi_d2f
fmod
ipc_write_data
