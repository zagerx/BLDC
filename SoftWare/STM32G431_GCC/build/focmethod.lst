ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"focmethod.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.foc_paraminit,"ax",%progbits
  20              		.align	1
  21              		.global	foc_paraminit
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	foc_paraminit:
  27              	.LFB329:
  28              		.file 1 "../BLDCMotor/focmethod.c"
   1:../BLDCMotor/focmethod.c **** #include "./focmethod.h"
   2:../BLDCMotor/focmethod.c **** 
   3:../BLDCMotor/focmethod.c **** alpbet_t _2r_2s(dq_t i_dq,float theta);
   4:../BLDCMotor/focmethod.c ****  void _2s_2r(alpbet_t i_alphabeta,float theta,dq_t *dq);
   5:../BLDCMotor/focmethod.c ****  void _3s_2s(abc_t i_abc,alpbet_t *alp_bet);
   6:../BLDCMotor/focmethod.c **** static dq_t circle_limit(dq_t dq);
   7:../BLDCMotor/focmethod.c **** 
   8:../BLDCMotor/focmethod.c **** static curloop_t sg_curloop_param;
   9:../BLDCMotor/focmethod.c ****  pid_cb_t *sgp_curloop_d_pid;
  10:../BLDCMotor/focmethod.c ****  pid_cb_t *sgp_curloop_q_pid;
  11:../BLDCMotor/focmethod.c **** void foc_paraminit(void)
  12:../BLDCMotor/focmethod.c **** {
  29              		.loc 1 12 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 10B5     		push	{r4, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 4, -8
  37              		.cfi_offset 14, -4
  38 0002 2DED028B 		vpush.64	{d8}
  39              	.LCFI1:
  40              		.cfi_def_cfa_offset 16
  41              		.cfi_offset 80, -16
  42              		.cfi_offset 81, -12
  13:../BLDCMotor/focmethod.c ****     sgp_curloop_d_pid = &sg_curloop_param.d_pid;
  43              		.loc 1 13 5 view .LVU1
  44              		.loc 1 13 23 is_stmt 0 view .LVU2
  45 0006 1248     		ldr	r0, .L3
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 2


  46 0008 124B     		ldr	r3, .L3+4
  47 000a 1860     		str	r0, [r3]
  14:../BLDCMotor/focmethod.c ****     sgp_curloop_q_pid = &sg_curloop_param.q_pid;
  48              		.loc 1 14 5 is_stmt 1 view .LVU3
  49              		.loc 1 14 23 is_stmt 0 view .LVU4
  50 000c 124C     		ldr	r4, .L3+8
  51 000e 00F11C03 		add	r3, r0, #28
  52 0012 2360     		str	r3, [r4]
  15:../BLDCMotor/focmethod.c ****     pid_init(sgp_curloop_d_pid,0.010f,0.0001f,1.0f,D_MAX_VAL,D_MIN_VAL);
  53              		.loc 1 15 5 is_stmt 1 view .LVU5
  54 0014 9FED118A 		vldr.32	s16, .L3+12
  55 0018 BAEE032A 		vmov.f32	s4, #-9.5e+0
  56 001c F2EE031A 		vmov.f32	s3, #9.5e+0
  57 0020 B7EE001A 		vmov.f32	s2, #1.0e+0
  58 0024 DFED0E0A 		vldr.32	s1, .L3+16
  59 0028 B0EE480A 		vmov.f32	s0, s16
  60 002c FFF7FEFF 		bl	pid_init
  61              	.LVL0:
  16:../BLDCMotor/focmethod.c ****     pid_init(sgp_curloop_q_pid,0.050f,0.01f,1.0f,Q_MAX_VAL,Q_MIN_VAL);
  62              		.loc 1 16 5 view .LVU6
  63 0030 BAEE032A 		vmov.f32	s4, #-9.5e+0
  64 0034 F2EE031A 		vmov.f32	s3, #9.5e+0
  65 0038 B7EE001A 		vmov.f32	s2, #1.0e+0
  66 003c F0EE480A 		vmov.f32	s1, s16
  67 0040 9FED080A 		vldr.32	s0, .L3+20
  68 0044 2068     		ldr	r0, [r4]
  69 0046 FFF7FEFF 		bl	pid_init
  70              	.LVL1:
  17:../BLDCMotor/focmethod.c **** }
  71              		.loc 1 17 1 is_stmt 0 view .LVU7
  72 004a BDEC028B 		vldm	sp!, {d8}
  73              	.LCFI2:
  74              		.cfi_restore 80
  75              		.cfi_restore 81
  76              		.cfi_def_cfa_offset 8
  77 004e 10BD     		pop	{r4, pc}
  78              	.L4:
  79              		.align	2
  80              	.L3:
  81 0050 00000000 		.word	.LANCHOR1
  82 0054 00000000 		.word	.LANCHOR0
  83 0058 00000000 		.word	.LANCHOR2
  84 005c 0AD7233C 		.word	1008981770
  85 0060 17B7D138 		.word	953267991
  86 0064 CDCC4C3D 		.word	1028443341
  87              		.cfi_endproc
  88              	.LFE329:
  90              		.section	.text._svpwm,"ax",%progbits
  91              		.align	1
  92              		.global	_svpwm
  93              		.syntax unified
  94              		.thumb
  95              		.thumb_func
  97              	_svpwm:
  98              	.LVL2:
  99              	.LFB331:
  18:../BLDCMotor/focmethod.c **** 
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 3


  19:../BLDCMotor/focmethod.c **** /*-----------------------------------------
  20:../BLDCMotor/focmethod.c **** theta:��Ƕ�
  21:../BLDCMotor/focmethod.c **** */
  22:../BLDCMotor/focmethod.c **** duty_t foc_curloopcale(abc_t i_abc,float theta)
  23:../BLDCMotor/focmethod.c **** {    
  24:../BLDCMotor/focmethod.c ****     dq_t i_dq;
  25:../BLDCMotor/focmethod.c ****     dq_t udq_limt;
  26:../BLDCMotor/focmethod.c ****     alpbet_t i_alphbeta;
  27:../BLDCMotor/focmethod.c ****     float real_id,real_iq;
  28:../BLDCMotor/focmethod.c **** #if 1
  29:../BLDCMotor/focmethod.c ****     // i_abc.a = cosf(theta);
  30:../BLDCMotor/focmethod.c ****     // i_abc.b = cosf(theta - _2PI/3.0f);
  31:../BLDCMotor/focmethod.c ****     // i_abc.c = cosf(theta + _2PI/3.0f);
  32:../BLDCMotor/focmethod.c ****     _3s_2s(i_abc,&i_alphbeta);
  33:../BLDCMotor/focmethod.c ****     _2s_2r(i_alphbeta,_normalize_angle(theta - PI/2.0f),&i_dq);
  34:../BLDCMotor/focmethod.c ****     // udq_limt = circle_limit(i_dq);
  35:../BLDCMotor/focmethod.c ****     // real_id = udq_limt.d;
  36:../BLDCMotor/focmethod.c ****     // real_iq = udq_limt.q;
  37:../BLDCMotor/focmethod.c ****     real_id = i_dq.d;
  38:../BLDCMotor/focmethod.c ****     real_iq = i_dq.q;
  39:../BLDCMotor/focmethod.c ****     /*------------������PI---------------*/
  40:../BLDCMotor/focmethod.c ****     
  41:../BLDCMotor/focmethod.c ****     float target_uq = 8.0f;  
  42:../BLDCMotor/focmethod.c ****     dq_t u_dq;  
  43:../BLDCMotor/focmethod.c ****     u_dq.d = 0.0f;
  44:../BLDCMotor/focmethod.c ****     u_dq.q = 1.0f;
  45:../BLDCMotor/focmethod.c ****     // u_dq.d = pid_contrl(sgp_curloop_d_pid,0.0f,real_id);
  46:../BLDCMotor/focmethod.c ****     // u_dq.q = pid_contrl(sgp_curloop_q_pid,target_uq,real_iq);
  47:../BLDCMotor/focmethod.c ****     /*------------IPC DATA--------------*/
  48:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IA,i_abc.a);
  49:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IB,i_abc.b);
  50:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IC,i_abc.c);
  51:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IALPHA,i_alphbeta.alpha);
  52:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IBETA,i_alphbeta.beta);
  53:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_ID,real_id);
  54:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IQ,real_iq);
  55:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_TEMP0,theta);
  56:../BLDCMotor/focmethod.c **** #else
  57:../BLDCMotor/focmethod.c ****     dq_t u_dq;  
  58:../BLDCMotor/focmethod.c ****     u_dq.d = 0.0f;
  59:../BLDCMotor/focmethod.c ****     u_dq.q = 1.0f;    
  60:../BLDCMotor/focmethod.c **** #endif
  61:../BLDCMotor/focmethod.c **** 
  62:../BLDCMotor/focmethod.c ****     alpbet_t u_alphabeta;
  63:../BLDCMotor/focmethod.c ****     u_alphabeta = _2r_2s(u_dq,(theta));// + PI/2.0f); 
  64:../BLDCMotor/focmethod.c ****     duty_t duty;
  65:../BLDCMotor/focmethod.c ****     duty = _svpwm(u_alphabeta.alpha,u_alphabeta.beta);
  66:../BLDCMotor/focmethod.c ****     return duty;
  67:../BLDCMotor/focmethod.c **** }
  68:../BLDCMotor/focmethod.c **** duty_t _svpwm(float ualpha,float ubeta)
  69:../BLDCMotor/focmethod.c **** {
 100              		.loc 1 69 1 is_stmt 1 view -0
 101              		.cfi_startproc
 102              		@ args = 0, pretend = 0, frame = 40
 103              		@ frame_needed = 0, uses_anonymous_args = 0
 104              		@ link register save eliminated.
 105              		.loc 1 69 1 is_stmt 0 view .LVU9
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 4


 106 0000 8AB0     		sub	sp, sp, #40
 107              	.LCFI3:
 108              		.cfi_def_cfa_offset 40
  70:../BLDCMotor/focmethod.c ****     unsigned char sector;    
 109              		.loc 1 70 5 is_stmt 1 view .LVU10
  71:../BLDCMotor/focmethod.c ****     sector = 0;
 110              		.loc 1 71 5 view .LVU11
 111              	.LVL3:
  72:../BLDCMotor/focmethod.c ****     /*-------------------------------*/
  73:../BLDCMotor/focmethod.c ****     if(ubeta > 0.0F) {
 112              		.loc 1 73 5 view .LVU12
 113              		.loc 1 73 7 is_stmt 0 view .LVU13
 114 0002 F5EEC00A 		vcmpe.f32	s1, #0
 115 0006 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 116 000a 2BDD     		ble	.L34
  74:../BLDCMotor/focmethod.c ****         sector = 1;
 117              		.loc 1 74 16 view .LVU14
 118 000c 0123     		movs	r3, #1
 119              	.L6:
 120              	.LVL4:
  75:../BLDCMotor/focmethod.c ****     }
  76:../BLDCMotor/focmethod.c ****     if((sqrt3 * ualpha - ubeta) / 2.0F > 0.0F) {
 121              		.loc 1 76 5 is_stmt 1 view .LVU15
 122              		.loc 1 76 15 is_stmt 0 view .LVU16
 123 000e DFED977A 		vldr.32	s15, .L35
 124 0012 60EE277A 		vmul.f32	s15, s0, s15
 125              		.loc 1 76 24 view .LVU17
 126 0016 77EEE07A 		vsub.f32	s15, s15, s1
 127              		.loc 1 76 33 view .LVU18
 128 001a F6EE006A 		vmov.f32	s13, #5.0e-1
 129 001e 67EEA67A 		vmul.f32	s15, s15, s13
 130              		.loc 1 76 7 view .LVU19
 131 0022 F5EEC07A 		vcmpe.f32	s15, #0
 132 0026 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 133 002a 01DD     		ble	.L7
  77:../BLDCMotor/focmethod.c ****         sector += 2;
 134              		.loc 1 77 9 is_stmt 1 view .LVU20
 135              		.loc 1 77 16 is_stmt 0 view .LVU21
 136 002c 0233     		adds	r3, r3, #2
 137              	.LVL5:
 138              		.loc 1 77 16 view .LVU22
 139 002e DBB2     		uxtb	r3, r3
 140              	.LVL6:
 141              	.L7:
  78:../BLDCMotor/focmethod.c ****     }
  79:../BLDCMotor/focmethod.c ****     if((-sqrt3 * ualpha - ubeta) / 2.0F > 0.0F) {
 142              		.loc 1 79 5 is_stmt 1 view .LVU23
 143              		.loc 1 79 16 is_stmt 0 view .LVU24
 144 0030 DFED8F7A 		vldr.32	s15, .L35+4
 145 0034 60EE277A 		vmul.f32	s15, s0, s15
 146              		.loc 1 79 25 view .LVU25
 147 0038 77EEE07A 		vsub.f32	s15, s15, s1
 148              		.loc 1 79 34 view .LVU26
 149 003c F6EE006A 		vmov.f32	s13, #5.0e-1
 150 0040 67EEA67A 		vmul.f32	s15, s15, s13
 151              		.loc 1 79 7 view .LVU27
 152 0044 F5EEC07A 		vcmpe.f32	s15, #0
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 5


 153 0048 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 154 004c 01DD     		ble	.L9
  80:../BLDCMotor/focmethod.c ****         sector += 4;
 155              		.loc 1 80 9 is_stmt 1 view .LVU28
 156              		.loc 1 80 16 is_stmt 0 view .LVU29
 157 004e 0433     		adds	r3, r3, #4
 158              	.LVL7:
 159              		.loc 1 80 16 view .LVU30
 160 0050 DBB2     		uxtb	r3, r3
 161              	.LVL8:
 162              	.L9:
  81:../BLDCMotor/focmethod.c ****     }
  82:../BLDCMotor/focmethod.c **** 
  83:../BLDCMotor/focmethod.c ****     /*----------------------------------------------------*/
  84:../BLDCMotor/focmethod.c ****     float s_vector = 0.0f,m_vector = 0.0f;
 163              		.loc 1 84 5 is_stmt 1 view .LVU31
  85:../BLDCMotor/focmethod.c ****     switch (sector) {
 164              		.loc 1 85 5 view .LVU32
 165 0052 5A1E     		subs	r2, r3, #1
 166 0054 042A     		cmp	r2, #4
 167 0056 00F29C80 		bhi	.L11
 168 005a DFE802F0 		tbb	[pc, r2]
 169              	.L13:
 170 005e 05       		.byte	(.L17-.L13)/2
 171 005f 46       		.byte	(.L16-.L13)/2
 172 0060 5B       		.byte	(.L15-.L13)/2
 173 0061 70       		.byte	(.L14-.L13)/2
 174 0062 85       		.byte	(.L12-.L13)/2
 175              	.LVL9:
 176 0063 00       		.p2align 1
 177              	.L34:
  71:../BLDCMotor/focmethod.c ****     /*-------------------------------*/
 178              		.loc 1 71 12 is_stmt 0 view .LVU33
 179 0064 0023     		movs	r3, #0
 180 0066 D2E7     		b	.L6
 181              	.LVL10:
 182              	.L17:
  86:../BLDCMotor/focmethod.c ****         case 1:
  87:../BLDCMotor/focmethod.c ****             m_vector = (-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC;
 183              		.loc 1 87 13 is_stmt 1 view .LVU34
 184              		.loc 1 87 31 is_stmt 0 view .LVU35
 185 0068 FFEE087A 		vmov.f32	s15, #-1.5e+0
 186 006c 60EE277A 		vmul.f32	s15, s0, s15
 187              		.loc 1 87 53 view .LVU36
 188 0070 DFED806A 		vldr.32	s13, .L35+8
 189 0074 60EEA60A 		vmul.f32	s1, s1, s13
 190              	.LVL11:
 191              		.loc 1 87 40 view .LVU37
 192 0078 77EEA07A 		vadd.f32	s15, s15, s1
 193              		.loc 1 87 22 view .LVU38
 194 007c DFED7E6A 		vldr.32	s13, .L35+12
 195 0080 67EEA67A 		vmul.f32	s15, s15, s13
 196              	.LVL12:
  88:../BLDCMotor/focmethod.c ****             s_vector = (1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC;
 197              		.loc 1 88 13 is_stmt 1 view .LVU39
 198              		.loc 1 88 30 is_stmt 0 view .LVU40
 199 0084 B7EE087A 		vmov.f32	s14, #1.5e+0
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 6


 200 0088 20EE077A 		vmul.f32	s14, s0, s14
 201              		.loc 1 88 39 view .LVU41
 202 008c 30EE877A 		vadd.f32	s14, s1, s14
 203              		.loc 1 88 22 view .LVU42
 204 0090 27EE267A 		vmul.f32	s14, s14, s13
 205              	.LVL13:
  89:../BLDCMotor/focmethod.c ****         break;
 206              		.loc 1 89 9 is_stmt 1 view .LVU43
 207              	.L18:
  90:../BLDCMotor/focmethod.c **** 
  91:../BLDCMotor/focmethod.c ****         case 2:
  92:../BLDCMotor/focmethod.c ****             m_vector = (1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC;
  93:../BLDCMotor/focmethod.c ****             s_vector = -(sqrt3 * ubeta * T_UDC);
  94:../BLDCMotor/focmethod.c ****         break;
  95:../BLDCMotor/focmethod.c **** 
  96:../BLDCMotor/focmethod.c ****         case 3:
  97:../BLDCMotor/focmethod.c ****             m_vector = -((-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
  98:../BLDCMotor/focmethod.c ****             s_vector = sqrt3 * ubeta * T_UDC;
  99:../BLDCMotor/focmethod.c ****         break;
 100:../BLDCMotor/focmethod.c **** 
 101:../BLDCMotor/focmethod.c ****         case 4:
 102:../BLDCMotor/focmethod.c ****             m_vector = -(sqrt3 * ubeta * T_UDC);
 103:../BLDCMotor/focmethod.c ****             s_vector = (-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC;
 104:../BLDCMotor/focmethod.c ****         break;
 105:../BLDCMotor/focmethod.c **** 
 106:../BLDCMotor/focmethod.c ****         case 5:
 107:../BLDCMotor/focmethod.c ****             m_vector = sqrt3 * ubeta * T_UDC;
 108:../BLDCMotor/focmethod.c ****             s_vector = -((1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 109:../BLDCMotor/focmethod.c ****         break;
 110:../BLDCMotor/focmethod.c **** 
 111:../BLDCMotor/focmethod.c ****         default:
 112:../BLDCMotor/focmethod.c ****             m_vector = -((1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 113:../BLDCMotor/focmethod.c ****             s_vector = -((-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 114:../BLDCMotor/focmethod.c ****         break;
 115:../BLDCMotor/focmethod.c ****     }
 116:../BLDCMotor/focmethod.c ****     /*------------------------------------------------------------*/
 117:../BLDCMotor/focmethod.c ****     if (m_vector + s_vector > T_PWM) 
 208              		.loc 1 117 5 view .LVU44
 209              		.loc 1 117 18 is_stmt 0 view .LVU45
 210 0094 77EE276A 		vadd.f32	s13, s14, s15
 211              		.loc 1 117 8 view .LVU46
 212 0098 9FED786A 		vldr.32	s12, .L35+16
 213 009c F4EEC66A 		vcmpe.f32	s13, s12
 214 00a0 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 215 00a4 05DD     		ble	.L19
 118:../BLDCMotor/focmethod.c ****     {
 119:../BLDCMotor/focmethod.c ****         m_vector /= (m_vector + s_vector);
 216              		.loc 1 119 9 is_stmt 1 view .LVU47
 217              		.loc 1 119 18 is_stmt 0 view .LVU48
 218 00a6 C7EEA67A 		vdiv.f32	s15, s15, s13
 219              	.LVL14:
 120:../BLDCMotor/focmethod.c ****         s_vector /= m_vector + s_vector;
 220              		.loc 1 120 9 is_stmt 1 view .LVU49
 221              		.loc 1 120 30 is_stmt 0 view .LVU50
 222 00aa 77EE276A 		vadd.f32	s13, s14, s15
 223              		.loc 1 120 18 view .LVU51
 224 00ae 87EE267A 		vdiv.f32	s14, s14, s13
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 7


 225              	.LVL15:
 226              	.L19:
 121:../BLDCMotor/focmethod.c ****     }
 122:../BLDCMotor/focmethod.c **** 
 123:../BLDCMotor/focmethod.c ****     /*---------------------------------------------------*/
 124:../BLDCMotor/focmethod.c ****     float Ta,Tb,Tc;
 227              		.loc 1 124 5 is_stmt 1 view .LVU52
 125:../BLDCMotor/focmethod.c ****     Ta = (T_PWM - (m_vector + s_vector)) / 4.0F;  
 228              		.loc 1 125 5 view .LVU53
 229              		.loc 1 125 29 is_stmt 0 view .LVU54
 230 00b2 37EE276A 		vadd.f32	s12, s14, s15
 231              		.loc 1 125 17 view .LVU55
 232 00b6 DFED716A 		vldr.32	s13, .L35+16
 233 00ba 76EEC66A 		vsub.f32	s13, s13, s12
 234              		.loc 1 125 8 view .LVU56
 235 00be B5EE006A 		vmov.f32	s12, #2.5e-1
 236 00c2 66EE866A 		vmul.f32	s13, s13, s12
 237              	.LVL16:
 126:../BLDCMotor/focmethod.c ****     Tb = Ta + m_vector/2.0f;
 238              		.loc 1 126 5 is_stmt 1 view .LVU57
 239              		.loc 1 126 23 is_stmt 0 view .LVU58
 240 00c6 B6EE006A 		vmov.f32	s12, #5.0e-1
 241 00ca 67EE867A 		vmul.f32	s15, s15, s12
 242              	.LVL17:
 243              		.loc 1 126 8 view .LVU59
 244 00ce 77EEA67A 		vadd.f32	s15, s15, s13
 245              	.LVL18:
 127:../BLDCMotor/focmethod.c ****     Tc = Tb + s_vector/2.0f;
 246              		.loc 1 127 5 is_stmt 1 view .LVU60
 247              		.loc 1 127 23 is_stmt 0 view .LVU61
 248 00d2 27EE067A 		vmul.f32	s14, s14, s12
 249              	.LVL19:
 250              		.loc 1 127 8 view .LVU62
 251 00d6 37EE277A 		vadd.f32	s14, s14, s15
 252              	.LVL20:
 128:../BLDCMotor/focmethod.c **** 
 129:../BLDCMotor/focmethod.c ****     /*-------------------------------------------------------------*/
 130:../BLDCMotor/focmethod.c ****     float Tcmp1 = 0.0f;
 253              		.loc 1 130 5 is_stmt 1 view .LVU63
 131:../BLDCMotor/focmethod.c ****     float Tcmp2 = 0.0f;
 254              		.loc 1 131 5 view .LVU64
 132:../BLDCMotor/focmethod.c ****     float Tcmp3 = 0.0f;
 255              		.loc 1 132 5 view .LVU65
 133:../BLDCMotor/focmethod.c ****     switch (sector) {
 256              		.loc 1 133 5 view .LVU66
 257 00da 013B     		subs	r3, r3, #1
 258              	.LVL21:
 259              		.loc 1 133 5 is_stmt 0 view .LVU67
 260 00dc 052B     		cmp	r3, #5
 261 00de 6DD8     		bhi	.L21
 262 00e0 DFE803F0 		tbb	[pc, r3]
 263              	.L23:
 264 00e4 7B       		.byte	(.L28-.L23)/2
 265 00e5 73       		.byte	(.L27-.L23)/2
 266 00e6 A5       		.byte	(.L26-.L23)/2
 267 00e7 AC       		.byte	(.L25-.L23)/2
 268 00e8 B5       		.byte	(.L24-.L23)/2
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 8


 269 00e9 BC       		.byte	(.L22-.L23)/2
 270              	.LVL22:
 271              		.p2align 1
 272              	.L16:
  92:../BLDCMotor/focmethod.c ****             s_vector = -(sqrt3 * ubeta * T_UDC);
 273              		.loc 1 92 13 is_stmt 1 view .LVU68
  92:../BLDCMotor/focmethod.c ****             s_vector = -(sqrt3 * ubeta * T_UDC);
 274              		.loc 1 92 30 is_stmt 0 view .LVU69
 275 00ea F7EE087A 		vmov.f32	s15, #1.5e+0
 276 00ee 20EE270A 		vmul.f32	s0, s0, s15
 277              	.LVL23:
  92:../BLDCMotor/focmethod.c ****             s_vector = -(sqrt3 * ubeta * T_UDC);
 278              		.loc 1 92 52 view .LVU70
 279 00f2 DFED607A 		vldr.32	s15, .L35+8
 280 00f6 60EEA77A 		vmul.f32	s15, s1, s15
  92:../BLDCMotor/focmethod.c ****             s_vector = -(sqrt3 * ubeta * T_UDC);
 281              		.loc 1 92 39 view .LVU71
 282 00fa 70EE277A 		vadd.f32	s15, s0, s15
  92:../BLDCMotor/focmethod.c ****             s_vector = -(sqrt3 * ubeta * T_UDC);
 283              		.loc 1 92 22 view .LVU72
 284 00fe 9FED5E7A 		vldr.32	s14, .L35+12
 285 0102 67EE877A 		vmul.f32	s15, s15, s14
 286              	.LVL24:
  93:../BLDCMotor/focmethod.c ****         break;
 287              		.loc 1 93 13 is_stmt 1 view .LVU73
  93:../BLDCMotor/focmethod.c ****         break;
 288              		.loc 1 93 32 is_stmt 0 view .LVU74
 289 0106 DFED596A 		vldr.32	s13, .L35
 290 010a 60EEA60A 		vmul.f32	s1, s1, s13
 291              	.LVL25:
  93:../BLDCMotor/focmethod.c ****         break;
 292              		.loc 1 93 22 view .LVU75
 293 010e 27EE607A 		vnmul.f32	s14, s14, s1
 294              	.LVL26:
  94:../BLDCMotor/focmethod.c **** 
 295              		.loc 1 94 9 is_stmt 1 view .LVU76
 296 0112 BFE7     		b	.L18
 297              	.LVL27:
 298              	.L15:
  97:../BLDCMotor/focmethod.c ****             s_vector = sqrt3 * ubeta * T_UDC;
 299              		.loc 1 97 13 view .LVU77
  97:../BLDCMotor/focmethod.c ****             s_vector = sqrt3 * ubeta * T_UDC;
 300              		.loc 1 97 33 is_stmt 0 view .LVU78
 301 0114 FFEE087A 		vmov.f32	s15, #-1.5e+0
 302 0118 20EE270A 		vmul.f32	s0, s0, s15
 303              	.LVL28:
  97:../BLDCMotor/focmethod.c ****             s_vector = sqrt3 * ubeta * T_UDC;
 304              		.loc 1 97 55 view .LVU79
 305 011c DFED557A 		vldr.32	s15, .L35+8
 306 0120 60EEA77A 		vmul.f32	s15, s1, s15
  97:../BLDCMotor/focmethod.c ****             s_vector = sqrt3 * ubeta * T_UDC;
 307              		.loc 1 97 42 view .LVU80
 308 0124 70EE277A 		vadd.f32	s15, s0, s15
  97:../BLDCMotor/focmethod.c ****             s_vector = sqrt3 * ubeta * T_UDC;
 309              		.loc 1 97 66 view .LVU81
 310 0128 9FED536A 		vldr.32	s12, .L35+12
  97:../BLDCMotor/focmethod.c ****             s_vector = sqrt3 * ubeta * T_UDC;
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 9


 311              		.loc 1 97 22 view .LVU82
 312 012c 66EE677A 		vnmul.f32	s15, s12, s15
 313              	.LVL29:
  98:../BLDCMotor/focmethod.c ****         break;
 314              		.loc 1 98 13 is_stmt 1 view .LVU83
  98:../BLDCMotor/focmethod.c ****         break;
 315              		.loc 1 98 30 is_stmt 0 view .LVU84
 316 0130 DFED4E6A 		vldr.32	s13, .L35
 317 0134 20EEA67A 		vmul.f32	s14, s1, s13
  98:../BLDCMotor/focmethod.c ****         break;
 318              		.loc 1 98 22 view .LVU85
 319 0138 27EE067A 		vmul.f32	s14, s14, s12
 320              	.LVL30:
  99:../BLDCMotor/focmethod.c **** 
 321              		.loc 1 99 9 is_stmt 1 view .LVU86
 322 013c AAE7     		b	.L18
 323              	.LVL31:
 324              	.L14:
 102:../BLDCMotor/focmethod.c ****             s_vector = (-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC;
 325              		.loc 1 102 13 view .LVU87
 102:../BLDCMotor/focmethod.c ****             s_vector = (-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC;
 326              		.loc 1 102 32 is_stmt 0 view .LVU88
 327 013e DFED4B7A 		vldr.32	s15, .L35
 328 0142 60EEA77A 		vmul.f32	s15, s1, s15
 102:../BLDCMotor/focmethod.c ****             s_vector = (-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC;
 329              		.loc 1 102 42 view .LVU89
 330 0146 9FED4C6A 		vldr.32	s12, .L35+12
 102:../BLDCMotor/focmethod.c ****             s_vector = (-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC;
 331              		.loc 1 102 22 view .LVU90
 332 014a 66EE677A 		vnmul.f32	s15, s12, s15
 333              	.LVL32:
 103:../BLDCMotor/focmethod.c ****         break;
 334              		.loc 1 103 13 is_stmt 1 view .LVU91
 103:../BLDCMotor/focmethod.c ****         break;
 335              		.loc 1 103 31 is_stmt 0 view .LVU92
 336 014e FFEE086A 		vmov.f32	s13, #-1.5e+0
 337 0152 20EE267A 		vmul.f32	s14, s0, s13
 103:../BLDCMotor/focmethod.c ****         break;
 338              		.loc 1 103 53 view .LVU93
 339 0156 DFED476A 		vldr.32	s13, .L35+8
 340 015a 60EEA60A 		vmul.f32	s1, s1, s13
 341              	.LVL33:
 103:../BLDCMotor/focmethod.c ****         break;
 342              		.loc 1 103 40 view .LVU94
 343 015e 37EE207A 		vadd.f32	s14, s14, s1
 103:../BLDCMotor/focmethod.c ****         break;
 344              		.loc 1 103 22 view .LVU95
 345 0162 27EE067A 		vmul.f32	s14, s14, s12
 346              	.LVL34:
 104:../BLDCMotor/focmethod.c **** 
 347              		.loc 1 104 9 is_stmt 1 view .LVU96
 348 0166 95E7     		b	.L18
 349              	.LVL35:
 350              	.L12:
 107:../BLDCMotor/focmethod.c ****             s_vector = -((1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 351              		.loc 1 107 13 view .LVU97
 107:../BLDCMotor/focmethod.c ****             s_vector = -((1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 10


 352              		.loc 1 107 30 is_stmt 0 view .LVU98
 353 0168 DFED407A 		vldr.32	s15, .L35
 354 016c 60EEA77A 		vmul.f32	s15, s1, s15
 107:../BLDCMotor/focmethod.c ****             s_vector = -((1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 355              		.loc 1 107 22 view .LVU99
 356 0170 DFED416A 		vldr.32	s13, .L35+12
 357 0174 67EEA67A 		vmul.f32	s15, s15, s13
 358              	.LVL36:
 108:../BLDCMotor/focmethod.c ****         break;
 359              		.loc 1 108 13 is_stmt 1 view .LVU100
 108:../BLDCMotor/focmethod.c ****         break;
 360              		.loc 1 108 32 is_stmt 0 view .LVU101
 361 0178 B7EE086A 		vmov.f32	s12, #1.5e+0
 362 017c 20EE060A 		vmul.f32	s0, s0, s12
 363              	.LVL37:
 108:../BLDCMotor/focmethod.c ****         break;
 364              		.loc 1 108 54 view .LVU102
 365 0180 9FED3C6A 		vldr.32	s12, .L35+8
 366 0184 20EE867A 		vmul.f32	s14, s1, s12
 108:../BLDCMotor/focmethod.c ****         break;
 367              		.loc 1 108 41 view .LVU103
 368 0188 30EE077A 		vadd.f32	s14, s0, s14
 108:../BLDCMotor/focmethod.c ****         break;
 369              		.loc 1 108 22 view .LVU104
 370 018c 26EEC77A 		vnmul.f32	s14, s13, s14
 371              	.LVL38:
 109:../BLDCMotor/focmethod.c **** 
 372              		.loc 1 109 9 is_stmt 1 view .LVU105
 373 0190 80E7     		b	.L18
 374              	.LVL39:
 375              	.L11:
 112:../BLDCMotor/focmethod.c ****             s_vector = -((-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 376              		.loc 1 112 13 view .LVU106
 112:../BLDCMotor/focmethod.c ****             s_vector = -((-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 377              		.loc 1 112 54 is_stmt 0 view .LVU107
 378 0192 9FED387A 		vldr.32	s14, .L35+8
 379 0196 20EE877A 		vmul.f32	s14, s1, s14
 112:../BLDCMotor/focmethod.c ****             s_vector = -((-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 380              		.loc 1 112 41 view .LVU108
 381 019a F7EE086A 		vmov.f32	s13, #1.5e+0
 382 019e F0EE477A 		vmov.f32	s15, s14
 383 01a2 40EE267A 		vmla.f32	s15, s0, s13
 112:../BLDCMotor/focmethod.c ****             s_vector = -((-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 384              		.loc 1 112 65 view .LVU109
 385 01a6 DFED346A 		vldr.32	s13, .L35+12
 112:../BLDCMotor/focmethod.c ****             s_vector = -((-1.5F * ualpha + sqrt3/2.0f * ubeta) * T_UDC);
 386              		.loc 1 112 22 view .LVU110
 387 01aa 66EEE77A 		vnmul.f32	s15, s13, s15
 388              	.LVL40:
 113:../BLDCMotor/focmethod.c ****         break;
 389              		.loc 1 113 13 is_stmt 1 view .LVU111
 113:../BLDCMotor/focmethod.c ****         break;
 390              		.loc 1 113 42 is_stmt 0 view .LVU112
 391 01ae BFEE086A 		vmov.f32	s12, #-1.5e+0
 392 01b2 00EE067A 		vmla.f32	s14, s0, s12
 113:../BLDCMotor/focmethod.c ****         break;
 393              		.loc 1 113 22 view .LVU113
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 11


 394 01b6 26EEC77A 		vnmul.f32	s14, s13, s14
 395              	.LVL41:
 114:../BLDCMotor/focmethod.c ****     }
 396              		.loc 1 114 9 is_stmt 1 view .LVU114
 397 01ba 6BE7     		b	.L18
 398              	.LVL42:
 399              	.L21:
 400              		.loc 1 133 5 is_stmt 0 view .LVU115
 401 01bc 9FED307A 		vldr.32	s14, .L35+20
 402              	.LVL43:
 403              		.loc 1 133 5 view .LVU116
 404 01c0 F0EE476A 		vmov.f32	s13, s14
 405              	.LVL44:
 406              		.loc 1 133 5 view .LVU117
 407 01c4 F0EE477A 		vmov.f32	s15, s14
 408              	.LVL45:
 409              		.loc 1 133 5 view .LVU118
 410 01c8 07E0     		b	.L28
 411              	.LVL46:
 412              	.L27:
 134:../BLDCMotor/focmethod.c ****         case 1:Tcmp1 = Tb;Tcmp2 = Ta;Tcmp3 = Tc;break;
 135:../BLDCMotor/focmethod.c ****         case 2:Tcmp1 = Ta;Tcmp2 = Tc;Tcmp3 = Tb;break;
 413              		.loc 1 135 16 is_stmt 1 view .LVU119
 414              		.loc 1 135 27 view .LVU120
 415              		.loc 1 135 38 view .LVU121
 416              		.loc 1 135 49 view .LVU122
 417              		.loc 1 135 9 is_stmt 0 view .LVU123
 418 01ca 17EE903A 		vmov	r3, s15
 419              		.loc 1 135 22 view .LVU124
 420 01ce F0EE667A 		vmov.f32	s15, s13
 421              	.LVL47:
 422              		.loc 1 135 33 view .LVU125
 423 01d2 F0EE476A 		vmov.f32	s13, s14
 424              	.LVL48:
 425              		.loc 1 135 44 view .LVU126
 426 01d6 07EE103A 		vmov	s14, r3
 427              	.LVL49:
 428              	.L28:
 136:../BLDCMotor/focmethod.c ****         case 3:Tcmp1 = Ta;Tcmp2 = Tb;Tcmp3 = Tc;break;
 137:../BLDCMotor/focmethod.c ****         case 4:Tcmp1 = Tc;Tcmp2 = Tb;Tcmp3 = Ta;break;
 138:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 139:../BLDCMotor/focmethod.c ****         case 6:Tcmp1 = Tb;Tcmp2 = Tc;Tcmp3 = Ta;break;
 140:../BLDCMotor/focmethod.c ****     }
 141:../BLDCMotor/focmethod.c **** 
 142:../BLDCMotor/focmethod.c ****     /*----------------------------------------------------*/
 143:../BLDCMotor/focmethod.c ****     float duty_a,duty_b,duty_c;
 429              		.loc 1 143 5 is_stmt 1 view .LVU127
 144:../BLDCMotor/focmethod.c ****     duty_a =(T_PWM - Tcmp1*2.0f )*F_PWM;
 430              		.loc 1 144 5 view .LVU128
 431              		.loc 1 144 27 is_stmt 0 view .LVU129
 432 01da 77EEA77A 		vadd.f32	s15, s15, s15
 433              	.LVL50:
 434              		.loc 1 144 20 view .LVU130
 435 01de 9FED276A 		vldr.32	s12, .L35+16
 436              		.loc 1 144 20 view .LVU131
 437 01e2 76EE677A 		vsub.f32	s15, s12, s15
 438              		.loc 1 144 12 view .LVU132
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 12


 439 01e6 DFED275A 		vldr.32	s11, .L35+24
 440 01ea 67EEA57A 		vmul.f32	s15, s15, s11
 441              	.LVL51:
 145:../BLDCMotor/focmethod.c ****     duty_b =(T_PWM - Tcmp2*2.0f )*F_PWM;
 442              		.loc 1 145 5 is_stmt 1 view .LVU133
 443              		.loc 1 145 27 is_stmt 0 view .LVU134
 444 01ee 76EEA66A 		vadd.f32	s13, s13, s13
 445              	.LVL52:
 446              		.loc 1 145 20 view .LVU135
 447 01f2 76EE666A 		vsub.f32	s13, s12, s13
 448              		.loc 1 145 12 view .LVU136
 449 01f6 66EEA56A 		vmul.f32	s13, s13, s11
 450              	.LVL53:
 146:../BLDCMotor/focmethod.c ****     duty_c =(T_PWM - Tcmp3*2.0f )*F_PWM;
 451              		.loc 1 146 5 is_stmt 1 view .LVU137
 452              		.loc 1 146 27 is_stmt 0 view .LVU138
 453 01fa 37EE077A 		vadd.f32	s14, s14, s14
 454              	.LVL54:
 455              		.loc 1 146 20 view .LVU139
 456 01fe 36EE477A 		vsub.f32	s14, s12, s14
 457              		.loc 1 146 12 view .LVU140
 458 0202 27EE257A 		vmul.f32	s14, s14, s11
 459              	.LVL55:
 147:../BLDCMotor/focmethod.c **** 
 148:../BLDCMotor/focmethod.c ****     // duty_a =(Tcmp1)/T_PWM;
 149:../BLDCMotor/focmethod.c ****     // duty_b =(Tcmp2)/T_PWM;
 150:../BLDCMotor/focmethod.c ****     // duty_c =(Tcmp3)/T_PWM;
 151:../BLDCMotor/focmethod.c **** 
 152:../BLDCMotor/focmethod.c ****     duty_t sg_duty;
 460              		.loc 1 152 5 is_stmt 1 view .LVU141
 153:../BLDCMotor/focmethod.c ****     sg_duty._a = duty_a;
 461              		.loc 1 153 5 view .LVU142
 462              		.loc 1 153 16 is_stmt 0 view .LVU143
 463 0206 CDED047A 		vstr.32	s15, [sp, #16]
 154:../BLDCMotor/focmethod.c ****     sg_duty._b = duty_b;
 464              		.loc 1 154 5 is_stmt 1 view .LVU144
 465              		.loc 1 154 16 is_stmt 0 view .LVU145
 466 020a CDED056A 		vstr.32	s13, [sp, #20]
 155:../BLDCMotor/focmethod.c ****     sg_duty._c = duty_c;
 467              		.loc 1 155 5 is_stmt 1 view .LVU146
 468              		.loc 1 155 16 is_stmt 0 view .LVU147
 469 020e 8DED067A 		vstr.32	s14, [sp, #24]
 156:../BLDCMotor/focmethod.c **** 
 157:../BLDCMotor/focmethod.c ****     return sg_duty;
 470              		.loc 1 157 5 is_stmt 1 view .LVU148
 471              		.loc 1 157 12 is_stmt 0 view .LVU149
 472 0212 04AB     		add	r3, sp, #16
 473 0214 93E80700 		ldm	r3, {r0, r1, r2}
 474 0218 0AAB     		add	r3, sp, #40
 475 021a 03E90700 		stmdb	r3, {r0, r1, r2}
 158:../BLDCMotor/focmethod.c **** }
 476              		.loc 1 158 1 view .LVU150
 477 021e 9DED070A 		vldr.32	s0, [sp, #28]
 478 0222 DDED080A 		vldr.32	s1, [sp, #32]
 479 0226 9DED091A 		vldr.32	s2, [sp, #36]
 480 022a 0AB0     		add	sp, sp, #40
 481              	.LCFI4:
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 13


 482              		.cfi_remember_state
 483              		.cfi_def_cfa_offset 0
 484              		@ sp needed
 485 022c 7047     		bx	lr
 486              	.LVL56:
 487              	.L26:
 488              	.LCFI5:
 489              		.cfi_restore_state
 136:../BLDCMotor/focmethod.c ****         case 4:Tcmp1 = Tc;Tcmp2 = Tb;Tcmp3 = Ta;break;
 490              		.loc 1 136 16 is_stmt 1 view .LVU151
 136:../BLDCMotor/focmethod.c ****         case 4:Tcmp1 = Tc;Tcmp2 = Tb;Tcmp3 = Ta;break;
 491              		.loc 1 136 27 view .LVU152
 136:../BLDCMotor/focmethod.c ****         case 4:Tcmp1 = Tc;Tcmp2 = Tb;Tcmp3 = Ta;break;
 492              		.loc 1 136 38 view .LVU153
 136:../BLDCMotor/focmethod.c ****         case 4:Tcmp1 = Tc;Tcmp2 = Tb;Tcmp3 = Ta;break;
 493              		.loc 1 136 49 view .LVU154
 136:../BLDCMotor/focmethod.c ****         case 4:Tcmp1 = Tc;Tcmp2 = Tb;Tcmp3 = Ta;break;
 494              		.loc 1 136 9 is_stmt 0 view .LVU155
 495 022e 17EE903A 		vmov	r3, s15
 136:../BLDCMotor/focmethod.c ****         case 4:Tcmp1 = Tc;Tcmp2 = Tb;Tcmp3 = Ta;break;
 496              		.loc 1 136 22 view .LVU156
 497 0232 F0EE667A 		vmov.f32	s15, s13
 498              	.LVL57:
 136:../BLDCMotor/focmethod.c ****         case 4:Tcmp1 = Tc;Tcmp2 = Tb;Tcmp3 = Ta;break;
 499              		.loc 1 136 33 view .LVU157
 500 0236 06EE903A 		vmov	s13, r3
 501              	.LVL58:
 136:../BLDCMotor/focmethod.c ****         case 4:Tcmp1 = Tc;Tcmp2 = Tb;Tcmp3 = Ta;break;
 502              		.loc 1 136 9 view .LVU158
 503 023a CEE7     		b	.L28
 504              	.LVL59:
 505              	.L25:
 137:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 506              		.loc 1 137 16 is_stmt 1 view .LVU159
 137:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 507              		.loc 1 137 27 view .LVU160
 137:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 508              		.loc 1 137 38 view .LVU161
 137:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 509              		.loc 1 137 49 view .LVU162
 137:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 510              		.loc 1 137 9 is_stmt 0 view .LVU163
 511 023c 17EE903A 		vmov	r3, s15
 137:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 512              		.loc 1 137 22 view .LVU164
 513 0240 F0EE477A 		vmov.f32	s15, s14
 514              	.LVL60:
 137:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 515              		.loc 1 137 44 view .LVU165
 516 0244 B0EE667A 		vmov.f32	s14, s13
 517              	.LVL61:
 137:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 518              		.loc 1 137 33 view .LVU166
 519 0248 06EE903A 		vmov	s13, r3
 520              	.LVL62:
 137:../BLDCMotor/focmethod.c ****         case 5:Tcmp1 = Tc;Tcmp2 = Ta;Tcmp3 = Tb;break;
 521              		.loc 1 137 9 view .LVU167
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 14


 522 024c C5E7     		b	.L28
 523              	.LVL63:
 524              	.L24:
 138:../BLDCMotor/focmethod.c ****         case 6:Tcmp1 = Tb;Tcmp2 = Tc;Tcmp3 = Ta;break;
 525              		.loc 1 138 16 is_stmt 1 view .LVU168
 138:../BLDCMotor/focmethod.c ****         case 6:Tcmp1 = Tb;Tcmp2 = Tc;Tcmp3 = Ta;break;
 526              		.loc 1 138 27 view .LVU169
 138:../BLDCMotor/focmethod.c ****         case 6:Tcmp1 = Tb;Tcmp2 = Tc;Tcmp3 = Ta;break;
 527              		.loc 1 138 38 view .LVU170
 138:../BLDCMotor/focmethod.c ****         case 6:Tcmp1 = Tb;Tcmp2 = Tc;Tcmp3 = Ta;break;
 528              		.loc 1 138 49 view .LVU171
 138:../BLDCMotor/focmethod.c ****         case 6:Tcmp1 = Tb;Tcmp2 = Tc;Tcmp3 = Ta;break;
 529              		.loc 1 138 9 is_stmt 0 view .LVU172
 530 024e 17EE903A 		vmov	r3, s15
 138:../BLDCMotor/focmethod.c ****         case 6:Tcmp1 = Tb;Tcmp2 = Tc;Tcmp3 = Ta;break;
 531              		.loc 1 138 22 view .LVU173
 532 0252 F0EE477A 		vmov.f32	s15, s14
 533              	.LVL64:
 138:../BLDCMotor/focmethod.c ****         case 6:Tcmp1 = Tb;Tcmp2 = Tc;Tcmp3 = Ta;break;
 534              		.loc 1 138 44 view .LVU174
 535 0256 07EE103A 		vmov	s14, r3
 536              	.LVL65:
 138:../BLDCMotor/focmethod.c ****         case 6:Tcmp1 = Tb;Tcmp2 = Tc;Tcmp3 = Ta;break;
 537              		.loc 1 138 9 view .LVU175
 538 025a BEE7     		b	.L28
 539              	.LVL66:
 540              	.L22:
 139:../BLDCMotor/focmethod.c ****     }
 541              		.loc 1 139 16 is_stmt 1 view .LVU176
 139:../BLDCMotor/focmethod.c ****     }
 542              		.loc 1 139 27 view .LVU177
 139:../BLDCMotor/focmethod.c ****     }
 543              		.loc 1 139 38 view .LVU178
 139:../BLDCMotor/focmethod.c ****     }
 544              		.loc 1 139 49 view .LVU179
 139:../BLDCMotor/focmethod.c ****     }
 545              		.loc 1 139 9 is_stmt 0 view .LVU180
 546 025c 16EE903A 		vmov	r3, s13
 139:../BLDCMotor/focmethod.c ****     }
 547              		.loc 1 139 33 view .LVU181
 548 0260 F0EE476A 		vmov.f32	s13, s14
 549              	.LVL67:
 139:../BLDCMotor/focmethod.c ****     }
 550              		.loc 1 139 44 view .LVU182
 551 0264 07EE103A 		vmov	s14, r3
 552              	.LVL68:
 139:../BLDCMotor/focmethod.c ****     }
 553              		.loc 1 139 9 view .LVU183
 554 0268 B7E7     		b	.L28
 555              	.L36:
 556 026a 00BF     		.align	2
 557              	.L35:
 558 026c D0B3DD3F 		.word	1071494096
 559 0270 D0B3DDBF 		.word	-1075989552
 560 0274 D0B35D3F 		.word	1063105488
 561 0278 65CF8B36 		.word	915132261
 562 027c 17B7D138 		.word	953267991
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 15


 563 0280 00000000 		.word	0
 564 0284 00401C46 		.word	1176256512
 565              		.cfi_endproc
 566              	.LFE331:
 568              		.section	.text._3s_2s,"ax",%progbits
 569              		.align	1
 570              		.global	_3s_2s
 571              		.syntax unified
 572              		.thumb
 573              		.thumb_func
 575              	_3s_2s:
 576              	.LVL69:
 577              	.LFB332:
 159:../BLDCMotor/focmethod.c **** 
 160:../BLDCMotor/focmethod.c **** 
 161:../BLDCMotor/focmethod.c **** /*---------------Clark�任------------------------*/
 162:../BLDCMotor/focmethod.c ****  void _3s_2s(abc_t i_abc,alpbet_t *alp_bet)
 163:../BLDCMotor/focmethod.c **** {
 578              		.loc 1 163 1 is_stmt 1 view -0
 579              		.cfi_startproc
 580              		@ args = 0, pretend = 0, frame = 16
 581              		@ frame_needed = 0, uses_anonymous_args = 0
 582              		@ link register save eliminated.
 583              		.loc 1 163 1 is_stmt 0 view .LVU185
 584 0000 84B0     		sub	sp, sp, #16
 585              	.LCFI6:
 586              		.cfi_def_cfa_offset 16
 587 0002 8DED010A 		vstr.32	s0, [sp, #4]
 588 0006 CDED020A 		vstr.32	s1, [sp, #8]
 589 000a 8DED031A 		vstr.32	s2, [sp, #12]
 164:../BLDCMotor/focmethod.c ****     // alpbet_t i_alphabeta;
 165:../BLDCMotor/focmethod.c ****     // alp_bet->alpha = 2.0f/3.0f*(i_abc.a - 1.0f/2.0f*i_abc.b - 1.0f/2.0f*i_abc.c);
 166:../BLDCMotor/focmethod.c ****     // alp_bet->beta =  2.0f/3.0f*(sqrt3_2*i_abc.b - sqrt3_2*i_abc.c);
 167:../BLDCMotor/focmethod.c ****     alp_bet->alpha = i_abc.a;
 590              		.loc 1 167 5 is_stmt 1 view .LVU186
 591              		.loc 1 167 20 is_stmt 0 view .LVU187
 592 000e 80ED000A 		vstr.32	s0, [r0]
 168:../BLDCMotor/focmethod.c ****     alp_bet->beta = sqrt3/3.0f * (i_abc.b - i_abc.c);
 593              		.loc 1 168 5 is_stmt 1 view .LVU188
 594              		.loc 1 168 43 is_stmt 0 view .LVU189
 595 0012 70EEC10A 		vsub.f32	s1, s1, s2
 596              		.loc 1 168 32 view .LVU190
 597 0016 9FED041A 		vldr.32	s2, .L39
 598 001a 60EE810A 		vmul.f32	s1, s1, s2
 599              		.loc 1 168 19 view .LVU191
 600 001e C0ED010A 		vstr.32	s1, [r0, #4]
 169:../BLDCMotor/focmethod.c **** }
 601              		.loc 1 169 1 view .LVU192
 602 0022 04B0     		add	sp, sp, #16
 603              	.LCFI7:
 604              		.cfi_def_cfa_offset 0
 605              		@ sp needed
 606 0024 7047     		bx	lr
 607              	.L40:
 608 0026 00BF     		.align	2
 609              	.L39:
 610 0028 35CD133F 		.word	1058262325
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 16


 611              		.cfi_endproc
 612              	.LFE332:
 614              		.section	.text._2s_2r,"ax",%progbits
 615              		.align	1
 616              		.global	_2s_2r
 617              		.syntax unified
 618              		.thumb
 619              		.thumb_func
 621              	_2s_2r:
 622              	.LVL70:
 623              	.LFB333:
 170:../BLDCMotor/focmethod.c **** /*-------------------Park�任--------------------------------*/
 171:../BLDCMotor/focmethod.c ****  void _2s_2r(alpbet_t i_alphabeta,float theta,dq_t *dq)
 172:../BLDCMotor/focmethod.c **** {
 624              		.loc 1 172 1 is_stmt 1 view -0
 625              		.cfi_startproc
 626              		@ args = 0, pretend = 0, frame = 16
 627              		@ frame_needed = 0, uses_anonymous_args = 0
 628              		.loc 1 172 1 is_stmt 0 view .LVU194
 629 0000 10B5     		push	{r4, lr}
 630              	.LCFI8:
 631              		.cfi_def_cfa_offset 8
 632              		.cfi_offset 4, -8
 633              		.cfi_offset 14, -4
 634 0002 2DED068B 		vpush.64	{d8, d9, d10}
 635              	.LCFI9:
 636              		.cfi_def_cfa_offset 32
 637              		.cfi_offset 80, -32
 638              		.cfi_offset 81, -28
 639              		.cfi_offset 82, -24
 640              		.cfi_offset 83, -20
 641              		.cfi_offset 84, -16
 642              		.cfi_offset 85, -12
 643 0006 84B0     		sub	sp, sp, #16
 644              	.LCFI10:
 645              		.cfi_def_cfa_offset 48
 646 0008 B0EE409A 		vmov.f32	s18, s0
 647 000c F0EE608A 		vmov.f32	s17, s1
 648 0010 F0EE619A 		vmov.f32	s19, s3
 649 0014 0446     		mov	r4, r0
 650 0016 8DED010A 		vstr.32	s0, [sp, #4]
 651 001a CDED020A 		vstr.32	s1, [sp, #8]
 652 001e 8DED031A 		vstr.32	s2, [sp, #12]
 173:../BLDCMotor/focmethod.c ****     dq->d =  cosf(theta)*i_alphabeta.alpha + sinf(theta)*i_alphabeta.beta;
 653              		.loc 1 173 5 is_stmt 1 view .LVU195
 654              		.loc 1 173 14 is_stmt 0 view .LVU196
 655 0022 B0EE610A 		vmov.f32	s0, s3
 656 0026 FFF7FEFF 		bl	cosf
 657              	.LVL71:
 658              		.loc 1 173 14 view .LVU197
 659 002a B0EE408A 		vmov.f32	s16, s0
 660              		.loc 1 173 25 view .LVU198
 661 002e 20EE09AA 		vmul.f32	s20, s0, s18
 662              		.loc 1 173 46 view .LVU199
 663 0032 B0EE690A 		vmov.f32	s0, s19
 664 0036 FFF7FEFF 		bl	sinf
 665              	.LVL72:
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 17


 666              		.loc 1 173 57 view .LVU200
 667 003a 60EE287A 		vmul.f32	s15, s0, s17
 668              		.loc 1 173 44 view .LVU201
 669 003e 3AEE27AA 		vadd.f32	s20, s20, s15
 670              		.loc 1 173 11 view .LVU202
 671 0042 84ED00AA 		vstr.32	s20, [r4]
 174:../BLDCMotor/focmethod.c ****     dq->q = -sinf(theta)*i_alphabeta.alpha + cosf(theta)*i_alphabeta.beta;    
 672              		.loc 1 174 5 is_stmt 1 view .LVU203
 673              		.loc 1 174 25 is_stmt 0 view .LVU204
 674 0046 20EE490A 		vnmul.f32	s0, s0, s18
 675              		.loc 1 174 57 view .LVU205
 676 004a 28EE288A 		vmul.f32	s16, s16, s17
 677              		.loc 1 174 44 view .LVU206
 678 004e 30EE080A 		vadd.f32	s0, s0, s16
 679              		.loc 1 174 11 view .LVU207
 680 0052 84ED010A 		vstr.32	s0, [r4, #4]
 175:../BLDCMotor/focmethod.c **** }
 681              		.loc 1 175 1 view .LVU208
 682 0056 04B0     		add	sp, sp, #16
 683              	.LCFI11:
 684              		.cfi_def_cfa_offset 32
 685              		@ sp needed
 686 0058 BDEC068B 		vldm	sp!, {d8-d10}
 687              	.LCFI12:
 688              		.cfi_restore 84
 689              		.cfi_restore 85
 690              		.cfi_restore 82
 691              		.cfi_restore 83
 692              		.cfi_restore 80
 693              		.cfi_restore 81
 694              		.cfi_def_cfa_offset 8
 695 005c 10BD     		pop	{r4, pc}
 696              		.loc 1 175 1 view .LVU209
 697              		.cfi_endproc
 698              	.LFE333:
 700              		.section	.text._2r_2s,"ax",%progbits
 701              		.align	1
 702              		.global	_2r_2s
 703              		.syntax unified
 704              		.thumb
 705              		.thumb_func
 707              	_2r_2s:
 708              	.LVL73:
 709              	.LFB334:
 176:../BLDCMotor/focmethod.c **** /*--------------��PARK�任------------------*/
 177:../BLDCMotor/focmethod.c ****  alpbet_t _2r_2s(dq_t i_dq,float theta)
 178:../BLDCMotor/focmethod.c **** {
 710              		.loc 1 178 1 is_stmt 1 view -0
 711              		.cfi_startproc
 712              		@ args = 0, pretend = 0, frame = 56
 713              		@ frame_needed = 0, uses_anonymous_args = 0
 714              		.loc 1 178 1 is_stmt 0 view .LVU211
 715 0000 00B5     		push	{lr}
 716              	.LCFI13:
 717              		.cfi_def_cfa_offset 4
 718              		.cfi_offset 14, -4
 719 0002 2DED068B 		vpush.64	{d8, d9, d10}
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 18


 720              	.LCFI14:
 721              		.cfi_def_cfa_offset 28
 722              		.cfi_offset 80, -28
 723              		.cfi_offset 81, -24
 724              		.cfi_offset 82, -20
 725              		.cfi_offset 83, -16
 726              		.cfi_offset 84, -12
 727              		.cfi_offset 85, -8
 728 0006 8FB0     		sub	sp, sp, #60
 729              	.LCFI15:
 730              		.cfi_def_cfa_offset 88
 731 0008 B0EE408A 		vmov.f32	s16, s0
 732 000c B0EE609A 		vmov.f32	s18, s1
 733 0010 F0EE619A 		vmov.f32	s19, s3
 734 0014 8DED050A 		vstr.32	s0, [sp, #20]
 735 0018 CDED060A 		vstr.32	s1, [sp, #24]
 736 001c 8DED071A 		vstr.32	s2, [sp, #28]
 179:../BLDCMotor/focmethod.c ****     alpbet_t i_alphabeta;
 737              		.loc 1 179 5 is_stmt 1 view .LVU212
 180:../BLDCMotor/focmethod.c ****     i_alphabeta.alpha = i_dq.d * cosf(theta) -  i_dq.q * sinf(theta);
 738              		.loc 1 180 5 view .LVU213
 739              		.loc 1 180 34 is_stmt 0 view .LVU214
 740 0020 B0EE610A 		vmov.f32	s0, s3
 741 0024 FFF7FEFF 		bl	cosf
 742              	.LVL74:
 743              		.loc 1 180 34 view .LVU215
 744 0028 F0EE408A 		vmov.f32	s17, s0
 745              		.loc 1 180 32 view .LVU216
 746 002c 28EE00AA 		vmul.f32	s20, s16, s0
 747              		.loc 1 180 58 view .LVU217
 748 0030 B0EE690A 		vmov.f32	s0, s19
 749 0034 FFF7FEFF 		bl	sinf
 750              	.LVL75:
 751              		.loc 1 180 56 view .LVU218
 752 0038 69EE007A 		vmul.f32	s15, s18, s0
 753              		.loc 1 180 46 view .LVU219
 754 003c 3AEE67AA 		vsub.f32	s20, s20, s15
 755              		.loc 1 180 23 view .LVU220
 756 0040 8DED08AA 		vstr.32	s20, [sp, #32]
 181:../BLDCMotor/focmethod.c ****     i_alphabeta.beta = i_dq.d * sinf(theta) +  i_dq.q * cosf(theta);
 757              		.loc 1 181 5 is_stmt 1 view .LVU221
 758              		.loc 1 181 31 is_stmt 0 view .LVU222
 759 0044 28EE008A 		vmul.f32	s16, s16, s0
 760              		.loc 1 181 55 view .LVU223
 761 0048 68EE898A 		vmul.f32	s17, s17, s18
 762              		.loc 1 181 45 view .LVU224
 763 004c 38EE288A 		vadd.f32	s16, s16, s17
 764              		.loc 1 181 22 view .LVU225
 765 0050 8DED098A 		vstr.32	s16, [sp, #36]
 182:../BLDCMotor/focmethod.c ****     return i_alphabeta;
 766              		.loc 1 182 5 is_stmt 1 view .LVU226
 767              		.loc 1 182 12 is_stmt 0 view .LVU227
 768 0054 08AB     		add	r3, sp, #32
 769 0056 93E80700 		ldm	r3, {r0, r1, r2}
 770 005a 0EAB     		add	r3, sp, #56
 771 005c 03E90700 		stmdb	r3, {r0, r1, r2}
 183:../BLDCMotor/focmethod.c **** }
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 19


 772              		.loc 1 183 1 view .LVU228
 773 0060 9DED0B0A 		vldr.32	s0, [sp, #44]
 774 0064 DDED0C0A 		vldr.32	s1, [sp, #48]
 775 0068 9DED0D1A 		vldr.32	s2, [sp, #52]
 776 006c 0FB0     		add	sp, sp, #60
 777              	.LCFI16:
 778              		.cfi_def_cfa_offset 28
 779              		@ sp needed
 780 006e BDEC068B 		vldm	sp!, {d8-d10}
 781              	.LCFI17:
 782              		.cfi_restore 84
 783              		.cfi_restore 85
 784              		.cfi_restore 82
 785              		.cfi_restore 83
 786              		.cfi_restore 80
 787              		.cfi_restore 81
 788              		.cfi_def_cfa_offset 4
 789 0072 5DF804FB 		ldr	pc, [sp], #4
 790              		.cfi_endproc
 791              	.LFE334:
 793              		.global	__aeabi_f2d
 794              		.global	__aeabi_d2f
 795              		.section	.text._normalize_angle,"ax",%progbits
 796              		.align	1
 797              		.global	_normalize_angle
 798              		.syntax unified
 799              		.thumb
 800              		.thumb_func
 802              	_normalize_angle:
 803              	.LVL76:
 804              	.LFB335:
 184:../BLDCMotor/focmethod.c **** 
 185:../BLDCMotor/focmethod.c **** /*-----------------------------------------*/
 186:../BLDCMotor/focmethod.c **** #if 0
 187:../BLDCMotor/focmethod.c **** static dq_t _3s_2r(abc_t i_abc, float theta)
 188:../BLDCMotor/focmethod.c **** {
 189:../BLDCMotor/focmethod.c ****     dq_t i_dq;
 190:../BLDCMotor/focmethod.c ****     float alpha,beta,rotor_theta;
 191:../BLDCMotor/focmethod.c ****     float ia, ib;
 192:../BLDCMotor/focmethod.c ****     ia = i_abc.a;
 193:../BLDCMotor/focmethod.c ****     ib = i_abc.b;
 194:../BLDCMotor/focmethod.c ****     rotor_theta =  theta;
 195:../BLDCMotor/focmethod.c ****     alpha = ia;
 196:../BLDCMotor/focmethod.c ****     beta = (2.0f*ib + ia)*0.577350269F;
 197:../BLDCMotor/focmethod.c ****     i_dq.d = alpha*cosf(rotor_theta) + beta*sinf(rotor_theta);
 198:../BLDCMotor/focmethod.c ****     i_dq.q = beta*cosf(rotor_theta) - alpha*sinf(rotor_theta);
 199:../BLDCMotor/focmethod.c ****     i_dq.theta = rotor_theta;
 200:../BLDCMotor/focmethod.c ****     return i_dq;
 201:../BLDCMotor/focmethod.c **** }
 202:../BLDCMotor/focmethod.c **** #endif
 203:../BLDCMotor/focmethod.c **** 
 204:../BLDCMotor/focmethod.c **** float _normalize_angle(float angle)
 205:../BLDCMotor/focmethod.c **** {
 805              		.loc 1 205 1 is_stmt 1 view -0
 806              		.cfi_startproc
 807              		@ args = 0, pretend = 0, frame = 0
 808              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 20


 809              		.loc 1 205 1 is_stmt 0 view .LVU230
 810 0000 08B5     		push	{r3, lr}
 811              	.LCFI18:
 812              		.cfi_def_cfa_offset 8
 813              		.cfi_offset 3, -8
 814              		.cfi_offset 14, -4
 815 0002 10EE100A 		vmov	r0, s0
 206:../BLDCMotor/focmethod.c ****   float a = fmod(angle, 2.0f*PI);   //ȡ������������ڹ�һ�����
 816              		.loc 1 206 3 is_stmt 1 view .LVU231
 817              		.loc 1 206 13 is_stmt 0 view .LVU232
 818 0006 FFF7FEFF 		bl	__aeabi_f2d
 819              	.LVL77:
 820              		.loc 1 206 13 view .LVU233
 821 000a 9FED0B1B 		vldr.64	d1, .L49
 822 000e 41EC100B 		vmov	d0, r0, r1
 823 0012 FFF7FEFF 		bl	fmod
 824              	.LVL78:
 825 0016 51EC100B 		vmov	r0, r1, d0
 826              		.loc 1 206 9 view .LVU234
 827 001a FFF7FEFF 		bl	__aeabi_d2f
 828              	.LVL79:
 829 001e 00EE100A 		vmov	s0, r0
 830              	.LVL80:
 207:../BLDCMotor/focmethod.c ****   return a >= 0 ? a : (a + 2.0f*PI);  
 831              		.loc 1 207 3 is_stmt 1 view .LVU235
 832              		.loc 1 207 21 is_stmt 0 view .LVU236
 833 0022 B5EEC00A 		vcmpe.f32	s0, #0
 834 0026 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 835 002a 00DB     		blt	.L48
 836              	.L45:
 208:../BLDCMotor/focmethod.c **** }
 837              		.loc 1 208 1 view .LVU237
 838 002c 08BD     		pop	{r3, pc}
 839              	.L48:
 207:../BLDCMotor/focmethod.c ****   return a >= 0 ? a : (a + 2.0f*PI);  
 840              		.loc 1 207 21 discriminator 2 view .LVU238
 841 002e DFED047A 		vldr.32	s15, .L49+8
 842 0032 30EE270A 		vadd.f32	s0, s0, s15
 843 0036 F9E7     		b	.L45
 844              	.L50:
 845              		.align	3
 846              	.L49:
 847 0038 00000040 		.word	1073741824
 848 003c FB211940 		.word	1075388923
 849 0040 DA0FC940 		.word	1086918618
 850              		.cfi_endproc
 851              	.LFE335:
 853              		.section	.text.foc_curloopcale,"ax",%progbits
 854              		.align	1
 855              		.global	foc_curloopcale
 856              		.syntax unified
 857              		.thumb
 858              		.thumb_func
 860              	foc_curloopcale:
 861              	.LVL81:
 862              	.LFB330:
  23:../BLDCMotor/focmethod.c ****     dq_t i_dq;
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 21


 863              		.loc 1 23 1 is_stmt 1 view -0
 864              		.cfi_startproc
 865              		@ args = 0, pretend = 0, frame = 104
 866              		@ frame_needed = 0, uses_anonymous_args = 0
  23:../BLDCMotor/focmethod.c ****     dq_t i_dq;
 867              		.loc 1 23 1 is_stmt 0 view .LVU240
 868 0000 00B5     		push	{lr}
 869              	.LCFI19:
 870              		.cfi_def_cfa_offset 4
 871              		.cfi_offset 14, -4
 872 0002 2DED048B 		vpush.64	{d8, d9}
 873              	.LCFI20:
 874              		.cfi_def_cfa_offset 20
 875              		.cfi_offset 80, -20
 876              		.cfi_offset 81, -16
 877              		.cfi_offset 82, -12
 878              		.cfi_offset 83, -8
 879 0006 9BB0     		sub	sp, sp, #108
 880              	.LCFI21:
 881              		.cfi_def_cfa_offset 128
 882 0008 B0EE618A 		vmov.f32	s16, s3
 883 000c 8DED050A 		vstr.32	s0, [sp, #20]
 884 0010 CDED060A 		vstr.32	s1, [sp, #24]
 885 0014 8DED071A 		vstr.32	s2, [sp, #28]
  24:../BLDCMotor/focmethod.c ****     dq_t udq_limt;
 886              		.loc 1 24 5 is_stmt 1 view .LVU241
  25:../BLDCMotor/focmethod.c ****     alpbet_t i_alphbeta;
 887              		.loc 1 25 5 view .LVU242
  26:../BLDCMotor/focmethod.c ****     float real_id,real_iq;
 888              		.loc 1 26 5 view .LVU243
  27:../BLDCMotor/focmethod.c **** #if 1
 889              		.loc 1 27 5 view .LVU244
  32:../BLDCMotor/focmethod.c ****     _2s_2r(i_alphbeta,_normalize_angle(theta - PI/2.0f),&i_dq);
 890              		.loc 1 32 5 view .LVU245
 891 0018 11A8     		add	r0, sp, #68
 892 001a FFF7FEFF 		bl	_3s_2s
 893              	.LVL82:
  33:../BLDCMotor/focmethod.c ****     // udq_limt = circle_limit(i_dq);
 894              		.loc 1 33 5 view .LVU246
 895 001e 9FED350A 		vldr.32	s0, .L53
 896 0022 38EE400A 		vsub.f32	s0, s16, s0
 897 0026 FFF7FEFF 		bl	_normalize_angle
 898              	.LVL83:
 899 002a F0EE401A 		vmov.f32	s3, s0
 900 002e 14A8     		add	r0, sp, #80
 901 0030 9DED110A 		vldr.32	s0, [sp, #68]
 902 0034 DDED120A 		vldr.32	s1, [sp, #72]
 903 0038 9DED131A 		vldr.32	s2, [sp, #76]
 904 003c FFF7FEFF 		bl	_2s_2r
 905              	.LVL84:
  37:../BLDCMotor/focmethod.c ****     real_iq = i_dq.q;
 906              		.loc 1 37 5 view .LVU247
  37:../BLDCMotor/focmethod.c ****     real_iq = i_dq.q;
 907              		.loc 1 37 13 is_stmt 0 view .LVU248
 908 0040 9DED149A 		vldr.32	s18, [sp, #80]
 909              	.LVL85:
  38:../BLDCMotor/focmethod.c ****     /*------------������PI---------------*/
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 22


 910              		.loc 1 38 5 is_stmt 1 view .LVU249
  38:../BLDCMotor/focmethod.c ****     /*------------������PI---------------*/
 911              		.loc 1 38 13 is_stmt 0 view .LVU250
 912 0044 DDED158A 		vldr.32	s17, [sp, #84]
 913              	.LVL86:
  41:../BLDCMotor/focmethod.c ****     dq_t u_dq;  
 914              		.loc 1 41 5 is_stmt 1 view .LVU251
  42:../BLDCMotor/focmethod.c ****     u_dq.d = 0.0f;
 915              		.loc 1 42 5 view .LVU252
  43:../BLDCMotor/focmethod.c ****     u_dq.q = 1.0f;
 916              		.loc 1 43 5 view .LVU253
  43:../BLDCMotor/focmethod.c ****     u_dq.q = 1.0f;
 917              		.loc 1 43 12 is_stmt 0 view .LVU254
 918 0048 0023     		movs	r3, #0
 919 004a 0E93     		str	r3, [sp, #56]	@ float
  44:../BLDCMotor/focmethod.c ****     // u_dq.d = pid_contrl(sgp_curloop_d_pid,0.0f,real_id);
 920              		.loc 1 44 5 is_stmt 1 view .LVU255
  44:../BLDCMotor/focmethod.c ****     // u_dq.d = pid_contrl(sgp_curloop_d_pid,0.0f,real_id);
 921              		.loc 1 44 12 is_stmt 0 view .LVU256
 922 004c 4FF07E53 		mov	r3, #1065353216
 923 0050 0F93     		str	r3, [sp, #60]	@ float
  48:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IB,i_abc.b);
 924              		.loc 1 48 5 is_stmt 1 view .LVU257
 925 0052 9DED050A 		vldr.32	s0, [sp, #20]
 926 0056 0220     		movs	r0, #2
 927 0058 FFF7FEFF 		bl	ipc_write_data
 928              	.LVL87:
  49:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IC,i_abc.c);
 929              		.loc 1 49 5 view .LVU258
 930 005c 9DED060A 		vldr.32	s0, [sp, #24]
 931 0060 0320     		movs	r0, #3
 932 0062 FFF7FEFF 		bl	ipc_write_data
 933              	.LVL88:
  50:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IALPHA,i_alphbeta.alpha);
 934              		.loc 1 50 5 view .LVU259
 935 0066 9DED070A 		vldr.32	s0, [sp, #28]
 936 006a 0420     		movs	r0, #4
 937 006c FFF7FEFF 		bl	ipc_write_data
 938              	.LVL89:
  51:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IBETA,i_alphbeta.beta);
 939              		.loc 1 51 5 view .LVU260
 940 0070 9DED110A 		vldr.32	s0, [sp, #68]
 941 0074 0520     		movs	r0, #5
 942 0076 FFF7FEFF 		bl	ipc_write_data
 943              	.LVL90:
  52:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_ID,real_id);
 944              		.loc 1 52 5 view .LVU261
 945 007a 9DED120A 		vldr.32	s0, [sp, #72]
 946 007e 0620     		movs	r0, #6
 947 0080 FFF7FEFF 		bl	ipc_write_data
 948              	.LVL91:
  53:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_IQ,real_iq);
 949              		.loc 1 53 5 view .LVU262
 950 0084 B0EE490A 		vmov.f32	s0, s18
 951 0088 0720     		movs	r0, #7
 952 008a FFF7FEFF 		bl	ipc_write_data
 953              	.LVL92:
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 23


  54:../BLDCMotor/focmethod.c ****     ipc_write_data(PUBLIC_DATA_TEMP0,theta);
 954              		.loc 1 54 5 view .LVU263
 955 008e B0EE680A 		vmov.f32	s0, s17
 956 0092 0820     		movs	r0, #8
 957 0094 FFF7FEFF 		bl	ipc_write_data
 958              	.LVL93:
  55:../BLDCMotor/focmethod.c **** #else
 959              		.loc 1 55 5 view .LVU264
 960 0098 B0EE480A 		vmov.f32	s0, s16
 961 009c 0C20     		movs	r0, #12
 962 009e FFF7FEFF 		bl	ipc_write_data
 963              	.LVL94:
  62:../BLDCMotor/focmethod.c ****     u_alphabeta = _2r_2s(u_dq,(theta));// + PI/2.0f); 
 964              		.loc 1 62 5 view .LVU265
  63:../BLDCMotor/focmethod.c ****     duty_t duty;
 965              		.loc 1 63 5 view .LVU266
  63:../BLDCMotor/focmethod.c ****     duty_t duty;
 966              		.loc 1 63 19 is_stmt 0 view .LVU267
 967 00a2 F0EE481A 		vmov.f32	s3, s16
 968 00a6 9DED0E0A 		vldr.32	s0, [sp, #56]
 969 00aa DDED0F0A 		vldr.32	s1, [sp, #60]
 970 00ae 9DED101A 		vldr.32	s2, [sp, #64]
 971 00b2 FFF7FEFF 		bl	_2r_2s
 972              	.LVL95:
 973 00b6 8DED0B0A 		vstr.32	s0, [sp, #44]
 974 00ba CDED0C0A 		vstr.32	s1, [sp, #48]
 975 00be 8DED0D1A 		vstr.32	s2, [sp, #52]
  64:../BLDCMotor/focmethod.c ****     duty = _svpwm(u_alphabeta.alpha,u_alphabeta.beta);
 976              		.loc 1 64 5 is_stmt 1 view .LVU268
  65:../BLDCMotor/focmethod.c ****     return duty;
 977              		.loc 1 65 5 view .LVU269
  65:../BLDCMotor/focmethod.c ****     return duty;
 978              		.loc 1 65 12 is_stmt 0 view .LVU270
 979 00c2 FFF7FEFF 		bl	_svpwm
 980              	.LVL96:
 981 00c6 8DED080A 		vstr.32	s0, [sp, #32]
 982 00ca CDED090A 		vstr.32	s1, [sp, #36]
 983 00ce 8DED0A1A 		vstr.32	s2, [sp, #40]
  66:../BLDCMotor/focmethod.c **** }
 984              		.loc 1 66 5 is_stmt 1 view .LVU271
  66:../BLDCMotor/focmethod.c **** }
 985              		.loc 1 66 12 is_stmt 0 view .LVU272
 986 00d2 08AB     		add	r3, sp, #32
 987 00d4 93E80700 		ldm	r3, {r0, r1, r2}
 988 00d8 1AAB     		add	r3, sp, #104
 989 00da 03E90700 		stmdb	r3, {r0, r1, r2}
  67:../BLDCMotor/focmethod.c **** duty_t _svpwm(float ualpha,float ubeta)
 990              		.loc 1 67 1 view .LVU273
 991 00de 9DED170A 		vldr.32	s0, [sp, #92]
 992 00e2 DDED180A 		vldr.32	s1, [sp, #96]
 993 00e6 9DED191A 		vldr.32	s2, [sp, #100]
 994 00ea 1BB0     		add	sp, sp, #108
 995              	.LCFI22:
 996              		.cfi_def_cfa_offset 20
 997              		@ sp needed
 998 00ec BDEC048B 		vldm	sp!, {d8-d9}
 999              	.LCFI23:
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 24


 1000              		.cfi_restore 82
 1001              		.cfi_restore 83
 1002              		.cfi_restore 80
 1003              		.cfi_restore 81
 1004              		.cfi_def_cfa_offset 4
 1005              	.LVL97:
  67:../BLDCMotor/focmethod.c **** duty_t _svpwm(float ualpha,float ubeta)
 1006              		.loc 1 67 1 view .LVU274
 1007 00f0 5DF804FB 		ldr	pc, [sp], #4
 1008              	.L54:
 1009              		.align	2
 1010              	.L53:
 1011 00f4 DA0FC93F 		.word	1070141402
 1012              		.cfi_endproc
 1013              	.LFE330:
 1015              		.global	sgp_curloop_q_pid
 1016              		.global	sgp_curloop_d_pid
 1017              		.section	.bss.sg_curloop_param,"aw",%nobits
 1018              		.align	2
 1019              		.set	.LANCHOR1,. + 0
 1022              	sg_curloop_param:
 1023 0000 00000000 		.space	56
 1023      00000000 
 1023      00000000 
 1023      00000000 
 1023      00000000 
 1024              		.section	.bss.sgp_curloop_d_pid,"aw",%nobits
 1025              		.align	2
 1026              		.set	.LANCHOR0,. + 0
 1029              	sgp_curloop_d_pid:
 1030 0000 00000000 		.space	4
 1031              		.section	.bss.sgp_curloop_q_pid,"aw",%nobits
 1032              		.align	2
 1033              		.set	.LANCHOR2,. + 0
 1036              	sgp_curloop_q_pid:
 1037 0000 00000000 		.space	4
 1038              		.text
 1039              	.Letext0:
 1040              		.file 2 "../Public/./method/pid.h"
 1041              		.file 3 "../BLDCMotor/./focmethod.h"
 1042              		.file 4 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\math.h"
 1043              		.file 5 "../Public/IPC/ipc.h"
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s 			page 25


DEFINED SYMBOLS
                            *ABS*:00000000 focmethod.c
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:20     .text.foc_paraminit:00000000 $t
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:26     .text.foc_paraminit:00000000 foc_paraminit
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:81     .text.foc_paraminit:00000050 $d
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:91     .text._svpwm:00000000 $t
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:97     .text._svpwm:00000000 _svpwm
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:170    .text._svpwm:0000005e $d
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:264    .text._svpwm:000000e4 $d
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:271    .text._svpwm:000000ea $t
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:558    .text._svpwm:0000026c $d
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:569    .text._3s_2s:00000000 $t
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:575    .text._3s_2s:00000000 _3s_2s
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:610    .text._3s_2s:00000028 $d
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:615    .text._2s_2r:00000000 $t
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:621    .text._2s_2r:00000000 _2s_2r
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:701    .text._2r_2s:00000000 $t
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:707    .text._2r_2s:00000000 _2r_2s
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:796    .text._normalize_angle:00000000 $t
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:802    .text._normalize_angle:00000000 _normalize_angle
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:847    .text._normalize_angle:00000038 $d
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:854    .text.foc_curloopcale:00000000 $t
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:860    .text.foc_curloopcale:00000000 foc_curloopcale
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:1011   .text.foc_curloopcale:000000f4 $d
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:1036   .bss.sgp_curloop_q_pid:00000000 sgp_curloop_q_pid
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:1029   .bss.sgp_curloop_d_pid:00000000 sgp_curloop_d_pid
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:1018   .bss.sg_curloop_param:00000000 $d
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:1022   .bss.sg_curloop_param:00000000 sg_curloop_param
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:1025   .bss.sgp_curloop_d_pid:00000000 $d
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:1032   .bss.sgp_curloop_q_pid:00000000 $d
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:176    .text._svpwm:00000063 $d
C:\Users\zhangge\AppData\Local\Temp\ccftMGmP.s:176    .text._svpwm:00000064 $t

UNDEFINED SYMBOLS
pid_init
cosf
sinf
__aeabi_f2d
__aeabi_d2f
fmod
ipc_write_data
