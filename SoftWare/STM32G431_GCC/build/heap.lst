ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"heap.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.heap_init,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	heap_init:
  26              	.LFB5:
  27              		.file 1 "../Public/heap.c"
   1:../Public/heap.c **** 
   2:../Public/heap.c **** #include <stdlib.h>
   3:../Public/heap.c **** #include "_assert.h"
   4:../Public/heap.c **** #include "stdint.h"
   5:../Public/heap.c **** 
   6:../Public/heap.c **** #if 1
   7:../Public/heap.c **** #define TOTAL_HEAP_SIZE                    ((size_t)4096)
   8:../Public/heap.c **** #define BYTE_ALIGNMENT			8
   9:../Public/heap.c **** #if BYTE_ALIGNMENT == 8
  10:../Public/heap.c **** 	#define BYTE_ALIGNMENT_MASK ( 0x0007 )
  11:../Public/heap.c **** #endif
  12:../Public/heap.c **** 
  13:../Public/heap.c **** #define heapMINIMUM_BLOCK_SIZE	( ( size_t ) ( heap_structSize << 1 ) )
  14:../Public/heap.c **** 
  15:../Public/heap.c **** #define BITS_PER_BYTE		( ( size_t ) 8 )
  16:../Public/heap.c **** 
  17:../Public/heap.c **** 
  18:../Public/heap.c **** static uint8_t ucHeap[ TOTAL_HEAP_SIZE ];
  19:../Public/heap.c **** 
  20:../Public/heap.c **** typedef struct block_link
  21:../Public/heap.c **** {
  22:../Public/heap.c **** 	struct block_link *p_next_freeblock;	
  23:../Public/heap.c **** 	size_t xBlockSize;						
  24:../Public/heap.c **** } blocklink_t;
  25:../Public/heap.c **** 
  26:../Public/heap.c **** 
  27:../Public/heap.c **** static void insert_block_into_freeList( blocklink_t *pblockto_insert );
  28:../Public/heap.c **** static void heap_init( void );
  29:../Public/heap.c **** 
  30:../Public/heap.c **** static const size_t heap_structSize	= ( sizeof( blocklink_t ) + ( ( size_t ) ( BYTE_ALIGNMENT - 1 )
  31:../Public/heap.c **** 
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 2


  32:../Public/heap.c **** static blocklink_t pstart, *pend = NULL;
  33:../Public/heap.c **** 
  34:../Public/heap.c **** static size_t free_bytes_remaining = 0U;
  35:../Public/heap.c **** static size_t minimum_everfreebytes_remaining = 0U;
  36:../Public/heap.c **** 
  37:../Public/heap.c **** static size_t block_allocatedbit = 0;
  38:../Public/heap.c **** 
  39:../Public/heap.c **** /*-----------------------------------------------------------*/
  40:../Public/heap.c **** 
  41:../Public/heap.c **** void *heap_malloc( size_t wanted_size )
  42:../Public/heap.c **** {
  43:../Public/heap.c ****     blocklink_t *pxBlock, *p_previous_block, *p_new_blocklink;
  44:../Public/heap.c ****     void *p_return = NULL;
  45:../Public/heap.c **** 	// vTaskSuspendAll();
  46:../Public/heap.c **** 	{
  47:../Public/heap.c **** 		if( pend == NULL )
  48:../Public/heap.c **** 		{
  49:../Public/heap.c **** 			heap_init();
  50:../Public/heap.c **** 		}
  51:../Public/heap.c **** 		if( ( wanted_size & block_allocatedbit ) == 0 )
  52:../Public/heap.c **** 		{
  53:../Public/heap.c **** 			if( wanted_size > 0 )
  54:../Public/heap.c **** 			{
  55:../Public/heap.c **** 				wanted_size += heap_structSize;
  56:../Public/heap.c **** 				if( ( wanted_size & BYTE_ALIGNMENT_MASK ) != 0x00 )
  57:../Public/heap.c **** 				{
  58:../Public/heap.c **** 					wanted_size += ( BYTE_ALIGNMENT - ( wanted_size & BYTE_ALIGNMENT_MASK ) );
  59:../Public/heap.c **** 					user_assert_param( ( wanted_size & BYTE_ALIGNMENT_MASK ) == 0 );
  60:../Public/heap.c **** 				}
  61:../Public/heap.c **** 			}
  62:../Public/heap.c **** 
  63:../Public/heap.c **** 			if( ( wanted_size > 0 ) && ( wanted_size <= free_bytes_remaining ) )
  64:../Public/heap.c **** 			{
  65:../Public/heap.c **** 				p_previous_block = &pstart;
  66:../Public/heap.c **** 				pxBlock = pstart.p_next_freeblock;
  67:../Public/heap.c **** 				while( ( pxBlock->xBlockSize < wanted_size ) && ( pxBlock->p_next_freeblock != NULL ) )
  68:../Public/heap.c **** 				{
  69:../Public/heap.c **** 					p_previous_block = pxBlock;
  70:../Public/heap.c **** 					pxBlock = pxBlock->p_next_freeblock;
  71:../Public/heap.c **** 				}
  72:../Public/heap.c **** 
  73:../Public/heap.c **** 				if( pxBlock != pend )
  74:../Public/heap.c **** 				{
  75:../Public/heap.c **** 					p_return = ( void * ) ( ( ( uint8_t * ) p_previous_block->p_next_freeblock ) + heap_structSize
  76:../Public/heap.c **** 
  77:../Public/heap.c **** 					p_previous_block->p_next_freeblock = pxBlock->p_next_freeblock;
  78:../Public/heap.c **** 
  79:../Public/heap.c **** 					if( ( pxBlock->xBlockSize - wanted_size ) > heapMINIMUM_BLOCK_SIZE )
  80:../Public/heap.c **** 					{
  81:../Public/heap.c **** 						p_new_blocklink = ( void * ) ( ( ( uint8_t * ) pxBlock ) + wanted_size );
  82:../Public/heap.c **** 						user_assert_param( ( ( ( size_t ) p_new_blocklink ) & BYTE_ALIGNMENT_MASK ) == 0 );
  83:../Public/heap.c **** 
  84:../Public/heap.c **** 						p_new_blocklink->xBlockSize = pxBlock->xBlockSize - wanted_size;
  85:../Public/heap.c **** 						pxBlock->xBlockSize = wanted_size;
  86:../Public/heap.c **** 
  87:../Public/heap.c **** 						insert_block_into_freeList( p_new_blocklink );
  88:../Public/heap.c **** 					}
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 3


  89:../Public/heap.c **** 
  90:../Public/heap.c **** 					free_bytes_remaining -= pxBlock->xBlockSize;
  91:../Public/heap.c **** 
  92:../Public/heap.c **** 					if( free_bytes_remaining < minimum_everfreebytes_remaining )
  93:../Public/heap.c **** 					{
  94:../Public/heap.c **** 						minimum_everfreebytes_remaining = free_bytes_remaining;
  95:../Public/heap.c **** 					}
  96:../Public/heap.c **** 					pxBlock->xBlockSize |= block_allocatedbit;
  97:../Public/heap.c **** 					pxBlock->p_next_freeblock = NULL;
  98:../Public/heap.c **** 				}
  99:../Public/heap.c **** 			}
 100:../Public/heap.c **** 		}
 101:../Public/heap.c **** 	}
 102:../Public/heap.c **** 	// ( void ) xTaskResumeAll();
 103:../Public/heap.c **** 
 104:../Public/heap.c **** 	#if( configUSE_MALLOC_FAILED_HOOK == 1 )
 105:../Public/heap.c **** 	{
 106:../Public/heap.c **** 		if( p_return == NULL )
 107:../Public/heap.c **** 		{
 108:../Public/heap.c **** 			extern void vApplicationMallocFailedHook( void );
 109:../Public/heap.c **** 			vApplicationMallocFailedHook();
 110:../Public/heap.c **** 		}
 111:../Public/heap.c **** 		else
 112:../Public/heap.c **** 		{
 113:../Public/heap.c **** 			
 114:../Public/heap.c **** 		}
 115:../Public/heap.c **** 	}
 116:../Public/heap.c **** 	#endif
 117:../Public/heap.c **** 
 118:../Public/heap.c **** 	user_assert_param( ( ( ( size_t ) p_return ) & ( size_t ) BYTE_ALIGNMENT_MASK ) == 0 );
 119:../Public/heap.c **** 	return p_return;
 120:../Public/heap.c **** }
 121:../Public/heap.c **** /*-----------------------------------------------------------*/
 122:../Public/heap.c **** 
 123:../Public/heap.c **** void heap_free( void *pv )
 124:../Public/heap.c **** {
 125:../Public/heap.c **** uint8_t *puc = ( uint8_t * ) pv;
 126:../Public/heap.c **** blocklink_t *pxLink;
 127:../Public/heap.c **** 
 128:../Public/heap.c **** 	if( pv != NULL )
 129:../Public/heap.c **** 	{
 130:../Public/heap.c **** 		puc -= heap_structSize;
 131:../Public/heap.c **** 
 132:../Public/heap.c **** 		pxLink = ( void * ) puc;
 133:../Public/heap.c **** 
 134:../Public/heap.c **** 		user_assert_param( ( pxLink->xBlockSize & block_allocatedbit ) != 0 );
 135:../Public/heap.c **** 		user_assert_param( pxLink->p_next_freeblock == NULL );
 136:../Public/heap.c **** 
 137:../Public/heap.c **** 		if( ( pxLink->xBlockSize & block_allocatedbit ) != 0 )
 138:../Public/heap.c **** 		{
 139:../Public/heap.c **** 			if( pxLink->p_next_freeblock == NULL )
 140:../Public/heap.c **** 			{
 141:../Public/heap.c **** 				pxLink->xBlockSize &= ~block_allocatedbit;
 142:../Public/heap.c **** 
 143:../Public/heap.c **** 				// vTaskSuspendAll();
 144:../Public/heap.c **** 				{
 145:../Public/heap.c **** 					free_bytes_remaining += pxLink->xBlockSize;
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 4


 146:../Public/heap.c **** 					// traceFREE( pv, pxLink->xBlockSize );
 147:../Public/heap.c **** 					insert_block_into_freeList( ( ( blocklink_t * ) pxLink ) );
 148:../Public/heap.c **** 				}
 149:../Public/heap.c **** 				// ( void ) xTaskResumeAll();
 150:../Public/heap.c **** 			}
 151:../Public/heap.c **** 		}
 152:../Public/heap.c **** 	}
 153:../Public/heap.c **** }
 154:../Public/heap.c **** /*-----------------------------------------------------------*/
 155:../Public/heap.c **** 
 156:../Public/heap.c **** size_t heap_get_freeheap_size( void )
 157:../Public/heap.c **** {
 158:../Public/heap.c **** 	return free_bytes_remaining;
 159:../Public/heap.c **** }
 160:../Public/heap.c **** /*-----------------------------------------------------------*/
 161:../Public/heap.c **** 
 162:../Public/heap.c **** size_t heap_get_minimumever_freeheapsize( void )
 163:../Public/heap.c **** {
 164:../Public/heap.c **** 	return minimum_everfreebytes_remaining;
 165:../Public/heap.c **** }
 166:../Public/heap.c **** /*-----------------------------------------------------------*/
 167:../Public/heap.c **** 
 168:../Public/heap.c **** void vPortInitialiseBlocks( void )
 169:../Public/heap.c **** {
 170:../Public/heap.c **** }
 171:../Public/heap.c **** /*-----------------------------------------------------------*/
 172:../Public/heap.c **** 
 173:../Public/heap.c **** static void heap_init( void )
 174:../Public/heap.c **** {
  28              		.loc 1 174 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
 175:../Public/heap.c **** blocklink_t *p_first_freeblock;
  33              		.loc 1 175 1 view .LVU1
 176:../Public/heap.c **** uint8_t *p_ucaligned_heap;
  34              		.loc 1 176 1 view .LVU2
 177:../Public/heap.c **** size_t uxaddress;
  35              		.loc 1 177 1 view .LVU3
 178:../Public/heap.c **** size_t xTotalHeapSize = TOTAL_HEAP_SIZE;
  36              		.loc 1 178 1 view .LVU4
  37              	.LVL0:
 179:../Public/heap.c **** 
 180:../Public/heap.c **** 	uxaddress = ( size_t ) ucHeap;
  38              		.loc 1 180 2 view .LVU5
  39              		.loc 1 180 12 is_stmt 0 view .LVU6
  40 0000 124A     		ldr	r2, .L4
  41              	.LVL1:
 181:../Public/heap.c **** 
 182:../Public/heap.c **** 	if( ( uxaddress & BYTE_ALIGNMENT_MASK ) != 0 )
  42              		.loc 1 182 2 is_stmt 1 view .LVU7
  43              		.loc 1 182 4 is_stmt 0 view .LVU8
  44 0002 12F0070F 		tst	r2, #7
  45 0006 1ED0     		beq	.L3
 183:../Public/heap.c **** 	{
 184:../Public/heap.c **** 		uxaddress += ( BYTE_ALIGNMENT - 1 );
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 5


  46              		.loc 1 184 3 is_stmt 1 view .LVU9
  47              		.loc 1 184 13 is_stmt 0 view .LVU10
  48 0008 D11D     		adds	r1, r2, #7
  49              	.LVL2:
 185:../Public/heap.c **** 		uxaddress &= ~( ( size_t ) BYTE_ALIGNMENT_MASK );
  50              		.loc 1 185 3 is_stmt 1 view .LVU11
  51              		.loc 1 185 13 is_stmt 0 view .LVU12
  52 000a 21F00701 		bic	r1, r1, #7
  53              	.LVL3:
 186:../Public/heap.c **** 		xTotalHeapSize -= uxaddress - ( size_t ) ucHeap;
  54              		.loc 1 186 3 is_stmt 1 view .LVU13
  55              		.loc 1 186 18 is_stmt 0 view .LVU14
  56 000e C1F58053 		rsb	r3, r1, #4096
  57 0012 1344     		add	r3, r3, r2
  58              	.LVL4:
 185:../Public/heap.c **** 		uxaddress &= ~( ( size_t ) BYTE_ALIGNMENT_MASK );
  59              		.loc 1 185 13 view .LVU15
  60 0014 0A46     		mov	r2, r1
  61              	.LVL5:
  62              	.L2:
 187:../Public/heap.c **** 	}
 188:../Public/heap.c **** 
 189:../Public/heap.c **** 	p_ucaligned_heap = ( uint8_t * ) uxaddress;
  63              		.loc 1 189 2 is_stmt 1 view .LVU16
 190:../Public/heap.c **** 
 191:../Public/heap.c **** 	pstart.p_next_freeblock = ( void * ) p_ucaligned_heap;
  64              		.loc 1 191 2 view .LVU17
  65              		.loc 1 191 26 is_stmt 0 view .LVU18
  66 0016 0E48     		ldr	r0, .L4+4
  67 0018 0260     		str	r2, [r0]
 192:../Public/heap.c **** 	pstart.xBlockSize = ( size_t ) 0;
  68              		.loc 1 192 2 is_stmt 1 view .LVU19
  69              		.loc 1 192 20 is_stmt 0 view .LVU20
  70 001a 0021     		movs	r1, #0
  71 001c 4160     		str	r1, [r0, #4]
 193:../Public/heap.c **** 
 194:../Public/heap.c **** 
 195:../Public/heap.c **** 	uxaddress = ( ( size_t ) p_ucaligned_heap ) + xTotalHeapSize;
  72              		.loc 1 195 2 is_stmt 1 view .LVU21
  73              		.loc 1 195 12 is_stmt 0 view .LVU22
  74 001e 1344     		add	r3, r3, r2
  75              	.LVL6:
 196:../Public/heap.c **** 	uxaddress -= heap_structSize;
  76              		.loc 1 196 2 is_stmt 1 view .LVU23
  77              		.loc 1 196 12 is_stmt 0 view .LVU24
  78 0020 083B     		subs	r3, r3, #8
  79              	.LVL7:
 197:../Public/heap.c **** 	uxaddress &= ~( ( size_t ) BYTE_ALIGNMENT_MASK );
  80              		.loc 1 197 2 is_stmt 1 view .LVU25
  81              		.loc 1 197 12 is_stmt 0 view .LVU26
  82 0022 23F00703 		bic	r3, r3, #7
  83              	.LVL8:
 198:../Public/heap.c **** 	pend = ( void * ) uxaddress;
  84              		.loc 1 198 2 is_stmt 1 view .LVU27
  85              		.loc 1 198 7 is_stmt 0 view .LVU28
  86 0026 0B48     		ldr	r0, .L4+8
  87 0028 0360     		str	r3, [r0]
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 6


 199:../Public/heap.c **** 	pend->xBlockSize = 0;
  88              		.loc 1 199 2 is_stmt 1 view .LVU29
  89              		.loc 1 199 19 is_stmt 0 view .LVU30
  90 002a 5960     		str	r1, [r3, #4]
 200:../Public/heap.c **** 	pend->p_next_freeblock = NULL;
  91              		.loc 1 200 2 is_stmt 1 view .LVU31
  92              		.loc 1 200 25 is_stmt 0 view .LVU32
  93 002c 1960     		str	r1, [r3]
 201:../Public/heap.c **** 
 202:../Public/heap.c **** 	p_first_freeblock = ( void * ) p_ucaligned_heap;
  94              		.loc 1 202 2 is_stmt 1 view .LVU33
  95              	.LVL9:
 203:../Public/heap.c **** 	p_first_freeblock->xBlockSize = uxaddress - ( size_t ) p_first_freeblock;
  96              		.loc 1 203 2 view .LVU34
  97              		.loc 1 203 44 is_stmt 0 view .LVU35
  98 002e 991A     		subs	r1, r3, r2
  99              		.loc 1 203 32 view .LVU36
 100 0030 5160     		str	r1, [r2, #4]
 204:../Public/heap.c **** 	p_first_freeblock->p_next_freeblock = pend;
 101              		.loc 1 204 2 is_stmt 1 view .LVU37
 102              		.loc 1 204 38 is_stmt 0 view .LVU38
 103 0032 1360     		str	r3, [r2]
 205:../Public/heap.c **** 
 206:../Public/heap.c **** 	minimum_everfreebytes_remaining = p_first_freeblock->xBlockSize;
 104              		.loc 1 206 2 is_stmt 1 view .LVU39
 105              		.loc 1 206 34 is_stmt 0 view .LVU40
 106 0034 084B     		ldr	r3, .L4+12
 107              	.LVL10:
 108              		.loc 1 206 34 view .LVU41
 109 0036 1960     		str	r1, [r3]
 207:../Public/heap.c **** 	free_bytes_remaining = p_first_freeblock->xBlockSize;
 110              		.loc 1 207 2 is_stmt 1 view .LVU42
 111              		.loc 1 207 23 is_stmt 0 view .LVU43
 112 0038 084B     		ldr	r3, .L4+16
 113 003a 1960     		str	r1, [r3]
 208:../Public/heap.c **** 
 209:../Public/heap.c **** 	block_allocatedbit = ( ( size_t ) 1 ) << ( ( sizeof( size_t ) * BITS_PER_BYTE ) - 1 );
 114              		.loc 1 209 2 is_stmt 1 view .LVU44
 115              		.loc 1 209 21 is_stmt 0 view .LVU45
 116 003c 084B     		ldr	r3, .L4+20
 117 003e 4FF00042 		mov	r2, #-2147483648
 118              	.LVL11:
 119              		.loc 1 209 21 view .LVU46
 120 0042 1A60     		str	r2, [r3]
 210:../Public/heap.c **** }
 121              		.loc 1 210 1 view .LVU47
 122 0044 7047     		bx	lr
 123              	.LVL12:
 124              	.L3:
 178:../Public/heap.c **** 
 125              		.loc 1 178 8 view .LVU48
 126 0046 4FF48053 		mov	r3, #4096
 127 004a E4E7     		b	.L2
 128              	.L5:
 129              		.align	2
 130              	.L4:
 131 004c 00000000 		.word	ucHeap
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 7


 132 0050 00000000 		.word	.LANCHOR0
 133 0054 00000000 		.word	.LANCHOR1
 134 0058 00000000 		.word	.LANCHOR2
 135 005c 00000000 		.word	.LANCHOR3
 136 0060 00000000 		.word	.LANCHOR4
 137              		.cfi_endproc
 138              	.LFE5:
 140              		.section	.text.insert_block_into_freeList,"ax",%progbits
 141              		.align	1
 142              		.syntax unified
 143              		.thumb
 144              		.thumb_func
 146              	insert_block_into_freeList:
 147              	.LVL13:
 148              	.LFB6:
 211:../Public/heap.c **** /*-----------------------------------------------------------*/
 212:../Public/heap.c **** 
 213:../Public/heap.c **** static void insert_block_into_freeList( blocklink_t *pblockto_insert )
 214:../Public/heap.c **** {
 149              		.loc 1 214 1 is_stmt 1 view -0
 150              		.cfi_startproc
 151              		@ args = 0, pretend = 0, frame = 0
 152              		@ frame_needed = 0, uses_anonymous_args = 0
 153              		@ link register save eliminated.
 215:../Public/heap.c ****     blocklink_t *pxIterator;
 154              		.loc 1 215 5 view .LVU50
 216:../Public/heap.c ****     uint8_t *puc;
 155              		.loc 1 216 5 view .LVU51
 217:../Public/heap.c **** 
 218:../Public/heap.c **** 	for( pxIterator = &pstart; pxIterator->p_next_freeblock < pblockto_insert; pxIterator = pxIterator
 156              		.loc 1 218 2 view .LVU52
 157              		.loc 1 218 18 is_stmt 0 view .LVU53
 158 0000 164B     		ldr	r3, .L21
 159              	.LVL14:
 160              	.L7:
 161              		.loc 1 218 29 is_stmt 1 discriminator 1 view .LVU54
 162 0002 1A46     		mov	r2, r3
 163              		.loc 1 218 39 is_stmt 0 discriminator 1 view .LVU55
 164 0004 1B68     		ldr	r3, [r3]
 165              	.LVL15:
 166              		.loc 1 218 2 discriminator 1 view .LVU56
 167 0006 8342     		cmp	r3, r0
 168 0008 FBD3     		bcc	.L7
 219:../Public/heap.c **** 	{
 220:../Public/heap.c **** 		/* Nothing to do here, just iterate to the right position. */
 221:../Public/heap.c **** 	}
 222:../Public/heap.c **** 
 223:../Public/heap.c **** 	puc = ( uint8_t * ) pxIterator;
 169              		.loc 1 223 2 is_stmt 1 view .LVU57
 170              	.LVL16:
 224:../Public/heap.c **** 	if( ( puc + pxIterator->xBlockSize ) == ( uint8_t * ) pblockto_insert )
 171              		.loc 1 224 2 view .LVU58
 172              		.loc 1 224 24 is_stmt 0 view .LVU59
 173 000a 5168     		ldr	r1, [r2, #4]
 174              		.loc 1 224 12 view .LVU60
 175 000c 02EB010C 		add	ip, r2, r1
 176              		.loc 1 224 4 view .LVU61
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 8


 177 0010 8445     		cmp	ip, r0
 178 0012 09D0     		beq	.L19
 179              	.L8:
 225:../Public/heap.c **** 	{
 226:../Public/heap.c **** 		pxIterator->xBlockSize += pblockto_insert->xBlockSize;
 227:../Public/heap.c **** 		pblockto_insert = pxIterator;
 228:../Public/heap.c **** 	}
 229:../Public/heap.c **** 	puc = ( uint8_t * ) pblockto_insert;
 180              		.loc 1 229 2 is_stmt 1 view .LVU62
 181              	.LVL17:
 230:../Public/heap.c **** 	if( ( puc + pblockto_insert->xBlockSize ) == ( uint8_t * ) pxIterator->p_next_freeblock )
 182              		.loc 1 230 2 view .LVU63
 183              		.loc 1 230 29 is_stmt 0 view .LVU64
 184 0014 4168     		ldr	r1, [r0, #4]
 185              		.loc 1 230 12 view .LVU65
 186 0016 00EB010C 		add	ip, r0, r1
 187              		.loc 1 230 4 view .LVU66
 188 001a 6345     		cmp	r3, ip
 189 001c 09D0     		beq	.L20
 231:../Public/heap.c **** 	{
 232:../Public/heap.c **** 		if( pxIterator->p_next_freeblock != pend )
 233:../Public/heap.c **** 		{
 234:../Public/heap.c **** 			/* Form one big block from the two blocks. */
 235:../Public/heap.c **** 			pblockto_insert->xBlockSize += pxIterator->p_next_freeblock->xBlockSize;
 236:../Public/heap.c **** 			pblockto_insert->p_next_freeblock = pxIterator->p_next_freeblock->p_next_freeblock;
 237:../Public/heap.c **** 		}
 238:../Public/heap.c **** 		else
 239:../Public/heap.c **** 		{
 240:../Public/heap.c **** 			pblockto_insert->p_next_freeblock = pend;
 241:../Public/heap.c **** 		}
 242:../Public/heap.c **** 	}
 243:../Public/heap.c **** 	else
 244:../Public/heap.c **** 	{
 245:../Public/heap.c **** 		pblockto_insert->p_next_freeblock = pxIterator->p_next_freeblock;
 190              		.loc 1 245 3 is_stmt 1 view .LVU67
 191              		.loc 1 245 37 is_stmt 0 view .LVU68
 192 001e 0360     		str	r3, [r0]
 246:../Public/heap.c **** 	}
 247:../Public/heap.c **** 	if( pxIterator != pblockto_insert )
 193              		.loc 1 247 2 is_stmt 1 view .LVU69
 194              		.loc 1 247 4 is_stmt 0 view .LVU70
 195 0020 9042     		cmp	r0, r2
 196 0022 19D0     		beq	.L16
 248:../Public/heap.c **** 	{
 249:../Public/heap.c **** 		pxIterator->p_next_freeblock = pblockto_insert;
 197              		.loc 1 249 3 is_stmt 1 view .LVU71
 198              		.loc 1 249 32 is_stmt 0 view .LVU72
 199 0024 1060     		str	r0, [r2]
 200 0026 7047     		bx	lr
 201              	.LVL18:
 202              	.L19:
 226:../Public/heap.c **** 		pblockto_insert = pxIterator;
 203              		.loc 1 226 3 is_stmt 1 view .LVU73
 226:../Public/heap.c **** 		pblockto_insert = pxIterator;
 204              		.loc 1 226 44 is_stmt 0 view .LVU74
 205 0028 4068     		ldr	r0, [r0, #4]
 206              	.LVL19:
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 9


 226:../Public/heap.c **** 		pblockto_insert = pxIterator;
 207              		.loc 1 226 26 view .LVU75
 208 002a 0144     		add	r1, r1, r0
 209 002c 5160     		str	r1, [r2, #4]
 227:../Public/heap.c **** 	}
 210              		.loc 1 227 3 is_stmt 1 view .LVU76
 211              	.LVL20:
 227:../Public/heap.c **** 	}
 212              		.loc 1 227 19 is_stmt 0 view .LVU77
 213 002e 1046     		mov	r0, r2
 214 0030 F0E7     		b	.L8
 215              	.LVL21:
 216              	.L20:
 214:../Public/heap.c ****     blocklink_t *pxIterator;
 217              		.loc 1 214 1 view .LVU78
 218 0032 10B4     		push	{r4}
 219              	.LCFI0:
 220              		.cfi_def_cfa_offset 4
 221              		.cfi_offset 4, -4
 232:../Public/heap.c **** 		{
 222              		.loc 1 232 3 is_stmt 1 view .LVU79
 232:../Public/heap.c **** 		{
 223              		.loc 1 232 36 is_stmt 0 view .LVU80
 224 0034 0A4C     		ldr	r4, .L21+4
 225 0036 2468     		ldr	r4, [r4]
 232:../Public/heap.c **** 		{
 226              		.loc 1 232 5 view .LVU81
 227 0038 A342     		cmp	r3, r4
 228 003a 0BD0     		beq	.L10
 235:../Public/heap.c **** 			pblockto_insert->p_next_freeblock = pxIterator->p_next_freeblock->p_next_freeblock;
 229              		.loc 1 235 4 is_stmt 1 view .LVU82
 235:../Public/heap.c **** 			pblockto_insert->p_next_freeblock = pxIterator->p_next_freeblock->p_next_freeblock;
 230              		.loc 1 235 63 is_stmt 0 view .LVU83
 231 003c 5B68     		ldr	r3, [r3, #4]
 235:../Public/heap.c **** 			pblockto_insert->p_next_freeblock = pxIterator->p_next_freeblock->p_next_freeblock;
 232              		.loc 1 235 32 view .LVU84
 233 003e 1944     		add	r1, r1, r3
 234 0040 4160     		str	r1, [r0, #4]
 236:../Public/heap.c **** 		}
 235              		.loc 1 236 4 is_stmt 1 view .LVU85
 236:../Public/heap.c **** 		}
 236              		.loc 1 236 50 is_stmt 0 view .LVU86
 237 0042 1368     		ldr	r3, [r2]
 236:../Public/heap.c **** 		}
 238              		.loc 1 236 68 view .LVU87
 239 0044 1B68     		ldr	r3, [r3]
 236:../Public/heap.c **** 		}
 240              		.loc 1 236 38 view .LVU88
 241 0046 0360     		str	r3, [r0]
 242              	.L11:
 247:../Public/heap.c **** 	{
 243              		.loc 1 247 2 is_stmt 1 view .LVU89
 247:../Public/heap.c **** 	{
 244              		.loc 1 247 4 is_stmt 0 view .LVU90
 245 0048 9042     		cmp	r0, r2
 246 004a 00D0     		beq	.L6
 247              		.loc 1 249 3 is_stmt 1 view .LVU91
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 10


 248              		.loc 1 249 32 is_stmt 0 view .LVU92
 249 004c 1060     		str	r0, [r2]
 250              	.L6:
 250:../Public/heap.c **** 	}
 251:../Public/heap.c **** }
 251              		.loc 1 251 1 view .LVU93
 252 004e 5DF8044B 		ldr	r4, [sp], #4
 253              	.LCFI1:
 254              		.cfi_remember_state
 255              		.cfi_restore 4
 256              		.cfi_def_cfa_offset 0
 257 0052 7047     		bx	lr
 258              	.L10:
 259              	.LCFI2:
 260              		.cfi_restore_state
 240:../Public/heap.c **** 		}
 261              		.loc 1 240 4 is_stmt 1 view .LVU94
 240:../Public/heap.c **** 		}
 262              		.loc 1 240 38 is_stmt 0 view .LVU95
 263 0054 0460     		str	r4, [r0]
 264 0056 F7E7     		b	.L11
 265              	.L16:
 266              	.LCFI3:
 267              		.cfi_def_cfa_offset 0
 268              		.cfi_restore 4
 240:../Public/heap.c **** 		}
 269              		.loc 1 240 38 view .LVU96
 270 0058 7047     		bx	lr
 271              	.L22:
 272 005a 00BF     		.align	2
 273              	.L21:
 274 005c 00000000 		.word	.LANCHOR0
 275 0060 00000000 		.word	.LANCHOR1
 276              		.cfi_endproc
 277              	.LFE6:
 279              		.section	.text.heap_malloc,"ax",%progbits
 280              		.align	1
 281              		.global	heap_malloc
 282              		.syntax unified
 283              		.thumb
 284              		.thumb_func
 286              	heap_malloc:
 287              	.LVL22:
 288              	.LFB0:
  42:../Public/heap.c ****     blocklink_t *pxBlock, *p_previous_block, *p_new_blocklink;
 289              		.loc 1 42 1 is_stmt 1 view -0
 290              		.cfi_startproc
 291              		@ args = 0, pretend = 0, frame = 0
 292              		@ frame_needed = 0, uses_anonymous_args = 0
  42:../Public/heap.c ****     blocklink_t *pxBlock, *p_previous_block, *p_new_blocklink;
 293              		.loc 1 42 1 is_stmt 0 view .LVU98
 294 0000 70B5     		push	{r4, r5, r6, lr}
 295              	.LCFI4:
 296              		.cfi_def_cfa_offset 16
 297              		.cfi_offset 4, -16
 298              		.cfi_offset 5, -12
 299              		.cfi_offset 6, -8
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 11


 300              		.cfi_offset 14, -4
 301 0002 0546     		mov	r5, r0
  43:../Public/heap.c ****     void *p_return = NULL;
 302              		.loc 1 43 5 is_stmt 1 view .LVU99
  44:../Public/heap.c **** 	// vTaskSuspendAll();
 303              		.loc 1 44 5 view .LVU100
 304              	.LVL23:
  47:../Public/heap.c **** 		{
 305              		.loc 1 47 3 view .LVU101
  47:../Public/heap.c **** 		{
 306              		.loc 1 47 12 is_stmt 0 view .LVU102
 307 0004 274B     		ldr	r3, .L39
 308 0006 1B68     		ldr	r3, [r3]
  47:../Public/heap.c **** 		{
 309              		.loc 1 47 5 view .LVU103
 310 0008 A3B1     		cbz	r3, .L37
 311              	.LVL24:
 312              	.L24:
  51:../Public/heap.c **** 		{
 313              		.loc 1 51 3 is_stmt 1 view .LVU104
  51:../Public/heap.c **** 		{
 314              		.loc 1 51 21 is_stmt 0 view .LVU105
 315 000a 274B     		ldr	r3, .L39+4
 316 000c 1B68     		ldr	r3, [r3]
  51:../Public/heap.c **** 		{
 317              		.loc 1 51 5 view .LVU106
 318 000e 1D42     		tst	r5, r3
 319 0010 40D1     		bne	.L31
  53:../Public/heap.c **** 			{
 320              		.loc 1 53 4 is_stmt 1 view .LVU107
  53:../Public/heap.c **** 			{
 321              		.loc 1 53 6 is_stmt 0 view .LVU108
 322 0012 35B1     		cbz	r5, .L26
  55:../Public/heap.c **** 				if( ( wanted_size & BYTE_ALIGNMENT_MASK ) != 0x00 )
 323              		.loc 1 55 5 is_stmt 1 view .LVU109
  55:../Public/heap.c **** 				if( ( wanted_size & BYTE_ALIGNMENT_MASK ) != 0x00 )
 324              		.loc 1 55 17 is_stmt 0 view .LVU110
 325 0014 0835     		adds	r5, r5, #8
 326              	.LVL25:
  56:../Public/heap.c **** 				{
 327              		.loc 1 56 5 is_stmt 1 view .LVU111
  56:../Public/heap.c **** 				{
 328              		.loc 1 56 7 is_stmt 0 view .LVU112
 329 0016 15F0070F 		tst	r5, #7
 330 001a 02D0     		beq	.L26
  58:../Public/heap.c **** 					user_assert_param( ( wanted_size & BYTE_ALIGNMENT_MASK ) == 0 );
 331              		.loc 1 58 6 is_stmt 1 view .LVU113
  58:../Public/heap.c **** 					user_assert_param( ( wanted_size & BYTE_ALIGNMENT_MASK ) == 0 );
 332              		.loc 1 58 18 is_stmt 0 view .LVU114
 333 001c 25F00705 		bic	r5, r5, #7
 334              	.LVL26:
  58:../Public/heap.c **** 					user_assert_param( ( wanted_size & BYTE_ALIGNMENT_MASK ) == 0 );
 335              		.loc 1 58 18 view .LVU115
 336 0020 0835     		adds	r5, r5, #8
 337              	.LVL27:
 338              	.L26:
  59:../Public/heap.c **** 				}
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 12


 339              		.loc 1 59 6 is_stmt 1 view .LVU116
  63:../Public/heap.c **** 			{
 340              		.loc 1 63 4 view .LVU117
  63:../Public/heap.c **** 			{
 341              		.loc 1 63 6 is_stmt 0 view .LVU118
 342 0022 002D     		cmp	r5, #0
 343 0024 38D0     		beq	.L32
  63:../Public/heap.c **** 			{
 344              		.loc 1 63 45 discriminator 1 view .LVU119
 345 0026 214B     		ldr	r3, .L39+8
 346 0028 1B68     		ldr	r3, [r3]
  63:../Public/heap.c **** 			{
 347              		.loc 1 63 28 discriminator 1 view .LVU120
 348 002a AB42     		cmp	r3, r5
 349 002c 36D3     		bcc	.L33
  65:../Public/heap.c **** 				pxBlock = pstart.p_next_freeblock;
 350              		.loc 1 65 5 is_stmt 1 view .LVU121
 351              	.LVL28:
  66:../Public/heap.c **** 				while( ( pxBlock->xBlockSize < wanted_size ) && ( pxBlock->p_next_freeblock != NULL ) )
 352              		.loc 1 66 5 view .LVU122
  66:../Public/heap.c **** 				while( ( pxBlock->xBlockSize < wanted_size ) && ( pxBlock->p_next_freeblock != NULL ) )
 353              		.loc 1 66 13 is_stmt 0 view .LVU123
 354 002e 204A     		ldr	r2, .L39+12
 355 0030 1468     		ldr	r4, [r2]
 356              	.LVL29:
  67:../Public/heap.c **** 				{
 357              		.loc 1 67 5 is_stmt 1 view .LVU124
  67:../Public/heap.c **** 				{
 358              		.loc 1 67 10 is_stmt 0 view .LVU125
 359 0032 04E0     		b	.L28
 360              	.LVL30:
 361              	.L37:
  49:../Public/heap.c **** 		}
 362              		.loc 1 49 4 is_stmt 1 view .LVU126
 363 0034 FFF7FEFF 		bl	heap_init
 364              	.LVL31:
  49:../Public/heap.c **** 		}
 365              		.loc 1 49 4 is_stmt 0 view .LVU127
 366 0038 E7E7     		b	.L24
 367              	.LVL32:
 368              	.L34:
  69:../Public/heap.c **** 					pxBlock = pxBlock->p_next_freeblock;
 369              		.loc 1 69 23 view .LVU128
 370 003a 2246     		mov	r2, r4
 371              	.LVL33:
  70:../Public/heap.c **** 				}
 372              		.loc 1 70 14 view .LVU129
 373 003c 1C46     		mov	r4, r3
 374              	.LVL34:
 375              	.L28:
  67:../Public/heap.c **** 				{
 376              		.loc 1 67 10 is_stmt 1 view .LVU130
  67:../Public/heap.c **** 				{
 377              		.loc 1 67 21 is_stmt 0 view .LVU131
 378 003e 6368     		ldr	r3, [r4, #4]
  67:../Public/heap.c **** 				{
 379              		.loc 1 67 10 view .LVU132
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 13


 380 0040 AB42     		cmp	r3, r5
 381 0042 02D2     		bcs	.L27
  67:../Public/heap.c **** 				{
 382              		.loc 1 67 62 discriminator 1 view .LVU133
 383 0044 2368     		ldr	r3, [r4]
  67:../Public/heap.c **** 				{
 384              		.loc 1 67 50 discriminator 1 view .LVU134
 385 0046 002B     		cmp	r3, #0
 386 0048 F7D1     		bne	.L34
 387              	.L27:
  73:../Public/heap.c **** 				{
 388              		.loc 1 73 5 is_stmt 1 view .LVU135
  73:../Public/heap.c **** 				{
 389              		.loc 1 73 17 is_stmt 0 view .LVU136
 390 004a 164B     		ldr	r3, .L39
 391 004c 1B68     		ldr	r3, [r3]
  73:../Public/heap.c **** 				{
 392              		.loc 1 73 7 view .LVU137
 393 004e A342     		cmp	r3, r4
 394 0050 26D0     		beq	.L35
  75:../Public/heap.c **** 
 395              		.loc 1 75 6 is_stmt 1 view .LVU138
  75:../Public/heap.c **** 
 396              		.loc 1 75 62 is_stmt 0 view .LVU139
 397 0052 1668     		ldr	r6, [r2]
  75:../Public/heap.c **** 
 398              		.loc 1 75 15 view .LVU140
 399 0054 0836     		adds	r6, r6, #8
 400              	.LVL35:
  77:../Public/heap.c **** 
 401              		.loc 1 77 6 is_stmt 1 view .LVU141
  77:../Public/heap.c **** 
 402              		.loc 1 77 50 is_stmt 0 view .LVU142
 403 0056 2368     		ldr	r3, [r4]
  77:../Public/heap.c **** 
 404              		.loc 1 77 41 view .LVU143
 405 0058 1360     		str	r3, [r2]
  79:../Public/heap.c **** 					{
 406              		.loc 1 79 6 is_stmt 1 view .LVU144
  79:../Public/heap.c **** 					{
 407              		.loc 1 79 19 is_stmt 0 view .LVU145
 408 005a 6368     		ldr	r3, [r4, #4]
  79:../Public/heap.c **** 					{
 409              		.loc 1 79 32 view .LVU146
 410 005c 5B1B     		subs	r3, r3, r5
  79:../Public/heap.c **** 					{
 411              		.loc 1 79 8 view .LVU147
 412 005e 102B     		cmp	r3, #16
 413 0060 12D8     		bhi	.L38
 414              	.LVL36:
 415              	.L29:
  90:../Public/heap.c **** 
 416              		.loc 1 90 6 is_stmt 1 view .LVU148
  90:../Public/heap.c **** 
 417              		.loc 1 90 37 is_stmt 0 view .LVU149
 418 0062 6268     		ldr	r2, [r4, #4]
  90:../Public/heap.c **** 
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 14


 419              		.loc 1 90 27 view .LVU150
 420 0064 1149     		ldr	r1, .L39+8
 421 0066 0B68     		ldr	r3, [r1]
 422 0068 9B1A     		subs	r3, r3, r2
 423 006a 0B60     		str	r3, [r1]
  92:../Public/heap.c **** 					{
 424              		.loc 1 92 6 is_stmt 1 view .LVU151
  92:../Public/heap.c **** 					{
 425              		.loc 1 92 31 is_stmt 0 view .LVU152
 426 006c 1149     		ldr	r1, .L39+16
 427 006e 0968     		ldr	r1, [r1]
  92:../Public/heap.c **** 					{
 428              		.loc 1 92 8 view .LVU153
 429 0070 8B42     		cmp	r3, r1
 430 0072 01D2     		bcs	.L30
  94:../Public/heap.c **** 					}
 431              		.loc 1 94 7 is_stmt 1 view .LVU154
  94:../Public/heap.c **** 					}
 432              		.loc 1 94 39 is_stmt 0 view .LVU155
 433 0074 0F49     		ldr	r1, .L39+16
 434 0076 0B60     		str	r3, [r1]
 435              	.L30:
  96:../Public/heap.c **** 					pxBlock->p_next_freeblock = NULL;
 436              		.loc 1 96 6 is_stmt 1 view .LVU156
  96:../Public/heap.c **** 					pxBlock->p_next_freeblock = NULL;
 437              		.loc 1 96 26 is_stmt 0 view .LVU157
 438 0078 0B4B     		ldr	r3, .L39+4
 439 007a 1B68     		ldr	r3, [r3]
 440 007c 1343     		orrs	r3, r3, r2
 441 007e 6360     		str	r3, [r4, #4]
  97:../Public/heap.c **** 				}
 442              		.loc 1 97 6 is_stmt 1 view .LVU158
  97:../Public/heap.c **** 				}
 443              		.loc 1 97 32 is_stmt 0 view .LVU159
 444 0080 0023     		movs	r3, #0
 445 0082 2360     		str	r3, [r4]
 446              	.LVL37:
 447              	.L23:
 120:../Public/heap.c **** /*-----------------------------------------------------------*/
 448              		.loc 1 120 1 view .LVU160
 449 0084 3046     		mov	r0, r6
 450 0086 70BD     		pop	{r4, r5, r6, pc}
 451              	.LVL38:
 452              	.L38:
  81:../Public/heap.c **** 						user_assert_param( ( ( ( size_t ) p_new_blocklink ) & BYTE_ALIGNMENT_MASK ) == 0 );
 453              		.loc 1 81 7 is_stmt 1 view .LVU161
  81:../Public/heap.c **** 						user_assert_param( ( ( ( size_t ) p_new_blocklink ) & BYTE_ALIGNMENT_MASK ) == 0 );
 454              		.loc 1 81 23 is_stmt 0 view .LVU162
 455 0088 6019     		adds	r0, r4, r5
 456              	.LVL39:
  82:../Public/heap.c **** 
 457              		.loc 1 82 7 is_stmt 1 view .LVU163
  84:../Public/heap.c **** 						pxBlock->xBlockSize = wanted_size;
 458              		.loc 1 84 7 view .LVU164
  84:../Public/heap.c **** 						pxBlock->xBlockSize = wanted_size;
 459              		.loc 1 84 35 is_stmt 0 view .LVU165
 460 008a 4360     		str	r3, [r0, #4]
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 15


  85:../Public/heap.c **** 
 461              		.loc 1 85 7 is_stmt 1 view .LVU166
  85:../Public/heap.c **** 
 462              		.loc 1 85 27 is_stmt 0 view .LVU167
 463 008c 6560     		str	r5, [r4, #4]
  87:../Public/heap.c **** 					}
 464              		.loc 1 87 7 is_stmt 1 view .LVU168
 465 008e FFF7FEFF 		bl	insert_block_into_freeList
 466              	.LVL40:
  87:../Public/heap.c **** 					}
 467              		.loc 1 87 7 is_stmt 0 view .LVU169
 468 0092 E6E7     		b	.L29
 469              	.LVL41:
 470              	.L31:
  44:../Public/heap.c **** 	// vTaskSuspendAll();
 471              		.loc 1 44 11 view .LVU170
 472 0094 0026     		movs	r6, #0
 473 0096 F5E7     		b	.L23
 474              	.L32:
  44:../Public/heap.c **** 	// vTaskSuspendAll();
 475              		.loc 1 44 11 view .LVU171
 476 0098 0026     		movs	r6, #0
 477 009a F3E7     		b	.L23
 478              	.L33:
 479 009c 0026     		movs	r6, #0
 480 009e F1E7     		b	.L23
 481              	.LVL42:
 482              	.L35:
  44:../Public/heap.c **** 	// vTaskSuspendAll();
 483              		.loc 1 44 11 view .LVU172
 484 00a0 0026     		movs	r6, #0
 118:../Public/heap.c **** 	return p_return;
 485              		.loc 1 118 2 is_stmt 1 view .LVU173
 119:../Public/heap.c **** }
 486              		.loc 1 119 2 view .LVU174
 119:../Public/heap.c **** }
 487              		.loc 1 119 9 is_stmt 0 view .LVU175
 488 00a2 EFE7     		b	.L23
 489              	.L40:
 490              		.align	2
 491              	.L39:
 492 00a4 00000000 		.word	.LANCHOR1
 493 00a8 00000000 		.word	.LANCHOR4
 494 00ac 00000000 		.word	.LANCHOR3
 495 00b0 00000000 		.word	.LANCHOR0
 496 00b4 00000000 		.word	.LANCHOR2
 497              		.cfi_endproc
 498              	.LFE0:
 500              		.section	.text.heap_free,"ax",%progbits
 501              		.align	1
 502              		.global	heap_free
 503              		.syntax unified
 504              		.thumb
 505              		.thumb_func
 507              	heap_free:
 508              	.LVL43:
 509              	.LFB1:
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 16


 124:../Public/heap.c **** uint8_t *puc = ( uint8_t * ) pv;
 510              		.loc 1 124 1 is_stmt 1 view -0
 511              		.cfi_startproc
 512              		@ args = 0, pretend = 0, frame = 0
 513              		@ frame_needed = 0, uses_anonymous_args = 0
 125:../Public/heap.c **** blocklink_t *pxLink;
 514              		.loc 1 125 1 view .LVU177
 126:../Public/heap.c **** 
 515              		.loc 1 126 1 view .LVU178
 128:../Public/heap.c **** 	{
 516              		.loc 1 128 2 view .LVU179
 128:../Public/heap.c **** 	{
 517              		.loc 1 128 4 is_stmt 0 view .LVU180
 518 0000 B8B1     		cbz	r0, .L44
 519 0002 0346     		mov	r3, r0
 130:../Public/heap.c **** 
 520              		.loc 1 130 3 is_stmt 1 view .LVU181
 130:../Public/heap.c **** 
 521              		.loc 1 130 7 is_stmt 0 view .LVU182
 522 0004 0838     		subs	r0, r0, #8
 523              	.LVL44:
 132:../Public/heap.c **** 
 524              		.loc 1 132 3 is_stmt 1 view .LVU183
 134:../Public/heap.c **** 		user_assert_param( pxLink->p_next_freeblock == NULL );
 525              		.loc 1 134 3 view .LVU184
 135:../Public/heap.c **** 
 526              		.loc 1 135 3 view .LVU185
 137:../Public/heap.c **** 		{
 527              		.loc 1 137 3 view .LVU186
 137:../Public/heap.c **** 		{
 528              		.loc 1 137 15 is_stmt 0 view .LVU187
 529 0006 53F8042C 		ldr	r2, [r3, #-4]
 137:../Public/heap.c **** 		{
 530              		.loc 1 137 28 view .LVU188
 531 000a 0A49     		ldr	r1, .L48
 532 000c 0968     		ldr	r1, [r1]
 137:../Public/heap.c **** 		{
 533              		.loc 1 137 5 view .LVU189
 534 000e 0A42     		tst	r2, r1
 535 0010 0FD0     		beq	.L44
 124:../Public/heap.c **** uint8_t *puc = ( uint8_t * ) pv;
 536              		.loc 1 124 1 view .LVU190
 537 0012 10B5     		push	{r4, lr}
 538              	.LCFI5:
 539              		.cfi_def_cfa_offset 8
 540              		.cfi_offset 4, -8
 541              		.cfi_offset 14, -4
 139:../Public/heap.c **** 			{
 542              		.loc 1 139 4 is_stmt 1 view .LVU191
 139:../Public/heap.c **** 			{
 543              		.loc 1 139 6 is_stmt 0 view .LVU192
 544 0014 53F8084C 		ldr	r4, [r3, #-8]
 545 0018 04B1     		cbz	r4, .L47
 546              	.LVL45:
 547              	.L41:
 153:../Public/heap.c **** /*-----------------------------------------------------------*/
 548              		.loc 1 153 1 view .LVU193
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 17


 549 001a 10BD     		pop	{r4, pc}
 550              	.LVL46:
 551              	.L47:
 141:../Public/heap.c **** 
 552              		.loc 1 141 5 is_stmt 1 view .LVU194
 141:../Public/heap.c **** 
 553              		.loc 1 141 24 is_stmt 0 view .LVU195
 554 001c 22EA0102 		bic	r2, r2, r1
 555 0020 43F8042C 		str	r2, [r3, #-4]
 145:../Public/heap.c **** 					// traceFREE( pv, pxLink->xBlockSize );
 556              		.loc 1 145 6 is_stmt 1 view .LVU196
 145:../Public/heap.c **** 					// traceFREE( pv, pxLink->xBlockSize );
 557              		.loc 1 145 27 is_stmt 0 view .LVU197
 558 0024 0449     		ldr	r1, .L48+4
 559 0026 0B68     		ldr	r3, [r1]
 560              	.LVL47:
 145:../Public/heap.c **** 					// traceFREE( pv, pxLink->xBlockSize );
 561              		.loc 1 145 27 view .LVU198
 562 0028 1A44     		add	r2, r2, r3
 563 002a 0A60     		str	r2, [r1]
 147:../Public/heap.c **** 				}
 564              		.loc 1 147 6 is_stmt 1 view .LVU199
 565 002c FFF7FEFF 		bl	insert_block_into_freeList
 566              	.LVL48:
 153:../Public/heap.c **** /*-----------------------------------------------------------*/
 567              		.loc 1 153 1 is_stmt 0 view .LVU200
 568 0030 F3E7     		b	.L41
 569              	.LVL49:
 570              	.L44:
 571              	.LCFI6:
 572              		.cfi_def_cfa_offset 0
 573              		.cfi_restore 4
 574              		.cfi_restore 14
 153:../Public/heap.c **** /*-----------------------------------------------------------*/
 575              		.loc 1 153 1 view .LVU201
 576 0032 7047     		bx	lr
 577              	.L49:
 578              		.align	2
 579              	.L48:
 580 0034 00000000 		.word	.LANCHOR4
 581 0038 00000000 		.word	.LANCHOR3
 582              		.cfi_endproc
 583              	.LFE1:
 585              		.section	.text.heap_get_freeheap_size,"ax",%progbits
 586              		.align	1
 587              		.global	heap_get_freeheap_size
 588              		.syntax unified
 589              		.thumb
 590              		.thumb_func
 592              	heap_get_freeheap_size:
 593              	.LFB2:
 157:../Public/heap.c **** 	return free_bytes_remaining;
 594              		.loc 1 157 1 is_stmt 1 view -0
 595              		.cfi_startproc
 596              		@ args = 0, pretend = 0, frame = 0
 597              		@ frame_needed = 0, uses_anonymous_args = 0
 598              		@ link register save eliminated.
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 18


 158:../Public/heap.c **** }
 599              		.loc 1 158 2 view .LVU203
 159:../Public/heap.c **** /*-----------------------------------------------------------*/
 600              		.loc 1 159 1 is_stmt 0 view .LVU204
 601 0000 014B     		ldr	r3, .L51
 602 0002 1868     		ldr	r0, [r3]
 603 0004 7047     		bx	lr
 604              	.L52:
 605 0006 00BF     		.align	2
 606              	.L51:
 607 0008 00000000 		.word	.LANCHOR3
 608              		.cfi_endproc
 609              	.LFE2:
 611              		.section	.text.heap_get_minimumever_freeheapsize,"ax",%progbits
 612              		.align	1
 613              		.global	heap_get_minimumever_freeheapsize
 614              		.syntax unified
 615              		.thumb
 616              		.thumb_func
 618              	heap_get_minimumever_freeheapsize:
 619              	.LFB3:
 163:../Public/heap.c **** 	return minimum_everfreebytes_remaining;
 620              		.loc 1 163 1 is_stmt 1 view -0
 621              		.cfi_startproc
 622              		@ args = 0, pretend = 0, frame = 0
 623              		@ frame_needed = 0, uses_anonymous_args = 0
 624              		@ link register save eliminated.
 164:../Public/heap.c **** }
 625              		.loc 1 164 2 view .LVU206
 165:../Public/heap.c **** /*-----------------------------------------------------------*/
 626              		.loc 1 165 1 is_stmt 0 view .LVU207
 627 0000 014B     		ldr	r3, .L54
 628 0002 1868     		ldr	r0, [r3]
 629 0004 7047     		bx	lr
 630              	.L55:
 631 0006 00BF     		.align	2
 632              	.L54:
 633 0008 00000000 		.word	.LANCHOR2
 634              		.cfi_endproc
 635              	.LFE3:
 637              		.section	.text.vPortInitialiseBlocks,"ax",%progbits
 638              		.align	1
 639              		.global	vPortInitialiseBlocks
 640              		.syntax unified
 641              		.thumb
 642              		.thumb_func
 644              	vPortInitialiseBlocks:
 645              	.LFB4:
 169:../Public/heap.c **** }
 646              		.loc 1 169 1 is_stmt 1 view -0
 647              		.cfi_startproc
 648              		@ args = 0, pretend = 0, frame = 0
 649              		@ frame_needed = 0, uses_anonymous_args = 0
 650              		@ link register save eliminated.
 170:../Public/heap.c **** /*-----------------------------------------------------------*/
 651              		.loc 1 170 1 view .LVU209
 652 0000 7047     		bx	lr
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 19


 653              		.cfi_endproc
 654              	.LFE4:
 656              		.section	.bss.block_allocatedbit,"aw",%nobits
 657              		.align	2
 658              		.set	.LANCHOR4,. + 0
 661              	block_allocatedbit:
 662 0000 00000000 		.space	4
 663              		.section	.bss.free_bytes_remaining,"aw",%nobits
 664              		.align	2
 665              		.set	.LANCHOR3,. + 0
 668              	free_bytes_remaining:
 669 0000 00000000 		.space	4
 670              		.section	.bss.minimum_everfreebytes_remaining,"aw",%nobits
 671              		.align	2
 672              		.set	.LANCHOR2,. + 0
 675              	minimum_everfreebytes_remaining:
 676 0000 00000000 		.space	4
 677              		.section	.bss.pend,"aw",%nobits
 678              		.align	2
 679              		.set	.LANCHOR1,. + 0
 682              	pend:
 683 0000 00000000 		.space	4
 684              		.section	.bss.pstart,"aw",%nobits
 685              		.align	2
 686              		.set	.LANCHOR0,. + 0
 689              	pstart:
 690 0000 00000000 		.space	8
 690      00000000 
 691              		.section	.bss.ucHeap,"aw",%nobits
 692              		.align	2
 695              	ucHeap:
 696 0000 00000000 		.space	4096
 696      00000000 
 696      00000000 
 696      00000000 
 696      00000000 
 697              		.text
 698              	.Letext0:
 699              		.file 2 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\lib\\gcc\\arm-none-eabi\\10.3.1\\inclu
 700              		.file 3 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\machine\\_defa
 701              		.file 4 "d:\\program files\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\sys\\_stdint.h
ARM GAS  C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s 			page 20


DEFINED SYMBOLS
                            *ABS*:00000000 heap.c
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:20     .text.heap_init:00000000 $t
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:25     .text.heap_init:00000000 heap_init
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:131    .text.heap_init:0000004c $d
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:695    .bss.ucHeap:00000000 ucHeap
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:141    .text.insert_block_into_freeList:00000000 $t
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:146    .text.insert_block_into_freeList:00000000 insert_block_into_freeList
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:274    .text.insert_block_into_freeList:0000005c $d
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:280    .text.heap_malloc:00000000 $t
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:286    .text.heap_malloc:00000000 heap_malloc
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:492    .text.heap_malloc:000000a4 $d
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:501    .text.heap_free:00000000 $t
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:507    .text.heap_free:00000000 heap_free
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:580    .text.heap_free:00000034 $d
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:586    .text.heap_get_freeheap_size:00000000 $t
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:592    .text.heap_get_freeheap_size:00000000 heap_get_freeheap_size
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:607    .text.heap_get_freeheap_size:00000008 $d
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:612    .text.heap_get_minimumever_freeheapsize:00000000 $t
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:618    .text.heap_get_minimumever_freeheapsize:00000000 heap_get_minimumever_freeheapsize
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:633    .text.heap_get_minimumever_freeheapsize:00000008 $d
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:638    .text.vPortInitialiseBlocks:00000000 $t
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:644    .text.vPortInitialiseBlocks:00000000 vPortInitialiseBlocks
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:657    .bss.block_allocatedbit:00000000 $d
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:661    .bss.block_allocatedbit:00000000 block_allocatedbit
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:664    .bss.free_bytes_remaining:00000000 $d
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:668    .bss.free_bytes_remaining:00000000 free_bytes_remaining
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:671    .bss.minimum_everfreebytes_remaining:00000000 $d
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:675    .bss.minimum_everfreebytes_remaining:00000000 minimum_everfreebytes_remaining
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:678    .bss.pend:00000000 $d
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:682    .bss.pend:00000000 pend
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:685    .bss.pstart:00000000 $d
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:689    .bss.pstart:00000000 pstart
C:\Users\zhangge\AppData\Local\Temp\cckwe8FR.s:692    .bss.ucHeap:00000000 $d

NO UNDEFINED SYMBOLS
