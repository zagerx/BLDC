ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"heap.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.heap_init,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	heap_init:
  26              	.LFB5:
  27              		.file 1 "../Public/heap.c"
   1:../Public/heap.c **** 
   2:../Public/heap.c **** #include <stdlib.h>
   3:../Public/heap.c **** #include "_assert.h"
   4:../Public/heap.c **** #include "stdint.h"
   5:../Public/heap.c **** 
   6:../Public/heap.c **** #if 1
   7:../Public/heap.c **** #define TOTAL_HEAP_SIZE                    ((size_t)4096)
   8:../Public/heap.c **** #define BYTE_ALIGNMENT			8
   9:../Public/heap.c **** #if BYTE_ALIGNMENT == 8
  10:../Public/heap.c **** 	#define BYTE_ALIGNMENT_MASK ( 0x0007 )
  11:../Public/heap.c **** #endif
  12:../Public/heap.c **** 
  13:../Public/heap.c **** #define heapMINIMUM_BLOCK_SIZE	( ( size_t ) ( heap_structSize << 1 ) )
  14:../Public/heap.c **** 
  15:../Public/heap.c **** #define BITS_PER_BYTE		( ( size_t ) 8 )
  16:../Public/heap.c **** 
  17:../Public/heap.c **** 
  18:../Public/heap.c **** static uint8_t ucHeap[ TOTAL_HEAP_SIZE ];
  19:../Public/heap.c **** 
  20:../Public/heap.c **** typedef struct block_link
  21:../Public/heap.c **** {
  22:../Public/heap.c **** 	struct block_link *p_next_freeblock;	
  23:../Public/heap.c **** 	size_t xBlockSize;						
  24:../Public/heap.c **** } blocklink_t;
  25:../Public/heap.c **** 
  26:../Public/heap.c **** 
  27:../Public/heap.c **** static void insert_block_into_freeList( blocklink_t *pblockto_insert );
  28:../Public/heap.c **** static void heap_init( void );
  29:../Public/heap.c **** 
  30:../Public/heap.c **** static const size_t heap_structSize	= ( sizeof( blocklink_t ) + ( ( size_t ) ( BYTE_ALIGNMENT - 1 )
  31:../Public/heap.c **** 
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 2


  32:../Public/heap.c **** static blocklink_t pstart, *pend = NULL;
  33:../Public/heap.c **** 
  34:../Public/heap.c **** static size_t free_bytes_remaining = 0U;
  35:../Public/heap.c **** static size_t minimum_everfreebytes_remaining = 0U;
  36:../Public/heap.c **** 
  37:../Public/heap.c **** static size_t block_allocatedbit = 0;
  38:../Public/heap.c **** 
  39:../Public/heap.c **** /*-----------------------------------------------------------*/
  40:../Public/heap.c **** 
  41:../Public/heap.c **** void *heap_malloc( size_t wanted_size )
  42:../Public/heap.c **** {
  43:../Public/heap.c ****     blocklink_t *pxBlock, *p_previous_block, *p_new_blocklink;
  44:../Public/heap.c ****     void *p_return = NULL;
  45:../Public/heap.c **** 	// vTaskSuspendAll();
  46:../Public/heap.c **** 	{
  47:../Public/heap.c **** 		if( pend == NULL )
  48:../Public/heap.c **** 		{
  49:../Public/heap.c **** 			heap_init();
  50:../Public/heap.c **** 		}
  51:../Public/heap.c **** 		if( ( wanted_size & block_allocatedbit ) == 0 )
  52:../Public/heap.c **** 		{
  53:../Public/heap.c **** 			if( wanted_size > 0 )
  54:../Public/heap.c **** 			{
  55:../Public/heap.c **** 				wanted_size += heap_structSize;
  56:../Public/heap.c **** 				if( ( wanted_size & BYTE_ALIGNMENT_MASK ) != 0x00 )
  57:../Public/heap.c **** 				{
  58:../Public/heap.c **** 					wanted_size += ( BYTE_ALIGNMENT - ( wanted_size & BYTE_ALIGNMENT_MASK ) );
  59:../Public/heap.c **** 					user_assert_param( ( wanted_size & BYTE_ALIGNMENT_MASK ) == 0 );
  60:../Public/heap.c **** 				}
  61:../Public/heap.c **** 			}
  62:../Public/heap.c **** 
  63:../Public/heap.c **** 			if( ( wanted_size > 0 ) && ( wanted_size <= free_bytes_remaining ) )
  64:../Public/heap.c **** 			{
  65:../Public/heap.c **** 				p_previous_block = &pstart;
  66:../Public/heap.c **** 				pxBlock = pstart.p_next_freeblock;
  67:../Public/heap.c **** 				while( ( pxBlock->xBlockSize < wanted_size ) && ( pxBlock->p_next_freeblock != NULL ) )
  68:../Public/heap.c **** 				{
  69:../Public/heap.c **** 					p_previous_block = pxBlock;
  70:../Public/heap.c **** 					pxBlock = pxBlock->p_next_freeblock;
  71:../Public/heap.c **** 				}
  72:../Public/heap.c **** 
  73:../Public/heap.c **** 				if( pxBlock != pend )
  74:../Public/heap.c **** 				{
  75:../Public/heap.c **** 					p_return = ( void * ) ( ( ( uint8_t * ) p_previous_block->p_next_freeblock ) + heap_structSize
  76:../Public/heap.c **** 
  77:../Public/heap.c **** 					p_previous_block->p_next_freeblock = pxBlock->p_next_freeblock;
  78:../Public/heap.c **** 
  79:../Public/heap.c **** 					if( ( pxBlock->xBlockSize - wanted_size ) > heapMINIMUM_BLOCK_SIZE )
  80:../Public/heap.c **** 					{
  81:../Public/heap.c **** 						p_new_blocklink = ( void * ) ( ( ( uint8_t * ) pxBlock ) + wanted_size );
  82:../Public/heap.c **** 						user_assert_param( ( ( ( size_t ) p_new_blocklink ) & BYTE_ALIGNMENT_MASK ) == 0 );
  83:../Public/heap.c **** 
  84:../Public/heap.c **** 						p_new_blocklink->xBlockSize = pxBlock->xBlockSize - wanted_size;
  85:../Public/heap.c **** 						pxBlock->xBlockSize = wanted_size;
  86:../Public/heap.c **** 
  87:../Public/heap.c **** 						insert_block_into_freeList( p_new_blocklink );
  88:../Public/heap.c **** 					}
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 3


  89:../Public/heap.c **** 
  90:../Public/heap.c **** 					free_bytes_remaining -= pxBlock->xBlockSize;
  91:../Public/heap.c **** 
  92:../Public/heap.c **** 					if( free_bytes_remaining < minimum_everfreebytes_remaining )
  93:../Public/heap.c **** 					{
  94:../Public/heap.c **** 						minimum_everfreebytes_remaining = free_bytes_remaining;
  95:../Public/heap.c **** 					}
  96:../Public/heap.c **** 					pxBlock->xBlockSize |= block_allocatedbit;
  97:../Public/heap.c **** 					pxBlock->p_next_freeblock = NULL;
  98:../Public/heap.c **** 				}
  99:../Public/heap.c **** 			}
 100:../Public/heap.c **** 		}
 101:../Public/heap.c **** 	}
 102:../Public/heap.c **** 	// ( void ) xTaskResumeAll();
 103:../Public/heap.c **** 
 104:../Public/heap.c **** 	#if( configUSE_MALLOC_FAILED_HOOK == 1 )
 105:../Public/heap.c **** 	{
 106:../Public/heap.c **** 		if( p_return == NULL )
 107:../Public/heap.c **** 		{
 108:../Public/heap.c **** 			extern void vApplicationMallocFailedHook( void );
 109:../Public/heap.c **** 			vApplicationMallocFailedHook();
 110:../Public/heap.c **** 		}
 111:../Public/heap.c **** 		else
 112:../Public/heap.c **** 		{
 113:../Public/heap.c **** 			
 114:../Public/heap.c **** 		}
 115:../Public/heap.c **** 	}
 116:../Public/heap.c **** 	#endif
 117:../Public/heap.c **** 
 118:../Public/heap.c **** 	user_assert_param( ( ( ( size_t ) p_return ) & ( size_t ) BYTE_ALIGNMENT_MASK ) == 0 );
 119:../Public/heap.c **** 	return p_return;
 120:../Public/heap.c **** }
 121:../Public/heap.c **** /*-----------------------------------------------------------*/
 122:../Public/heap.c **** 
 123:../Public/heap.c **** void heap_free( void *pv )
 124:../Public/heap.c **** {
 125:../Public/heap.c **** uint8_t *puc = ( uint8_t * ) pv;
 126:../Public/heap.c **** blocklink_t *pxLink;
 127:../Public/heap.c **** 
 128:../Public/heap.c **** 	if( pv != NULL )
 129:../Public/heap.c **** 	{
 130:../Public/heap.c **** 		puc -= heap_structSize;
 131:../Public/heap.c **** 
 132:../Public/heap.c **** 		pxLink = ( void * ) puc;
 133:../Public/heap.c **** 
 134:../Public/heap.c **** 		user_assert_param( ( pxLink->xBlockSize & block_allocatedbit ) != 0 );
 135:../Public/heap.c **** 		user_assert_param( pxLink->p_next_freeblock == NULL );
 136:../Public/heap.c **** 
 137:../Public/heap.c **** 		if( ( pxLink->xBlockSize & block_allocatedbit ) != 0 )
 138:../Public/heap.c **** 		{
 139:../Public/heap.c **** 			if( pxLink->p_next_freeblock == NULL )
 140:../Public/heap.c **** 			{
 141:../Public/heap.c **** 				pxLink->xBlockSize &= ~block_allocatedbit;
 142:../Public/heap.c **** 
 143:../Public/heap.c **** 				// vTaskSuspendAll();
 144:../Public/heap.c **** 				{
 145:../Public/heap.c **** 					free_bytes_remaining += pxLink->xBlockSize;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 4


 146:../Public/heap.c **** 					// traceFREE( pv, pxLink->xBlockSize );
 147:../Public/heap.c **** 					insert_block_into_freeList( ( ( blocklink_t * ) pxLink ) );
 148:../Public/heap.c **** 				}
 149:../Public/heap.c **** 				// ( void ) xTaskResumeAll();
 150:../Public/heap.c **** 			}
 151:../Public/heap.c **** 		}
 152:../Public/heap.c **** 	}
 153:../Public/heap.c **** }
 154:../Public/heap.c **** /*-----------------------------------------------------------*/
 155:../Public/heap.c **** 
 156:../Public/heap.c **** size_t heap_get_freeheap_size( void )
 157:../Public/heap.c **** {
 158:../Public/heap.c **** 	return free_bytes_remaining;
 159:../Public/heap.c **** }
 160:../Public/heap.c **** /*-----------------------------------------------------------*/
 161:../Public/heap.c **** 
 162:../Public/heap.c **** size_t heap_get_minimumever_freeheapsize( void )
 163:../Public/heap.c **** {
 164:../Public/heap.c **** 	return minimum_everfreebytes_remaining;
 165:../Public/heap.c **** }
 166:../Public/heap.c **** /*-----------------------------------------------------------*/
 167:../Public/heap.c **** 
 168:../Public/heap.c **** void vPortInitialiseBlocks( void )
 169:../Public/heap.c **** {
 170:../Public/heap.c **** }
 171:../Public/heap.c **** /*-----------------------------------------------------------*/
 172:../Public/heap.c **** 
 173:../Public/heap.c **** static void heap_init( void )
 174:../Public/heap.c **** {
  28              		.loc 1 174 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
 175:../Public/heap.c **** blocklink_t *p_first_freeblock;
  33              		.loc 1 175 1 view .LVU1
 176:../Public/heap.c **** uint8_t *p_ucaligned_heap;
  34              		.loc 1 176 1 view .LVU2
 177:../Public/heap.c **** size_t uxaddress;
  35              		.loc 1 177 1 view .LVU3
 178:../Public/heap.c **** size_t xTotalHeapSize = TOTAL_HEAP_SIZE;
  36              		.loc 1 178 1 view .LVU4
  37              	.LVL0:
 179:../Public/heap.c **** 
 180:../Public/heap.c **** 	uxaddress = ( size_t ) ucHeap;
  38              		.loc 1 180 2 view .LVU5
  39              		.loc 1 180 12 is_stmt 0 view .LVU6
  40 0000 124A     		ldr	r2, .L4
  41              	.LVL1:
 181:../Public/heap.c **** 
 182:../Public/heap.c **** 	if( ( uxaddress & BYTE_ALIGNMENT_MASK ) != 0 )
  42              		.loc 1 182 2 is_stmt 1 view .LVU7
  43              		.loc 1 182 4 is_stmt 0 view .LVU8
  44 0002 12F0070F 		tst	r2, #7
  45 0006 1ED0     		beq	.L3
 183:../Public/heap.c **** 	{
 184:../Public/heap.c **** 		uxaddress += ( BYTE_ALIGNMENT - 1 );
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 5


  46              		.loc 1 184 3 is_stmt 1 view .LVU9
  47              		.loc 1 184 13 is_stmt 0 view .LVU10
  48 0008 D11D     		adds	r1, r2, #7
  49              	.LVL2:
 185:../Public/heap.c **** 		uxaddress &= ~( ( size_t ) BYTE_ALIGNMENT_MASK );
  50              		.loc 1 185 3 is_stmt 1 view .LVU11
  51              		.loc 1 185 13 is_stmt 0 view .LVU12
  52 000a 21F00701 		bic	r1, r1, #7
  53              	.LVL3:
 186:../Public/heap.c **** 		xTotalHeapSize -= uxaddress - ( size_t ) ucHeap;
  54              		.loc 1 186 3 is_stmt 1 view .LVU13
  55              		.loc 1 186 18 is_stmt 0 view .LVU14
  56 000e C1F58053 		rsb	r3, r1, #4096
  57 0012 1344     		add	r3, r3, r2
  58              	.LVL4:
 185:../Public/heap.c **** 		uxaddress &= ~( ( size_t ) BYTE_ALIGNMENT_MASK );
  59              		.loc 1 185 13 view .LVU15
  60 0014 0A46     		mov	r2, r1
  61              	.LVL5:
  62              	.L2:
 187:../Public/heap.c **** 	}
 188:../Public/heap.c **** 
 189:../Public/heap.c **** 	p_ucaligned_heap = ( uint8_t * ) uxaddress;
  63              		.loc 1 189 2 is_stmt 1 view .LVU16
 190:../Public/heap.c **** 
 191:../Public/heap.c **** 	pstart.p_next_freeblock = ( void * ) p_ucaligned_heap;
  64              		.loc 1 191 2 view .LVU17
  65              		.loc 1 191 26 is_stmt 0 view .LVU18
  66 0016 0E48     		ldr	r0, .L4+4
  67 0018 0260     		str	r2, [r0]
 192:../Public/heap.c **** 	pstart.xBlockSize = ( size_t ) 0;
  68              		.loc 1 192 2 is_stmt 1 view .LVU19
  69              		.loc 1 192 20 is_stmt 0 view .LVU20
  70 001a 0021     		movs	r1, #0
  71 001c 4160     		str	r1, [r0, #4]
 193:../Public/heap.c **** 
 194:../Public/heap.c **** 
 195:../Public/heap.c **** 	uxaddress = ( ( size_t ) p_ucaligned_heap ) + xTotalHeapSize;
  72              		.loc 1 195 2 is_stmt 1 view .LVU21
  73              		.loc 1 195 12 is_stmt 0 view .LVU22
  74 001e 1344     		add	r3, r3, r2
  75              	.LVL6:
 196:../Public/heap.c **** 	uxaddress -= heap_structSize;
  76              		.loc 1 196 2 is_stmt 1 view .LVU23
  77              		.loc 1 196 12 is_stmt 0 view .LVU24
  78 0020 083B     		subs	r3, r3, #8
  79              	.LVL7:
 197:../Public/heap.c **** 	uxaddress &= ~( ( size_t ) BYTE_ALIGNMENT_MASK );
  80              		.loc 1 197 2 is_stmt 1 view .LVU25
  81              		.loc 1 197 12 is_stmt 0 view .LVU26
  82 0022 23F00703 		bic	r3, r3, #7
  83              	.LVL8:
 198:../Public/heap.c **** 	pend = ( void * ) uxaddress;
  84              		.loc 1 198 2 is_stmt 1 view .LVU27
  85              		.loc 1 198 7 is_stmt 0 view .LVU28
  86 0026 0B48     		ldr	r0, .L4+8
  87 0028 0360     		str	r3, [r0]
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 6


 199:../Public/heap.c **** 	pend->xBlockSize = 0;
  88              		.loc 1 199 2 is_stmt 1 view .LVU29
  89              		.loc 1 199 19 is_stmt 0 view .LVU30
  90 002a 5960     		str	r1, [r3, #4]
 200:../Public/heap.c **** 	pend->p_next_freeblock = NULL;
  91              		.loc 1 200 2 is_stmt 1 view .LVU31
  92              		.loc 1 200 25 is_stmt 0 view .LVU32
  93 002c 1960     		str	r1, [r3]
 201:../Public/heap.c **** 
 202:../Public/heap.c **** 	p_first_freeblock = ( void * ) p_ucaligned_heap;
  94              		.loc 1 202 2 is_stmt 1 view .LVU33
  95              	.LVL9:
 203:../Public/heap.c **** 	p_first_freeblock->xBlockSize = uxaddress - ( size_t ) p_first_freeblock;
  96              		.loc 1 203 2 view .LVU34
  97              		.loc 1 203 44 is_stmt 0 view .LVU35
  98 002e 991A     		subs	r1, r3, r2
  99              		.loc 1 203 32 view .LVU36
 100 0030 5160     		str	r1, [r2, #4]
 204:../Public/heap.c **** 	p_first_freeblock->p_next_freeblock = pend;
 101              		.loc 1 204 2 is_stmt 1 view .LVU37
 102              		.loc 1 204 38 is_stmt 0 view .LVU38
 103 0032 1360     		str	r3, [r2]
 205:../Public/heap.c **** 
 206:../Public/heap.c **** 	minimum_everfreebytes_remaining = p_first_freeblock->xBlockSize;
 104              		.loc 1 206 2 is_stmt 1 view .LVU39
 105              		.loc 1 206 34 is_stmt 0 view .LVU40
 106 0034 084B     		ldr	r3, .L4+12
 107              	.LVL10:
 108              		.loc 1 206 34 view .LVU41
 109 0036 1960     		str	r1, [r3]
 207:../Public/heap.c **** 	free_bytes_remaining = p_first_freeblock->xBlockSize;
 110              		.loc 1 207 2 is_stmt 1 view .LVU42
 111              		.loc 1 207 23 is_stmt 0 view .LVU43
 112 0038 084B     		ldr	r3, .L4+16
 113 003a 1960     		str	r1, [r3]
 208:../Public/heap.c **** 
 209:../Public/heap.c **** 	block_allocatedbit = ( ( size_t ) 1 ) << ( ( sizeof( size_t ) * BITS_PER_BYTE ) - 1 );
 114              		.loc 1 209 2 is_stmt 1 view .LVU44
 115              		.loc 1 209 21 is_stmt 0 view .LVU45
 116 003c 084B     		ldr	r3, .L4+20
 117 003e 4FF00042 		mov	r2, #-2147483648
 118              	.LVL11:
 119              		.loc 1 209 21 view .LVU46
 120 0042 1A60     		str	r2, [r3]
 210:../Public/heap.c **** }
 121              		.loc 1 210 1 view .LVU47
 122 0044 7047     		bx	lr
 123              	.LVL12:
 124              	.L3:
 178:../Public/heap.c **** 
 125              		.loc 1 178 8 view .LVU48
 126 0046 4FF48053 		mov	r3, #4096
 127 004a E4E7     		b	.L2
 128              	.L5:
 129              		.align	2
 130              	.L4:
 131 004c 00000000 		.word	ucHeap
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 7


 132 0050 00000000 		.word	.LANCHOR0
 133 0054 00000000 		.word	.LANCHOR1
 134 0058 00000000 		.word	.LANCHOR2
 135 005c 00000000 		.word	.LANCHOR3
 136 0060 00000000 		.word	.LANCHOR4
 137              		.cfi_endproc
 138              	.LFE5:
 140              		.section	.text.insert_block_into_freeList,"ax",%progbits
 141              		.align	1
 142              		.syntax unified
 143              		.thumb
 144              		.thumb_func
 145              		.fpu fpv4-sp-d16
 147              	insert_block_into_freeList:
 148              	.LVL13:
 149              	.LFB6:
 211:../Public/heap.c **** /*-----------------------------------------------------------*/
 212:../Public/heap.c **** 
 213:../Public/heap.c **** static void insert_block_into_freeList( blocklink_t *pblockto_insert )
 214:../Public/heap.c **** {
 150              		.loc 1 214 1 is_stmt 1 view -0
 151              		.cfi_startproc
 152              		@ args = 0, pretend = 0, frame = 0
 153              		@ frame_needed = 0, uses_anonymous_args = 0
 154              		@ link register save eliminated.
 215:../Public/heap.c ****     blocklink_t *pxIterator;
 155              		.loc 1 215 5 view .LVU50
 216:../Public/heap.c ****     uint8_t *puc;
 156              		.loc 1 216 5 view .LVU51
 217:../Public/heap.c **** 
 218:../Public/heap.c **** 	for( pxIterator = &pstart; pxIterator->p_next_freeblock < pblockto_insert; pxIterator = pxIterator
 157              		.loc 1 218 2 view .LVU52
 158              		.loc 1 218 18 is_stmt 0 view .LVU53
 159 0000 164B     		ldr	r3, .L21
 160              	.LVL14:
 161              	.L7:
 162              		.loc 1 218 29 is_stmt 1 discriminator 1 view .LVU54
 163 0002 1A46     		mov	r2, r3
 164              		.loc 1 218 39 is_stmt 0 discriminator 1 view .LVU55
 165 0004 1B68     		ldr	r3, [r3]
 166              	.LVL15:
 167              		.loc 1 218 2 discriminator 1 view .LVU56
 168 0006 8342     		cmp	r3, r0
 169 0008 FBD3     		bcc	.L7
 219:../Public/heap.c **** 	{
 220:../Public/heap.c **** 		/* Nothing to do here, just iterate to the right position. */
 221:../Public/heap.c **** 	}
 222:../Public/heap.c **** 
 223:../Public/heap.c **** 	puc = ( uint8_t * ) pxIterator;
 170              		.loc 1 223 2 is_stmt 1 view .LVU57
 171              	.LVL16:
 224:../Public/heap.c **** 	if( ( puc + pxIterator->xBlockSize ) == ( uint8_t * ) pblockto_insert )
 172              		.loc 1 224 2 view .LVU58
 173              		.loc 1 224 24 is_stmt 0 view .LVU59
 174 000a 5168     		ldr	r1, [r2, #4]
 175              		.loc 1 224 12 view .LVU60
 176 000c 02EB010C 		add	ip, r2, r1
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 8


 177              		.loc 1 224 4 view .LVU61
 178 0010 8445     		cmp	ip, r0
 179 0012 09D0     		beq	.L19
 180              	.L8:
 225:../Public/heap.c **** 	{
 226:../Public/heap.c **** 		pxIterator->xBlockSize += pblockto_insert->xBlockSize;
 227:../Public/heap.c **** 		pblockto_insert = pxIterator;
 228:../Public/heap.c **** 	}
 229:../Public/heap.c **** 	puc = ( uint8_t * ) pblockto_insert;
 181              		.loc 1 229 2 is_stmt 1 view .LVU62
 182              	.LVL17:
 230:../Public/heap.c **** 	if( ( puc + pblockto_insert->xBlockSize ) == ( uint8_t * ) pxIterator->p_next_freeblock )
 183              		.loc 1 230 2 view .LVU63
 184              		.loc 1 230 29 is_stmt 0 view .LVU64
 185 0014 4168     		ldr	r1, [r0, #4]
 186              		.loc 1 230 12 view .LVU65
 187 0016 00EB010C 		add	ip, r0, r1
 188              		.loc 1 230 4 view .LVU66
 189 001a 6345     		cmp	r3, ip
 190 001c 09D0     		beq	.L20
 231:../Public/heap.c **** 	{
 232:../Public/heap.c **** 		if( pxIterator->p_next_freeblock != pend )
 233:../Public/heap.c **** 		{
 234:../Public/heap.c **** 			/* Form one big block from the two blocks. */
 235:../Public/heap.c **** 			pblockto_insert->xBlockSize += pxIterator->p_next_freeblock->xBlockSize;
 236:../Public/heap.c **** 			pblockto_insert->p_next_freeblock = pxIterator->p_next_freeblock->p_next_freeblock;
 237:../Public/heap.c **** 		}
 238:../Public/heap.c **** 		else
 239:../Public/heap.c **** 		{
 240:../Public/heap.c **** 			pblockto_insert->p_next_freeblock = pend;
 241:../Public/heap.c **** 		}
 242:../Public/heap.c **** 	}
 243:../Public/heap.c **** 	else
 244:../Public/heap.c **** 	{
 245:../Public/heap.c **** 		pblockto_insert->p_next_freeblock = pxIterator->p_next_freeblock;
 191              		.loc 1 245 3 is_stmt 1 view .LVU67
 192              		.loc 1 245 37 is_stmt 0 view .LVU68
 193 001e 0360     		str	r3, [r0]
 246:../Public/heap.c **** 	}
 247:../Public/heap.c **** 	if( pxIterator != pblockto_insert )
 194              		.loc 1 247 2 is_stmt 1 view .LVU69
 195              		.loc 1 247 4 is_stmt 0 view .LVU70
 196 0020 9042     		cmp	r0, r2
 197 0022 19D0     		beq	.L16
 248:../Public/heap.c **** 	{
 249:../Public/heap.c **** 		pxIterator->p_next_freeblock = pblockto_insert;
 198              		.loc 1 249 3 is_stmt 1 view .LVU71
 199              		.loc 1 249 32 is_stmt 0 view .LVU72
 200 0024 1060     		str	r0, [r2]
 201 0026 7047     		bx	lr
 202              	.LVL18:
 203              	.L19:
 226:../Public/heap.c **** 		pblockto_insert = pxIterator;
 204              		.loc 1 226 3 is_stmt 1 view .LVU73
 226:../Public/heap.c **** 		pblockto_insert = pxIterator;
 205              		.loc 1 226 44 is_stmt 0 view .LVU74
 206 0028 4068     		ldr	r0, [r0, #4]
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 9


 207              	.LVL19:
 226:../Public/heap.c **** 		pblockto_insert = pxIterator;
 208              		.loc 1 226 26 view .LVU75
 209 002a 0144     		add	r1, r1, r0
 210 002c 5160     		str	r1, [r2, #4]
 227:../Public/heap.c **** 	}
 211              		.loc 1 227 3 is_stmt 1 view .LVU76
 212              	.LVL20:
 227:../Public/heap.c **** 	}
 213              		.loc 1 227 19 is_stmt 0 view .LVU77
 214 002e 1046     		mov	r0, r2
 215 0030 F0E7     		b	.L8
 216              	.LVL21:
 217              	.L20:
 214:../Public/heap.c ****     blocklink_t *pxIterator;
 218              		.loc 1 214 1 view .LVU78
 219 0032 10B4     		push	{r4}
 220              	.LCFI0:
 221              		.cfi_def_cfa_offset 4
 222              		.cfi_offset 4, -4
 232:../Public/heap.c **** 		{
 223              		.loc 1 232 3 is_stmt 1 view .LVU79
 232:../Public/heap.c **** 		{
 224              		.loc 1 232 36 is_stmt 0 view .LVU80
 225 0034 0A4C     		ldr	r4, .L21+4
 226 0036 2468     		ldr	r4, [r4]
 232:../Public/heap.c **** 		{
 227              		.loc 1 232 5 view .LVU81
 228 0038 A342     		cmp	r3, r4
 229 003a 0BD0     		beq	.L10
 235:../Public/heap.c **** 			pblockto_insert->p_next_freeblock = pxIterator->p_next_freeblock->p_next_freeblock;
 230              		.loc 1 235 4 is_stmt 1 view .LVU82
 235:../Public/heap.c **** 			pblockto_insert->p_next_freeblock = pxIterator->p_next_freeblock->p_next_freeblock;
 231              		.loc 1 235 63 is_stmt 0 view .LVU83
 232 003c 5B68     		ldr	r3, [r3, #4]
 235:../Public/heap.c **** 			pblockto_insert->p_next_freeblock = pxIterator->p_next_freeblock->p_next_freeblock;
 233              		.loc 1 235 32 view .LVU84
 234 003e 1944     		add	r1, r1, r3
 235 0040 4160     		str	r1, [r0, #4]
 236:../Public/heap.c **** 		}
 236              		.loc 1 236 4 is_stmt 1 view .LVU85
 236:../Public/heap.c **** 		}
 237              		.loc 1 236 50 is_stmt 0 view .LVU86
 238 0042 1368     		ldr	r3, [r2]
 236:../Public/heap.c **** 		}
 239              		.loc 1 236 68 view .LVU87
 240 0044 1B68     		ldr	r3, [r3]
 236:../Public/heap.c **** 		}
 241              		.loc 1 236 38 view .LVU88
 242 0046 0360     		str	r3, [r0]
 243              	.L11:
 247:../Public/heap.c **** 	{
 244              		.loc 1 247 2 is_stmt 1 view .LVU89
 247:../Public/heap.c **** 	{
 245              		.loc 1 247 4 is_stmt 0 view .LVU90
 246 0048 9042     		cmp	r0, r2
 247 004a 00D0     		beq	.L6
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 10


 248              		.loc 1 249 3 is_stmt 1 view .LVU91
 249              		.loc 1 249 32 is_stmt 0 view .LVU92
 250 004c 1060     		str	r0, [r2]
 251              	.L6:
 250:../Public/heap.c **** 	}
 251:../Public/heap.c **** }
 252              		.loc 1 251 1 view .LVU93
 253 004e 5DF8044B 		ldr	r4, [sp], #4
 254              	.LCFI1:
 255              		.cfi_remember_state
 256              		.cfi_restore 4
 257              		.cfi_def_cfa_offset 0
 258 0052 7047     		bx	lr
 259              	.L10:
 260              	.LCFI2:
 261              		.cfi_restore_state
 240:../Public/heap.c **** 		}
 262              		.loc 1 240 4 is_stmt 1 view .LVU94
 240:../Public/heap.c **** 		}
 263              		.loc 1 240 38 is_stmt 0 view .LVU95
 264 0054 0460     		str	r4, [r0]
 265 0056 F7E7     		b	.L11
 266              	.L16:
 267              	.LCFI3:
 268              		.cfi_def_cfa_offset 0
 269              		.cfi_restore 4
 240:../Public/heap.c **** 		}
 270              		.loc 1 240 38 view .LVU96
 271 0058 7047     		bx	lr
 272              	.L22:
 273 005a 00BF     		.align	2
 274              	.L21:
 275 005c 00000000 		.word	.LANCHOR0
 276 0060 00000000 		.word	.LANCHOR1
 277              		.cfi_endproc
 278              	.LFE6:
 280              		.section	.text.heap_malloc,"ax",%progbits
 281              		.align	1
 282              		.global	heap_malloc
 283              		.syntax unified
 284              		.thumb
 285              		.thumb_func
 286              		.fpu fpv4-sp-d16
 288              	heap_malloc:
 289              	.LVL22:
 290              	.LFB0:
  42:../Public/heap.c ****     blocklink_t *pxBlock, *p_previous_block, *p_new_blocklink;
 291              		.loc 1 42 1 is_stmt 1 view -0
 292              		.cfi_startproc
 293              		@ args = 0, pretend = 0, frame = 0
 294              		@ frame_needed = 0, uses_anonymous_args = 0
  42:../Public/heap.c ****     blocklink_t *pxBlock, *p_previous_block, *p_new_blocklink;
 295              		.loc 1 42 1 is_stmt 0 view .LVU98
 296 0000 70B5     		push	{r4, r5, r6, lr}
 297              	.LCFI4:
 298              		.cfi_def_cfa_offset 16
 299              		.cfi_offset 4, -16
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 11


 300              		.cfi_offset 5, -12
 301              		.cfi_offset 6, -8
 302              		.cfi_offset 14, -4
 303 0002 0546     		mov	r5, r0
  43:../Public/heap.c ****     void *p_return = NULL;
 304              		.loc 1 43 5 is_stmt 1 view .LVU99
  44:../Public/heap.c **** 	// vTaskSuspendAll();
 305              		.loc 1 44 5 view .LVU100
 306              	.LVL23:
  47:../Public/heap.c **** 		{
 307              		.loc 1 47 3 view .LVU101
  47:../Public/heap.c **** 		{
 308              		.loc 1 47 12 is_stmt 0 view .LVU102
 309 0004 274B     		ldr	r3, .L39
 310 0006 1B68     		ldr	r3, [r3]
  47:../Public/heap.c **** 		{
 311              		.loc 1 47 5 view .LVU103
 312 0008 A3B1     		cbz	r3, .L37
 313              	.LVL24:
 314              	.L24:
  51:../Public/heap.c **** 		{
 315              		.loc 1 51 3 is_stmt 1 view .LVU104
  51:../Public/heap.c **** 		{
 316              		.loc 1 51 21 is_stmt 0 view .LVU105
 317 000a 274B     		ldr	r3, .L39+4
 318 000c 1B68     		ldr	r3, [r3]
  51:../Public/heap.c **** 		{
 319              		.loc 1 51 5 view .LVU106
 320 000e 1D42     		tst	r5, r3
 321 0010 40D1     		bne	.L31
  53:../Public/heap.c **** 			{
 322              		.loc 1 53 4 is_stmt 1 view .LVU107
  53:../Public/heap.c **** 			{
 323              		.loc 1 53 6 is_stmt 0 view .LVU108
 324 0012 35B1     		cbz	r5, .L26
  55:../Public/heap.c **** 				if( ( wanted_size & BYTE_ALIGNMENT_MASK ) != 0x00 )
 325              		.loc 1 55 5 is_stmt 1 view .LVU109
  55:../Public/heap.c **** 				if( ( wanted_size & BYTE_ALIGNMENT_MASK ) != 0x00 )
 326              		.loc 1 55 17 is_stmt 0 view .LVU110
 327 0014 0835     		adds	r5, r5, #8
 328              	.LVL25:
  56:../Public/heap.c **** 				{
 329              		.loc 1 56 5 is_stmt 1 view .LVU111
  56:../Public/heap.c **** 				{
 330              		.loc 1 56 7 is_stmt 0 view .LVU112
 331 0016 15F0070F 		tst	r5, #7
 332 001a 02D0     		beq	.L26
  58:../Public/heap.c **** 					user_assert_param( ( wanted_size & BYTE_ALIGNMENT_MASK ) == 0 );
 333              		.loc 1 58 6 is_stmt 1 view .LVU113
  58:../Public/heap.c **** 					user_assert_param( ( wanted_size & BYTE_ALIGNMENT_MASK ) == 0 );
 334              		.loc 1 58 18 is_stmt 0 view .LVU114
 335 001c 25F00705 		bic	r5, r5, #7
 336              	.LVL26:
  58:../Public/heap.c **** 					user_assert_param( ( wanted_size & BYTE_ALIGNMENT_MASK ) == 0 );
 337              		.loc 1 58 18 view .LVU115
 338 0020 0835     		adds	r5, r5, #8
 339              	.LVL27:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 12


 340              	.L26:
  59:../Public/heap.c **** 				}
 341              		.loc 1 59 6 is_stmt 1 view .LVU116
  63:../Public/heap.c **** 			{
 342              		.loc 1 63 4 view .LVU117
  63:../Public/heap.c **** 			{
 343              		.loc 1 63 6 is_stmt 0 view .LVU118
 344 0022 002D     		cmp	r5, #0
 345 0024 38D0     		beq	.L32
  63:../Public/heap.c **** 			{
 346              		.loc 1 63 45 discriminator 1 view .LVU119
 347 0026 214B     		ldr	r3, .L39+8
 348 0028 1B68     		ldr	r3, [r3]
  63:../Public/heap.c **** 			{
 349              		.loc 1 63 28 discriminator 1 view .LVU120
 350 002a AB42     		cmp	r3, r5
 351 002c 36D3     		bcc	.L33
  65:../Public/heap.c **** 				pxBlock = pstart.p_next_freeblock;
 352              		.loc 1 65 5 is_stmt 1 view .LVU121
 353              	.LVL28:
  66:../Public/heap.c **** 				while( ( pxBlock->xBlockSize < wanted_size ) && ( pxBlock->p_next_freeblock != NULL ) )
 354              		.loc 1 66 5 view .LVU122
  66:../Public/heap.c **** 				while( ( pxBlock->xBlockSize < wanted_size ) && ( pxBlock->p_next_freeblock != NULL ) )
 355              		.loc 1 66 13 is_stmt 0 view .LVU123
 356 002e 204A     		ldr	r2, .L39+12
 357 0030 1468     		ldr	r4, [r2]
 358              	.LVL29:
  67:../Public/heap.c **** 				{
 359              		.loc 1 67 5 is_stmt 1 view .LVU124
  67:../Public/heap.c **** 				{
 360              		.loc 1 67 10 is_stmt 0 view .LVU125
 361 0032 04E0     		b	.L28
 362              	.LVL30:
 363              	.L37:
  49:../Public/heap.c **** 		}
 364              		.loc 1 49 4 is_stmt 1 view .LVU126
 365 0034 FFF7FEFF 		bl	heap_init
 366              	.LVL31:
  49:../Public/heap.c **** 		}
 367              		.loc 1 49 4 is_stmt 0 view .LVU127
 368 0038 E7E7     		b	.L24
 369              	.LVL32:
 370              	.L34:
  69:../Public/heap.c **** 					pxBlock = pxBlock->p_next_freeblock;
 371              		.loc 1 69 23 view .LVU128
 372 003a 2246     		mov	r2, r4
 373              	.LVL33:
  70:../Public/heap.c **** 				}
 374              		.loc 1 70 14 view .LVU129
 375 003c 1C46     		mov	r4, r3
 376              	.LVL34:
 377              	.L28:
  67:../Public/heap.c **** 				{
 378              		.loc 1 67 10 is_stmt 1 view .LVU130
  67:../Public/heap.c **** 				{
 379              		.loc 1 67 21 is_stmt 0 view .LVU131
 380 003e 6368     		ldr	r3, [r4, #4]
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 13


  67:../Public/heap.c **** 				{
 381              		.loc 1 67 10 view .LVU132
 382 0040 AB42     		cmp	r3, r5
 383 0042 02D2     		bcs	.L27
  67:../Public/heap.c **** 				{
 384              		.loc 1 67 62 discriminator 1 view .LVU133
 385 0044 2368     		ldr	r3, [r4]
  67:../Public/heap.c **** 				{
 386              		.loc 1 67 50 discriminator 1 view .LVU134
 387 0046 002B     		cmp	r3, #0
 388 0048 F7D1     		bne	.L34
 389              	.L27:
  73:../Public/heap.c **** 				{
 390              		.loc 1 73 5 is_stmt 1 view .LVU135
  73:../Public/heap.c **** 				{
 391              		.loc 1 73 17 is_stmt 0 view .LVU136
 392 004a 164B     		ldr	r3, .L39
 393 004c 1B68     		ldr	r3, [r3]
  73:../Public/heap.c **** 				{
 394              		.loc 1 73 7 view .LVU137
 395 004e A342     		cmp	r3, r4
 396 0050 26D0     		beq	.L35
  75:../Public/heap.c **** 
 397              		.loc 1 75 6 is_stmt 1 view .LVU138
  75:../Public/heap.c **** 
 398              		.loc 1 75 62 is_stmt 0 view .LVU139
 399 0052 1668     		ldr	r6, [r2]
  75:../Public/heap.c **** 
 400              		.loc 1 75 15 view .LVU140
 401 0054 0836     		adds	r6, r6, #8
 402              	.LVL35:
  77:../Public/heap.c **** 
 403              		.loc 1 77 6 is_stmt 1 view .LVU141
  77:../Public/heap.c **** 
 404              		.loc 1 77 50 is_stmt 0 view .LVU142
 405 0056 2368     		ldr	r3, [r4]
  77:../Public/heap.c **** 
 406              		.loc 1 77 41 view .LVU143
 407 0058 1360     		str	r3, [r2]
  79:../Public/heap.c **** 					{
 408              		.loc 1 79 6 is_stmt 1 view .LVU144
  79:../Public/heap.c **** 					{
 409              		.loc 1 79 19 is_stmt 0 view .LVU145
 410 005a 6368     		ldr	r3, [r4, #4]
  79:../Public/heap.c **** 					{
 411              		.loc 1 79 32 view .LVU146
 412 005c 5B1B     		subs	r3, r3, r5
  79:../Public/heap.c **** 					{
 413              		.loc 1 79 8 view .LVU147
 414 005e 102B     		cmp	r3, #16
 415 0060 12D8     		bhi	.L38
 416              	.LVL36:
 417              	.L29:
  90:../Public/heap.c **** 
 418              		.loc 1 90 6 is_stmt 1 view .LVU148
  90:../Public/heap.c **** 
 419              		.loc 1 90 37 is_stmt 0 view .LVU149
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 14


 420 0062 6268     		ldr	r2, [r4, #4]
  90:../Public/heap.c **** 
 421              		.loc 1 90 27 view .LVU150
 422 0064 1149     		ldr	r1, .L39+8
 423 0066 0B68     		ldr	r3, [r1]
 424 0068 9B1A     		subs	r3, r3, r2
 425 006a 0B60     		str	r3, [r1]
  92:../Public/heap.c **** 					{
 426              		.loc 1 92 6 is_stmt 1 view .LVU151
  92:../Public/heap.c **** 					{
 427              		.loc 1 92 31 is_stmt 0 view .LVU152
 428 006c 1149     		ldr	r1, .L39+16
 429 006e 0968     		ldr	r1, [r1]
  92:../Public/heap.c **** 					{
 430              		.loc 1 92 8 view .LVU153
 431 0070 8B42     		cmp	r3, r1
 432 0072 01D2     		bcs	.L30
  94:../Public/heap.c **** 					}
 433              		.loc 1 94 7 is_stmt 1 view .LVU154
  94:../Public/heap.c **** 					}
 434              		.loc 1 94 39 is_stmt 0 view .LVU155
 435 0074 0F49     		ldr	r1, .L39+16
 436 0076 0B60     		str	r3, [r1]
 437              	.L30:
  96:../Public/heap.c **** 					pxBlock->p_next_freeblock = NULL;
 438              		.loc 1 96 6 is_stmt 1 view .LVU156
  96:../Public/heap.c **** 					pxBlock->p_next_freeblock = NULL;
 439              		.loc 1 96 26 is_stmt 0 view .LVU157
 440 0078 0B4B     		ldr	r3, .L39+4
 441 007a 1B68     		ldr	r3, [r3]
 442 007c 1343     		orrs	r3, r3, r2
 443 007e 6360     		str	r3, [r4, #4]
  97:../Public/heap.c **** 				}
 444              		.loc 1 97 6 is_stmt 1 view .LVU158
  97:../Public/heap.c **** 				}
 445              		.loc 1 97 32 is_stmt 0 view .LVU159
 446 0080 0023     		movs	r3, #0
 447 0082 2360     		str	r3, [r4]
 448              	.LVL37:
 449              	.L23:
 120:../Public/heap.c **** /*-----------------------------------------------------------*/
 450              		.loc 1 120 1 view .LVU160
 451 0084 3046     		mov	r0, r6
 452 0086 70BD     		pop	{r4, r5, r6, pc}
 453              	.LVL38:
 454              	.L38:
  81:../Public/heap.c **** 						user_assert_param( ( ( ( size_t ) p_new_blocklink ) & BYTE_ALIGNMENT_MASK ) == 0 );
 455              		.loc 1 81 7 is_stmt 1 view .LVU161
  81:../Public/heap.c **** 						user_assert_param( ( ( ( size_t ) p_new_blocklink ) & BYTE_ALIGNMENT_MASK ) == 0 );
 456              		.loc 1 81 23 is_stmt 0 view .LVU162
 457 0088 6019     		adds	r0, r4, r5
 458              	.LVL39:
  82:../Public/heap.c **** 
 459              		.loc 1 82 7 is_stmt 1 view .LVU163
  84:../Public/heap.c **** 						pxBlock->xBlockSize = wanted_size;
 460              		.loc 1 84 7 view .LVU164
  84:../Public/heap.c **** 						pxBlock->xBlockSize = wanted_size;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 15


 461              		.loc 1 84 35 is_stmt 0 view .LVU165
 462 008a 4360     		str	r3, [r0, #4]
  85:../Public/heap.c **** 
 463              		.loc 1 85 7 is_stmt 1 view .LVU166
  85:../Public/heap.c **** 
 464              		.loc 1 85 27 is_stmt 0 view .LVU167
 465 008c 6560     		str	r5, [r4, #4]
  87:../Public/heap.c **** 					}
 466              		.loc 1 87 7 is_stmt 1 view .LVU168
 467 008e FFF7FEFF 		bl	insert_block_into_freeList
 468              	.LVL40:
  87:../Public/heap.c **** 					}
 469              		.loc 1 87 7 is_stmt 0 view .LVU169
 470 0092 E6E7     		b	.L29
 471              	.LVL41:
 472              	.L31:
  44:../Public/heap.c **** 	// vTaskSuspendAll();
 473              		.loc 1 44 11 view .LVU170
 474 0094 0026     		movs	r6, #0
 475 0096 F5E7     		b	.L23
 476              	.L32:
  44:../Public/heap.c **** 	// vTaskSuspendAll();
 477              		.loc 1 44 11 view .LVU171
 478 0098 0026     		movs	r6, #0
 479 009a F3E7     		b	.L23
 480              	.L33:
 481 009c 0026     		movs	r6, #0
 482 009e F1E7     		b	.L23
 483              	.LVL42:
 484              	.L35:
  44:../Public/heap.c **** 	// vTaskSuspendAll();
 485              		.loc 1 44 11 view .LVU172
 486 00a0 0026     		movs	r6, #0
 118:../Public/heap.c **** 	return p_return;
 487              		.loc 1 118 2 is_stmt 1 view .LVU173
 119:../Public/heap.c **** }
 488              		.loc 1 119 2 view .LVU174
 119:../Public/heap.c **** }
 489              		.loc 1 119 9 is_stmt 0 view .LVU175
 490 00a2 EFE7     		b	.L23
 491              	.L40:
 492              		.align	2
 493              	.L39:
 494 00a4 00000000 		.word	.LANCHOR1
 495 00a8 00000000 		.word	.LANCHOR4
 496 00ac 00000000 		.word	.LANCHOR3
 497 00b0 00000000 		.word	.LANCHOR0
 498 00b4 00000000 		.word	.LANCHOR2
 499              		.cfi_endproc
 500              	.LFE0:
 502              		.section	.text.heap_free,"ax",%progbits
 503              		.align	1
 504              		.global	heap_free
 505              		.syntax unified
 506              		.thumb
 507              		.thumb_func
 508              		.fpu fpv4-sp-d16
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 16


 510              	heap_free:
 511              	.LVL43:
 512              	.LFB1:
 124:../Public/heap.c **** uint8_t *puc = ( uint8_t * ) pv;
 513              		.loc 1 124 1 is_stmt 1 view -0
 514              		.cfi_startproc
 515              		@ args = 0, pretend = 0, frame = 0
 516              		@ frame_needed = 0, uses_anonymous_args = 0
 125:../Public/heap.c **** blocklink_t *pxLink;
 517              		.loc 1 125 1 view .LVU177
 126:../Public/heap.c **** 
 518              		.loc 1 126 1 view .LVU178
 128:../Public/heap.c **** 	{
 519              		.loc 1 128 2 view .LVU179
 128:../Public/heap.c **** 	{
 520              		.loc 1 128 4 is_stmt 0 view .LVU180
 521 0000 B8B1     		cbz	r0, .L44
 522 0002 0346     		mov	r3, r0
 130:../Public/heap.c **** 
 523              		.loc 1 130 3 is_stmt 1 view .LVU181
 130:../Public/heap.c **** 
 524              		.loc 1 130 7 is_stmt 0 view .LVU182
 525 0004 0838     		subs	r0, r0, #8
 526              	.LVL44:
 132:../Public/heap.c **** 
 527              		.loc 1 132 3 is_stmt 1 view .LVU183
 134:../Public/heap.c **** 		user_assert_param( pxLink->p_next_freeblock == NULL );
 528              		.loc 1 134 3 view .LVU184
 135:../Public/heap.c **** 
 529              		.loc 1 135 3 view .LVU185
 137:../Public/heap.c **** 		{
 530              		.loc 1 137 3 view .LVU186
 137:../Public/heap.c **** 		{
 531              		.loc 1 137 15 is_stmt 0 view .LVU187
 532 0006 53F8042C 		ldr	r2, [r3, #-4]
 137:../Public/heap.c **** 		{
 533              		.loc 1 137 28 view .LVU188
 534 000a 0A49     		ldr	r1, .L48
 535 000c 0968     		ldr	r1, [r1]
 137:../Public/heap.c **** 		{
 536              		.loc 1 137 5 view .LVU189
 537 000e 0A42     		tst	r2, r1
 538 0010 0FD0     		beq	.L44
 124:../Public/heap.c **** uint8_t *puc = ( uint8_t * ) pv;
 539              		.loc 1 124 1 view .LVU190
 540 0012 10B5     		push	{r4, lr}
 541              	.LCFI5:
 542              		.cfi_def_cfa_offset 8
 543              		.cfi_offset 4, -8
 544              		.cfi_offset 14, -4
 139:../Public/heap.c **** 			{
 545              		.loc 1 139 4 is_stmt 1 view .LVU191
 139:../Public/heap.c **** 			{
 546              		.loc 1 139 6 is_stmt 0 view .LVU192
 547 0014 53F8084C 		ldr	r4, [r3, #-8]
 548 0018 04B1     		cbz	r4, .L47
 549              	.LVL45:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 17


 550              	.L41:
 153:../Public/heap.c **** /*-----------------------------------------------------------*/
 551              		.loc 1 153 1 view .LVU193
 552 001a 10BD     		pop	{r4, pc}
 553              	.LVL46:
 554              	.L47:
 141:../Public/heap.c **** 
 555              		.loc 1 141 5 is_stmt 1 view .LVU194
 141:../Public/heap.c **** 
 556              		.loc 1 141 24 is_stmt 0 view .LVU195
 557 001c 22EA0102 		bic	r2, r2, r1
 558 0020 43F8042C 		str	r2, [r3, #-4]
 145:../Public/heap.c **** 					// traceFREE( pv, pxLink->xBlockSize );
 559              		.loc 1 145 6 is_stmt 1 view .LVU196
 145:../Public/heap.c **** 					// traceFREE( pv, pxLink->xBlockSize );
 560              		.loc 1 145 27 is_stmt 0 view .LVU197
 561 0024 0449     		ldr	r1, .L48+4
 562 0026 0B68     		ldr	r3, [r1]
 563              	.LVL47:
 145:../Public/heap.c **** 					// traceFREE( pv, pxLink->xBlockSize );
 564              		.loc 1 145 27 view .LVU198
 565 0028 1A44     		add	r2, r2, r3
 566 002a 0A60     		str	r2, [r1]
 147:../Public/heap.c **** 				}
 567              		.loc 1 147 6 is_stmt 1 view .LVU199
 568 002c FFF7FEFF 		bl	insert_block_into_freeList
 569              	.LVL48:
 153:../Public/heap.c **** /*-----------------------------------------------------------*/
 570              		.loc 1 153 1 is_stmt 0 view .LVU200
 571 0030 F3E7     		b	.L41
 572              	.LVL49:
 573              	.L44:
 574              	.LCFI6:
 575              		.cfi_def_cfa_offset 0
 576              		.cfi_restore 4
 577              		.cfi_restore 14
 153:../Public/heap.c **** /*-----------------------------------------------------------*/
 578              		.loc 1 153 1 view .LVU201
 579 0032 7047     		bx	lr
 580              	.L49:
 581              		.align	2
 582              	.L48:
 583 0034 00000000 		.word	.LANCHOR4
 584 0038 00000000 		.word	.LANCHOR3
 585              		.cfi_endproc
 586              	.LFE1:
 588              		.section	.text.heap_get_freeheap_size,"ax",%progbits
 589              		.align	1
 590              		.global	heap_get_freeheap_size
 591              		.syntax unified
 592              		.thumb
 593              		.thumb_func
 594              		.fpu fpv4-sp-d16
 596              	heap_get_freeheap_size:
 597              	.LFB2:
 157:../Public/heap.c **** 	return free_bytes_remaining;
 598              		.loc 1 157 1 is_stmt 1 view -0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 18


 599              		.cfi_startproc
 600              		@ args = 0, pretend = 0, frame = 0
 601              		@ frame_needed = 0, uses_anonymous_args = 0
 602              		@ link register save eliminated.
 158:../Public/heap.c **** }
 603              		.loc 1 158 2 view .LVU203
 159:../Public/heap.c **** /*-----------------------------------------------------------*/
 604              		.loc 1 159 1 is_stmt 0 view .LVU204
 605 0000 014B     		ldr	r3, .L51
 606 0002 1868     		ldr	r0, [r3]
 607 0004 7047     		bx	lr
 608              	.L52:
 609 0006 00BF     		.align	2
 610              	.L51:
 611 0008 00000000 		.word	.LANCHOR3
 612              		.cfi_endproc
 613              	.LFE2:
 615              		.section	.text.heap_get_minimumever_freeheapsize,"ax",%progbits
 616              		.align	1
 617              		.global	heap_get_minimumever_freeheapsize
 618              		.syntax unified
 619              		.thumb
 620              		.thumb_func
 621              		.fpu fpv4-sp-d16
 623              	heap_get_minimumever_freeheapsize:
 624              	.LFB3:
 163:../Public/heap.c **** 	return minimum_everfreebytes_remaining;
 625              		.loc 1 163 1 is_stmt 1 view -0
 626              		.cfi_startproc
 627              		@ args = 0, pretend = 0, frame = 0
 628              		@ frame_needed = 0, uses_anonymous_args = 0
 629              		@ link register save eliminated.
 164:../Public/heap.c **** }
 630              		.loc 1 164 2 view .LVU206
 165:../Public/heap.c **** /*-----------------------------------------------------------*/
 631              		.loc 1 165 1 is_stmt 0 view .LVU207
 632 0000 014B     		ldr	r3, .L54
 633 0002 1868     		ldr	r0, [r3]
 634 0004 7047     		bx	lr
 635              	.L55:
 636 0006 00BF     		.align	2
 637              	.L54:
 638 0008 00000000 		.word	.LANCHOR2
 639              		.cfi_endproc
 640              	.LFE3:
 642              		.section	.text.vPortInitialiseBlocks,"ax",%progbits
 643              		.align	1
 644              		.global	vPortInitialiseBlocks
 645              		.syntax unified
 646              		.thumb
 647              		.thumb_func
 648              		.fpu fpv4-sp-d16
 650              	vPortInitialiseBlocks:
 651              	.LFB4:
 169:../Public/heap.c **** }
 652              		.loc 1 169 1 is_stmt 1 view -0
 653              		.cfi_startproc
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 19


 654              		@ args = 0, pretend = 0, frame = 0
 655              		@ frame_needed = 0, uses_anonymous_args = 0
 656              		@ link register save eliminated.
 170:../Public/heap.c **** /*-----------------------------------------------------------*/
 657              		.loc 1 170 1 view .LVU209
 658 0000 7047     		bx	lr
 659              		.cfi_endproc
 660              	.LFE4:
 662              		.section	.bss.block_allocatedbit,"aw",%nobits
 663              		.align	2
 664              		.set	.LANCHOR4,. + 0
 667              	block_allocatedbit:
 668 0000 00000000 		.space	4
 669              		.section	.bss.free_bytes_remaining,"aw",%nobits
 670              		.align	2
 671              		.set	.LANCHOR3,. + 0
 674              	free_bytes_remaining:
 675 0000 00000000 		.space	4
 676              		.section	.bss.minimum_everfreebytes_remaining,"aw",%nobits
 677              		.align	2
 678              		.set	.LANCHOR2,. + 0
 681              	minimum_everfreebytes_remaining:
 682 0000 00000000 		.space	4
 683              		.section	.bss.pend,"aw",%nobits
 684              		.align	2
 685              		.set	.LANCHOR1,. + 0
 688              	pend:
 689 0000 00000000 		.space	4
 690              		.section	.bss.pstart,"aw",%nobits
 691              		.align	2
 692              		.set	.LANCHOR0,. + 0
 695              	pstart:
 696 0000 00000000 		.space	8
 696      00000000 
 697              		.section	.bss.ucHeap,"aw",%nobits
 698              		.align	2
 701              	ucHeap:
 702 0000 00000000 		.space	4096
 702      00000000 
 702      00000000 
 702      00000000 
 702      00000000 
 703              		.text
 704              	.Letext0:
 705              		.file 2 "d:\\program files (x86)\\gcc-arm-none-eabi-10-2020-q4-major-win32\\tool\\lib\\gcc\\arm-no
 706              		.file 3 "d:\\program files (x86)\\gcc-arm-none-eabi-10-2020-q4-major-win32\\tool\\arm-none-eabi\\i
 707              		.file 4 "d:\\program files (x86)\\gcc-arm-none-eabi-10-2020-q4-major-win32\\tool\\arm-none-eabi\\i
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s 			page 20


DEFINED SYMBOLS
                            *ABS*:00000000 heap.c
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:18     .text.heap_init:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:25     .text.heap_init:00000000 heap_init
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:131    .text.heap_init:0000004c $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:701    .bss.ucHeap:00000000 ucHeap
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:141    .text.insert_block_into_freeList:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:147    .text.insert_block_into_freeList:00000000 insert_block_into_freeList
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:275    .text.insert_block_into_freeList:0000005c $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:281    .text.heap_malloc:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:288    .text.heap_malloc:00000000 heap_malloc
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:494    .text.heap_malloc:000000a4 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:503    .text.heap_free:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:510    .text.heap_free:00000000 heap_free
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:583    .text.heap_free:00000034 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:589    .text.heap_get_freeheap_size:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:596    .text.heap_get_freeheap_size:00000000 heap_get_freeheap_size
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:611    .text.heap_get_freeheap_size:00000008 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:616    .text.heap_get_minimumever_freeheapsize:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:623    .text.heap_get_minimumever_freeheapsize:00000000 heap_get_minimumever_freeheapsize
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:638    .text.heap_get_minimumever_freeheapsize:00000008 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:643    .text.vPortInitialiseBlocks:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:650    .text.vPortInitialiseBlocks:00000000 vPortInitialiseBlocks
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:663    .bss.block_allocatedbit:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:667    .bss.block_allocatedbit:00000000 block_allocatedbit
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:670    .bss.free_bytes_remaining:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:674    .bss.free_bytes_remaining:00000000 free_bytes_remaining
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:677    .bss.minimum_everfreebytes_remaining:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:681    .bss.minimum_everfreebytes_remaining:00000000 minimum_everfreebytes_remaining
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:684    .bss.pend:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:688    .bss.pend:00000000 pend
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:691    .bss.pstart:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:695    .bss.pstart:00000000 pstart
C:\Users\ADMINI~1\AppData\Local\Temp\ccH1POaU.s:698    .bss.ucHeap:00000000 $d

NO UNDEFINED SYMBOLS
