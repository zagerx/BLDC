ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccJmX9Ev.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"protocol_process.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata.protocol_parse.str1.4,"aMS",%progbits,1
  18              		.align	2
  19              	.LC0:
  20 0000 6D616C6C 		.ascii	"malloc fail\015\000"
  20      6F632066 
  20      61696C0D 
  20      00
  21              		.section	.text.protocol_parse,"ax",%progbits
  22              		.align	1
  23              		.global	protocol_parse
  24              		.arch armv7e-m
  25              		.syntax unified
  26              		.thumb
  27              		.thumb_func
  28              		.fpu fpv4-sp-d16
  30              	protocol_parse:
  31              	.LFB332:
  32              		.file 1 "../Protocol/protocol_process.c"
   1:../Protocol/protocol_process.c **** /** Modified by:			zager
   2:../Protocol/protocol_process.c **** ** Modified date:		2023-08-17
   3:../Protocol/protocol_process.c **** ** Version:
   4:../Protocol/protocol_process.c **** ** Descriptions:	协议解析
   5:../Protocol/protocol_process.c **** **
   6:../Protocol/protocol_process.c **** ***************************************************************************************************
   7:../Protocol/protocol_process.c **** #include "protocol_comment.h"
   8:../Protocol/protocol_process.c **** #include "protocol_cfg.h"
   9:../Protocol/protocol_process.c **** /**************************************************************************************************
  10:../Protocol/protocol_process.c **** ** Function name(函数名称):						protocol_parse()
  11:../Protocol/protocol_process.c **** **
  12:../Protocol/protocol_process.c **** ** Descriptions（描述）:							协议解析
  13:../Protocol/protocol_process.c **** **
  14:../Protocol/protocol_process.c **** ** input parameters（输入参数）:			None
  15:../Protocol/protocol_process.c **** ** Returned value（返回值）:					None
  16:../Protocol/protocol_process.c **** **         
  17:../Protocol/protocol_process.c **** ** Used global variables（全局变量）:	None
  18:../Protocol/protocol_process.c **** ** Calling modules（调用模块）:				fifo.c/h
  19:../Protocol/protocol_process.c **** **
  20:../Protocol/protocol_process.c **** ** Created by（创建人）:							zager
  21:../Protocol/protocol_process.c **** ** Created Date（创建日期）:					2023-08-17
  22:../Protocol/protocol_process.c **** **
  23:../Protocol/protocol_process.c **** ***************************************************************************************************
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccJmX9Ev.s 			page 2


  24:../Protocol/protocol_process.c **** void protocol_parse(void)
  25:../Protocol/protocol_process.c **** {
  33              		.loc 1 25 1 view -0
  34              		.cfi_startproc
  35              		@ args = 0, pretend = 0, frame = 264
  36              		@ frame_needed = 0, uses_anonymous_args = 0
  37 0000 10B5     		push	{r4, lr}
  38              	.LCFI0:
  39              		.cfi_def_cfa_offset 8
  40              		.cfi_offset 4, -8
  41              		.cfi_offset 14, -4
  42 0002 C2B0     		sub	sp, sp, #264
  43              	.LCFI1:
  44              		.cfi_def_cfa_offset 272
  26:../Protocol/protocol_process.c ****     unsigned char frame_buf[PRO_FRAME_MAX_SIZE];
  45              		.loc 1 26 5 view .LVU1
  27:../Protocol/protocol_process.c ****     unsigned short frame_len;
  46              		.loc 1 27 5 view .LVU2
  28:../Protocol/protocol_process.c **** 	/*读取1帧数据*/
  29:../Protocol/protocol_process.c **** 	if(_get_framedata_fromfifo(&frame_buf[0],&frame_len) != 0)
  47              		.loc 1 29 2 view .LVU3
  48              		.loc 1 29 5 is_stmt 0 view .LVU4
  49 0004 0DF10601 		add	r1, sp, #6
  50 0008 02A8     		add	r0, sp, #8
  51 000a FFF7FEFF 		bl	_get_framedata_fromfifo
  52              	.LVL0:
  53              		.loc 1 29 4 view .LVU5
  54 000e 08B1     		cbz	r0, .L5
  55              	.L1:
  30:../Protocol/protocol_process.c **** 	{
  31:../Protocol/protocol_process.c **** 		return;
  32:../Protocol/protocol_process.c **** 	}
  33:../Protocol/protocol_process.c ****     pro_frame_t * p_r_fram;
  34:../Protocol/protocol_process.c ****     p_r_fram = _unpack_proframe((unsigned char*)frame_buf,frame_len);
  35:../Protocol/protocol_process.c ****     if (!p_r_fram)
  36:../Protocol/protocol_process.c ****     {
  37:../Protocol/protocol_process.c ****         USER_DEBUG_NORMAL("malloc fail\r\n");
  38:../Protocol/protocol_process.c ****         return;
  39:../Protocol/protocol_process.c ****     }
  40:../Protocol/protocol_process.c ****     unsigned short cmd = __SWP16(p_r_fram->func_c);
  41:../Protocol/protocol_process.c ****     unsigned char cmd_fun = (unsigned char)cmd;
  42:../Protocol/protocol_process.c ****     unsigned char cmd_type = (unsigned char)(cmd>>8);
  43:../Protocol/protocol_process.c ****     search_msgmap(cmd_fun,p_r_fram->pdata,p_r_fram->len);
  44:../Protocol/protocol_process.c ****     heap_free(p_r_fram);
  45:../Protocol/protocol_process.c **** 
  46:../Protocol/protocol_process.c ****     return;
  47:../Protocol/protocol_process.c **** }
  56              		.loc 1 47 1 view .LVU6
  57 0010 42B0     		add	sp, sp, #264
  58              	.LCFI2:
  59              		.cfi_remember_state
  60              		.cfi_def_cfa_offset 8
  61              		@ sp needed
  62 0012 10BD     		pop	{r4, pc}
  63              	.L5:
  64              	.LCFI3:
  65              		.cfi_restore_state
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccJmX9Ev.s 			page 3


  33:../Protocol/protocol_process.c ****     p_r_fram = _unpack_proframe((unsigned char*)frame_buf,frame_len);
  66              		.loc 1 33 5 is_stmt 1 view .LVU7
  34:../Protocol/protocol_process.c ****     if (!p_r_fram)
  67              		.loc 1 34 5 view .LVU8
  34:../Protocol/protocol_process.c ****     if (!p_r_fram)
  68              		.loc 1 34 16 is_stmt 0 view .LVU9
  69 0014 BDF80610 		ldrh	r1, [sp, #6]
  70 0018 02A8     		add	r0, sp, #8
  71 001a FFF7FEFF 		bl	_unpack_proframe
  72              	.LVL1:
  35:../Protocol/protocol_process.c ****     {
  73              		.loc 1 35 5 is_stmt 1 view .LVU10
  35:../Protocol/protocol_process.c ****     {
  74              		.loc 1 35 8 is_stmt 0 view .LVU11
  75 001e 0446     		mov	r4, r0
  76 0020 48B1     		cbz	r0, .L6
  40:../Protocol/protocol_process.c ****     unsigned char cmd_fun = (unsigned char)cmd;
  77              		.loc 1 40 5 is_stmt 1 view .LVU12
  40:../Protocol/protocol_process.c ****     unsigned char cmd_fun = (unsigned char)cmd;
  78              		.loc 1 40 26 is_stmt 0 view .LVU13
  79 0022 8088     		ldrh	r0, [r0, #4]
  80              	.LVL2:
  41:../Protocol/protocol_process.c ****     unsigned char cmd_type = (unsigned char)(cmd>>8);
  81              		.loc 1 41 5 is_stmt 1 view .LVU14
  42:../Protocol/protocol_process.c ****     search_msgmap(cmd_fun,p_r_fram->pdata,p_r_fram->len);
  82              		.loc 1 42 5 view .LVU15
  43:../Protocol/protocol_process.c ****     heap_free(p_r_fram);
  83              		.loc 1 43 5 view .LVU16
  84 0024 E288     		ldrh	r2, [r4, #6]
  85 0026 A168     		ldr	r1, [r4, #8]
  86 0028 000A     		lsrs	r0, r0, #8
  87              	.LVL3:
  43:../Protocol/protocol_process.c ****     heap_free(p_r_fram);
  88              		.loc 1 43 5 is_stmt 0 view .LVU17
  89 002a FFF7FEFF 		bl	search_msgmap
  90              	.LVL4:
  44:../Protocol/protocol_process.c **** 
  91              		.loc 1 44 5 is_stmt 1 view .LVU18
  92 002e 2046     		mov	r0, r4
  93 0030 FFF7FEFF 		bl	heap_free
  94              	.LVL5:
  46:../Protocol/protocol_process.c **** }
  95              		.loc 1 46 5 view .LVU19
  96 0034 ECE7     		b	.L1
  97              	.LVL6:
  98              	.L6:
  37:../Protocol/protocol_process.c ****         return;
  99              		.loc 1 37 9 view .LVU20
 100 0036 0248     		ldr	r0, .L7
 101              	.LVL7:
  37:../Protocol/protocol_process.c ****         return;
 102              		.loc 1 37 9 is_stmt 0 view .LVU21
 103 0038 FFF7FEFF 		bl	puts
 104              	.LVL8:
  38:../Protocol/protocol_process.c ****     }
 105              		.loc 1 38 9 is_stmt 1 view .LVU22
 106 003c E8E7     		b	.L1
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccJmX9Ev.s 			page 4


 107              	.L8:
 108 003e 00BF     		.align	2
 109              	.L7:
 110 0040 00000000 		.word	.LC0
 111              		.cfi_endproc
 112              	.LFE332:
 114              		.text
 115              	.Letext0:
 116              		.file 2 "../Protocol/protocol_comment.h"
 117              		.file 3 "../Public/heap.h"
 118              		.file 4 "<built-in>"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccJmX9Ev.s 			page 5


DEFINED SYMBOLS
                            *ABS*:00000000 protocol_process.c
C:\Users\ADMINI~1\AppData\Local\Temp\ccJmX9Ev.s:18     .rodata.protocol_parse.str1.4:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccJmX9Ev.s:22     .text.protocol_parse:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccJmX9Ev.s:30     .text.protocol_parse:00000000 protocol_parse
C:\Users\ADMINI~1\AppData\Local\Temp\ccJmX9Ev.s:110    .text.protocol_parse:00000040 $d

UNDEFINED SYMBOLS
_get_framedata_fromfifo
_unpack_proframe
search_msgmap
heap_free
puts
