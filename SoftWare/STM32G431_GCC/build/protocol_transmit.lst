ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"protocol_transmit.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text._bsp_protransmit,"ax",%progbits
  18              		.align	1
  19              		.weak	_bsp_protransmit
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	_bsp_protransmit:
  27              	.LVL0:
  28              	.LFB0:
  29              		.file 1 "../Protocol/protocol_transmit.c"
   1:../Protocol/protocol_transmit.c **** // #include "protocol.h"
   2:../Protocol/protocol_transmit.c **** #include "protocol_comment.h"
   3:../Protocol/protocol_transmit.c **** #include "protocol_cfg.h"
   4:../Protocol/protocol_transmit.c **** 
   5:../Protocol/protocol_transmit.c **** #undef  NULL
   6:../Protocol/protocol_transmit.c **** #define NULL 0   
   7:../Protocol/protocol_transmit.c **** 
   8:../Protocol/protocol_transmit.c **** #define RESEND_CNT  5
   9:../Protocol/protocol_transmit.c **** #define TIMEOUT     1000
  10:../Protocol/protocol_transmit.c **** 
  11:../Protocol/protocol_transmit.c **** /*
  12:../Protocol/protocol_transmit.c **** **  Э��ײ㷢�ͽӿڣ�Ӧ����Ӳ���ӿ����ⲿʵ��
  13:../Protocol/protocol_transmit.c **** */
  14:../Protocol/protocol_transmit.c **** __attribute__((weak)) void _bsp_protransmit(unsigned char* pdata,unsigned short len)
  15:../Protocol/protocol_transmit.c **** {
  30              		.loc 1 15 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  16:../Protocol/protocol_transmit.c **** }
  35              		.loc 1 16 1 view .LVU1
  36 0000 7047     		bx	lr
  37              		.cfi_endproc
  38              	.LFE0:
  40              		.section	.text._send_proframe,"ax",%progbits
  41              		.align	1
  42              		.syntax unified
  43              		.thumb
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 2


  44              		.thumb_func
  45              		.fpu fpv4-sp-d16
  47              	_send_proframe:
  48              	.LVL1:
  49              	.LFB1:
  17:../Protocol/protocol_transmit.c **** 
  18:../Protocol/protocol_transmit.c **** /*
  19:../Protocol/protocol_transmit.c **** **  len: ֡���ܳ�
  20:../Protocol/protocol_transmit.c **** */
  21:../Protocol/protocol_transmit.c **** static char _send_proframe(pro_frame_t *msg,unsigned short len)
  22:../Protocol/protocol_transmit.c **** {
  50              		.loc 1 22 1 view -0
  51              		.cfi_startproc
  52              		@ args = 0, pretend = 0, frame = 8
  53              		@ frame_needed = 0, uses_anonymous_args = 0
  54              		.loc 1 22 1 is_stmt 0 view .LVU3
  55 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
  56              	.LCFI0:
  57              		.cfi_def_cfa_offset 28
  58              		.cfi_offset 4, -28
  59              		.cfi_offset 5, -24
  60              		.cfi_offset 6, -20
  61              		.cfi_offset 7, -16
  62              		.cfi_offset 8, -12
  63              		.cfi_offset 9, -8
  64              		.cfi_offset 14, -4
  65 0004 83B0     		sub	sp, sp, #12
  66              	.LCFI1:
  67              		.cfi_def_cfa_offset 40
  68 0006 8046     		mov	r8, r0
  69 0008 0E46     		mov	r6, r1
  23:../Protocol/protocol_transmit.c ****     /*����֡����*/
  24:../Protocol/protocol_transmit.c ****     unsigned char *pucmsg;
  70              		.loc 1 24 5 is_stmt 1 view .LVU4
  25:../Protocol/protocol_transmit.c ****     unsigned char *pdata;
  71              		.loc 1 25 5 view .LVU5
  26:../Protocol/protocol_transmit.c ****     unsigned short data_len;
  72              		.loc 1 26 5 view .LVU6
  27:../Protocol/protocol_transmit.c ****     data_len = len-sizeof(pro_frame_t);
  73              		.loc 1 27 5 view .LVU7
  74              		.loc 1 27 14 is_stmt 0 view .LVU8
  75 000a A1F11005 		sub	r5, r1, #16
  76 000e ADB2     		uxth	r5, r5
  77              	.LVL2:
  28:../Protocol/protocol_transmit.c ****     unsigned char buf[2] = {0};
  78              		.loc 1 28 5 is_stmt 1 view .LVU9
  79              		.loc 1 28 19 is_stmt 0 view .LVU10
  80 0010 0027     		movs	r7, #0
  81 0012 ADF80470 		strh	r7, [sp, #4]	@ movhi
  29:../Protocol/protocol_transmit.c ****     pucmsg = heap_malloc(len);
  82              		.loc 1 29 5 is_stmt 1 view .LVU11
  83              		.loc 1 29 14 is_stmt 0 view .LVU12
  84 0016 0846     		mov	r0, r1
  85              	.LVL3:
  86              		.loc 1 29 14 view .LVU13
  87 0018 FFF7FEFF 		bl	heap_malloc
  88              	.LVL4:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 3


  89              		.loc 1 29 14 view .LVU14
  90 001c 0446     		mov	r4, r0
  91              	.LVL5:
  30:../Protocol/protocol_transmit.c ****     memcpy(pucmsg,msg,len);
  92              		.loc 1 30 5 is_stmt 1 view .LVU15
  93 001e 3246     		mov	r2, r6
  94 0020 4146     		mov	r1, r8
  95 0022 FFF7FEFF 		bl	memcpy
  96              	.LVL6:
  31:../Protocol/protocol_transmit.c ****     memcpy(buf,(unsigned char*)&pucmsg[FRAM_TAIL_OFFSET],2);
  97              		.loc 1 31 5 view .LVU16
  98 0026 B4F80E80 		ldrh	r8, [r4, #14]	@ unaligned
  99              	.LVL7:
 100              		.loc 1 31 5 is_stmt 0 view .LVU17
 101 002a ADF80480 		strh	r8, [sp, #4]	@ movhi
  32:../Protocol/protocol_transmit.c ****     pdata = heap_malloc(data_len);
 102              		.loc 1 32 5 is_stmt 1 view .LVU18
 103              		.loc 1 32 13 is_stmt 0 view .LVU19
 104 002e 2846     		mov	r0, r5
 105 0030 FFF7FEFF 		bl	heap_malloc
 106              	.LVL8:
 107 0034 8146     		mov	r9, r0
 108              	.LVL9:
  33:../Protocol/protocol_transmit.c ****     memcpy(pdata,(unsigned char*)&pucmsg[sizeof(pro_frame_t)],data_len);
 109              		.loc 1 33 5 is_stmt 1 view .LVU20
 110 0036 2A46     		mov	r2, r5
 111 0038 04F11001 		add	r1, r4, #16
 112 003c FFF7FEFF 		bl	memcpy
 113              	.LVL10:
  34:../Protocol/protocol_transmit.c ****     memcpy((unsigned char*)&pucmsg[FRAM_PDATA_OFFSET],pdata,data_len);    
 114              		.loc 1 34 5 view .LVU21
 115 0040 2A46     		mov	r2, r5
 116 0042 4946     		mov	r1, r9
 117 0044 04F10800 		add	r0, r4, #8
 118 0048 FFF7FEFF 		bl	memcpy
 119              	.LVL11:
  35:../Protocol/protocol_transmit.c ****     heap_free(pdata);
 120              		.loc 1 35 5 view .LVU22
 121 004c 4846     		mov	r0, r9
 122 004e FFF7FEFF 		bl	heap_free
 123              	.LVL12:
  36:../Protocol/protocol_transmit.c ****     unsigned short crc_16;
 124              		.loc 1 36 5 view .LVU23
  37:../Protocol/protocol_transmit.c ****     crc_16 = CRC16_Subsection((unsigned char*)&pucmsg[2],0xFFFF,FRAM_PDATA_OFFSET+data_len-2);
 125              		.loc 1 37 5 view .LVU24
 126              		.loc 1 37 14 is_stmt 0 view .LVU25
 127 0052 AA1D     		adds	r2, r5, #6
 128 0054 4FF6FF71 		movw	r1, #65535
 129 0058 A01C     		adds	r0, r4, #2
 130 005a FFF7FEFF 		bl	CRC16_Subsection
 131              	.LVL13:
  38:../Protocol/protocol_transmit.c ****     crc_16 = __SWP16(crc_16);
 132              		.loc 1 38 5 is_stmt 1 view .LVU26
 133              		.loc 1 38 14 is_stmt 0 view .LVU27
 134 005e 40F30F23 		sbfx	r3, r0, #8, #16
 135 0062 43EA0020 		orr	r0, r3, r0, lsl #8
 136              	.LVL14:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 4


  39:../Protocol/protocol_transmit.c ****     memcpy((unsigned char*)&pucmsg[FRAM_PDATA_OFFSET+data_len],(unsigned char*)&crc_16,sizeof(crc_1
 137              		.loc 1 39 5 is_stmt 1 view .LVU28
 138              		.loc 1 39 53 is_stmt 0 view .LVU29
 139 0066 05F10803 		add	r3, r5, #8
 140              		.loc 1 39 5 view .LVU30
 141 006a E052     		strh	r0, [r4, r3]	@ unaligned
  40:../Protocol/protocol_transmit.c ****     memcpy((unsigned char*)&pucmsg[FRAM_PDATA_OFFSET+data_len+2],buf,2); 
 142              		.loc 1 40 5 is_stmt 1 view .LVU31
 143              		.loc 1 40 35 is_stmt 0 view .LVU32
 144 006c 0A35     		adds	r5, r5, #10
 145              	.LVL15:
 146              		.loc 1 40 5 view .LVU33
 147 006e 24F80580 		strh	r8, [r4, r5]	@ unaligned
  41:../Protocol/protocol_transmit.c ****     _bsp_protransmit(pucmsg,sizeof(pro_frame_t)-sizeof(void *)+data_len);
 148              		.loc 1 41 5 is_stmt 1 view .LVU34
 149 0072 311F     		subs	r1, r6, #4
 150 0074 89B2     		uxth	r1, r1
 151 0076 2046     		mov	r0, r4
 152              	.LVL16:
 153              		.loc 1 41 5 is_stmt 0 view .LVU35
 154 0078 FFF7FEFF 		bl	_bsp_protransmit
 155              	.LVL17:
  42:../Protocol/protocol_transmit.c ****     heap_free(pucmsg);
 156              		.loc 1 42 5 is_stmt 1 view .LVU36
 157 007c 2046     		mov	r0, r4
 158 007e FFF7FEFF 		bl	heap_free
 159              	.LVL18:
  43:../Protocol/protocol_transmit.c **** 	return 0;
 160              		.loc 1 43 2 view .LVU37
  44:../Protocol/protocol_transmit.c **** }
 161              		.loc 1 44 1 is_stmt 0 view .LVU38
 162 0082 3846     		mov	r0, r7
 163 0084 03B0     		add	sp, sp, #12
 164              	.LCFI2:
 165              		.cfi_def_cfa_offset 28
 166              		@ sp needed
 167 0086 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 168              		.loc 1 44 1 view .LVU39
 169              		.cfi_endproc
 170              	.LFE1:
 172              		.section	.text.protocol_nowtransmit,"ax",%progbits
 173              		.align	1
 174              		.global	protocol_nowtransmit
 175              		.syntax unified
 176              		.thumb
 177              		.thumb_func
 178              		.fpu fpv4-sp-d16
 180              	protocol_nowtransmit:
 181              	.LVL19:
 182              	.LFB2:
  45:../Protocol/protocol_transmit.c **** 
  46:../Protocol/protocol_transmit.c **** char protocol_nowtransmit(unsigned char cmd_type,unsigned char cmd,\
  47:../Protocol/protocol_transmit.c ****                             void *pdata,unsigned short data_len)
  48:../Protocol/protocol_transmit.c **** {
 183              		.loc 1 48 1 is_stmt 1 view -0
 184              		.cfi_startproc
 185              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 5


 186              		@ frame_needed = 0, uses_anonymous_args = 0
 187              		.loc 1 48 1 is_stmt 0 view .LVU41
 188 0000 38B5     		push	{r3, r4, r5, lr}
 189              	.LCFI3:
 190              		.cfi_def_cfa_offset 16
 191              		.cfi_offset 3, -16
 192              		.cfi_offset 4, -12
 193              		.cfi_offset 5, -8
 194              		.cfi_offset 14, -4
 195 0002 0D46     		mov	r5, r1
 196 0004 1146     		mov	r1, r2
 197              	.LVL20:
 198              		.loc 1 48 1 view .LVU42
 199 0006 1C46     		mov	r4, r3
  49:../Protocol/protocol_transmit.c ****     pro_frame_t* p_fram;
 200              		.loc 1 49 5 is_stmt 1 view .LVU43
  50:../Protocol/protocol_transmit.c ****     /*Э��֡���*/
  51:../Protocol/protocol_transmit.c ****     p_fram = _packet_proframe(cmd | (cmd_type<<8),pdata,data_len);
 201              		.loc 1 51 5 view .LVU44
 202              		.loc 1 51 14 is_stmt 0 view .LVU45
 203 0008 1A46     		mov	r2, r3
 204              	.LVL21:
 205              		.loc 1 51 14 view .LVU46
 206 000a 45EA0020 		orr	r0, r5, r0, lsl #8
 207              	.LVL22:
 208              		.loc 1 51 14 view .LVU47
 209 000e FFF7FEFF 		bl	_packet_proframe
 210              	.LVL23:
 211              		.loc 1 51 14 view .LVU48
 212 0012 0546     		mov	r5, r0
 213              	.LVL24:
  52:../Protocol/protocol_transmit.c ****     /*׼������*/
  53:../Protocol/protocol_transmit.c ****     _send_proframe(p_fram,sizeof(pro_frame_t)+data_len);
 214              		.loc 1 53 5 is_stmt 1 view .LVU49
 215 0014 04F11001 		add	r1, r4, #16
 216 0018 89B2     		uxth	r1, r1
 217 001a FFF7FEFF 		bl	_send_proframe
 218              	.LVL25:
  54:../Protocol/protocol_transmit.c ****     heap_free(p_fram);
 219              		.loc 1 54 5 view .LVU50
 220 001e 2846     		mov	r0, r5
 221 0020 FFF7FEFF 		bl	heap_free
 222              	.LVL26:
  55:../Protocol/protocol_transmit.c ****     return NULL;
 223              		.loc 1 55 5 view .LVU51
  56:../Protocol/protocol_transmit.c **** }
 224              		.loc 1 56 1 is_stmt 0 view .LVU52
 225 0024 0020     		movs	r0, #0
 226 0026 38BD     		pop	{r3, r4, r5, pc}
 227              		.loc 1 56 1 view .LVU53
 228              		.cfi_endproc
 229              	.LFE2:
 231              		.section	.rodata._trancemit_statemach.str1.4,"aMS",%progbits,1
 232              		.align	2
 233              	.LC0:
 234 0000 73656E64 		.ascii	"send one cmd = 0x%x\015\012\000"
 234      206F6E65 
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 6


 234      20636D64 
 234      203D2030 
 234      7825780D 
 235 0016 0000     		.align	2
 236              	.LC1:
 237 0018 636D643D 		.ascii	"cmd=0x%x no ack\015\012\000"
 237      30782578 
 237      206E6F20 
 237      61636B0D 
 237      0A00
 238 002a 0000     		.align	2
 239              	.LC2:
 240 002c 636D643D 		.ascii	"cmd=0x%x timeout\015\012\000"
 240      30782578 
 240      2074696D 
 240      656F7574 
 240      0D0A00
 241 003f 00       		.align	2
 242              	.LC3:
 243 0040 72656369 		.ascii	"recive cmd(0x%x) ack\015\012\000"
 243      76652063 
 243      6D642830 
 243      78257829 
 243      2061636B 
 244              		.section	.text._trancemit_statemach,"ax",%progbits
 245              		.align	1
 246              		.global	_trancemit_statemach
 247              		.syntax unified
 248              		.thumb
 249              		.thumb_func
 250              		.fpu fpv4-sp-d16
 252              	_trancemit_statemach:
 253              	.LVL27:
 254              	.LFB3:
  57:../Protocol/protocol_transmit.c **** 
  58:../Protocol/protocol_transmit.c **** 
  59:../Protocol/protocol_transmit.c **** 
  60:../Protocol/protocol_transmit.c **** /*---------------------------------------Э���ط�����------------------------------
  61:../Protocol/protocol_transmit.c **** fsm_rt_t _trancemit_statemach(fsm_cb_t *ptThis)
  62:../Protocol/protocol_transmit.c **** {
 255              		.loc 1 62 1 is_stmt 1 view -0
 256              		.cfi_startproc
 257              		@ args = 0, pretend = 0, frame = 0
 258              		@ frame_needed = 0, uses_anonymous_args = 0
 259              		.loc 1 62 1 is_stmt 0 view .LVU55
 260 0000 70B5     		push	{r4, r5, r6, lr}
 261              	.LCFI4:
 262              		.cfi_def_cfa_offset 16
 263              		.cfi_offset 4, -16
 264              		.cfi_offset 5, -12
 265              		.cfi_offset 6, -8
 266              		.cfi_offset 14, -4
 267 0002 0446     		mov	r4, r0
  63:../Protocol/protocol_transmit.c ****     enum{
 268              		.loc 1 63 5 is_stmt 1 view .LVU56
  64:../Protocol/protocol_transmit.c ****         SEND_CMD = USER,
  65:../Protocol/protocol_transmit.c ****         WAIT_ACK,
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 7


  66:../Protocol/protocol_transmit.c ****         RECIVE_ACK,
  67:../Protocol/protocol_transmit.c ****         IDLE,
  68:../Protocol/protocol_transmit.c ****     };
  69:../Protocol/protocol_transmit.c ****     pro_pack_t *pmsg = (pro_pack_t*)ptThis;
 269              		.loc 1 69 5 view .LVU57
 270              	.LVL28:
  70:../Protocol/protocol_transmit.c ****     pro_frame_t *pframe;
 271              		.loc 1 70 5 view .LVU58
  71:../Protocol/protocol_transmit.c ****     unsigned short cmd ;    
 272              		.loc 1 71 5 view .LVU59
  72:../Protocol/protocol_transmit.c ****     unsigned char cmd_fun;  
 273              		.loc 1 72 5 view .LVU60
  73:../Protocol/protocol_transmit.c ****     unsigned char cmd_type;
 274              		.loc 1 73 5 view .LVU61
  74:../Protocol/protocol_transmit.c ****     unsigned short data_len;
 275              		.loc 1 74 5 view .LVU62
  75:../Protocol/protocol_transmit.c ****     unsigned short fsm_cycle = 0;
 276              		.loc 1 75 5 view .LVU63
  76:../Protocol/protocol_transmit.c ****     fsm_cycle = pmsg->statemach_cb.cycle;
 277              		.loc 1 76 5 view .LVU64
 278              		.loc 1 76 15 is_stmt 0 view .LVU65
 279 0004 0688     		ldrh	r6, [r0]
 280              	.LVL29:
  77:../Protocol/protocol_transmit.c ****     pframe = pmsg->frame;
 281              		.loc 1 77 5 is_stmt 1 view .LVU66
 282              		.loc 1 77 12 is_stmt 0 view .LVU67
 283 0006 0369     		ldr	r3, [r0, #16]
 284              	.LVL30:
  78:../Protocol/protocol_transmit.c ****     cmd  = __SWP16(pframe->func_c);
 285              		.loc 1 78 5 is_stmt 1 view .LVU68
 286              		.loc 1 78 12 is_stmt 0 view .LVU69
 287 0008 9D88     		ldrh	r5, [r3, #4]
 288              	.LVL31:
  79:../Protocol/protocol_transmit.c ****     cmd_fun  = (unsigned char)cmd;
 289              		.loc 1 79 5 is_stmt 1 view .LVU70
 290              		.loc 1 79 14 is_stmt 0 view .LVU71
 291 000a 2D0A     		lsrs	r5, r5, #8
 292              	.LVL32:
  80:../Protocol/protocol_transmit.c ****     cmd_type  = (unsigned char)(cmd>>8); 
 293              		.loc 1 80 5 is_stmt 1 view .LVU72
  81:../Protocol/protocol_transmit.c ****     data_len = __SWP16(pframe->len);
 294              		.loc 1 81 5 view .LVU73
  82:../Protocol/protocol_transmit.c **** 
  83:../Protocol/protocol_transmit.c ****     unsigned char event = 0;
 295              		.loc 1 83 5 view .LVU74
  84:../Protocol/protocol_transmit.c ****     switch (ptThis->chState)
 296              		.loc 1 84 5 view .LVU75
 297              		.loc 1 84 19 is_stmt 0 view .LVU76
 298 000c 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 299              	.LVL33:
 300              		.loc 1 84 19 view .LVU77
 301 000e 042B     		cmp	r3, #4
 302 0010 51D8     		bhi	.L16
 303 0012 DFE803F0 		tbb	[pc, r3]
 304              	.L9:
 305 0016 03       		.byte	(.L13-.L9)/2
 306 0017 4C       		.byte	(.L12-.L9)/2
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 8


 307 0018 05       		.byte	(.L11-.L9)/2
 308 0019 0C       		.byte	(.L10-.L9)/2
 309 001a 45       		.byte	(.L8-.L9)/2
 310 001b 00       		.p2align 1
 311              	.L13:
  85:../Protocol/protocol_transmit.c ****     {
  86:../Protocol/protocol_transmit.c ****     case START:
  87:../Protocol/protocol_transmit.c ****         ptThis->chState = SEND_CMD;
 312              		.loc 1 87 9 is_stmt 1 view .LVU78
 313              		.loc 1 87 25 is_stmt 0 view .LVU79
 314 001c 0223     		movs	r3, #2
 315 001e 8370     		strb	r3, [r0, #2]
 316              	.LVL34:
 317              	.L11:
  88:../Protocol/protocol_transmit.c ****     case SEND_CMD:
  89:../Protocol/protocol_transmit.c ****         // _send_proframe(pframe,data_len+sizeof(pro_frame_t));
  90:../Protocol/protocol_transmit.c ****         USER_DEBUG_NORMAL("send one cmd = 0x%x\r\n",cmd_fun);
 318              		.loc 1 90 9 is_stmt 1 view .LVU80
 319 0020 2A46     		mov	r2, r5
 320 0022 2649     		ldr	r1, .L20
 321 0024 0020     		movs	r0, #0
 322              	.LVL35:
 323              		.loc 1 90 9 is_stmt 0 view .LVU81
 324 0026 FFF7FEFF 		bl	SEGGER_RTT_printf
 325              	.LVL36:
  91:../Protocol/protocol_transmit.c ****         ptThis->chState = WAIT_ACK;        
 326              		.loc 1 91 9 is_stmt 1 view .LVU82
 327              		.loc 1 91 25 is_stmt 0 view .LVU83
 328 002a 0323     		movs	r3, #3
 329 002c A370     		strb	r3, [r4, #2]
 330              	.L10:
  92:../Protocol/protocol_transmit.c ****     case WAIT_ACK:
  93:../Protocol/protocol_transmit.c ****         if (pmsg->recnt >= RESEND_CNT)
 331              		.loc 1 93 9 is_stmt 1 view .LVU84
 332              		.loc 1 93 17 is_stmt 0 view .LVU85
 333 002e A389     		ldrh	r3, [r4, #12]
 334              		.loc 1 93 12 view .LVU86
 335 0030 042B     		cmp	r3, #4
 336 0032 08D9     		bls	.L14
  94:../Protocol/protocol_transmit.c ****         {
  95:../Protocol/protocol_transmit.c ****             pmsg->recnt = 0;
 337              		.loc 1 95 13 is_stmt 1 view .LVU87
 338              		.loc 1 95 25 is_stmt 0 view .LVU88
 339 0034 0020     		movs	r0, #0
 340 0036 A081     		strh	r0, [r4, #12]	@ movhi
  96:../Protocol/protocol_transmit.c ****             /* û�н��յ����������Ӧ */
  97:../Protocol/protocol_transmit.c ****             USER_DEBUG_NORMAL("cmd=0x%x no ack\r\n",cmd_fun);
 341              		.loc 1 97 13 is_stmt 1 view .LVU89
 342 0038 2A46     		mov	r2, r5
 343 003a 2149     		ldr	r1, .L20+4
 344 003c FFF7FEFF 		bl	SEGGER_RTT_printf
 345              	.LVL37:
  98:../Protocol/protocol_transmit.c ****             ptThis->chState = EXIT;
 346              		.loc 1 98 13 view .LVU90
 347              		.loc 1 98 29 is_stmt 0 view .LVU91
 348 0040 0120     		movs	r0, #1
 349 0042 A070     		strb	r0, [r4, #2]
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 9


  99:../Protocol/protocol_transmit.c ****             break;
 350              		.loc 1 99 13 is_stmt 1 view .LVU92
 351 0044 36E0     		b	.L7
 352              	.L14:
 100:../Protocol/protocol_transmit.c ****         }
 101:../Protocol/protocol_transmit.c ****         event =search_msgmap_event(cmd_fun);
 353              		.loc 1 101 9 view .LVU93
 354              		.loc 1 101 16 is_stmt 0 view .LVU94
 355 0046 2846     		mov	r0, r5
 356 0048 FFF7FEFF 		bl	search_msgmap_event
 357              	.LVL38:
 358              		.loc 1 101 15 view .LVU95
 359 004c C0B2     		uxtb	r0, r0
 360              	.LVL39:
 102:../Protocol/protocol_transmit.c ****         if (!IPC_GET_EVENT(g_protocol_event,event))//û�н��յ���Ӧ
 361              		.loc 1 102 9 is_stmt 1 view .LVU96
 362              		.loc 1 102 14 is_stmt 0 view .LVU97
 363 004e 1D4B     		ldr	r3, .L20+8
 364 0050 1B88     		ldrh	r3, [r3]
 365 0052 43FA00F2 		asr	r2, r3, r0
 366              		.loc 1 102 12 view .LVU98
 367 0056 12F0010F 		tst	r2, #1
 368 005a 18D1     		bne	.L15
 103:../Protocol/protocol_transmit.c ****         {
 104:../Protocol/protocol_transmit.c ****             /* code */
 105:../Protocol/protocol_transmit.c ****             if (pmsg->timeout++ >= TIMEOUT/fsm_cycle)//��ʱ
 369              		.loc 1 105 13 is_stmt 1 view .LVU99
 370              		.loc 1 105 21 is_stmt 0 view .LVU100
 371 005c A268     		ldr	r2, [r4, #8]
 372              		.loc 1 105 30 view .LVU101
 373 005e 531C     		adds	r3, r2, #1
 374 0060 A360     		str	r3, [r4, #8]
 375              		.loc 1 105 43 view .LVU102
 376 0062 4FF47A73 		mov	r3, #1000
 377 0066 93FBF6F6 		sdiv	r6, r3, r6
 378              	.LVL40:
 379              		.loc 1 105 16 view .LVU103
 380 006a B242     		cmp	r2, r6
 381 006c 01D2     		bcs	.L19
 106:../Protocol/protocol_transmit.c ****             {
 107:../Protocol/protocol_transmit.c ****                 /* code */
 108:../Protocol/protocol_transmit.c ****                 USER_DEBUG_NORMAL("cmd=0x%x timeout\r\n",cmd_fun);
 109:../Protocol/protocol_transmit.c ****                 pmsg->timeout = 0;
 110:../Protocol/protocol_transmit.c ****                 pmsg->recnt++;
 111:../Protocol/protocol_transmit.c ****                 ptThis->chState = SEND_CMD;
 112:../Protocol/protocol_transmit.c ****             }
 113:../Protocol/protocol_transmit.c ****             break;
 114:../Protocol/protocol_transmit.c ****         }
 115:../Protocol/protocol_transmit.c ****         IPC_CLEAR_EVENT(g_protocol_event,event);
 116:../Protocol/protocol_transmit.c ****         ptThis->chState = RECIVE_ACK;
 117:../Protocol/protocol_transmit.c ****     case RECIVE_ACK:
 118:../Protocol/protocol_transmit.c ****         USER_DEBUG_NORMAL("recive cmd(0x%x) ack\r\n",cmd_fun);
 119:../Protocol/protocol_transmit.c ****         /*���յ������Ӧ����Ӧ �������ݴ���*/
 120:../Protocol/protocol_transmit.c ****         ptThis->chState = EXIT;        
 121:../Protocol/protocol_transmit.c ****     case EXIT:
 122:../Protocol/protocol_transmit.c ****         pmsg->timeout = 0;
 123:../Protocol/protocol_transmit.c ****         pmsg->recnt = 0;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 10


 124:../Protocol/protocol_transmit.c ****         return fsm_rt_cpl;
 125:../Protocol/protocol_transmit.c ****         break;
 126:../Protocol/protocol_transmit.c ****     default:
 127:../Protocol/protocol_transmit.c ****         break;
 128:../Protocol/protocol_transmit.c ****     }
 129:../Protocol/protocol_transmit.c ****     return fsm_rt_on_going;   
 382              		.loc 1 129 12 view .LVU104
 383 006e 0120     		movs	r0, #1
 384              	.LVL41:
 385              		.loc 1 129 12 view .LVU105
 386 0070 20E0     		b	.L7
 387              	.LVL42:
 388              	.L19:
 108:../Protocol/protocol_transmit.c ****                 pmsg->timeout = 0;
 389              		.loc 1 108 17 is_stmt 1 view .LVU106
 390 0072 2A46     		mov	r2, r5
 391 0074 1449     		ldr	r1, .L20+12
 392 0076 0020     		movs	r0, #0
 393              	.LVL43:
 108:../Protocol/protocol_transmit.c ****                 pmsg->timeout = 0;
 394              		.loc 1 108 17 is_stmt 0 view .LVU107
 395 0078 FFF7FEFF 		bl	SEGGER_RTT_printf
 396              	.LVL44:
 109:../Protocol/protocol_transmit.c ****                 pmsg->recnt++;
 397              		.loc 1 109 17 is_stmt 1 view .LVU108
 109:../Protocol/protocol_transmit.c ****                 pmsg->recnt++;
 398              		.loc 1 109 31 is_stmt 0 view .LVU109
 399 007c 0023     		movs	r3, #0
 400 007e A360     		str	r3, [r4, #8]
 110:../Protocol/protocol_transmit.c ****                 ptThis->chState = SEND_CMD;
 401              		.loc 1 110 17 is_stmt 1 view .LVU110
 110:../Protocol/protocol_transmit.c ****                 ptThis->chState = SEND_CMD;
 402              		.loc 1 110 21 is_stmt 0 view .LVU111
 403 0080 A389     		ldrh	r3, [r4, #12]
 110:../Protocol/protocol_transmit.c ****                 ptThis->chState = SEND_CMD;
 404              		.loc 1 110 28 view .LVU112
 405 0082 0133     		adds	r3, r3, #1
 406 0084 A381     		strh	r3, [r4, #12]	@ movhi
 111:../Protocol/protocol_transmit.c ****             }
 407              		.loc 1 111 17 is_stmt 1 view .LVU113
 111:../Protocol/protocol_transmit.c ****             }
 408              		.loc 1 111 33 is_stmt 0 view .LVU114
 409 0086 0223     		movs	r3, #2
 410 0088 A370     		strb	r3, [r4, #2]
 411              		.loc 1 129 12 view .LVU115
 412 008a 0120     		movs	r0, #1
 413 008c 12E0     		b	.L7
 414              	.LVL45:
 415              	.L15:
 115:../Protocol/protocol_transmit.c ****         ptThis->chState = RECIVE_ACK;
 416              		.loc 1 115 9 is_stmt 1 view .LVU116
 417 008e 0122     		movs	r2, #1
 418 0090 02FA00F0 		lsl	r0, r2, r0
 419              	.LVL46:
 115:../Protocol/protocol_transmit.c ****         ptThis->chState = RECIVE_ACK;
 420              		.loc 1 115 9 is_stmt 0 view .LVU117
 421 0094 23EA0003 		bic	r3, r3, r0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 11


 422 0098 0A4A     		ldr	r2, .L20+8
 423 009a 1380     		strh	r3, [r2]	@ movhi
 116:../Protocol/protocol_transmit.c ****     case RECIVE_ACK:
 424              		.loc 1 116 9 is_stmt 1 view .LVU118
 116:../Protocol/protocol_transmit.c ****     case RECIVE_ACK:
 425              		.loc 1 116 25 is_stmt 0 view .LVU119
 426 009c 0423     		movs	r3, #4
 427 009e A370     		strb	r3, [r4, #2]
 428              	.L8:
 118:../Protocol/protocol_transmit.c ****         /*���յ������Ӧ����Ӧ �������ݴ���*/
 429              		.loc 1 118 9 is_stmt 1 view .LVU120
 430 00a0 2A46     		mov	r2, r5
 431 00a2 0A49     		ldr	r1, .L20+16
 432 00a4 0020     		movs	r0, #0
 433 00a6 FFF7FEFF 		bl	SEGGER_RTT_printf
 434              	.LVL47:
 120:../Protocol/protocol_transmit.c ****     case EXIT:
 435              		.loc 1 120 9 view .LVU121
 120:../Protocol/protocol_transmit.c ****     case EXIT:
 436              		.loc 1 120 25 is_stmt 0 view .LVU122
 437 00aa 0123     		movs	r3, #1
 438 00ac A370     		strb	r3, [r4, #2]
 439              	.L12:
 122:../Protocol/protocol_transmit.c ****         pmsg->recnt = 0;
 440              		.loc 1 122 9 is_stmt 1 view .LVU123
 122:../Protocol/protocol_transmit.c ****         pmsg->recnt = 0;
 441              		.loc 1 122 23 is_stmt 0 view .LVU124
 442 00ae 0020     		movs	r0, #0
 443 00b0 A060     		str	r0, [r4, #8]
 123:../Protocol/protocol_transmit.c ****         return fsm_rt_cpl;
 444              		.loc 1 123 9 is_stmt 1 view .LVU125
 123:../Protocol/protocol_transmit.c ****         return fsm_rt_cpl;
 445              		.loc 1 123 21 is_stmt 0 view .LVU126
 446 00b2 A081     		strh	r0, [r4, #12]	@ movhi
 124:../Protocol/protocol_transmit.c ****         break;
 447              		.loc 1 124 9 is_stmt 1 view .LVU127
 448              	.LVL48:
 449              	.L7:
 130:../Protocol/protocol_transmit.c **** }
 450              		.loc 1 130 1 is_stmt 0 view .LVU128
 451 00b4 70BD     		pop	{r4, r5, r6, pc}
 452              	.LVL49:
 453              	.L16:
  84:../Protocol/protocol_transmit.c ****     {
 454              		.loc 1 84 19 view .LVU129
 455 00b6 0120     		movs	r0, #1
 456              	.LVL50:
  84:../Protocol/protocol_transmit.c ****     {
 457              		.loc 1 84 19 view .LVU130
 458 00b8 FCE7     		b	.L7
 459              	.L21:
 460 00ba 00BF     		.align	2
 461              	.L20:
 462 00bc 00000000 		.word	.LC0
 463 00c0 18000000 		.word	.LC1
 464 00c4 00000000 		.word	g_protocol_event
 465 00c8 2C000000 		.word	.LC2
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 12


 466 00cc 40000000 		.word	.LC3
 467              		.cfi_endproc
 468              	.LFE3:
 470              		.section	.text.protocol_transmit,"ax",%progbits
 471              		.align	1
 472              		.global	protocol_transmit
 473              		.syntax unified
 474              		.thumb
 475              		.thumb_func
 476              		.fpu fpv4-sp-d16
 478              	protocol_transmit:
 479              	.LVL51:
 480              	.LFB4:
 131:../Protocol/protocol_transmit.c **** void protocol_transmit(unsigned char cmd_type,unsigned char cmd,\
 132:../Protocol/protocol_transmit.c ****                             void *pdata,unsigned short data_len)
 133:../Protocol/protocol_transmit.c **** {
 481              		.loc 1 133 1 is_stmt 1 view -0
 482              		.cfi_startproc
 483              		@ args = 0, pretend = 0, frame = 0
 484              		@ frame_needed = 0, uses_anonymous_args = 0
 485              		.loc 1 133 1 is_stmt 0 view .LVU132
 486 0000 08B5     		push	{r3, lr}
 487              	.LCFI5:
 488              		.cfi_def_cfa_offset 8
 489              		.cfi_offset 3, -8
 490              		.cfi_offset 14, -4
 491 0002 8C46     		mov	ip, r1
 492 0004 1146     		mov	r1, r2
 493              	.LVL52:
 134:../Protocol/protocol_transmit.c ****     pro_frame_t* p_fram;
 494              		.loc 1 134 5 is_stmt 1 view .LVU133
 135:../Protocol/protocol_transmit.c ****     /*Э��֡���*/
 136:../Protocol/protocol_transmit.c ****     p_fram = _packet_proframe(cmd | (cmd_type<<8),pdata,data_len);
 495              		.loc 1 136 5 view .LVU134
 496              		.loc 1 136 14 is_stmt 0 view .LVU135
 497 0006 1A46     		mov	r2, r3
 498              	.LVL53:
 499              		.loc 1 136 14 view .LVU136
 500 0008 4CEA0020 		orr	r0, ip, r0, lsl #8
 501              	.LVL54:
 502              		.loc 1 136 14 view .LVU137
 503 000c FFF7FEFF 		bl	_packet_proframe
 504              	.LVL55:
 137:../Protocol/protocol_transmit.c **** 
 138:../Protocol/protocol_transmit.c ****     /*��Ϣ���з��*/
 139:../Protocol/protocol_transmit.c ****     pro_pack_t *pmsg;
 505              		.loc 1 139 5 is_stmt 1 view .LVU138
 140:../Protocol/protocol_transmit.c ****     pmsg = _packet_propack(p_fram,1000,5);
 506              		.loc 1 140 5 view .LVU139
 507              		.loc 1 140 12 is_stmt 0 view .LVU140
 508 0010 0522     		movs	r2, #5
 509 0012 4FF47A71 		mov	r1, #1000
 510 0016 FFF7FEFF 		bl	_packet_propack
 511              	.LVL56:
 141:../Protocol/protocol_transmit.c **** /*-------------------------------list node ���--------------------*/
 142:../Protocol/protocol_transmit.c ****     /*list�ڵ���*/
 143:../Protocol/protocol_transmit.c ****     _node_t *pnode;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 13


 512              		.loc 1 143 5 is_stmt 1 view .LVU141
 144:../Protocol/protocol_transmit.c ****     pnode = list_creatnode(pmsg,sizeof(node_item_t));
 513              		.loc 1 144 5 view .LVU142
 514              		.loc 1 144 13 is_stmt 0 view .LVU143
 515 001a 0821     		movs	r1, #8
 516 001c FFF7FEFF 		bl	list_creatnode
 517              	.LVL57:
 518              		.loc 1 144 13 view .LVU144
 519 0020 0146     		mov	r1, r0
 520              	.LVL58:
 145:../Protocol/protocol_transmit.c **** /*-----------------------------------------------------------------*/    
 146:../Protocol/protocol_transmit.c ****     /*���ӵ���Ϣ�б�����*/
 147:../Protocol/protocol_transmit.c ****     list_insert_node(gtransmit_list,pnode);
 521              		.loc 1 147 5 is_stmt 1 view .LVU145
 522 0022 024B     		ldr	r3, .L24
 523 0024 1868     		ldr	r0, [r3]
 524              	.LVL59:
 525              		.loc 1 147 5 is_stmt 0 view .LVU146
 526 0026 FFF7FEFF 		bl	list_insert_node
 527              	.LVL60:
 148:../Protocol/protocol_transmit.c **** }
 528              		.loc 1 148 1 view .LVU147
 529 002a 08BD     		pop	{r3, pc}
 530              	.L25:
 531              		.align	2
 532              	.L24:
 533 002c 00000000 		.word	gtransmit_list
 534              		.cfi_endproc
 535              	.LFE4:
 537              		.section	.rodata.protocol_transmitprocess.str1.4,"aMS",%progbits,1
 538              		.align	2
 539              	.LC4:
 540 0000 66726565 		.ascii	"free \015\012\000"
 540      200D0A00 
 541              		.section	.text.protocol_transmitprocess,"ax",%progbits
 542              		.align	1
 543              		.global	protocol_transmitprocess
 544              		.syntax unified
 545              		.thumb
 546              		.thumb_func
 547              		.fpu fpv4-sp-d16
 549              	protocol_transmitprocess:
 550              	.LFB5:
 149:../Protocol/protocol_transmit.c **** 
 150:../Protocol/protocol_transmit.c **** void protocol_transmitprocess(void)
 151:../Protocol/protocol_transmit.c **** {
 551              		.loc 1 151 1 is_stmt 1 view -0
 552              		.cfi_startproc
 553              		@ args = 0, pretend = 0, frame = 0
 554              		@ frame_needed = 0, uses_anonymous_args = 0
 555 0000 10B5     		push	{r4, lr}
 556              	.LCFI6:
 557              		.cfi_def_cfa_offset 8
 558              		.cfi_offset 4, -8
 559              		.cfi_offset 14, -4
 152:../Protocol/protocol_transmit.c ****     /*��ȡ���� �鿴�Ƿ��д����͵���Ϣ*/
 153:../Protocol/protocol_transmit.c ****     _node_t *cur_node;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 14


 560              		.loc 1 153 5 view .LVU149
 154:../Protocol/protocol_transmit.c ****     node_item_t *cur_item;
 561              		.loc 1 154 5 view .LVU150
 155:../Protocol/protocol_transmit.c ****     pro_pack_t *pack;
 562              		.loc 1 155 5 view .LVU151
 156:../Protocol/protocol_transmit.c ****     pro_frame_t* p_fram;     
 563              		.loc 1 156 5 view .LVU152
 157:../Protocol/protocol_transmit.c ****     cur_node = gtransmit_list->head;
 564              		.loc 1 157 5 view .LVU153
 565              		.loc 1 157 30 is_stmt 0 view .LVU154
 566 0002 0B4B     		ldr	r3, .L32
 567 0004 1B68     		ldr	r3, [r3]
 568              		.loc 1 157 14 view .LVU155
 569 0006 1C68     		ldr	r4, [r3]
 570              	.LVL61:
 158:../Protocol/protocol_transmit.c ****     while (cur_node != 0)//������������
 571              		.loc 1 158 5 is_stmt 1 view .LVU156
 572              		.loc 1 158 11 is_stmt 0 view .LVU157
 573 0008 00E0     		b	.L27
 574              	.LVL62:
 575              	.L28:
 159:../Protocol/protocol_transmit.c ****     {
 160:../Protocol/protocol_transmit.c ****         cur_item = cur_node->pitem;
 161:../Protocol/protocol_transmit.c ****         pack = (pro_pack_t *)cur_item->pdata;
 162:../Protocol/protocol_transmit.c ****         p_fram = (pro_frame_t *)pack->frame;
 163:../Protocol/protocol_transmit.c ****         if(DISPATCH_FSM(((fsm_cb_t *)pack)) == fsm_rt_cpl)
 164:../Protocol/protocol_transmit.c ****         {
 165:../Protocol/protocol_transmit.c ****             /*��ǰ״̬��ִ�н���  ����ɾ��*/
 166:../Protocol/protocol_transmit.c ****             list_delete_node(gtransmit_list,cur_node);
 167:../Protocol/protocol_transmit.c ****             USER_DEBUG_NORMAL("free \r\n");
 168:../Protocol/protocol_transmit.c ****         }
 169:../Protocol/protocol_transmit.c ****         cur_node = cur_node->next; 
 576              		.loc 1 169 9 is_stmt 1 view .LVU158
 577              		.loc 1 169 18 is_stmt 0 view .LVU159
 578 000a 2468     		ldr	r4, [r4]
 579              	.LVL63:
 580              	.L27:
 158:../Protocol/protocol_transmit.c ****     while (cur_node != 0)//������������
 581              		.loc 1 158 11 is_stmt 1 view .LVU160
 582 000c 7CB1     		cbz	r4, .L31
 160:../Protocol/protocol_transmit.c ****         pack = (pro_pack_t *)cur_item->pdata;
 583              		.loc 1 160 9 view .LVU161
 160:../Protocol/protocol_transmit.c ****         pack = (pro_pack_t *)cur_item->pdata;
 584              		.loc 1 160 18 is_stmt 0 view .LVU162
 585 000e E368     		ldr	r3, [r4, #12]
 586              	.LVL64:
 161:../Protocol/protocol_transmit.c ****         p_fram = (pro_frame_t *)pack->frame;
 587              		.loc 1 161 9 is_stmt 1 view .LVU163
 161:../Protocol/protocol_transmit.c ****         p_fram = (pro_frame_t *)pack->frame;
 588              		.loc 1 161 14 is_stmt 0 view .LVU164
 589 0010 5868     		ldr	r0, [r3, #4]
 590              	.LVL65:
 162:../Protocol/protocol_transmit.c ****         if(DISPATCH_FSM(((fsm_cb_t *)pack)) == fsm_rt_cpl)
 591              		.loc 1 162 9 is_stmt 1 view .LVU165
 163:../Protocol/protocol_transmit.c ****         {
 592              		.loc 1 163 9 view .LVU166
 163:../Protocol/protocol_transmit.c ****         {
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 15


 593              		.loc 1 163 12 is_stmt 0 view .LVU167
 594 0012 4368     		ldr	r3, [r0, #4]
 595              	.LVL66:
 163:../Protocol/protocol_transmit.c ****         {
 596              		.loc 1 163 12 view .LVU168
 597 0014 9847     		blx	r3
 598              	.LVL67:
 163:../Protocol/protocol_transmit.c ****         {
 599              		.loc 1 163 11 view .LVU169
 600 0016 0028     		cmp	r0, #0
 601 0018 F7D1     		bne	.L28
 166:../Protocol/protocol_transmit.c ****             USER_DEBUG_NORMAL("free \r\n");
 602              		.loc 1 166 13 is_stmt 1 view .LVU170
 603 001a 2146     		mov	r1, r4
 604 001c 044B     		ldr	r3, .L32
 605 001e 1868     		ldr	r0, [r3]
 606 0020 FFF7FEFF 		bl	list_delete_node
 607              	.LVL68:
 167:../Protocol/protocol_transmit.c ****         }
 608              		.loc 1 167 13 view .LVU171
 609 0024 0349     		ldr	r1, .L32+4
 610 0026 0020     		movs	r0, #0
 611 0028 FFF7FEFF 		bl	SEGGER_RTT_printf
 612              	.LVL69:
 613 002c EDE7     		b	.L28
 614              	.L31:
 170:../Protocol/protocol_transmit.c ****     }
 171:../Protocol/protocol_transmit.c **** }
 615              		.loc 1 171 1 is_stmt 0 view .LVU172
 616 002e 10BD     		pop	{r4, pc}
 617              	.LVL70:
 618              	.L33:
 619              		.loc 1 171 1 view .LVU173
 620              		.align	2
 621              	.L32:
 622 0030 00000000 		.word	gtransmit_list
 623 0034 00000000 		.word	.LC4
 624              		.cfi_endproc
 625              	.LFE5:
 627              		.section	.text.protocol02_transmit,"ax",%progbits
 628              		.align	1
 629              		.global	protocol02_transmit
 630              		.syntax unified
 631              		.thumb
 632              		.thumb_func
 633              		.fpu fpv4-sp-d16
 635              	protocol02_transmit:
 636              	.LVL71:
 637              	.LFB6:
 172:../Protocol/protocol_transmit.c **** 
 173:../Protocol/protocol_transmit.c **** 
 174:../Protocol/protocol_transmit.c **** void protocol02_transmit(unsigned char *pdata,unsigned short datalen)
 175:../Protocol/protocol_transmit.c **** {
 638              		.loc 1 175 1 is_stmt 1 view -0
 639              		.cfi_startproc
 640              		@ args = 0, pretend = 0, frame = 128
 641              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 16


 642              		.loc 1 175 1 is_stmt 0 view .LVU175
 643 0000 10B5     		push	{r4, lr}
 644              	.LCFI7:
 645              		.cfi_def_cfa_offset 8
 646              		.cfi_offset 4, -8
 647              		.cfi_offset 14, -4
 648 0002 A0B0     		sub	sp, sp, #128
 649              	.LCFI8:
 650              		.cfi_def_cfa_offset 136
 651 0004 0A46     		mov	r2, r1
 176:../Protocol/protocol_transmit.c ****     unsigned char *pdata1;
 652              		.loc 1 176 5 is_stmt 1 view .LVU176
 177:../Protocol/protocol_transmit.c ****     unsigned short len = 0;
 653              		.loc 1 177 5 view .LVU177
 654              	.LVL72:
 178:../Protocol/protocol_transmit.c ****     unsigned char databuf[128];
 655              		.loc 1 178 5 view .LVU178
 179:../Protocol/protocol_transmit.c ****     len = datalen + 6;
 656              		.loc 1 179 5 view .LVU179
 657              		.loc 1 179 9 is_stmt 0 view .LVU180
 658 0006 8C1D     		adds	r4, r1, #6
 659 0008 A4B2     		uxth	r4, r4
 660              	.LVL73:
 180:../Protocol/protocol_transmit.c ****     pdata1 = databuf;
 661              		.loc 1 180 5 is_stmt 1 view .LVU181
 181:../Protocol/protocol_transmit.c ****     pdata1[0] = 0xAA;
 662              		.loc 1 181 5 view .LVU182
 663              		.loc 1 181 15 is_stmt 0 view .LVU183
 664 000a AA23     		movs	r3, #170
 665 000c 8DF80030 		strb	r3, [sp]
 182:../Protocol/protocol_transmit.c ****     pdata1[1] = 0xFF;
 666              		.loc 1 182 5 is_stmt 1 view .LVU184
 667              		.loc 1 182 15 is_stmt 0 view .LVU185
 668 0010 FF23     		movs	r3, #255
 669 0012 8DF80130 		strb	r3, [sp, #1]
 183:../Protocol/protocol_transmit.c ****     pdata1[2] = 0xF1;
 670              		.loc 1 183 5 is_stmt 1 view .LVU186
 671              		.loc 1 183 15 is_stmt 0 view .LVU187
 672 0016 F123     		movs	r3, #241
 673 0018 8DF80230 		strb	r3, [sp, #2]
 184:../Protocol/protocol_transmit.c ****     pdata1[3] = datalen;
 674              		.loc 1 184 5 is_stmt 1 view .LVU188
 675              		.loc 1 184 15 is_stmt 0 view .LVU189
 676 001c 8DF80310 		strb	r1, [sp, #3]
 185:../Protocol/protocol_transmit.c ****     memcpy(&(pdata1[4]),pdata,datalen);
 677              		.loc 1 185 5 is_stmt 1 view .LVU190
 678 0020 0146     		mov	r1, r0
 679              	.LVL74:
 680              		.loc 1 185 5 is_stmt 0 view .LVU191
 681 0022 01A8     		add	r0, sp, #4
 682              	.LVL75:
 683              		.loc 1 185 5 view .LVU192
 684 0024 FFF7FEFF 		bl	memcpy
 685              	.LVL76:
 186:../Protocol/protocol_transmit.c ****     unsigned char sumcheck = 0;
 686              		.loc 1 186 5 is_stmt 1 view .LVU193
 187:../Protocol/protocol_transmit.c ****     unsigned char sum_sumcheck = 0;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 17


 687              		.loc 1 187 5 view .LVU194
 188:../Protocol/protocol_transmit.c ****     for (unsigned char i = 0; i < len-2; i++)
 688              		.loc 1 188 5 view .LVU195
 689              	.LBB2:
 690              		.loc 1 188 10 view .LVU196
 691              		.loc 1 188 24 is_stmt 0 view .LVU197
 692 0028 0023     		movs	r3, #0
 693              	.LBE2:
 187:../Protocol/protocol_transmit.c ****     unsigned char sum_sumcheck = 0;
 694              		.loc 1 187 19 view .LVU198
 695 002a 1946     		mov	r1, r3
 186:../Protocol/protocol_transmit.c ****     unsigned char sumcheck = 0;
 696              		.loc 1 186 19 view .LVU199
 697 002c 1A46     		mov	r2, r3
 698              	.LBB3:
 699              		.loc 1 188 5 view .LVU200
 700 002e 09E0     		b	.L35
 701              	.LVL77:
 702              	.L36:
 189:../Protocol/protocol_transmit.c ****     {
 190:../Protocol/protocol_transmit.c ****         /* code */
 191:../Protocol/protocol_transmit.c ****         sumcheck += pdata1[i];
 703              		.loc 1 191 9 is_stmt 1 discriminator 3 view .LVU201
 704              		.loc 1 191 27 is_stmt 0 discriminator 3 view .LVU202
 705 0030 20A8     		add	r0, sp, #128
 706 0032 1844     		add	r0, r0, r3
 707 0034 10F8800C 		ldrb	r0, [r0, #-128]	@ zero_extendqisi2
 708              		.loc 1 191 18 discriminator 3 view .LVU203
 709 0038 0244     		add	r2, r2, r0
 710              	.LVL78:
 711              		.loc 1 191 18 discriminator 3 view .LVU204
 712 003a D2B2     		uxtb	r2, r2
 713              	.LVL79:
 192:../Protocol/protocol_transmit.c ****         sum_sumcheck += sumcheck;
 714              		.loc 1 192 9 is_stmt 1 discriminator 3 view .LVU205
 715              		.loc 1 192 22 is_stmt 0 discriminator 3 view .LVU206
 716 003c 1144     		add	r1, r1, r2
 717              	.LVL80:
 718              		.loc 1 192 22 discriminator 3 view .LVU207
 719 003e C9B2     		uxtb	r1, r1
 720              	.LVL81:
 188:../Protocol/protocol_transmit.c ****     for (unsigned char i = 0; i < len-2; i++)
 721              		.loc 1 188 42 is_stmt 1 discriminator 3 view .LVU208
 188:../Protocol/protocol_transmit.c ****     for (unsigned char i = 0; i < len-2; i++)
 722              		.loc 1 188 43 is_stmt 0 discriminator 3 view .LVU209
 723 0040 0133     		adds	r3, r3, #1
 724              	.LVL82:
 188:../Protocol/protocol_transmit.c ****     for (unsigned char i = 0; i < len-2; i++)
 725              		.loc 1 188 43 discriminator 3 view .LVU210
 726 0042 DBB2     		uxtb	r3, r3
 727              	.LVL83:
 728              	.L35:
 188:../Protocol/protocol_transmit.c ****     for (unsigned char i = 0; i < len-2; i++)
 729              		.loc 1 188 31 is_stmt 1 discriminator 1 view .LVU211
 188:../Protocol/protocol_transmit.c ****     for (unsigned char i = 0; i < len-2; i++)
 730              		.loc 1 188 38 is_stmt 0 discriminator 1 view .LVU212
 731 0044 A01E     		subs	r0, r4, #2
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 18


 188:../Protocol/protocol_transmit.c ****     for (unsigned char i = 0; i < len-2; i++)
 732              		.loc 1 188 5 discriminator 1 view .LVU213
 733 0046 8342     		cmp	r3, r0
 734 0048 F2DB     		blt	.L36
 735              	.LBE3:
 193:../Protocol/protocol_transmit.c ****     }
 194:../Protocol/protocol_transmit.c ****     pdata1[len-2] = sumcheck;
 736              		.loc 1 194 5 is_stmt 1 view .LVU214
 737              		.loc 1 194 19 is_stmt 0 view .LVU215
 738 004a 0DF80020 		strb	r2, [sp, r0]
 195:../Protocol/protocol_transmit.c ****     pdata1[len-1] = sum_sumcheck;
 739              		.loc 1 195 5 is_stmt 1 view .LVU216
 740              		.loc 1 195 11 is_stmt 0 view .LVU217
 741 004e 631E     		subs	r3, r4, #1
 742              	.LVL84:
 743              		.loc 1 195 19 view .LVU218
 744 0050 0DF80310 		strb	r1, [sp, r3]
 196:../Protocol/protocol_transmit.c ****     _bsp_protransmit(pdata1,len);
 745              		.loc 1 196 5 is_stmt 1 view .LVU219
 746 0054 2146     		mov	r1, r4
 747              	.LVL85:
 748              		.loc 1 196 5 is_stmt 0 view .LVU220
 749 0056 6846     		mov	r0, sp
 750 0058 FFF7FEFF 		bl	_bsp_protransmit
 751              	.LVL86:
 197:../Protocol/protocol_transmit.c **** }
 752              		.loc 1 197 1 view .LVU221
 753 005c 20B0     		add	sp, sp, #128
 754              	.LCFI9:
 755              		.cfi_def_cfa_offset 8
 756              	.LVL87:
 757              		.loc 1 197 1 view .LVU222
 758              		@ sp needed
 759 005e 10BD     		pop	{r4, pc}
 760              		.loc 1 197 1 view .LVU223
 761              		.cfi_endproc
 762              	.LFE6:
 764              		.section	.text.protocol02_process,"ax",%progbits
 765              		.align	1
 766              		.global	protocol02_process
 767              		.syntax unified
 768              		.thumb
 769              		.thumb_func
 770              		.fpu fpv4-sp-d16
 772              	protocol02_process:
 773              	.LFB7:
 198:../Protocol/protocol_transmit.c **** 
 199:../Protocol/protocol_transmit.c **** #define SEND_NUMBER 8
 200:../Protocol/protocol_transmit.c **** void protocol02_process(void)
 201:../Protocol/protocol_transmit.c **** {
 774              		.loc 1 201 1 is_stmt 1 view -0
 775              		.cfi_startproc
 776              		@ args = 0, pretend = 0, frame = 32
 777              		@ frame_needed = 0, uses_anonymous_args = 0
 778 0000 00B5     		push	{lr}
 779              	.LCFI10:
 780              		.cfi_def_cfa_offset 4
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 19


 781              		.cfi_offset 14, -4
 782 0002 2DED028B 		vpush.64	{d8}
 783              	.LCFI11:
 784              		.cfi_def_cfa_offset 12
 785              		.cfi_offset 80, -12
 786              		.cfi_offset 81, -8
 787 0006 89B0     		sub	sp, sp, #36
 788              	.LCFI12:
 789              		.cfi_def_cfa_offset 48
 202:../Protocol/protocol_transmit.c ****     int buf2[SEND_NUMBER];
 790              		.loc 1 202 5 view .LVU225
 203:../Protocol/protocol_transmit.c ****     buf2[0] = ipc_read_data(PUBLIC_DATA_IA)*1000;
 791              		.loc 1 203 5 view .LVU226
 792              		.loc 1 203 15 is_stmt 0 view .LVU227
 793 0008 0220     		movs	r0, #2
 794 000a FFF7FEFF 		bl	ipc_read_data
 795              	.LVL88:
 796              		.loc 1 203 44 view .LVU228
 797 000e 9FED288A 		vldr.32	s16, .L40
 798 0012 20EE080A 		vmul.f32	s0, s0, s16
 799              		.loc 1 203 13 view .LVU229
 800 0016 BDEEC00A 		vcvt.s32.f32	s0, s0
 801 001a 8DED000A 		vstr.32	s0, [sp]	@ int
 204:../Protocol/protocol_transmit.c ****     buf2[1] = ipc_read_data(PUBLIC_DATA_IB)*1000;
 802              		.loc 1 204 5 is_stmt 1 view .LVU230
 803              		.loc 1 204 15 is_stmt 0 view .LVU231
 804 001e 0320     		movs	r0, #3
 805 0020 FFF7FEFF 		bl	ipc_read_data
 806              	.LVL89:
 807              		.loc 1 204 44 view .LVU232
 808 0024 20EE080A 		vmul.f32	s0, s0, s16
 809              		.loc 1 204 13 view .LVU233
 810 0028 BDEEC00A 		vcvt.s32.f32	s0, s0
 811 002c 8DED010A 		vstr.32	s0, [sp, #4]	@ int
 205:../Protocol/protocol_transmit.c ****     buf2[2] = ipc_read_data(PUBLIC_DATA_IC)*1000;
 812              		.loc 1 205 5 is_stmt 1 view .LVU234
 813              		.loc 1 205 15 is_stmt 0 view .LVU235
 814 0030 0420     		movs	r0, #4
 815 0032 FFF7FEFF 		bl	ipc_read_data
 816              	.LVL90:
 817              		.loc 1 205 44 view .LVU236
 818 0036 20EE080A 		vmul.f32	s0, s0, s16
 819              		.loc 1 205 13 view .LVU237
 820 003a BDEEC00A 		vcvt.s32.f32	s0, s0
 821 003e 8DED020A 		vstr.32	s0, [sp, #8]	@ int
 206:../Protocol/protocol_transmit.c ****     buf2[3] = ipc_read_data(PUBLIC_DATA_IALPHA)*1000;
 822              		.loc 1 206 5 is_stmt 1 view .LVU238
 823              		.loc 1 206 15 is_stmt 0 view .LVU239
 824 0042 0520     		movs	r0, #5
 825 0044 FFF7FEFF 		bl	ipc_read_data
 826              	.LVL91:
 827              		.loc 1 206 48 view .LVU240
 828 0048 20EE080A 		vmul.f32	s0, s0, s16
 829              		.loc 1 206 13 view .LVU241
 830 004c BDEEC00A 		vcvt.s32.f32	s0, s0
 831 0050 8DED030A 		vstr.32	s0, [sp, #12]	@ int
 207:../Protocol/protocol_transmit.c ****     buf2[4] = ipc_read_data(PUBLIC_DATA_IBETA)*1000;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 20


 832              		.loc 1 207 5 is_stmt 1 view .LVU242
 833              		.loc 1 207 15 is_stmt 0 view .LVU243
 834 0054 0620     		movs	r0, #6
 835 0056 FFF7FEFF 		bl	ipc_read_data
 836              	.LVL92:
 837              		.loc 1 207 47 view .LVU244
 838 005a 20EE080A 		vmul.f32	s0, s0, s16
 839              		.loc 1 207 13 view .LVU245
 840 005e BDEEC00A 		vcvt.s32.f32	s0, s0
 841 0062 8DED040A 		vstr.32	s0, [sp, #16]	@ int
 208:../Protocol/protocol_transmit.c ****     buf2[5] = ipc_read_data(PUBLIC_DATA_ID)*1000;
 842              		.loc 1 208 5 is_stmt 1 view .LVU246
 843              		.loc 1 208 15 is_stmt 0 view .LVU247
 844 0066 0720     		movs	r0, #7
 845 0068 FFF7FEFF 		bl	ipc_read_data
 846              	.LVL93:
 847              		.loc 1 208 44 view .LVU248
 848 006c 20EE080A 		vmul.f32	s0, s0, s16
 849              		.loc 1 208 13 view .LVU249
 850 0070 BDEEC00A 		vcvt.s32.f32	s0, s0
 851 0074 8DED050A 		vstr.32	s0, [sp, #20]	@ int
 209:../Protocol/protocol_transmit.c ****     buf2[6] = ipc_read_data(PUBLIC_DATA_IQ)*1000;
 852              		.loc 1 209 5 is_stmt 1 view .LVU250
 853              		.loc 1 209 15 is_stmt 0 view .LVU251
 854 0078 0820     		movs	r0, #8
 855 007a FFF7FEFF 		bl	ipc_read_data
 856              	.LVL94:
 857              		.loc 1 209 44 view .LVU252
 858 007e 20EE080A 		vmul.f32	s0, s0, s16
 859              		.loc 1 209 13 view .LVU253
 860 0082 BDEEC00A 		vcvt.s32.f32	s0, s0
 861 0086 8DED060A 		vstr.32	s0, [sp, #24]	@ int
 210:../Protocol/protocol_transmit.c ****     buf2[7] = ipc_read_data(PUBLIC_DATA_TEMP0)*1000;
 862              		.loc 1 210 5 is_stmt 1 view .LVU254
 863              		.loc 1 210 15 is_stmt 0 view .LVU255
 864 008a 0C20     		movs	r0, #12
 865 008c FFF7FEFF 		bl	ipc_read_data
 866              	.LVL95:
 867              		.loc 1 210 47 view .LVU256
 868 0090 20EE088A 		vmul.f32	s16, s0, s16
 869              		.loc 1 210 13 view .LVU257
 870 0094 BDEEC88A 		vcvt.s32.f32	s16, s16
 871 0098 8DED078A 		vstr.32	s16, [sp, #28]	@ int
 211:../Protocol/protocol_transmit.c ****     protocol02_transmit((unsigned char*)buf2,sizeof(buf2));    
 872              		.loc 1 211 5 is_stmt 1 view .LVU258
 873 009c 2021     		movs	r1, #32
 874 009e 6846     		mov	r0, sp
 875 00a0 FFF7FEFF 		bl	protocol02_transmit
 876              	.LVL96:
 212:../Protocol/protocol_transmit.c **** }
 877              		.loc 1 212 1 is_stmt 0 view .LVU259
 878 00a4 09B0     		add	sp, sp, #36
 879              	.LCFI13:
 880              		.cfi_def_cfa_offset 12
 881              		@ sp needed
 882 00a6 BDEC028B 		vldm	sp!, {d8}
 883              	.LCFI14:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 21


 884              		.cfi_restore 80
 885              		.cfi_restore 81
 886              		.cfi_def_cfa_offset 4
 887 00aa 5DF804FB 		ldr	pc, [sp], #4
 888              	.L41:
 889 00ae 00BF     		.align	2
 890              	.L40:
 891 00b0 00007A44 		.word	1148846080
 892              		.cfi_endproc
 893              	.LFE7:
 895              		.text
 896              	.Letext0:
 897              		.file 2 "../Public/list.h"
 898              		.file 3 "../Public/IPC/ipc.h"
 899              		.file 4 "../Public/Fsm/fsm.h"
 900              		.file 5 "../Protocol/protocol_comment.h"
 901              		.file 6 "../Public/debuglog/SEGGER_RTT_V792h/RTT/SEGGER_RTT.h"
 902              		.file 7 "../Public/heap.h"
 903              		.file 8 "../Public/method/crc.h"
 904              		.file 9 "<built-in>"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s 			page 22


DEFINED SYMBOLS
                            *ABS*:00000000 protocol_transmit.c
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:18     .text._bsp_protransmit:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:26     .text._bsp_protransmit:00000000 _bsp_protransmit
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:41     .text._send_proframe:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:47     .text._send_proframe:00000000 _send_proframe
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:173    .text.protocol_nowtransmit:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:180    .text.protocol_nowtransmit:00000000 protocol_nowtransmit
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:232    .rodata._trancemit_statemach.str1.4:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:245    .text._trancemit_statemach:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:252    .text._trancemit_statemach:00000000 _trancemit_statemach
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:305    .text._trancemit_statemach:00000016 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:462    .text._trancemit_statemach:000000bc $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:471    .text.protocol_transmit:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:478    .text.protocol_transmit:00000000 protocol_transmit
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:533    .text.protocol_transmit:0000002c $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:538    .rodata.protocol_transmitprocess.str1.4:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:542    .text.protocol_transmitprocess:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:549    .text.protocol_transmitprocess:00000000 protocol_transmitprocess
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:622    .text.protocol_transmitprocess:00000030 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:628    .text.protocol02_transmit:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:635    .text.protocol02_transmit:00000000 protocol02_transmit
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:765    .text.protocol02_process:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:772    .text.protocol02_process:00000000 protocol02_process
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:891    .text.protocol02_process:000000b0 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:310    .text._trancemit_statemach:0000001b $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccB3pj0F.s:310    .text._trancemit_statemach:0000001c $t

UNDEFINED SYMBOLS
heap_malloc
memcpy
heap_free
CRC16_Subsection
_packet_proframe
SEGGER_RTT_printf
search_msgmap_event
g_protocol_event
_packet_propack
list_creatnode
list_insert_node
gtransmit_list
list_delete_node
ipc_read_data
